current path: saved_models/model_cifar_Nov.13_08.49.16
Loading data
build_classes_dict done
train loaders done
get poison test loader
load data done
Loaded parameters from saved model: LR is 0.1 and current epoch is 201
create model done
Poisoned following participants: [77, 11]
We use following environment for graphs:  cifar
----------------------------------Start one training epoch------------------------------------------
Server Epoch:201 choose agents : [77, 11, 35, 51, 37, 55, 61, 46, 48, 70]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   1,  Average loss: 0.0125, Accuracy: 421/496 (84.8790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   2,  Average loss: 0.0098, Accuracy: 438/496 (88.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   3,  Average loss: 0.0069, Accuracy: 439/496 (88.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   4,  Average loss: 0.0033, Accuracy: 474/496 (95.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   5,  Average loss: 0.0020, Accuracy: 481/496 (96.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   6,  Average loss: 0.0013, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Global model norm: 37.66304237236004.
Norm before scaling: 38.03331701449402. Distance: 7.563326955932421
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.3033, Accuracy: 5557/10000 (55.5700%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.1676, Accuracy: 8494/9000 (94.3778%)
Scaling by  100
Scaled Norm after poisoning: 755.3410239752637, distance: 756.332681430599
Total norm for 2 adversaries is: 755.3410239752637. distance: 756.332681430599
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   1,  Average loss: 0.0073, Accuracy: 486/546 (89.0110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   2,  Average loss: 0.0049, Accuracy: 514/546 (94.1392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   3,  Average loss: 0.0018, Accuracy: 533/546 (97.6190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   4,  Average loss: 0.0013, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 37.88904152619115. Distance: 6.569264150255345
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.3639, Accuracy: 5977/10000 (59.7700%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.1531, Accuracy: 8667/9000 (96.3000%)
Scaling by  100
Scaled Norm after poisoning: 656.0203645848198, distance: 656.9263895216876
Total norm for 2 adversaries is: 656.0203645848198. distance: 656.9263895216876
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 201, local model 35, internal_epoch   1,  Average loss: 0.0079, Accuracy: 355/419 (84.7255%)
___Train Local_ResNet_18,  epoch 201, local model 35, internal_epoch   2,  Average loss: 0.0036, Accuracy: 389/419 (92.8401%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.3268, Accuracy: 4027/10000 (40.2700%)
___Train Local_ResNet_18,  epoch 201, local model 51, internal_epoch   1,  Average loss: 0.0053, Accuracy: 436/479 (91.0230%)
___Train Local_ResNet_18,  epoch 201, local model 51, internal_epoch   2,  Average loss: 0.0033, Accuracy: 456/479 (95.1983%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.6478, Accuracy: 3231/10000 (32.3100%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   1,  Average loss: 0.0085, Accuracy: 607/725 (83.7241%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   2,  Average loss: 0.0132, Accuracy: 559/725 (77.1034%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 23.9313, Accuracy: 1203/10000 (12.0300%)
___Train Local_ResNet_18,  epoch 201, local model 55, internal_epoch   1,  Average loss: 0.0045, Accuracy: 276/299 (92.3077%)
___Train Local_ResNet_18,  epoch 201, local model 55, internal_epoch   2,  Average loss: 0.0010, Accuracy: 293/299 (97.9933%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 6.7467, Accuracy: 2220/10000 (22.2000%)
___Train Local_ResNet_18,  epoch 201, local model 61, internal_epoch   1,  Average loss: 0.0048, Accuracy: 533/590 (90.3390%)
___Train Local_ResNet_18,  epoch 201, local model 61, internal_epoch   2,  Average loss: 0.0063, Accuracy: 529/590 (89.6610%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 6.3974, Accuracy: 2539/10000 (25.3900%)
___Train Local_ResNet_18,  epoch 201, local model 46, internal_epoch   1,  Average loss: 0.0015, Accuracy: 584/601 (97.1714%)
___Train Local_ResNet_18,  epoch 201, local model 46, internal_epoch   2,  Average loss: 0.0008, Accuracy: 596/601 (99.1681%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.8004, Accuracy: 5502/10000 (55.0200%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   1,  Average loss: 0.0056, Accuracy: 334/378 (88.3598%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   2,  Average loss: 0.0022, Accuracy: 361/378 (95.5026%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.1172, Accuracy: 4022/10000 (40.2200%)
___Train Local_ResNet_18,  epoch 201, local model 70, internal_epoch   1,  Average loss: 0.0038, Accuracy: 565/610 (92.6230%)
___Train Local_ResNet_18,  epoch 201, local model 70, internal_epoch   2,  Average loss: 0.0026, Accuracy: 579/610 (94.9180%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.1831, Accuracy: 4288/10000 (42.8800%)
time spent on training: 83.65447115898132
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 201: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 116.17925596237183 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:202 choose agents : [77, 11, 86, 69, 90, 22, 25, 48, 14, 74]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   1,  Average loss: 0.0048, Accuracy: 450/496 (90.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   2,  Average loss: 0.0025, Accuracy: 481/496 (96.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   3,  Average loss: 0.0012, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   4,  Average loss: 0.0022, Accuracy: 481/496 (96.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   5,  Average loss: 0.0015, Accuracy: 485/496 (97.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 38.3158150711989.
Norm before scaling: 38.25634553420926. Distance: 4.056587964571537
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 1.4151, Accuracy: 5483/10000 (54.8300%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.1597, Accuracy: 8506/9000 (94.5111%)
Scaling by  100
Scaled Norm after poisoning: 404.87793299339, distance: 405.6587428183941
Total norm for 2 adversaries is: 404.87793299339. distance: 405.6587428183941
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   1,  Average loss: 0.0068, Accuracy: 481/546 (88.0952%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   2,  Average loss: 0.0012, Accuracy: 537/546 (98.3516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   3,  Average loss: 0.0009, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   4,  Average loss: 0.0006, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   5,  Average loss: 0.0010, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   6,  Average loss: 0.0009, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Global model norm: 38.3158150711989.
Norm before scaling: 38.345243068933925. Distance: 5.2172036078456605
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 1.5422, Accuracy: 5487/10000 (54.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.1121, Accuracy: 8719/9000 (96.8778%)
Scaling by  100
Scaled Norm after poisoning: 520.7339471841643, distance: 521.7203213887686
Total norm for 2 adversaries is: 520.7339471841643. distance: 521.7203213887686
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 202, local model 86, internal_epoch   1,  Average loss: 0.0425, Accuracy: 99/212 (46.6981%)
___Train Local_ResNet_18,  epoch 202, local model 86, internal_epoch   2,  Average loss: 0.0088, Accuracy: 182/212 (85.8491%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 8.5693, Accuracy: 1810/10000 (18.1000%)
___Train Local_ResNet_18,  epoch 202, local model 69, internal_epoch   1,  Average loss: 0.0458, Accuracy: 93/216 (43.0556%)
___Train Local_ResNet_18,  epoch 202, local model 69, internal_epoch   2,  Average loss: 0.0075, Accuracy: 196/216 (90.7407%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 20.3951, Accuracy: 1475/10000 (14.7500%)
___Train Local_ResNet_18,  epoch 202, local model 90, internal_epoch   1,  Average loss: 0.0468, Accuracy: 361/578 (62.4567%)
___Train Local_ResNet_18,  epoch 202, local model 90, internal_epoch   2,  Average loss: 0.0124, Accuracy: 443/578 (76.6436%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 6.5612, Accuracy: 2450/10000 (24.5000%)
___Train Local_ResNet_18,  epoch 202, local model 22, internal_epoch   1,  Average loss: 0.0284, Accuracy: 287/494 (58.0972%)
___Train Local_ResNet_18,  epoch 202, local model 22, internal_epoch   2,  Average loss: 0.0115, Accuracy: 393/494 (79.5547%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 7.0266, Accuracy: 2642/10000 (26.4200%)
___Train Local_ResNet_18,  epoch 202, local model 25, internal_epoch   1,  Average loss: 0.0250, Accuracy: 358/545 (65.6881%)
___Train Local_ResNet_18,  epoch 202, local model 25, internal_epoch   2,  Average loss: 0.0086, Accuracy: 456/545 (83.6697%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 5.4175, Accuracy: 2403/10000 (24.0300%)
___Train Local_ResNet_18,  epoch 202, local model 48, internal_epoch   1,  Average loss: 0.0327, Accuracy: 187/378 (49.4709%)
___Train Local_ResNet_18,  epoch 202, local model 48, internal_epoch   2,  Average loss: 0.0125, Accuracy: 275/378 (72.7513%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 12.2018, Accuracy: 1092/10000 (10.9200%)
___Train Local_ResNet_18,  epoch 202, local model 14, internal_epoch   1,  Average loss: 0.0291, Accuracy: 180/318 (56.6038%)
___Train Local_ResNet_18,  epoch 202, local model 14, internal_epoch   2,  Average loss: 0.0048, Accuracy: 283/318 (88.9937%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 11.2184, Accuracy: 2327/10000 (23.2700%)
___Train Local_ResNet_18,  epoch 202, local model 74, internal_epoch   1,  Average loss: 0.0249, Accuracy: 300/469 (63.9659%)
___Train Local_ResNet_18,  epoch 202, local model 74, internal_epoch   2,  Average loss: 0.0087, Accuracy: 389/469 (82.9424%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.4386, Accuracy: 3311/10000 (33.1100%)
time spent on training: 90.40681982040405
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 124.99097013473511 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:203 choose agents : [77, 11, 47, 84, 25, 56, 6, 92, 59, 98]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   1,  Average loss: 0.0070, Accuracy: 450/496 (90.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   2,  Average loss: 0.0026, Accuracy: 477/496 (96.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   3,  Average loss: 0.0011, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   4,  Average loss: 0.0013, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   5,  Average loss: 0.0014, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Global model norm: 38.35607801513503.
Norm before scaling: 38.334819024085334. Distance: 4.828379602725193
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 1.5033, Accuracy: 5450/10000 (54.5000%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.2373, Accuracy: 8366/9000 (92.9556%)
Scaling by  100
Scaled Norm after poisoning: 481.7772760830465, distance: 482.83798071920563
Total norm for 2 adversaries is: 481.7772760830465. distance: 482.83798071920563
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   1,  Average loss: 0.0022, Accuracy: 526/546 (96.3370%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   2,  Average loss: 0.0014, Accuracy: 535/546 (97.9853%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   3,  Average loss: 0.0009, Accuracy: 539/546 (98.7179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   4,  Average loss: 0.0009, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   6,  Average loss: 0.0007, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 38.35607801513503.
Norm before scaling: 38.117756740215576. Distance: 3.375317311381946
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 1.5780, Accuracy: 5463/10000 (54.6300%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.1670, Accuracy: 8639/9000 (95.9889%)
Scaling by  100
Scaled Norm after poisoning: 335.31628026760046, distance: 337.5316767541974
Total norm for 2 adversaries is: 335.31628026760046. distance: 337.5316767541974
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 203, local model 47, internal_epoch   1,  Average loss: 0.0163, Accuracy: 473/654 (72.3242%)
___Train Local_ResNet_18,  epoch 203, local model 47, internal_epoch   2,  Average loss: 0.0121, Accuracy: 507/654 (77.5229%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 15.8858, Accuracy: 1534/10000 (15.3400%)
___Train Local_ResNet_18,  epoch 203, local model 84, internal_epoch   1,  Average loss: 0.0154, Accuracy: 737/1053 (69.9905%)
___Train Local_ResNet_18,  epoch 203, local model 84, internal_epoch   2,  Average loss: 0.0079, Accuracy: 894/1053 (84.9003%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 1.9917, Accuracy: 4313/10000 (43.1300%)
___Train Local_ResNet_18,  epoch 203, local model 25, internal_epoch   1,  Average loss: 0.0176, Accuracy: 410/545 (75.2294%)
___Train Local_ResNet_18,  epoch 203, local model 25, internal_epoch   2,  Average loss: 0.0049, Accuracy: 494/545 (90.6422%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 8.2212, Accuracy: 1969/10000 (19.6900%)
___Train Local_ResNet_18,  epoch 203, local model 56, internal_epoch   1,  Average loss: 0.0158, Accuracy: 526/743 (70.7941%)
___Train Local_ResNet_18,  epoch 203, local model 56, internal_epoch   2,  Average loss: 0.0082, Accuracy: 620/743 (83.4455%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 3.1798, Accuracy: 4144/10000 (41.4400%)
___Train Local_ResNet_18,  epoch 203, local model 6, internal_epoch   1,  Average loss: 0.0147, Accuracy: 392/520 (75.3846%)
___Train Local_ResNet_18,  epoch 203, local model 6, internal_epoch   2,  Average loss: 0.0122, Accuracy: 407/520 (78.2692%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 9.5408, Accuracy: 1477/10000 (14.7700%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   1,  Average loss: 0.0161, Accuracy: 569/796 (71.4824%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   2,  Average loss: 0.0102, Accuracy: 640/796 (80.4020%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 8.7437, Accuracy: 2026/10000 (20.2600%)
___Train Local_ResNet_18,  epoch 203, local model 59, internal_epoch   1,  Average loss: 0.0158, Accuracy: 484/642 (75.3894%)
___Train Local_ResNet_18,  epoch 203, local model 59, internal_epoch   2,  Average loss: 0.0153, Accuracy: 454/642 (70.7165%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 12.0482, Accuracy: 1998/10000 (19.9800%)
___Train Local_ResNet_18,  epoch 203, local model 98, internal_epoch   1,  Average loss: 0.0190, Accuracy: 557/802 (69.4514%)
___Train Local_ResNet_18,  epoch 203, local model 98, internal_epoch   2,  Average loss: 0.0097, Accuracy: 651/802 (81.1721%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 7.2116, Accuracy: 1900/10000 (19.0000%)
time spent on training: 92.0282633304596
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 124.4459331035614 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:204 choose agents : [77, 11, 69, 8, 67, 87, 62, 36, 28, 22]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   1,  Average loss: 0.0021, Accuracy: 479/496 (96.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   2,  Average loss: 0.0008, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   3,  Average loss: 0.0012, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   4,  Average loss: 0.0011, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   5,  Average loss: 0.0009, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 38.14987981734838.
Norm before scaling: 37.918736350335436. Distance: 2.716312236327438
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 1.3729, Accuracy: 5781/10000 (57.8100%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.1348, Accuracy: 8606/9000 (95.6222%)
Scaling by  100
Scaled Norm after poisoning: 269.7088997882717, distance: 271.6312125382501
Total norm for 2 adversaries is: 269.7088997882717. distance: 271.6312125382501
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   1,  Average loss: 0.0042, Accuracy: 499/546 (91.3919%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   2,  Average loss: 0.0013, Accuracy: 534/546 (97.8022%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   4,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   5,  Average loss: 0.0006, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   6,  Average loss: 0.0006, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 38.14987981734838.
Norm before scaling: 38.087662621186304. Distance: 4.554626150356013
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 1.4179, Accuracy: 5787/10000 (57.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.1298, Accuracy: 8683/9000 (96.4778%)
Scaling by  100
Scaled Norm after poisoning: 454.26071465073886, distance: 455.4626253876381
Total norm for 2 adversaries is: 454.26071465073886. distance: 455.4626253876381
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 204, local model 69, internal_epoch   1,  Average loss: 0.0516, Accuracy: 113/216 (52.3148%)
___Train Local_ResNet_18,  epoch 204, local model 69, internal_epoch   2,  Average loss: 0.0053, Accuracy: 200/216 (92.5926%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 7.2868, Accuracy: 2910/10000 (29.1000%)
___Train Local_ResNet_18,  epoch 204, local model 8, internal_epoch   1,  Average loss: 0.0253, Accuracy: 314/534 (58.8015%)
___Train Local_ResNet_18,  epoch 204, local model 8, internal_epoch   2,  Average loss: 0.0109, Accuracy: 417/534 (78.0899%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 4.5995, Accuracy: 3325/10000 (33.2500%)
___Train Local_ResNet_18,  epoch 204, local model 67, internal_epoch   1,  Average loss: 0.0239, Accuracy: 549/842 (65.2019%)
___Train Local_ResNet_18,  epoch 204, local model 67, internal_epoch   2,  Average loss: 0.0124, Accuracy: 616/842 (73.1591%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.9783, Accuracy: 3994/10000 (39.9400%)
___Train Local_ResNet_18,  epoch 204, local model 87, internal_epoch   1,  Average loss: 0.0244, Accuracy: 243/397 (61.2091%)
___Train Local_ResNet_18,  epoch 204, local model 87, internal_epoch   2,  Average loss: 0.0106, Accuracy: 328/397 (82.6196%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 8.0385, Accuracy: 2080/10000 (20.8000%)
___Train Local_ResNet_18,  epoch 204, local model 62, internal_epoch   1,  Average loss: 0.0334, Accuracy: 194/358 (54.1899%)
___Train Local_ResNet_18,  epoch 204, local model 62, internal_epoch   2,  Average loss: 0.0083, Accuracy: 307/358 (85.7542%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 7.6569, Accuracy: 1991/10000 (19.9100%)
___Train Local_ResNet_18,  epoch 204, local model 36, internal_epoch   1,  Average loss: 0.0252, Accuracy: 493/849 (58.0683%)
___Train Local_ResNet_18,  epoch 204, local model 36, internal_epoch   2,  Average loss: 0.0144, Accuracy: 596/849 (70.2002%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 4.2131, Accuracy: 2859/10000 (28.5900%)
___Train Local_ResNet_18,  epoch 204, local model 28, internal_epoch   1,  Average loss: 0.0322, Accuracy: 239/423 (56.5012%)
___Train Local_ResNet_18,  epoch 204, local model 28, internal_epoch   2,  Average loss: 0.0106, Accuracy: 337/423 (79.6690%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 5.3577, Accuracy: 3367/10000 (33.6700%)
___Train Local_ResNet_18,  epoch 204, local model 22, internal_epoch   1,  Average loss: 0.0313, Accuracy: 283/494 (57.2874%)
___Train Local_ResNet_18,  epoch 204, local model 22, internal_epoch   2,  Average loss: 0.0118, Accuracy: 401/494 (81.1741%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 10.7222, Accuracy: 1742/10000 (17.4200%)
time spent on training: 91.5567262172699
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 124.86733078956604 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:205 choose agents : [77, 11, 81, 41, 54, 43, 1, 48, 16, 12]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   1,  Average loss: 0.0034, Accuracy: 470/496 (94.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   2,  Average loss: 0.0025, Accuracy: 478/496 (96.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   3,  Average loss: 0.0013, Accuracy: 486/496 (97.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   4,  Average loss: 0.0008, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   5,  Average loss: 0.0009, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   6,  Average loss: 0.0011, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Global model norm: 37.88898514492701.
Norm before scaling: 37.75206624622518. Distance: 3.7784886641868045
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 1.2828, Accuracy: 5938/10000 (59.3800%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.0648, Accuracy: 8792/9000 (97.6889%)
Scaling by  100
Scaled Norm after poisoning: 376.486408287205, distance: 377.84888679206136
Total norm for 2 adversaries is: 376.486408287205. distance: 377.84888679206136
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   1,  Average loss: 0.0009, Accuracy: 536/546 (98.1685%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   3,  Average loss: 0.0007, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 37.88898514492701.
Norm before scaling: 37.564503443348116. Distance: 2.296574994690527
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 1.4708, Accuracy: 5709/10000 (57.0900%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.1192, Accuracy: 8690/9000 (96.5556%)
Scaling by  100
Scaled Norm after poisoning: 226.27946976581856, distance: 229.6574980405604
Total norm for 2 adversaries is: 226.27946976581856. distance: 229.6574980405604
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 205, local model 81, internal_epoch   1,  Average loss: 0.0160, Accuracy: 760/1034 (73.5010%)
___Train Local_ResNet_18,  epoch 205, local model 81, internal_epoch   2,  Average loss: 0.0117, Accuracy: 787/1034 (76.1122%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.9969, Accuracy: 3484/10000 (34.8400%)
___Train Local_ResNet_18,  epoch 205, local model 41, internal_epoch   1,  Average loss: 0.0212, Accuracy: 340/513 (66.2768%)
___Train Local_ResNet_18,  epoch 205, local model 41, internal_epoch   2,  Average loss: 0.0253, Accuracy: 446/513 (86.9396%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 22.1858, Accuracy: 1239/10000 (12.3900%)
___Train Local_ResNet_18,  epoch 205, local model 54, internal_epoch   1,  Average loss: 0.0151, Accuracy: 322/440 (73.1818%)
___Train Local_ResNet_18,  epoch 205, local model 54, internal_epoch   2,  Average loss: 0.0042, Accuracy: 398/440 (90.4545%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 7.3525, Accuracy: 2599/10000 (25.9900%)
___Train Local_ResNet_18,  epoch 205, local model 43, internal_epoch   1,  Average loss: 0.0198, Accuracy: 238/345 (68.9855%)
___Train Local_ResNet_18,  epoch 205, local model 43, internal_epoch   2,  Average loss: 0.0059, Accuracy: 311/345 (90.1449%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 5.3312, Accuracy: 3066/10000 (30.6600%)
___Train Local_ResNet_18,  epoch 205, local model 1, internal_epoch   1,  Average loss: 0.0204, Accuracy: 450/641 (70.2028%)
___Train Local_ResNet_18,  epoch 205, local model 1, internal_epoch   2,  Average loss: 0.0123, Accuracy: 481/641 (75.0390%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 7.2071, Accuracy: 1928/10000 (19.2800%)
___Train Local_ResNet_18,  epoch 205, local model 48, internal_epoch   1,  Average loss: 0.0223, Accuracy: 237/378 (62.6984%)
___Train Local_ResNet_18,  epoch 205, local model 48, internal_epoch   2,  Average loss: 0.0062, Accuracy: 322/378 (85.1852%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 6.7248, Accuracy: 1986/10000 (19.8600%)
___Train Local_ResNet_18,  epoch 205, local model 16, internal_epoch   1,  Average loss: 0.0203, Accuracy: 538/773 (69.5990%)
___Train Local_ResNet_18,  epoch 205, local model 16, internal_epoch   2,  Average loss: 0.0196, Accuracy: 502/773 (64.9418%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 14.9302, Accuracy: 1766/10000 (17.6600%)
___Train Local_ResNet_18,  epoch 205, local model 12, internal_epoch   1,  Average loss: 0.0192, Accuracy: 667/977 (68.2702%)
___Train Local_ResNet_18,  epoch 205, local model 12, internal_epoch   2,  Average loss: 0.0100, Accuracy: 772/977 (79.0174%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 5.2070, Accuracy: 2982/10000 (29.8200%)
time spent on training: 92.29067325592041
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 125.69065284729004 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:206 choose agents : [77, 11, 42, 84, 19, 48, 47, 41, 27, 49]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   1,  Average loss: 0.0009, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 37.4437240496071.
Norm before scaling: 37.15301217232006. Distance: 1.6592057682387713
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 1.3202, Accuracy: 5818/10000 (58.1800%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: 0.0396, Accuracy: 8863/9000 (98.4778%)
Scaling by  100
Scaled Norm after poisoning: 162.75056403512093, distance: 165.92056763893078
Total norm for 2 adversaries is: 162.75056403512093. distance: 165.92056763893078
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   1,  Average loss: 0.0020, Accuracy: 531/546 (97.2527%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   2,  Average loss: 0.0006, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 37.4437240496071.
Norm before scaling: 37.1944042304039. Distance: 2.969796568457176
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 1.3988, Accuracy: 5783/10000 (57.8300%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: 0.1095, Accuracy: 8714/9000 (96.8222%)
Scaling by  100
Scaled Norm after poisoning: 294.713526157182, distance: 296.9796394536164
Total norm for 2 adversaries is: 294.713526157182. distance: 296.9796394536164
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 206, local model 42, internal_epoch   1,  Average loss: 0.0428, Accuracy: 104/198 (52.5253%)
___Train Local_ResNet_18,  epoch 206, local model 42, internal_epoch   2,  Average loss: 0.0147, Accuracy: 169/198 (85.3535%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 10.4217, Accuracy: 2107/10000 (21.0700%)
___Train Local_ResNet_18,  epoch 206, local model 84, internal_epoch   1,  Average loss: 0.0186, Accuracy: 714/1053 (67.8063%)
___Train Local_ResNet_18,  epoch 206, local model 84, internal_epoch   2,  Average loss: 0.0091, Accuracy: 882/1053 (83.7607%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 2.5325, Accuracy: 3909/10000 (39.0900%)
___Train Local_ResNet_18,  epoch 206, local model 19, internal_epoch   1,  Average loss: 0.0312, Accuracy: 94/173 (54.3353%)
___Train Local_ResNet_18,  epoch 206, local model 19, internal_epoch   2,  Average loss: 0.0036, Accuracy: 161/173 (93.0636%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 48, internal_epoch   1,  Average loss: 0.0307, Accuracy: 190/378 (50.2646%)
___Train Local_ResNet_18,  epoch 206, local model 48, internal_epoch   2,  Average loss: 0.0085, Accuracy: 311/378 (82.2751%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 4.4470, Accuracy: 3014/10000 (30.1400%)
___Train Local_ResNet_18,  epoch 206, local model 47, internal_epoch   1,  Average loss: 0.0236, Accuracy: 434/654 (66.3609%)
___Train Local_ResNet_18,  epoch 206, local model 47, internal_epoch   2,  Average loss: 0.0161, Accuracy: 460/654 (70.3364%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 9.5036, Accuracy: 1829/10000 (18.2900%)
___Train Local_ResNet_18,  epoch 206, local model 41, internal_epoch   1,  Average loss: 0.0308, Accuracy: 346/513 (67.4464%)
___Train Local_ResNet_18,  epoch 206, local model 41, internal_epoch   2,  Average loss: 0.0129, Accuracy: 371/513 (72.3197%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 7.3451, Accuracy: 2515/10000 (25.1500%)
___Train Local_ResNet_18,  epoch 206, local model 27, internal_epoch   1,  Average loss: 0.0228, Accuracy: 272/397 (68.5139%)
___Train Local_ResNet_18,  epoch 206, local model 27, internal_epoch   2,  Average loss: 0.0070, Accuracy: 351/397 (88.4131%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 25.7270, Accuracy: 1092/10000 (10.9200%)
___Train Local_ResNet_18,  epoch 206, local model 49, internal_epoch   1,  Average loss: 0.0234, Accuracy: 280/426 (65.7277%)
___Train Local_ResNet_18,  epoch 206, local model 49, internal_epoch   2,  Average loss: 0.0080, Accuracy: 369/426 (86.6197%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 18.8271, Accuracy: 1393/10000 (13.9300%)
time spent on training: 93.42649173736572
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 127.77198576927185 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:207 choose agents : [77, 11, 4, 95, 83, 98, 57, 49, 13, 55]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   1,  Average loss: 0.0021, Accuracy: 481/496 (96.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   2,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   3,  Average loss: 0.0009, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   4,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   5,  Average loss: 0.0011, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Global model norm: 36.90565297728368.
Norm before scaling: 36.698335415460264. Distance: 2.9882239641670054
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 1.3162, Accuracy: 5879/10000 (58.7900%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: 0.0635, Accuracy: 8802/9000 (97.8000%)
Scaling by  100
Scaled Norm after poisoning: 297.04880438658563, distance: 298.82237617019246
Total norm for 2 adversaries is: 297.04880438658563. distance: 298.82237617019246
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   1,  Average loss: 0.0005, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   5,  Average loss: 0.0006, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 36.90565297728368.
Norm before scaling: 36.54143857866624. Distance: 1.6067610317366114
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 1.5032, Accuracy: 5690/10000 (56.9000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: 0.0754, Accuracy: 8794/9000 (97.7111%)
Scaling by  100
Scaled Norm after poisoning: 155.71004829690665, distance: 160.67611054540745
Total norm for 2 adversaries is: 155.71004829690665. distance: 160.67611054540745
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 207, local model 4, internal_epoch   1,  Average loss: 0.0186, Accuracy: 390/557 (70.0180%)
___Train Local_ResNet_18,  epoch 207, local model 4, internal_epoch   2,  Average loss: 0.0078, Accuracy: 458/557 (82.2262%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 7.9708, Accuracy: 2808/10000 (28.0800%)
___Train Local_ResNet_18,  epoch 207, local model 95, internal_epoch   1,  Average loss: 0.0222, Accuracy: 367/569 (64.4991%)
___Train Local_ResNet_18,  epoch 207, local model 95, internal_epoch   2,  Average loss: 0.0075, Accuracy: 469/569 (82.4253%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 8.4887, Accuracy: 2788/10000 (27.8800%)
___Train Local_ResNet_18,  epoch 207, local model 83, internal_epoch   1,  Average loss: 0.0162, Accuracy: 258/366 (70.4918%)
___Train Local_ResNet_18,  epoch 207, local model 83, internal_epoch   2,  Average loss: 0.0043, Accuracy: 340/366 (92.8962%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 5.2932, Accuracy: 3255/10000 (32.5500%)
___Train Local_ResNet_18,  epoch 207, local model 98, internal_epoch   1,  Average loss: 0.0180, Accuracy: 563/802 (70.1995%)
___Train Local_ResNet_18,  epoch 207, local model 98, internal_epoch   2,  Average loss: 0.0103, Accuracy: 627/802 (78.1796%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 3.6954, Accuracy: 3497/10000 (34.9700%)
___Train Local_ResNet_18,  epoch 207, local model 57, internal_epoch   1,  Average loss: 0.0177, Accuracy: 192/290 (66.2069%)
___Train Local_ResNet_18,  epoch 207, local model 57, internal_epoch   2,  Average loss: 0.0058, Accuracy: 270/290 (93.1034%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 8.8981, Accuracy: 2303/10000 (23.0300%)
___Train Local_ResNet_18,  epoch 207, local model 49, internal_epoch   1,  Average loss: 0.0156, Accuracy: 312/426 (73.2394%)
___Train Local_ResNet_18,  epoch 207, local model 49, internal_epoch   2,  Average loss: 0.0051, Accuracy: 385/426 (90.3756%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 8.6980, Accuracy: 2082/10000 (20.8200%)
___Train Local_ResNet_18,  epoch 207, local model 13, internal_epoch   1,  Average loss: 0.0178, Accuracy: 440/620 (70.9677%)
___Train Local_ResNet_18,  epoch 207, local model 13, internal_epoch   2,  Average loss: 0.0072, Accuracy: 534/620 (86.1290%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 7.3880, Accuracy: 3037/10000 (30.3700%)
___Train Local_ResNet_18,  epoch 207, local model 55, internal_epoch   1,  Average loss: 0.0219, Accuracy: 203/299 (67.8930%)
___Train Local_ResNet_18,  epoch 207, local model 55, internal_epoch   2,  Average loss: 0.0048, Accuracy: 270/299 (90.3010%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: 12.4756, Accuracy: 1775/10000 (17.7500%)
time spent on training: 95.25167202949524
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 127.454918384552 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:208 choose agents : [77, 11, 74, 78, 83, 88, 23, 61, 1, 50]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   1,  Average loss: 0.0012, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 36.330972670647185.
Norm before scaling: 36.02923753052859. Distance: 1.2656968649723577
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 1.1918, Accuracy: 6229/10000 (62.2900%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: 0.0452, Accuracy: 8849/9000 (98.3222%)
Scaling by  100
Scaled Norm after poisoning: 122.4592885156124, distance: 126.56968729592208
Total norm for 2 adversaries is: 122.4592885156124. distance: 126.56968729592208
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   1,  Average loss: 0.0011, Accuracy: 537/546 (98.3516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   3,  Average loss: 0.0007, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 36.330972670647185.
Norm before scaling: 36.02900713964721. Distance: 2.236016690753203
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 1.4106, Accuracy: 5763/10000 (57.6300%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: 0.0902, Accuracy: 8764/9000 (97.3778%)
Scaling by  100
Scaled Norm after poisoning: 220.5281037220653, distance: 223.601626782991
Total norm for 2 adversaries is: 220.5281037220653. distance: 223.601626782991
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 208, local model 74, internal_epoch   1,  Average loss: 0.0187, Accuracy: 322/469 (68.6567%)
___Train Local_ResNet_18,  epoch 208, local model 74, internal_epoch   2,  Average loss: 0.0073, Accuracy: 410/469 (87.4200%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 4.2231, Accuracy: 3602/10000 (36.0200%)
___Train Local_ResNet_18,  epoch 208, local model 78, internal_epoch   1,  Average loss: 0.0256, Accuracy: 149/255 (58.4314%)
___Train Local_ResNet_18,  epoch 208, local model 78, internal_epoch   2,  Average loss: 0.0027, Accuracy: 244/255 (95.6863%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 83, internal_epoch   1,  Average loss: 0.0208, Accuracy: 239/366 (65.3005%)
___Train Local_ResNet_18,  epoch 208, local model 83, internal_epoch   2,  Average loss: 0.0065, Accuracy: 316/366 (86.3388%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 3.9455, Accuracy: 3684/10000 (36.8400%)
___Train Local_ResNet_18,  epoch 208, local model 88, internal_epoch   1,  Average loss: 0.0253, Accuracy: 272/447 (60.8501%)
___Train Local_ResNet_18,  epoch 208, local model 88, internal_epoch   2,  Average loss: 0.0074, Accuracy: 368/447 (82.3266%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 7.7980, Accuracy: 2589/10000 (25.8900%)
___Train Local_ResNet_18,  epoch 208, local model 23, internal_epoch   1,  Average loss: 0.0301, Accuracy: 128/248 (51.6129%)
___Train Local_ResNet_18,  epoch 208, local model 23, internal_epoch   2,  Average loss: 0.0074, Accuracy: 212/248 (85.4839%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 61, internal_epoch   1,  Average loss: 0.0206, Accuracy: 406/590 (68.8136%)
___Train Local_ResNet_18,  epoch 208, local model 61, internal_epoch   2,  Average loss: 0.0146, Accuracy: 444/590 (75.2542%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 8.5098, Accuracy: 2047/10000 (20.4700%)
___Train Local_ResNet_18,  epoch 208, local model 1, internal_epoch   1,  Average loss: 0.0228, Accuracy: 451/641 (70.3588%)
___Train Local_ResNet_18,  epoch 208, local model 1, internal_epoch   2,  Average loss: 0.0147, Accuracy: 500/641 (78.0031%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 6.2619, Accuracy: 2985/10000 (29.8500%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   1,  Average loss: 0.0175, Accuracy: 278/401 (69.3267%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   2,  Average loss: 0.0079, Accuracy: 333/401 (83.0424%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: 3.3832, Accuracy: 2927/10000 (29.2700%)
time spent on training: 93.8644528388977
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 127.70575213432312 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:209 choose agents : [77, 11, 30, 57, 65, 69, 64, 74, 94, 78]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   1,  Average loss: 0.0009, Accuracy: 487/496 (98.1855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   3,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 35.72400579223654.
Norm before scaling: 35.483779855202854. Distance: 2.305737272503529
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: 1.2102, Accuracy: 6184/10000 (61.8400%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: 0.0796, Accuracy: 8791/9000 (97.6778%)
Scaling by  100
Scaled Norm after poisoning: 228.4692864341945, distance: 230.57369856241192
Total norm for 2 adversaries is: 228.4692864341945. distance: 230.57369856241192
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   1,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 35.72400579223654.
Norm before scaling: 35.35583451397644. Distance: 0.896930060208475
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: 1.2478, Accuracy: 6207/10000 (62.0700%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: 0.0963, Accuracy: 8762/9000 (97.3556%)
Scaling by  100
Scaled Norm after poisoning: 81.3858179733269, distance: 89.69300124678765
Total norm for 2 adversaries is: 81.3858179733269. distance: 89.69300124678765
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 209, local model 30, internal_epoch   1,  Average loss: 0.0208, Accuracy: 214/337 (63.5015%)
___Train Local_ResNet_18,  epoch 209, local model 30, internal_epoch   2,  Average loss: 0.0094, Accuracy: 275/337 (81.6024%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: 11.0029, Accuracy: 1255/10000 (12.5500%)
___Train Local_ResNet_18,  epoch 209, local model 57, internal_epoch   1,  Average loss: 0.0158, Accuracy: 201/290 (69.3103%)
___Train Local_ResNet_18,  epoch 209, local model 57, internal_epoch   2,  Average loss: 0.0059, Accuracy: 260/290 (89.6552%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 65, internal_epoch   1,  Average loss: 0.0199, Accuracy: 211/314 (67.1975%)
___Train Local_ResNet_18,  epoch 209, local model 65, internal_epoch   2,  Average loss: 0.0033, Accuracy: 293/314 (93.3121%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 69, internal_epoch   1,  Average loss: 0.0252, Accuracy: 138/216 (63.8889%)
___Train Local_ResNet_18,  epoch 209, local model 69, internal_epoch   2,  Average loss: 0.0034, Accuracy: 209/216 (96.7593%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 64, internal_epoch   1,  Average loss: 0.0143, Accuracy: 499/686 (72.7405%)
___Train Local_ResNet_18,  epoch 209, local model 64, internal_epoch   2,  Average loss: 0.0078, Accuracy: 581/686 (84.6939%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: 4.0802, Accuracy: 4032/10000 (40.3200%)
___Train Local_ResNet_18,  epoch 209, local model 74, internal_epoch   1,  Average loss: 0.0147, Accuracy: 347/469 (73.9872%)
___Train Local_ResNet_18,  epoch 209, local model 74, internal_epoch   2,  Average loss: 0.0050, Accuracy: 426/469 (90.8316%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: 3.7108, Accuracy: 3750/10000 (37.5000%)
___Train Local_ResNet_18,  epoch 209, local model 94, internal_epoch   1,  Average loss: 0.0245, Accuracy: 123/203 (60.5911%)
___Train Local_ResNet_18,  epoch 209, local model 94, internal_epoch   2,  Average loss: 0.0095, Accuracy: 181/203 (89.1626%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 78, internal_epoch   1,  Average loss: 0.0192, Accuracy: 169/255 (66.2745%)
___Train Local_ResNet_18,  epoch 209, local model 78, internal_epoch   2,  Average loss: 0.0018, Accuracy: 246/255 (96.4706%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 93.42822527885437
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 128.7049515247345 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:210 choose agents : [77, 11, 79, 21, 70, 62, 43, 78, 52, 42]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   2,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 35.11065098371148.
Norm before scaling: 34.81530509344992. Distance: 1.1705134811276836
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: 1.1290, Accuracy: 6386/10000 (63.8600%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: 0.0696, Accuracy: 8793/9000 (97.7000%)
Scaling by  100
Scaled Norm after poisoning: 112.83417381826305, distance: 117.05135424782577
Total norm for 2 adversaries is: 112.83417381826305. distance: 117.05135424782577
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   1,  Average loss: 0.0007, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   4,  Average loss: 0.0005, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   5,  Average loss: 0.0005, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   6,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 35.11065098371148.
Norm before scaling: 34.7859087597577. Distance: 1.778940007991408
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: 1.3355, Accuracy: 5977/10000 (59.7700%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: 0.0878, Accuracy: 8782/9000 (97.5778%)
Scaling by  100
Scaled Norm after poisoning: 174.04801892186248, distance: 177.89399494502337
Total norm for 2 adversaries is: 174.04801892186248. distance: 177.89399494502337
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 210, local model 79, internal_epoch   1,  Average loss: 0.0256, Accuracy: 99/154 (64.2857%)
___Train Local_ResNet_18,  epoch 210, local model 79, internal_epoch   2,  Average loss: 0.0033, Accuracy: 150/154 (97.4026%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 21, internal_epoch   1,  Average loss: 0.0168, Accuracy: 192/262 (73.2824%)
___Train Local_ResNet_18,  epoch 210, local model 21, internal_epoch   2,  Average loss: 0.0128, Accuracy: 224/262 (85.4962%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 70, internal_epoch   1,  Average loss: 0.0153, Accuracy: 439/610 (71.9672%)
___Train Local_ResNet_18,  epoch 210, local model 70, internal_epoch   2,  Average loss: 0.0078, Accuracy: 515/610 (84.4262%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: 3.4864, Accuracy: 3271/10000 (32.7100%)
___Train Local_ResNet_18,  epoch 210, local model 62, internal_epoch   1,  Average loss: 0.0195, Accuracy: 242/358 (67.5978%)
___Train Local_ResNet_18,  epoch 210, local model 62, internal_epoch   2,  Average loss: 0.0075, Accuracy: 310/358 (86.5922%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: 3.2075, Accuracy: 3457/10000 (34.5700%)
___Train Local_ResNet_18,  epoch 210, local model 43, internal_epoch   1,  Average loss: 0.0166, Accuracy: 246/345 (71.3043%)
___Train Local_ResNet_18,  epoch 210, local model 43, internal_epoch   2,  Average loss: 0.0059, Accuracy: 300/345 (86.9565%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: 15.7439, Accuracy: 1799/10000 (17.9900%)
___Train Local_ResNet_18,  epoch 210, local model 78, internal_epoch   1,  Average loss: 0.0188, Accuracy: 174/255 (68.2353%)
___Train Local_ResNet_18,  epoch 210, local model 78, internal_epoch   2,  Average loss: 0.0020, Accuracy: 243/255 (95.2941%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 52, internal_epoch   1,  Average loss: 0.0245, Accuracy: 132/214 (61.6822%)
___Train Local_ResNet_18,  epoch 210, local model 52, internal_epoch   2,  Average loss: 0.0033, Accuracy: 201/214 (93.9252%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 42, internal_epoch   1,  Average loss: 0.0282, Accuracy: 132/198 (66.6667%)
___Train Local_ResNet_18,  epoch 210, local model 42, internal_epoch   2,  Average loss: 0.0057, Accuracy: 177/198 (89.3939%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 94.8933413028717
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 126.75996422767639 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:211 choose agents : [77, 11, 33, 66, 24, 4, 76, 41, 61, 47]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   1,  Average loss: 0.0005, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 34.485221019300425.
Norm before scaling: 34.204102886888805. Distance: 1.2652702776345428
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 1.0768, Accuracy: 6502/10000 (65.0200%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: 0.0590, Accuracy: 8831/9000 (98.1222%)
Scaling by  100
Scaled Norm after poisoning: 122.9116608267397, distance: 126.52703206726221
Total norm for 2 adversaries is: 122.9116608267397. distance: 126.52703206726221
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   1,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 34.485221019300425.
Norm before scaling: 34.13155628982694. Distance: 0.8618838362209708
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 1.3150, Accuracy: 6058/10000 (60.5800%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: 0.0865, Accuracy: 8768/9000 (97.4222%)
Scaling by  100
Scaled Norm after poisoning: 78.20906102596105, distance: 86.18838095543245
Total norm for 2 adversaries is: 78.20906102596105. distance: 86.18838095543245
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 211, local model 33, internal_epoch   1,  Average loss: 0.0202, Accuracy: 358/527 (67.9317%)
___Train Local_ResNet_18,  epoch 211, local model 33, internal_epoch   2,  Average loss: 0.0097, Accuracy: 418/527 (79.3169%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 15.0653, Accuracy: 1180/10000 (11.8000%)
___Train Local_ResNet_18,  epoch 211, local model 66, internal_epoch   1,  Average loss: 0.0118, Accuracy: 430/555 (77.4775%)
___Train Local_ResNet_18,  epoch 211, local model 66, internal_epoch   2,  Average loss: 0.0066, Accuracy: 497/555 (89.5495%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 10.2360, Accuracy: 2074/10000 (20.7400%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   1,  Average loss: 0.0152, Accuracy: 230/320 (71.8750%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   2,  Average loss: 0.0036, Accuracy: 298/320 (93.1250%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 4, internal_epoch   1,  Average loss: 0.0157, Accuracy: 404/557 (72.5314%)
___Train Local_ResNet_18,  epoch 211, local model 4, internal_epoch   2,  Average loss: 0.0098, Accuracy: 448/557 (80.4309%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 7.9789, Accuracy: 2113/10000 (21.1300%)
___Train Local_ResNet_18,  epoch 211, local model 76, internal_epoch   1,  Average loss: 0.0666, Accuracy: 42/65 (64.6154%)
___Train Local_ResNet_18,  epoch 211, local model 76, internal_epoch   2,  Average loss: 0.0361, Accuracy: 64/65 (98.4615%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 41, internal_epoch   1,  Average loss: 0.0203, Accuracy: 349/513 (68.0312%)
___Train Local_ResNet_18,  epoch 211, local model 41, internal_epoch   2,  Average loss: 0.0214, Accuracy: 437/513 (85.1852%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 9.8078, Accuracy: 2027/10000 (20.2700%)
___Train Local_ResNet_18,  epoch 211, local model 61, internal_epoch   1,  Average loss: 0.0143, Accuracy: 443/590 (75.0847%)
___Train Local_ResNet_18,  epoch 211, local model 61, internal_epoch   2,  Average loss: 0.0113, Accuracy: 472/590 (80.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 8.8769, Accuracy: 1842/10000 (18.4200%)
___Train Local_ResNet_18,  epoch 211, local model 47, internal_epoch   1,  Average loss: 0.0195, Accuracy: 470/654 (71.8654%)
___Train Local_ResNet_18,  epoch 211, local model 47, internal_epoch   2,  Average loss: 0.0125, Accuracy: 491/654 (75.0765%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: 24.8366, Accuracy: 1552/10000 (15.5200%)
time spent on training: 96.27870035171509
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 131.02807569503784 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:212 choose agents : [77, 11, 8, 12, 17, 92, 55, 81, 35, 21]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   6,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 33.839663159292456.
Norm before scaling: 33.53806431224825. Distance: 0.9143069991759143
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 1.0943, Accuracy: 6426/10000 (64.2600%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: 0.0251, Accuracy: 8913/9000 (99.0333%)
Scaling by  100
Scaled Norm after poisoning: 85.95902571319954, distance: 91.43071253858027
Total norm for 2 adversaries is: 85.95902571319954. distance: 91.43071253858027
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 33.839663159292456.
Norm before scaling: 33.49516420904106. Distance: 0.8562071587641771
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 1.2138, Accuracy: 6218/10000 (62.1800%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: 0.1053, Accuracy: 8739/9000 (97.1000%)
Scaling by  100
Scaled Norm after poisoning: 77.99376790507849, distance: 85.62072012570175
Total norm for 2 adversaries is: 77.99376790507849. distance: 85.62072012570175
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 212, local model 8, internal_epoch   1,  Average loss: 0.0138, Accuracy: 394/534 (73.7828%)
___Train Local_ResNet_18,  epoch 212, local model 8, internal_epoch   2,  Average loss: 0.0071, Accuracy: 466/534 (87.2659%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 5.3582, Accuracy: 2470/10000 (24.7000%)
___Train Local_ResNet_18,  epoch 212, local model 12, internal_epoch   1,  Average loss: 0.0171, Accuracy: 687/977 (70.3173%)
___Train Local_ResNet_18,  epoch 212, local model 12, internal_epoch   2,  Average loss: 0.0123, Accuracy: 712/977 (72.8762%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 5.6591, Accuracy: 1950/10000 (19.5000%)
___Train Local_ResNet_18,  epoch 212, local model 17, internal_epoch   1,  Average loss: 0.0154, Accuracy: 392/526 (74.5247%)
___Train Local_ResNet_18,  epoch 212, local model 17, internal_epoch   2,  Average loss: 0.0072, Accuracy: 458/526 (87.0722%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 23.9525, Accuracy: 1391/10000 (13.9100%)
___Train Local_ResNet_18,  epoch 212, local model 92, internal_epoch   1,  Average loss: 0.0168, Accuracy: 566/796 (71.1055%)
___Train Local_ResNet_18,  epoch 212, local model 92, internal_epoch   2,  Average loss: 0.0117, Accuracy: 619/796 (77.7638%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 8.4385, Accuracy: 2020/10000 (20.2000%)
___Train Local_ResNet_18,  epoch 212, local model 55, internal_epoch   1,  Average loss: 0.0192, Accuracy: 202/299 (67.5585%)
___Train Local_ResNet_18,  epoch 212, local model 55, internal_epoch   2,  Average loss: 0.0023, Accuracy: 287/299 (95.9866%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 81, internal_epoch   1,  Average loss: 0.0140, Accuracy: 797/1034 (77.0793%)
___Train Local_ResNet_18,  epoch 212, local model 81, internal_epoch   2,  Average loss: 0.0122, Accuracy: 782/1034 (75.6286%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 6.2822, Accuracy: 2155/10000 (21.5500%)
___Train Local_ResNet_18,  epoch 212, local model 35, internal_epoch   1,  Average loss: 0.0187, Accuracy: 290/419 (69.2124%)
___Train Local_ResNet_18,  epoch 212, local model 35, internal_epoch   2,  Average loss: 0.0078, Accuracy: 356/419 (84.9642%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: 9.2531, Accuracy: 2236/10000 (22.3600%)
___Train Local_ResNet_18,  epoch 212, local model 21, internal_epoch   1,  Average loss: 0.0205, Accuracy: 198/262 (75.5725%)
___Train Local_ResNet_18,  epoch 212, local model 21, internal_epoch   2,  Average loss: 0.0126, Accuracy: 207/262 (79.0076%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 103.9668800830841
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 142.02610802650452 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:213 choose agents : [77, 11, 36, 63, 28, 17, 51, 15, 7, 84]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   3,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 33.18235011832345.
Norm before scaling: 32.89297608877255. Distance: 0.7852250254101658
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 0.9872, Accuracy: 6801/10000 (68.0100%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: 0.0934, Accuracy: 8754/9000 (97.2667%)
Scaling by  100
Scaled Norm after poisoning: 72.75389607801942, distance: 78.52250125362157
Total norm for 2 adversaries is: 72.75389607801942. distance: 78.52250125362157
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 33.18235011832345.
Norm before scaling: 32.8425922280476. Distance: 0.6338594042003423
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 1.1642, Accuracy: 6340/10000 (63.4000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: 0.0795, Accuracy: 8799/9000 (97.7667%)
Scaling by  100
Scaled Norm after poisoning: 53.248599325035066, distance: 63.3859377118409
Total norm for 2 adversaries is: 53.248599325035066. distance: 63.3859377118409
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 213, local model 36, internal_epoch   1,  Average loss: 0.0194, Accuracy: 567/849 (66.7845%)
___Train Local_ResNet_18,  epoch 213, local model 36, internal_epoch   2,  Average loss: 0.0161, Accuracy: 548/849 (64.5465%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 8.7225, Accuracy: 2386/10000 (23.8600%)
___Train Local_ResNet_18,  epoch 213, local model 63, internal_epoch   1,  Average loss: 0.0137, Accuracy: 551/752 (73.2713%)
___Train Local_ResNet_18,  epoch 213, local model 63, internal_epoch   2,  Average loss: 0.0092, Accuracy: 608/752 (80.8511%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 4.2362, Accuracy: 3654/10000 (36.5400%)
___Train Local_ResNet_18,  epoch 213, local model 28, internal_epoch   1,  Average loss: 0.0147, Accuracy: 297/423 (70.2128%)
___Train Local_ResNet_18,  epoch 213, local model 28, internal_epoch   2,  Average loss: 0.0075, Accuracy: 354/423 (83.6879%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 17, internal_epoch   1,  Average loss: 0.0171, Accuracy: 391/526 (74.3346%)
___Train Local_ResNet_18,  epoch 213, local model 17, internal_epoch   2,  Average loss: 0.0126, Accuracy: 411/526 (78.1369%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 18.3048, Accuracy: 1720/10000 (17.2000%)
___Train Local_ResNet_18,  epoch 213, local model 51, internal_epoch   1,  Average loss: 0.0189, Accuracy: 339/479 (70.7724%)
___Train Local_ResNet_18,  epoch 213, local model 51, internal_epoch   2,  Average loss: 0.0063, Accuracy: 413/479 (86.2213%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 9.0352, Accuracy: 2233/10000 (22.3300%)
___Train Local_ResNet_18,  epoch 213, local model 15, internal_epoch   1,  Average loss: 0.0241, Accuracy: 212/341 (62.1701%)
___Train Local_ResNet_18,  epoch 213, local model 15, internal_epoch   2,  Average loss: 0.0069, Accuracy: 291/341 (85.3372%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 7, internal_epoch   1,  Average loss: 0.0149, Accuracy: 257/352 (73.0114%)
___Train Local_ResNet_18,  epoch 213, local model 7, internal_epoch   2,  Average loss: 0.0040, Accuracy: 335/352 (95.1705%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 84, internal_epoch   1,  Average loss: 0.0148, Accuracy: 745/1053 (70.7502%)
___Train Local_ResNet_18,  epoch 213, local model 84, internal_epoch   2,  Average loss: 0.0108, Accuracy: 828/1053 (78.6325%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: 2.1381, Accuracy: 4404/10000 (44.0400%)
time spent on training: 103.068204164505
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 138.43526530265808 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:214 choose agents : [77, 11, 58, 79, 8, 27, 1, 91, 51, 12]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   1,  Average loss: 0.0008, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 32.54576855416461.
Norm before scaling: 32.25772262490507. Distance: 0.9147869401944463
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: 0.9658, Accuracy: 6822/10000 (68.2200%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: 0.0490, Accuracy: 8844/9000 (98.2667%)
Scaling by  100
Scaled Norm after poisoning: 86.47113296318894, distance: 91.47870525769918
Total norm for 2 adversaries is: 86.47113296318894. distance: 91.47870525769918
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 32.54576855416461.
Norm before scaling: 32.20545236616581. Distance: 0.5342859584397617
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: 1.0565, Accuracy: 6638/10000 (66.3800%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: 0.0901, Accuracy: 8783/9000 (97.5889%)
Scaling by  100
Scaled Norm after poisoning: 41.008771748877855, distance: 53.42859483547878
Total norm for 2 adversaries is: 41.008771748877855. distance: 53.42859483547878
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 214, local model 58, internal_epoch   1,  Average loss: 0.0219, Accuracy: 150/234 (64.1026%)
___Train Local_ResNet_18,  epoch 214, local model 58, internal_epoch   2,  Average loss: 0.0037, Accuracy: 221/234 (94.4444%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 79, internal_epoch   1,  Average loss: 0.0142, Accuracy: 118/154 (76.6234%)
___Train Local_ResNet_18,  epoch 214, local model 79, internal_epoch   2,  Average loss: 0.0030, Accuracy: 149/154 (96.7532%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 8, internal_epoch   1,  Average loss: 0.0135, Accuracy: 402/534 (75.2809%)
___Train Local_ResNet_18,  epoch 214, local model 8, internal_epoch   2,  Average loss: 0.0078, Accuracy: 450/534 (84.2697%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: 4.9242, Accuracy: 2730/10000 (27.3000%)
___Train Local_ResNet_18,  epoch 214, local model 27, internal_epoch   1,  Average loss: 0.0124, Accuracy: 316/397 (79.5970%)
___Train Local_ResNet_18,  epoch 214, local model 27, internal_epoch   2,  Average loss: 0.0053, Accuracy: 353/397 (88.9169%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 1, internal_epoch   1,  Average loss: 0.0125, Accuracy: 497/641 (77.5351%)
___Train Local_ResNet_18,  epoch 214, local model 1, internal_epoch   2,  Average loss: 0.0121, Accuracy: 546/641 (85.1794%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: 3.1776, Accuracy: 2794/10000 (27.9400%)
___Train Local_ResNet_18,  epoch 214, local model 91, internal_epoch   1,  Average loss: 0.0136, Accuracy: 174/234 (74.3590%)
___Train Local_ResNet_18,  epoch 214, local model 91, internal_epoch   2,  Average loss: 0.0026, Accuracy: 224/234 (95.7265%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 51, internal_epoch   1,  Average loss: 0.0137, Accuracy: 364/479 (75.9916%)
___Train Local_ResNet_18,  epoch 214, local model 51, internal_epoch   2,  Average loss: 0.0052, Accuracy: 436/479 (91.0230%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 12, internal_epoch   1,  Average loss: 0.0164, Accuracy: 692/977 (70.8291%)
___Train Local_ResNet_18,  epoch 214, local model 12, internal_epoch   2,  Average loss: 0.0104, Accuracy: 769/977 (78.7103%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: 5.9838, Accuracy: 2762/10000 (27.6200%)
time spent on training: 104.13996505737305
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 140.14725279808044 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:215 choose agents : [77, 11, 48, 10, 17, 37, 60, 63, 85, 12]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 31.910697305747842.
Norm before scaling: 31.631349913705566. Distance: 0.5856515822591213
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 0.9640, Accuracy: 6852/10000 (68.5200%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: 0.0287, Accuracy: 8901/9000 (98.9000%)
Scaling by  100
Scaled Norm after poisoning: 51.36947535304283, distance: 58.56516177582134
Total norm for 2 adversaries is: 51.36947535304283. distance: 58.56516177582134
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   6,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 31.910697305747842.
Norm before scaling: 31.586088223113055. Distance: 0.7656997332786324
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 1.0489, Accuracy: 6666/10000 (66.6600%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: 0.0646, Accuracy: 8812/9000 (97.9111%)
Scaling by  100
Scaled Norm after poisoning: 69.00335066026685, distance: 76.56997731344349
Total norm for 2 adversaries is: 69.00335066026685. distance: 76.56997731344349
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 215, local model 48, internal_epoch   1,  Average loss: 0.0190, Accuracy: 246/378 (65.0794%)
___Train Local_ResNet_18,  epoch 215, local model 48, internal_epoch   2,  Average loss: 0.0066, Accuracy: 327/378 (86.5079%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 10, internal_epoch   1,  Average loss: 0.0115, Accuracy: 613/752 (81.5160%)
___Train Local_ResNet_18,  epoch 215, local model 10, internal_epoch   2,  Average loss: 0.0051, Accuracy: 675/752 (89.7606%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 11.2642, Accuracy: 1332/10000 (13.3200%)
___Train Local_ResNet_18,  epoch 215, local model 17, internal_epoch   1,  Average loss: 0.0121, Accuracy: 414/526 (78.7072%)
___Train Local_ResNet_18,  epoch 215, local model 17, internal_epoch   2,  Average loss: 0.0096, Accuracy: 433/526 (82.3194%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 7.7866, Accuracy: 2520/10000 (25.2000%)
___Train Local_ResNet_18,  epoch 215, local model 37, internal_epoch   1,  Average loss: 0.0186, Accuracy: 503/725 (69.3793%)
___Train Local_ResNet_18,  epoch 215, local model 37, internal_epoch   2,  Average loss: 0.0113, Accuracy: 573/725 (79.0345%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 7.7949, Accuracy: 1898/10000 (18.9800%)
___Train Local_ResNet_18,  epoch 215, local model 60, internal_epoch   1,  Average loss: 0.0169, Accuracy: 202/284 (71.1268%)
___Train Local_ResNet_18,  epoch 215, local model 60, internal_epoch   2,  Average loss: 0.0054, Accuracy: 260/284 (91.5493%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   1,  Average loss: 0.0117, Accuracy: 581/752 (77.2606%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   2,  Average loss: 0.0096, Accuracy: 605/752 (80.4521%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 4.4242, Accuracy: 2925/10000 (29.2500%)
___Train Local_ResNet_18,  epoch 215, local model 85, internal_epoch   1,  Average loss: 0.0217, Accuracy: 222/364 (60.9890%)
___Train Local_ResNet_18,  epoch 215, local model 85, internal_epoch   2,  Average loss: 0.0106, Accuracy: 291/364 (79.9451%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 12, internal_epoch   1,  Average loss: 0.0140, Accuracy: 740/977 (75.7421%)
___Train Local_ResNet_18,  epoch 215, local model 12, internal_epoch   2,  Average loss: 0.0105, Accuracy: 764/977 (78.1986%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: 4.1917, Accuracy: 2842/10000 (28.4200%)
time spent on training: 104.25995302200317
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 140.71380257606506 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:216 choose agents : [77, 11, 72, 4, 7, 33, 98, 29, 70, 49]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 31.299819663018827.
Norm before scaling: 31.030389472270265. Distance: 0.6351247153248681
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: 0.9648, Accuracy: 6845/10000 (68.4500%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: 0.0532, Accuracy: 8845/9000 (98.2778%)
Scaling by  100
Scaled Norm after poisoning: 57.39164170076837, distance: 63.512471093282144
Total norm for 2 adversaries is: 57.39164170076837. distance: 63.512471093282144
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   1,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 31.299819663018827.
Norm before scaling: 30.98118955826765. Distance: 0.6926626223824552
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: 1.0344, Accuracy: 6672/10000 (66.7200%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: 0.0694, Accuracy: 8816/9000 (97.9556%)
Scaling by  100
Scaled Norm after poisoning: 61.196899814247125, distance: 69.26626120562774
Total norm for 2 adversaries is: 61.196899814247125. distance: 69.26626120562774
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 216, local model 72, internal_epoch   1,  Average loss: 0.0192, Accuracy: 430/618 (69.5793%)
___Train Local_ResNet_18,  epoch 216, local model 72, internal_epoch   2,  Average loss: 0.0110, Accuracy: 483/618 (78.1553%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: 18.5835, Accuracy: 1369/10000 (13.6900%)
___Train Local_ResNet_18,  epoch 216, local model 4, internal_epoch   1,  Average loss: 0.0109, Accuracy: 444/557 (79.7127%)
___Train Local_ResNet_18,  epoch 216, local model 4, internal_epoch   2,  Average loss: 0.0094, Accuracy: 448/557 (80.4309%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 7, internal_epoch   1,  Average loss: 0.0100, Accuracy: 284/352 (80.6818%)
___Train Local_ResNet_18,  epoch 216, local model 7, internal_epoch   2,  Average loss: 0.0051, Accuracy: 320/352 (90.9091%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 33, internal_epoch   1,  Average loss: 0.0159, Accuracy: 369/527 (70.0190%)
___Train Local_ResNet_18,  epoch 216, local model 33, internal_epoch   2,  Average loss: 0.0137, Accuracy: 396/527 (75.1423%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 98, internal_epoch   1,  Average loss: 0.0123, Accuracy: 618/802 (77.0574%)
___Train Local_ResNet_18,  epoch 216, local model 98, internal_epoch   2,  Average loss: 0.0100, Accuracy: 637/802 (79.4264%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: 4.1207, Accuracy: 3564/10000 (35.6400%)
___Train Local_ResNet_18,  epoch 216, local model 29, internal_epoch   1,  Average loss: 0.0129, Accuracy: 649/848 (76.5330%)
___Train Local_ResNet_18,  epoch 216, local model 29, internal_epoch   2,  Average loss: 0.0080, Accuracy: 709/848 (83.6085%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: 4.5588, Accuracy: 3250/10000 (32.5000%)
___Train Local_ResNet_18,  epoch 216, local model 70, internal_epoch   1,  Average loss: 0.0125, Accuracy: 471/610 (77.2131%)
___Train Local_ResNet_18,  epoch 216, local model 70, internal_epoch   2,  Average loss: 0.0055, Accuracy: 550/610 (90.1639%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: 5.8622, Accuracy: 2344/10000 (23.4400%)
___Train Local_ResNet_18,  epoch 216, local model 49, internal_epoch   1,  Average loss: 0.0146, Accuracy: 314/426 (73.7089%)
___Train Local_ResNet_18,  epoch 216, local model 49, internal_epoch   2,  Average loss: 0.0053, Accuracy: 384/426 (90.1408%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 106.46877765655518
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 141.10749697685242 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:217 choose agents : [77, 11, 61, 44, 52, 93, 25, 2, 80, 43]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 30.70752592504808.
Norm before scaling: 30.443893105866177. Distance: 0.5344749067284579
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: 0.9313, Accuracy: 6950/10000 (69.5000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: 0.0383, Accuracy: 8894/9000 (98.8222%)
Scaling by  100
Scaled Norm after poisoning: 46.46361931578162, distance: 53.44749541021544
Total norm for 2 adversaries is: 46.46361931578162. distance: 53.44749541021544
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 30.70752592504808.
Norm before scaling: 30.39043420569929. Distance: 0.5418417232023847
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: 1.0525, Accuracy: 6649/10000 (66.4900%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: 0.0622, Accuracy: 8839/9000 (98.2111%)
Scaling by  100
Scaled Norm after poisoning: 43.72840147665045, distance: 54.18417034897046
Total norm for 2 adversaries is: 43.72840147665045. distance: 54.18417034897046
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 217, local model 61, internal_epoch   1,  Average loss: 0.0120, Accuracy: 456/590 (77.2881%)
___Train Local_ResNet_18,  epoch 217, local model 61, internal_epoch   2,  Average loss: 0.0150, Accuracy: 425/590 (72.0339%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 44, internal_epoch   1,  Average loss: 0.0140, Accuracy: 321/436 (73.6239%)
___Train Local_ResNet_18,  epoch 217, local model 44, internal_epoch   2,  Average loss: 0.0055, Accuracy: 395/436 (90.5963%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 52, internal_epoch   1,  Average loss: 0.0181, Accuracy: 141/214 (65.8879%)
___Train Local_ResNet_18,  epoch 217, local model 52, internal_epoch   2,  Average loss: 0.0029, Accuracy: 206/214 (96.2617%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 93, internal_epoch   1,  Average loss: 0.0135, Accuracy: 447/584 (76.5411%)
___Train Local_ResNet_18,  epoch 217, local model 93, internal_epoch   2,  Average loss: 0.0102, Accuracy: 472/584 (80.8219%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: 5.5639, Accuracy: 2070/10000 (20.7000%)
___Train Local_ResNet_18,  epoch 217, local model 25, internal_epoch   1,  Average loss: 0.0118, Accuracy: 441/545 (80.9174%)
___Train Local_ResNet_18,  epoch 217, local model 25, internal_epoch   2,  Average loss: 0.0067, Accuracy: 475/545 (87.1560%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 2, internal_epoch   1,  Average loss: 0.0147, Accuracy: 341/461 (73.9696%)
___Train Local_ResNet_18,  epoch 217, local model 2, internal_epoch   2,  Average loss: 0.0087, Accuracy: 402/461 (87.2017%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 80, internal_epoch   1,  Average loss: 0.0139, Accuracy: 266/363 (73.2782%)
___Train Local_ResNet_18,  epoch 217, local model 80, internal_epoch   2,  Average loss: 0.0050, Accuracy: 329/363 (90.6336%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 43, internal_epoch   1,  Average loss: 0.0127, Accuracy: 261/345 (75.6522%)
___Train Local_ResNet_18,  epoch 217, local model 43, internal_epoch   2,  Average loss: 0.0048, Accuracy: 307/345 (88.9855%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 103.37174105644226
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 138.78410720825195 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:218 choose agents : [77, 11, 0, 32, 60, 64, 93, 10, 12, 36]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 30.12104486484491.
Norm before scaling: 29.86486184706923. Distance: 0.8035697581258698
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 0.9248, Accuracy: 6963/10000 (69.6300%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: 0.0644, Accuracy: 8818/9000 (97.9778%)
Scaling by  100
Scaled Norm after poisoning: 75.91583088464651, distance: 80.35697333811484
Total norm for 2 adversaries is: 75.91583088464651. distance: 80.35697333811484
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 30.12104486484491.
Norm before scaling: 29.80964694976328. Distance: 0.43175170297734117
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 0.9747, Accuracy: 6853/10000 (68.5300%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: 0.0660, Accuracy: 8839/9000 (98.2111%)
Scaling by  100
Scaled Norm after poisoning: 29.774151911856574, distance: 43.17516896138045
Total norm for 2 adversaries is: 29.774151911856574. distance: 43.17516896138045
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 218, local model 0, internal_epoch   1,  Average loss: 0.0160, Accuracy: 252/367 (68.6649%)
___Train Local_ResNet_18,  epoch 218, local model 0, internal_epoch   2,  Average loss: 0.0065, Accuracy: 325/367 (88.5559%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 32, internal_epoch   1,  Average loss: 0.0146, Accuracy: 595/824 (72.2087%)
___Train Local_ResNet_18,  epoch 218, local model 32, internal_epoch   2,  Average loss: 0.0102, Accuracy: 647/824 (78.5194%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 3.7402, Accuracy: 3648/10000 (36.4800%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   1,  Average loss: 0.0143, Accuracy: 211/284 (74.2958%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   2,  Average loss: 0.0054, Accuracy: 257/284 (90.4930%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 64, internal_epoch   1,  Average loss: 0.0128, Accuracy: 512/686 (74.6356%)
___Train Local_ResNet_18,  epoch 218, local model 64, internal_epoch   2,  Average loss: 0.0098, Accuracy: 540/686 (78.7172%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 3.7081, Accuracy: 3326/10000 (33.2600%)
___Train Local_ResNet_18,  epoch 218, local model 93, internal_epoch   1,  Average loss: 0.0145, Accuracy: 442/584 (75.6849%)
___Train Local_ResNet_18,  epoch 218, local model 93, internal_epoch   2,  Average loss: 0.0143, Accuracy: 426/584 (72.9452%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 10, internal_epoch   1,  Average loss: 0.0100, Accuracy: 640/752 (85.1064%)
___Train Local_ResNet_18,  epoch 218, local model 10, internal_epoch   2,  Average loss: 0.0063, Accuracy: 658/752 (87.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 14.2335, Accuracy: 1363/10000 (13.6300%)
___Train Local_ResNet_18,  epoch 218, local model 12, internal_epoch   1,  Average loss: 0.0150, Accuracy: 712/977 (72.8762%)
___Train Local_ResNet_18,  epoch 218, local model 12, internal_epoch   2,  Average loss: 0.0139, Accuracy: 697/977 (71.3408%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 3.6702, Accuracy: 3531/10000 (35.3100%)
___Train Local_ResNet_18,  epoch 218, local model 36, internal_epoch   1,  Average loss: 0.0199, Accuracy: 534/849 (62.8975%)
___Train Local_ResNet_18,  epoch 218, local model 36, internal_epoch   2,  Average loss: 0.0193, Accuracy: 502/849 (59.1284%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: 8.4481, Accuracy: 2198/10000 (21.9800%)
time spent on training: 109.47453880310059
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 147.7988624572754 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:219 choose agents : [77, 11, 39, 4, 66, 53, 29, 37, 10, 62]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 29.551971689918066.
Norm before scaling: 29.299261361143454. Distance: 0.592292502562901
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: 0.9370, Accuracy: 6931/10000 (69.3100%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: 0.0446, Accuracy: 8860/9000 (98.4444%)
Scaling by  100
Scaled Norm after poisoning: 53.470599215538535, distance: 59.229249563929564
Total norm for 2 adversaries is: 53.470599215538535. distance: 59.229249563929564
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 29.551971689918066.
Norm before scaling: 29.254280494418143. Distance: 0.5433836524964236
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: 0.9959, Accuracy: 6838/10000 (68.3800%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: 0.0600, Accuracy: 8846/9000 (98.2889%)
Scaling by  100
Scaled Norm after poisoning: 45.23081538239445, distance: 54.33836319621479
Total norm for 2 adversaries is: 45.23081538239445. distance: 54.33836319621479
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 219, local model 39, internal_epoch   1,  Average loss: 0.0219, Accuracy: 135/217 (62.2120%)
___Train Local_ResNet_18,  epoch 219, local model 39, internal_epoch   2,  Average loss: 0.0037, Accuracy: 206/217 (94.9309%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 4, internal_epoch   1,  Average loss: 0.0114, Accuracy: 444/557 (79.7127%)
___Train Local_ResNet_18,  epoch 219, local model 4, internal_epoch   2,  Average loss: 0.0092, Accuracy: 457/557 (82.0467%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 66, internal_epoch   1,  Average loss: 0.0095, Accuracy: 462/555 (83.2432%)
___Train Local_ResNet_18,  epoch 219, local model 66, internal_epoch   2,  Average loss: 0.0056, Accuracy: 503/555 (90.6306%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   1,  Average loss: 0.0164, Accuracy: 441/625 (70.5600%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   2,  Average loss: 0.0094, Accuracy: 517/625 (82.7200%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: 7.4968, Accuracy: 2936/10000 (29.3600%)
___Train Local_ResNet_18,  epoch 219, local model 29, internal_epoch   1,  Average loss: 0.0128, Accuracy: 661/848 (77.9481%)
___Train Local_ResNet_18,  epoch 219, local model 29, internal_epoch   2,  Average loss: 0.0085, Accuracy: 714/848 (84.1981%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: 4.5268, Accuracy: 2728/10000 (27.2800%)
___Train Local_ResNet_18,  epoch 219, local model 37, internal_epoch   1,  Average loss: 0.0187, Accuracy: 496/725 (68.4138%)
___Train Local_ResNet_18,  epoch 219, local model 37, internal_epoch   2,  Average loss: 0.0153, Accuracy: 468/725 (64.5517%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: 14.5374, Accuracy: 2016/10000 (20.1600%)
___Train Local_ResNet_18,  epoch 219, local model 10, internal_epoch   1,  Average loss: 0.0085, Accuracy: 635/752 (84.4415%)
___Train Local_ResNet_18,  epoch 219, local model 10, internal_epoch   2,  Average loss: 0.0047, Accuracy: 676/752 (89.8936%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 62, internal_epoch   1,  Average loss: 0.0130, Accuracy: 272/358 (75.9777%)
___Train Local_ResNet_18,  epoch 219, local model 62, internal_epoch   2,  Average loss: 0.0051, Accuracy: 329/358 (91.8994%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 105.04856491088867
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 138.909086227417 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:220 choose agents : [77, 11, 22, 58, 32, 50, 90, 55, 72, 65]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 28.996757589144234.
Norm before scaling: 28.747493734169137. Distance: 0.6563844316030488
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: 0.8859, Accuracy: 7068/10000 (70.6800%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: 0.0349, Accuracy: 8904/9000 (98.9333%)
Scaling by  100
Scaled Norm after poisoning: 60.553898786148565, distance: 65.63843984401404
Total norm for 2 adversaries is: 60.553898786148565. distance: 65.63843984401404
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 28.996757589144234.
Norm before scaling: 28.698981354078036. Distance: 0.5529540471269745
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: 0.9504, Accuracy: 6926/10000 (69.2600%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: 0.0964, Accuracy: 8771/9000 (97.4556%)
Scaling by  100
Scaled Norm after poisoning: 46.36552032070141, distance: 55.2954047558147
Total norm for 2 adversaries is: 46.36552032070141. distance: 55.2954047558147
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 220, local model 22, internal_epoch   1,  Average loss: 0.0162, Accuracy: 351/494 (71.0526%)
___Train Local_ResNet_18,  epoch 220, local model 22, internal_epoch   2,  Average loss: 0.0107, Accuracy: 394/494 (79.7571%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 58, internal_epoch   1,  Average loss: 0.0175, Accuracy: 164/234 (70.0855%)
___Train Local_ResNet_18,  epoch 220, local model 58, internal_epoch   2,  Average loss: 0.0034, Accuracy: 223/234 (95.2991%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 32, internal_epoch   1,  Average loss: 0.0126, Accuracy: 637/824 (77.3058%)
___Train Local_ResNet_18,  epoch 220, local model 32, internal_epoch   2,  Average loss: 0.0100, Accuracy: 655/824 (79.4903%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: 3.5408, Accuracy: 3341/10000 (33.4100%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   1,  Average loss: 0.0136, Accuracy: 302/401 (75.3117%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   2,  Average loss: 0.0074, Accuracy: 345/401 (86.0349%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 90, internal_epoch   1,  Average loss: 0.0129, Accuracy: 448/578 (77.5087%)
___Train Local_ResNet_18,  epoch 220, local model 90, internal_epoch   2,  Average loss: 0.0141, Accuracy: 430/578 (74.3945%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 55, internal_epoch   1,  Average loss: 0.0126, Accuracy: 231/299 (77.2575%)
___Train Local_ResNet_18,  epoch 220, local model 55, internal_epoch   2,  Average loss: 0.0027, Accuracy: 283/299 (94.6488%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 72, internal_epoch   1,  Average loss: 0.0153, Accuracy: 464/618 (75.0809%)
___Train Local_ResNet_18,  epoch 220, local model 72, internal_epoch   2,  Average loss: 0.0104, Accuracy: 479/618 (77.5081%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 65, internal_epoch   1,  Average loss: 0.0140, Accuracy: 229/314 (72.9299%)
___Train Local_ResNet_18,  epoch 220, local model 65, internal_epoch   2,  Average loss: 0.0039, Accuracy: 286/314 (91.0828%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 103.31850123405457
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 137.4308614730835 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:221 choose agents : [77, 11, 16, 62, 29, 33, 79, 60, 66, 2]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 28.446120345230078.
Norm before scaling: 28.204960120351615. Distance: 0.5990090611302654
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: 0.9180, Accuracy: 6987/10000 (69.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: 0.0546, Accuracy: 8833/9000 (98.1444%)
Scaling by  100
Scaled Norm after poisoning: 54.72860508768472, distance: 59.90090694091159
Total norm for 2 adversaries is: 54.72860508768472. distance: 59.90090694091159
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 28.446120345230078.
Norm before scaling: 28.176691863231014. Distance: 0.9950170644418246
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: 1.0414, Accuracy: 6668/10000 (66.6800%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: 0.0366, Accuracy: 8891/9000 (98.7889%)
Scaling by  100
Scaled Norm after poisoning: 95.31619357597376, distance: 99.50171755741204
Total norm for 2 adversaries is: 95.31619357597376. distance: 99.50171755741204
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 221, local model 16, internal_epoch   1,  Average loss: 0.0157, Accuracy: 573/773 (74.1268%)
___Train Local_ResNet_18,  epoch 221, local model 16, internal_epoch   2,  Average loss: 0.0141, Accuracy: 548/773 (70.8926%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 62, internal_epoch   1,  Average loss: 0.0105, Accuracy: 288/358 (80.4469%)
___Train Local_ResNet_18,  epoch 221, local model 62, internal_epoch   2,  Average loss: 0.0053, Accuracy: 325/358 (90.7821%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 29, internal_epoch   1,  Average loss: 0.0139, Accuracy: 657/848 (77.4764%)
___Train Local_ResNet_18,  epoch 221, local model 29, internal_epoch   2,  Average loss: 0.0114, Accuracy: 657/848 (77.4764%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 33, internal_epoch   1,  Average loss: 0.0170, Accuracy: 381/527 (72.2960%)
___Train Local_ResNet_18,  epoch 221, local model 33, internal_epoch   2,  Average loss: 0.0198, Accuracy: 315/527 (59.7723%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 79, internal_epoch   1,  Average loss: 0.0113, Accuracy: 125/154 (81.1688%)
___Train Local_ResNet_18,  epoch 221, local model 79, internal_epoch   2,  Average loss: 0.0028, Accuracy: 148/154 (96.1039%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 60, internal_epoch   1,  Average loss: 0.0131, Accuracy: 221/284 (77.8169%)
___Train Local_ResNet_18,  epoch 221, local model 60, internal_epoch   2,  Average loss: 0.0056, Accuracy: 259/284 (91.1972%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 66, internal_epoch   1,  Average loss: 0.0084, Accuracy: 464/555 (83.6036%)
___Train Local_ResNet_18,  epoch 221, local model 66, internal_epoch   2,  Average loss: 0.0044, Accuracy: 507/555 (91.3514%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 2, internal_epoch   1,  Average loss: 0.0157, Accuracy: 339/461 (73.5358%)
___Train Local_ResNet_18,  epoch 221, local model 2, internal_epoch   2,  Average loss: 0.0149, Accuracy: 345/461 (74.8373%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 109.82853102684021
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 145.24470710754395 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:222 choose agents : [77, 11, 72, 37, 1, 62, 28, 20, 93, 88]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 27.93719304746083.
Norm before scaling: 27.702564283313084. Distance: 0.6697007862647517
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: 0.9240, Accuracy: 6926/10000 (69.2600%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: 0.0369, Accuracy: 8892/9000 (98.8000%)
Scaling by  100
Scaled Norm after poisoning: 62.57119187560978, distance: 66.97007698171998
Total norm for 2 adversaries is: 62.57119187560978. distance: 66.97007698171998
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 27.93719304746083.
Norm before scaling: 27.678926746531264. Distance: 1.1356918573092818
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: 0.9716, Accuracy: 6860/10000 (68.6000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: 0.1162, Accuracy: 8725/9000 (96.9444%)
Scaling by  100
Scaled Norm after poisoning: 110.05946546072263, distance: 113.56918578970927
Total norm for 2 adversaries is: 110.05946546072263. distance: 113.56918578970927
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   1,  Average loss: 0.0167, Accuracy: 445/618 (72.0065%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   2,  Average loss: 0.0152, Accuracy: 439/618 (71.0356%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 37, internal_epoch   1,  Average loss: 0.0174, Accuracy: 507/725 (69.9310%)
___Train Local_ResNet_18,  epoch 222, local model 37, internal_epoch   2,  Average loss: 0.0150, Accuracy: 506/725 (69.7931%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 1, internal_epoch   1,  Average loss: 0.0166, Accuracy: 479/641 (74.7270%)
___Train Local_ResNet_18,  epoch 222, local model 1, internal_epoch   2,  Average loss: 0.0151, Accuracy: 467/641 (72.8549%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 62, internal_epoch   1,  Average loss: 0.0102, Accuracy: 282/358 (78.7709%)
___Train Local_ResNet_18,  epoch 222, local model 62, internal_epoch   2,  Average loss: 0.0066, Accuracy: 311/358 (86.8715%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 28, internal_epoch   1,  Average loss: 0.0123, Accuracy: 327/423 (77.3050%)
___Train Local_ResNet_18,  epoch 222, local model 28, internal_epoch   2,  Average loss: 0.0095, Accuracy: 333/423 (78.7234%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 20, internal_epoch   1,  Average loss: 0.0198, Accuracy: 251/362 (69.3370%)
___Train Local_ResNet_18,  epoch 222, local model 20, internal_epoch   2,  Average loss: 0.0078, Accuracy: 309/362 (85.3591%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 93, internal_epoch   1,  Average loss: 0.0123, Accuracy: 443/584 (75.8562%)
___Train Local_ResNet_18,  epoch 222, local model 93, internal_epoch   2,  Average loss: 0.0125, Accuracy: 461/584 (78.9384%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 88, internal_epoch   1,  Average loss: 0.0158, Accuracy: 302/447 (67.5615%)
___Train Local_ResNet_18,  epoch 222, local model 88, internal_epoch   2,  Average loss: 0.0114, Accuracy: 364/447 (81.4318%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 104.6864902973175
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 140.09564423561096 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:223 choose agents : [77, 11, 66, 36, 95, 3, 96, 88, 86, 24]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   1,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   4,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 27.44593295626592.
Norm before scaling: 27.238027759916832. Distance: 1.184394238398773
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: 0.9367, Accuracy: 6903/10000 (69.0300%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: 0.0575, Accuracy: 8812/9000 (97.9111%)
Scaling by  100
Scaled Norm after poisoning: 116.20665774682404, distance: 118.43944177168136
Total norm for 2 adversaries is: 116.20665774682404. distance: 118.43944177168136
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   1,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 27.44593295626592.
Norm before scaling: 27.190934589089157. Distance: 0.9606610342401564
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: 1.0564, Accuracy: 6632/10000 (66.3200%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: 0.0770, Accuracy: 8814/9000 (97.9333%)
Scaling by  100
Scaled Norm after poisoning: 92.17623342170421, distance: 96.06610374665198
Total norm for 2 adversaries is: 92.17623342170421. distance: 96.06610374665198
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 223, local model 66, internal_epoch   1,  Average loss: 0.0081, Accuracy: 468/555 (84.3243%)
___Train Local_ResNet_18,  epoch 223, local model 66, internal_epoch   2,  Average loss: 0.0060, Accuracy: 481/555 (86.6667%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 36, internal_epoch   1,  Average loss: 0.0214, Accuracy: 522/849 (61.4841%)
___Train Local_ResNet_18,  epoch 223, local model 36, internal_epoch   2,  Average loss: 0.0202, Accuracy: 476/849 (56.0660%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: 9.8214, Accuracy: 2017/10000 (20.1700%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   1,  Average loss: 0.0160, Accuracy: 406/569 (71.3533%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   2,  Average loss: 0.0120, Accuracy: 435/569 (76.4499%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 3, internal_epoch   1,  Average loss: 0.0162, Accuracy: 556/780 (71.2821%)
___Train Local_ResNet_18,  epoch 223, local model 3, internal_epoch   2,  Average loss: 0.0157, Accuracy: 522/780 (66.9231%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 96, internal_epoch   1,  Average loss: 0.0174, Accuracy: 480/708 (67.7966%)
___Train Local_ResNet_18,  epoch 223, local model 96, internal_epoch   2,  Average loss: 0.0228, Accuracy: 376/708 (53.1073%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 88, internal_epoch   1,  Average loss: 0.0159, Accuracy: 312/447 (69.7987%)
___Train Local_ResNet_18,  epoch 223, local model 88, internal_epoch   2,  Average loss: 0.0110, Accuracy: 353/447 (78.9709%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 86, internal_epoch   1,  Average loss: 0.0157, Accuracy: 160/212 (75.4717%)
___Train Local_ResNet_18,  epoch 223, local model 86, internal_epoch   2,  Average loss: 0.0082, Accuracy: 185/212 (87.2642%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 24, internal_epoch   1,  Average loss: 0.0107, Accuracy: 255/320 (79.6875%)
___Train Local_ResNet_18,  epoch 223, local model 24, internal_epoch   2,  Average loss: 0.0039, Accuracy: 295/320 (92.1875%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 104.23561263084412
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 139.9909152984619 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:224 choose agents : [77, 11, 26, 54, 91, 40, 17, 64, 80, 84]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 26.987599103497402.
Norm before scaling: 26.774807559051077. Distance: 0.7924614396927862
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: 0.8947, Accuracy: 7047/10000 (70.4700%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: 0.0673, Accuracy: 8811/9000 (97.9000%)
Scaling by  100
Scaled Norm after poisoning: 76.16736364845674, distance: 79.24614602714917
Total norm for 2 adversaries is: 76.16736364845674. distance: 79.24614602714917
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   1,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 26.987599103497402.
Norm before scaling: 26.74339369723507. Distance: 1.0025402230353209
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: 1.0719, Accuracy: 6564/10000 (65.6400%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: 0.0656, Accuracy: 8826/9000 (98.0667%)
Scaling by  100
Scaled Norm after poisoning: 96.78097755854454, distance: 100.25402306453842
Total norm for 2 adversaries is: 96.78097755854454. distance: 100.25402306453842
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 224, local model 26, internal_epoch   1,  Average loss: 0.0177, Accuracy: 325/468 (69.4444%)
___Train Local_ResNet_18,  epoch 224, local model 26, internal_epoch   2,  Average loss: 0.0104, Accuracy: 379/468 (80.9829%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 54, internal_epoch   1,  Average loss: 0.0162, Accuracy: 305/440 (69.3182%)
___Train Local_ResNet_18,  epoch 224, local model 54, internal_epoch   2,  Average loss: 0.0070, Accuracy: 379/440 (86.1364%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 91, internal_epoch   1,  Average loss: 0.0152, Accuracy: 178/234 (76.0684%)
___Train Local_ResNet_18,  epoch 224, local model 91, internal_epoch   2,  Average loss: 0.0032, Accuracy: 225/234 (96.1538%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 40, internal_epoch   1,  Average loss: 0.0159, Accuracy: 467/652 (71.6258%)
___Train Local_ResNet_18,  epoch 224, local model 40, internal_epoch   2,  Average loss: 0.0185, Accuracy: 425/652 (65.1840%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 17, internal_epoch   1,  Average loss: 0.0126, Accuracy: 397/526 (75.4753%)
___Train Local_ResNet_18,  epoch 224, local model 17, internal_epoch   2,  Average loss: 0.0122, Accuracy: 407/526 (77.3764%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 64, internal_epoch   1,  Average loss: 0.0115, Accuracy: 519/686 (75.6560%)
___Train Local_ResNet_18,  epoch 224, local model 64, internal_epoch   2,  Average loss: 0.0094, Accuracy: 555/686 (80.9038%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 80, internal_epoch   1,  Average loss: 0.0137, Accuracy: 276/363 (76.0331%)
___Train Local_ResNet_18,  epoch 224, local model 80, internal_epoch   2,  Average loss: 0.0076, Accuracy: 318/363 (87.6033%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 84, internal_epoch   1,  Average loss: 0.0134, Accuracy: 760/1053 (72.1747%)
___Train Local_ResNet_18,  epoch 224, local model 84, internal_epoch   2,  Average loss: 0.0095, Accuracy: 843/1053 (80.0570%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: 2.8870, Accuracy: 3950/10000 (39.5000%)
time spent on training: 105.42275333404541
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 141.26733922958374 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:225 choose agents : [77, 11, 65, 36, 28, 29, 94, 0, 3, 8]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   1,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Global model norm: 26.54357666936285.
Norm before scaling: 26.372373332624285. Distance: 1.335671694005827
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: 0.9757, Accuracy: 6792/10000 (67.9200%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: 0.0366, Accuracy: 8892/9000 (98.8000%)
Scaling by  100
Scaled Norm after poisoning: 132.1377639884791, distance: 133.5671647524196
Total norm for 2 adversaries is: 132.1377639884791. distance: 133.5671647524196
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 26.54357666936285.
Norm before scaling: 26.28108278781527. Distance: 0.465186962078685
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: 0.9693, Accuracy: 6897/10000 (68.9700%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: 0.1004, Accuracy: 8765/9000 (97.3889%)
Scaling by  100
Scaled Norm after poisoning: 38.21366163490323, distance: 46.518697937630414
Total norm for 2 adversaries is: 38.21366163490323. distance: 46.518697937630414
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 225, local model 65, internal_epoch   1,  Average loss: 0.0152, Accuracy: 225/314 (71.6561%)
___Train Local_ResNet_18,  epoch 225, local model 65, internal_epoch   2,  Average loss: 0.0055, Accuracy: 279/314 (88.8535%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 36, internal_epoch   1,  Average loss: 0.0199, Accuracy: 546/849 (64.3110%)
___Train Local_ResNet_18,  epoch 225, local model 36, internal_epoch   2,  Average loss: 0.0206, Accuracy: 485/849 (57.1260%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: 6.8105, Accuracy: 1763/10000 (17.6300%)
___Train Local_ResNet_18,  epoch 225, local model 28, internal_epoch   1,  Average loss: 0.0122, Accuracy: 333/423 (78.7234%)
___Train Local_ResNet_18,  epoch 225, local model 28, internal_epoch   2,  Average loss: 0.0111, Accuracy: 332/423 (78.4870%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 29, internal_epoch   1,  Average loss: 0.0135, Accuracy: 667/848 (78.6557%)
___Train Local_ResNet_18,  epoch 225, local model 29, internal_epoch   2,  Average loss: 0.0105, Accuracy: 684/848 (80.6604%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 94, internal_epoch   1,  Average loss: 0.0168, Accuracy: 145/203 (71.4286%)
___Train Local_ResNet_18,  epoch 225, local model 94, internal_epoch   2,  Average loss: 0.0102, Accuracy: 178/203 (87.6847%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 0, internal_epoch   1,  Average loss: 0.0140, Accuracy: 259/367 (70.5722%)
___Train Local_ResNet_18,  epoch 225, local model 0, internal_epoch   2,  Average loss: 0.0107, Accuracy: 284/367 (77.3842%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 3, internal_epoch   1,  Average loss: 0.0151, Accuracy: 592/780 (75.8974%)
___Train Local_ResNet_18,  epoch 225, local model 3, internal_epoch   2,  Average loss: 0.0143, Accuracy: 558/780 (71.5385%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 8, internal_epoch   1,  Average loss: 0.0127, Accuracy: 398/534 (74.5318%)
___Train Local_ResNet_18,  epoch 225, local model 8, internal_epoch   2,  Average loss: 0.0108, Accuracy: 421/534 (78.8390%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 103.93586587905884
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 139.46615195274353 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:226 choose agents : [77, 11, 66, 76, 88, 20, 24, 51, 14, 6]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 26.115315517715725.
Norm before scaling: 25.90570457997922. Distance: 0.7128696804366547
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: 0.9401, Accuracy: 6874/10000 (68.7400%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: 0.0377, Accuracy: 8872/9000 (98.5778%)
Scaling by  100
Scaled Norm after poisoning: 67.98990331751473, distance: 71.28697300020005
Total norm for 2 adversaries is: 67.98990331751473. distance: 71.28697300020005
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   4,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   5,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 26.115315517715725.
Norm before scaling: 25.93394765771847. Distance: 1.8459080496563893
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: 1.1805, Accuracy: 6207/10000 (62.0700%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: 0.0789, Accuracy: 8779/9000 (97.5444%)
Scaling by  100
Scaled Norm after poisoning: 182.95088779164206, distance: 184.5907847442553
Total norm for 2 adversaries is: 182.95088779164206. distance: 184.5907847442553
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 226, local model 66, internal_epoch   1,  Average loss: 0.0106, Accuracy: 447/555 (80.5405%)
___Train Local_ResNet_18,  epoch 226, local model 66, internal_epoch   2,  Average loss: 0.0087, Accuracy: 470/555 (84.6847%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 76, internal_epoch   1,  Average loss: 0.0809, Accuracy: 37/65 (56.9231%)
___Train Local_ResNet_18,  epoch 226, local model 76, internal_epoch   2,  Average loss: 0.0339, Accuracy: 63/65 (96.9231%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 88, internal_epoch   1,  Average loss: 0.0161, Accuracy: 322/447 (72.0358%)
___Train Local_ResNet_18,  epoch 226, local model 88, internal_epoch   2,  Average loss: 0.0123, Accuracy: 354/447 (79.1946%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 20, internal_epoch   1,  Average loss: 0.0193, Accuracy: 253/362 (69.8895%)
___Train Local_ResNet_18,  epoch 226, local model 20, internal_epoch   2,  Average loss: 0.0094, Accuracy: 298/362 (82.3204%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 24, internal_epoch   1,  Average loss: 0.0134, Accuracy: 248/320 (77.5000%)
___Train Local_ResNet_18,  epoch 226, local model 24, internal_epoch   2,  Average loss: 0.0041, Accuracy: 291/320 (90.9375%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 51, internal_epoch   1,  Average loss: 0.0153, Accuracy: 352/479 (73.4864%)
___Train Local_ResNet_18,  epoch 226, local model 51, internal_epoch   2,  Average loss: 0.0069, Accuracy: 407/479 (84.9687%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 14, internal_epoch   1,  Average loss: 0.0158, Accuracy: 238/318 (74.8428%)
___Train Local_ResNet_18,  epoch 226, local model 14, internal_epoch   2,  Average loss: 0.0041, Accuracy: 289/318 (90.8805%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 6, internal_epoch   1,  Average loss: 0.0139, Accuracy: 382/520 (73.4615%)
___Train Local_ResNet_18,  epoch 226, local model 6, internal_epoch   2,  Average loss: 0.0119, Accuracy: 403/520 (77.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 102.3178768157959
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 139.66717076301575 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:227 choose agents : [77, 11, 12, 7, 56, 63, 0, 96, 19, 43]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   1,  Average loss: 0.0009, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 25.72823858607867.
Norm before scaling: 25.568850448959374. Distance: 1.5341464305553567
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: 0.9510, Accuracy: 6876/10000 (68.7600%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: 0.0707, Accuracy: 8794/9000 (97.7111%)
Scaling by  100
Scaled Norm after poisoning: 152.13489850704866, distance: 153.41465588601696
Total norm for 2 adversaries is: 152.13489850704866. distance: 153.41465588601696
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 25.72823858607867.
Norm before scaling: 25.4831535191634. Distance: 0.5690094418957448
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: 1.0627, Accuracy: 6673/10000 (66.7300%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: 0.1016, Accuracy: 8758/9000 (97.3111%)
Scaling by  100
Scaled Norm after poisoning: 51.109396495715444, distance: 56.900944889315106
Total norm for 2 adversaries is: 51.109396495715444. distance: 56.900944889315106
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 227, local model 12, internal_epoch   1,  Average loss: 0.0168, Accuracy: 667/977 (68.2702%)
___Train Local_ResNet_18,  epoch 227, local model 12, internal_epoch   2,  Average loss: 0.0172, Accuracy: 633/977 (64.7902%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: 4.8005, Accuracy: 2509/10000 (25.0900%)
___Train Local_ResNet_18,  epoch 227, local model 7, internal_epoch   1,  Average loss: 0.0100, Accuracy: 283/352 (80.3977%)
___Train Local_ResNet_18,  epoch 227, local model 7, internal_epoch   2,  Average loss: 0.0068, Accuracy: 305/352 (86.6477%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 56, internal_epoch   1,  Average loss: 0.0150, Accuracy: 542/743 (72.9475%)
___Train Local_ResNet_18,  epoch 227, local model 56, internal_epoch   2,  Average loss: 0.0128, Accuracy: 559/743 (75.2355%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 63, internal_epoch   1,  Average loss: 0.0139, Accuracy: 535/752 (71.1436%)
___Train Local_ResNet_18,  epoch 227, local model 63, internal_epoch   2,  Average loss: 0.0160, Accuracy: 493/752 (65.5585%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 0, internal_epoch   1,  Average loss: 0.0171, Accuracy: 245/367 (66.7575%)
___Train Local_ResNet_18,  epoch 227, local model 0, internal_epoch   2,  Average loss: 0.0112, Accuracy: 287/367 (78.2016%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 96, internal_epoch   1,  Average loss: 0.0182, Accuracy: 468/708 (66.1017%)
___Train Local_ResNet_18,  epoch 227, local model 96, internal_epoch   2,  Average loss: 0.0241, Accuracy: 382/708 (53.9548%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 19, internal_epoch   1,  Average loss: 0.0231, Accuracy: 107/173 (61.8497%)
___Train Local_ResNet_18,  epoch 227, local model 19, internal_epoch   2,  Average loss: 0.0035, Accuracy: 164/173 (94.7977%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 43, internal_epoch   1,  Average loss: 0.0126, Accuracy: 266/345 (77.1014%)
___Train Local_ResNet_18,  epoch 227, local model 43, internal_epoch   2,  Average loss: 0.0116, Accuracy: 286/345 (82.8986%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 104.61282134056091
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 139.8465666770935 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:228 choose agents : [77, 11, 80, 86, 98, 44, 83, 40, 28, 8]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   6,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 25.337182940403395.
Norm before scaling: 25.129283634757552. Distance: 0.6384758604739563
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: 0.8922, Accuracy: 7029/10000 (70.2900%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: 0.0530, Accuracy: 8838/9000 (98.2000%)
Scaling by  100
Scaled Norm after poisoning: 60.23731348215054, distance: 63.8475853901794
Total norm for 2 adversaries is: 60.23731348215054. distance: 63.8475853901794
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   1,  Average loss: 0.0009, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 25.337182940403395.
Norm before scaling: 25.127663542352206. Distance: 1.275785516473629
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: 1.1368, Accuracy: 6361/10000 (63.6100%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: 0.0646, Accuracy: 8835/9000 (98.1667%)
Scaling by  100
Scaled Norm after poisoning: 125.29229887048126, distance: 127.57856418326121
Total norm for 2 adversaries is: 125.29229887048126. distance: 127.57856418326121
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 228, local model 80, internal_epoch   1,  Average loss: 0.0142, Accuracy: 281/363 (77.4105%)
___Train Local_ResNet_18,  epoch 228, local model 80, internal_epoch   2,  Average loss: 0.0076, Accuracy: 319/363 (87.8788%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 86, internal_epoch   1,  Average loss: 0.0178, Accuracy: 147/212 (69.3396%)
___Train Local_ResNet_18,  epoch 228, local model 86, internal_epoch   2,  Average loss: 0.0082, Accuracy: 186/212 (87.7358%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 98, internal_epoch   1,  Average loss: 0.0169, Accuracy: 544/802 (67.8304%)
___Train Local_ResNet_18,  epoch 228, local model 98, internal_epoch   2,  Average loss: 0.0165, Accuracy: 516/802 (64.3392%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 44, internal_epoch   1,  Average loss: 0.0142, Accuracy: 323/436 (74.0826%)
___Train Local_ResNet_18,  epoch 228, local model 44, internal_epoch   2,  Average loss: 0.0072, Accuracy: 377/436 (86.4679%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 83, internal_epoch   1,  Average loss: 0.0137, Accuracy: 270/366 (73.7705%)
___Train Local_ResNet_18,  epoch 228, local model 83, internal_epoch   2,  Average loss: 0.0069, Accuracy: 314/366 (85.7923%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 40, internal_epoch   1,  Average loss: 0.0166, Accuracy: 467/652 (71.6258%)
___Train Local_ResNet_18,  epoch 228, local model 40, internal_epoch   2,  Average loss: 0.0190, Accuracy: 425/652 (65.1840%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 28, internal_epoch   1,  Average loss: 0.0145, Accuracy: 315/423 (74.4681%)
___Train Local_ResNet_18,  epoch 228, local model 28, internal_epoch   2,  Average loss: 0.0122, Accuracy: 322/423 (76.1229%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 8, internal_epoch   1,  Average loss: 0.0116, Accuracy: 419/534 (78.4644%)
___Train Local_ResNet_18,  epoch 228, local model 8, internal_epoch   2,  Average loss: 0.0150, Accuracy: 381/534 (71.3483%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 103.00235772132874
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 136.79476356506348 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:229 choose agents : [77, 11, 61, 46, 67, 94, 86, 98, 19, 69]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   1,  Average loss: 0.0007, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   2,  Average loss: 0.0006, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   3,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 24.928272347016573.
Norm before scaling: 24.780889174154318. Distance: 1.5694132645171983
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: 0.9414, Accuracy: 6875/10000 (68.7500%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: 0.1112, Accuracy: 8695/9000 (96.6111%)
Scaling by  100
Scaled Norm after poisoning: 155.7982156007411, distance: 156.94133930986763
Total norm for 2 adversaries is: 155.7982156007411. distance: 156.94133930986763
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 24.928272347016573.
Norm before scaling: 24.683499478079987. Distance: 0.4402187036603756
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: 1.0397, Accuracy: 6693/10000 (66.9300%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: 0.0679, Accuracy: 8845/9000 (98.2778%)
Scaling by  100
Scaled Norm after poisoning: 36.408804899622154, distance: 44.02186457371921
Total norm for 2 adversaries is: 36.408804899622154. distance: 44.02186457371921
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 229, local model 61, internal_epoch   1,  Average loss: 0.0147, Accuracy: 432/590 (73.2203%)
___Train Local_ResNet_18,  epoch 229, local model 61, internal_epoch   2,  Average loss: 0.0110, Accuracy: 465/590 (78.8136%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 46, internal_epoch   1,  Average loss: 0.0138, Accuracy: 436/601 (72.5458%)
___Train Local_ResNet_18,  epoch 229, local model 46, internal_epoch   2,  Average loss: 0.0126, Accuracy: 447/601 (74.3760%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 67, internal_epoch   1,  Average loss: 0.0169, Accuracy: 563/842 (66.8646%)
___Train Local_ResNet_18,  epoch 229, local model 67, internal_epoch   2,  Average loss: 0.0176, Accuracy: 541/842 (64.2518%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 94, internal_epoch   1,  Average loss: 0.0180, Accuracy: 137/203 (67.4877%)
___Train Local_ResNet_18,  epoch 229, local model 94, internal_epoch   2,  Average loss: 0.0161, Accuracy: 184/203 (90.6404%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 86, internal_epoch   1,  Average loss: 0.0158, Accuracy: 161/212 (75.9434%)
___Train Local_ResNet_18,  epoch 229, local model 86, internal_epoch   2,  Average loss: 0.0126, Accuracy: 178/212 (83.9623%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 98, internal_epoch   1,  Average loss: 0.0143, Accuracy: 593/802 (73.9401%)
___Train Local_ResNet_18,  epoch 229, local model 98, internal_epoch   2,  Average loss: 0.0154, Accuracy: 548/802 (68.3292%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 19, internal_epoch   1,  Average loss: 0.0206, Accuracy: 106/173 (61.2717%)
___Train Local_ResNet_18,  epoch 229, local model 19, internal_epoch   2,  Average loss: 0.0042, Accuracy: 166/173 (95.9538%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 69, internal_epoch   1,  Average loss: 0.0189, Accuracy: 150/216 (69.4444%)
___Train Local_ResNet_18,  epoch 229, local model 69, internal_epoch   2,  Average loss: 0.0035, Accuracy: 205/216 (94.9074%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 99.04675030708313
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 132.38840341567993 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:230 choose agents : [77, 11, 49, 93, 78, 23, 53, 13, 61, 59]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 24.54428271440915.
Norm before scaling: 24.350739128284175. Distance: 0.687524643369643
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: 0.9976, Accuracy: 6721/10000 (67.2100%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: 0.0919, Accuracy: 8737/9000 (97.0778%)
Scaling by  100
Scaled Norm after poisoning: 65.84614895368787, distance: 68.75246444446556
Total norm for 2 adversaries is: 65.84614895368787. distance: 68.75246444446556
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   1,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   5,  Average loss: 0.0006, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 24.54428271440915.
Norm before scaling: 24.342704466475936. Distance: 1.3890190709880414
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: 1.1444, Accuracy: 6355/10000 (63.5500%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: 0.0805, Accuracy: 8798/9000 (97.7556%)
Scaling by  100
Scaled Norm after poisoning: 136.8128854494342, distance: 138.90190164734966
Total norm for 2 adversaries is: 136.8128854494342. distance: 138.90190164734966
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 230, local model 49, internal_epoch   1,  Average loss: 0.0158, Accuracy: 317/426 (74.4131%)
___Train Local_ResNet_18,  epoch 230, local model 49, internal_epoch   2,  Average loss: 0.0100, Accuracy: 342/426 (80.2817%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 93, internal_epoch   1,  Average loss: 0.0164, Accuracy: 427/584 (73.1164%)
___Train Local_ResNet_18,  epoch 230, local model 93, internal_epoch   2,  Average loss: 0.0255, Accuracy: 344/584 (58.9041%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 78, internal_epoch   1,  Average loss: 0.0159, Accuracy: 176/255 (69.0196%)
___Train Local_ResNet_18,  epoch 230, local model 78, internal_epoch   2,  Average loss: 0.0032, Accuracy: 237/255 (92.9412%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 23, internal_epoch   1,  Average loss: 0.0172, Accuracy: 164/248 (66.1290%)
___Train Local_ResNet_18,  epoch 230, local model 23, internal_epoch   2,  Average loss: 0.0068, Accuracy: 210/248 (84.6774%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 53, internal_epoch   1,  Average loss: 0.0162, Accuracy: 439/625 (70.2400%)
___Train Local_ResNet_18,  epoch 230, local model 53, internal_epoch   2,  Average loss: 0.0145, Accuracy: 442/625 (70.7200%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 13, internal_epoch   1,  Average loss: 0.0187, Accuracy: 442/620 (71.2903%)
___Train Local_ResNet_18,  epoch 230, local model 13, internal_epoch   2,  Average loss: 0.0143, Accuracy: 443/620 (71.4516%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 61, internal_epoch   1,  Average loss: 0.0170, Accuracy: 438/590 (74.2373%)
___Train Local_ResNet_18,  epoch 230, local model 61, internal_epoch   2,  Average loss: 0.0178, Accuracy: 381/590 (64.5763%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 59, internal_epoch   1,  Average loss: 0.0131, Accuracy: 479/642 (74.6106%)
___Train Local_ResNet_18,  epoch 230, local model 59, internal_epoch   2,  Average loss: 0.0177, Accuracy: 476/642 (74.1433%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 100.43477892875671
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 133.34949707984924 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:231 choose agents : [77, 11, 39, 88, 72, 83, 14, 20, 75, 1]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   6,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 24.154482521447363.
Norm before scaling: 24.00307190626858. Distance: 1.2863984756855686
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: 1.0591, Accuracy: 6500/10000 (65.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: 0.0232, Accuracy: 8922/9000 (99.1333%)
Scaling by  100
Scaled Norm after poisoning: 127.42451043411938, distance: 128.63982695155104
Total norm for 2 adversaries is: 127.42451043411938. distance: 128.63982695155104
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 24.154482521447363.
Norm before scaling: 23.923794879278272. Distance: 0.47559112295343475
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: 1.0394, Accuracy: 6700/10000 (67.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: 0.0683, Accuracy: 8832/9000 (98.1333%)
Scaling by  100
Scaled Norm after poisoning: 41.395368558402005, distance: 47.55910950054022
Total norm for 2 adversaries is: 41.395368558402005. distance: 47.55910950054022
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 231, local model 39, internal_epoch   1,  Average loss: 0.0214, Accuracy: 140/217 (64.5161%)
___Train Local_ResNet_18,  epoch 231, local model 39, internal_epoch   2,  Average loss: 0.0061, Accuracy: 190/217 (87.5576%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 88, internal_epoch   1,  Average loss: 0.0184, Accuracy: 290/447 (64.8770%)
___Train Local_ResNet_18,  epoch 231, local model 88, internal_epoch   2,  Average loss: 0.0088, Accuracy: 371/447 (82.9978%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 72, internal_epoch   1,  Average loss: 0.0206, Accuracy: 421/618 (68.1230%)
___Train Local_ResNet_18,  epoch 231, local model 72, internal_epoch   2,  Average loss: 0.0142, Accuracy: 427/618 (69.0939%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 83, internal_epoch   1,  Average loss: 0.0127, Accuracy: 277/366 (75.6831%)
___Train Local_ResNet_18,  epoch 231, local model 83, internal_epoch   2,  Average loss: 0.0093, Accuracy: 304/366 (83.0601%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 14, internal_epoch   1,  Average loss: 0.0142, Accuracy: 226/318 (71.0692%)
___Train Local_ResNet_18,  epoch 231, local model 14, internal_epoch   2,  Average loss: 0.0067, Accuracy: 276/318 (86.7925%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 20, internal_epoch   1,  Average loss: 0.0164, Accuracy: 260/362 (71.8232%)
___Train Local_ResNet_18,  epoch 231, local model 20, internal_epoch   2,  Average loss: 0.0076, Accuracy: 320/362 (88.3978%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 75, internal_epoch   1,  Average loss: 0.0214, Accuracy: 427/578 (73.8754%)
___Train Local_ResNet_18,  epoch 231, local model 75, internal_epoch   2,  Average loss: 0.0240, Accuracy: 310/578 (53.6332%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 1, internal_epoch   1,  Average loss: 0.0206, Accuracy: 455/641 (70.9828%)
___Train Local_ResNet_18,  epoch 231, local model 1, internal_epoch   2,  Average loss: 0.0220, Accuracy: 377/641 (58.8144%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 102.76879453659058
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 135.5013952255249 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:232 choose agents : [77, 11, 2, 9, 5, 16, 34, 92, 55, 61]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 23.773726327115035.
Norm before scaling: 23.58698940806006. Distance: 0.6445224414570316
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: 0.9211, Accuracy: 6953/10000 (69.5300%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: 0.0717, Accuracy: 8808/9000 (97.8667%)
Scaling by  100
Scaled Norm after poisoning: 61.59011119388404, distance: 64.4522556759556
Total norm for 2 adversaries is: 61.59011119388404. distance: 64.4522556759556
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   3,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 23.773726327115035.
Norm before scaling: 23.5899598569961. Distance: 1.3012694396400062
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: 1.1054, Accuracy: 6448/10000 (64.4800%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: 0.1128, Accuracy: 8731/9000 (97.0111%)
Scaling by  100
Scaled Norm after poisoning: 128.29070077854436, distance: 130.1269587388601
Total norm for 2 adversaries is: 128.29070077854436. distance: 130.1269587388601
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 232, local model 2, internal_epoch   1,  Average loss: 0.0196, Accuracy: 329/461 (71.3666%)
___Train Local_ResNet_18,  epoch 232, local model 2, internal_epoch   2,  Average loss: 0.0158, Accuracy: 327/461 (70.9328%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 9, internal_epoch   1,  Average loss: 0.0160, Accuracy: 267/368 (72.5543%)
___Train Local_ResNet_18,  epoch 232, local model 9, internal_epoch   2,  Average loss: 0.0072, Accuracy: 306/368 (83.1522%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 5, internal_epoch   1,  Average loss: 0.0111, Accuracy: 287/365 (78.6301%)
___Train Local_ResNet_18,  epoch 232, local model 5, internal_epoch   2,  Average loss: 0.0083, Accuracy: 315/365 (86.3014%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 16, internal_epoch   1,  Average loss: 0.0174, Accuracy: 542/773 (70.1164%)
___Train Local_ResNet_18,  epoch 232, local model 16, internal_epoch   2,  Average loss: 0.0244, Accuracy: 439/773 (56.7917%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 34, internal_epoch   1,  Average loss: 0.0178, Accuracy: 233/349 (66.7622%)
___Train Local_ResNet_18,  epoch 232, local model 34, internal_epoch   2,  Average loss: 0.0140, Accuracy: 267/349 (76.5043%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 92, internal_epoch   1,  Average loss: 0.0185, Accuracy: 541/796 (67.9648%)
___Train Local_ResNet_18,  epoch 232, local model 92, internal_epoch   2,  Average loss: 0.0163, Accuracy: 521/796 (65.4523%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 55, internal_epoch   1,  Average loss: 0.0143, Accuracy: 223/299 (74.5819%)
___Train Local_ResNet_18,  epoch 232, local model 55, internal_epoch   2,  Average loss: 0.0063, Accuracy: 263/299 (87.9599%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 61, internal_epoch   1,  Average loss: 0.0142, Accuracy: 438/590 (74.2373%)
___Train Local_ResNet_18,  epoch 232, local model 61, internal_epoch   2,  Average loss: 0.0183, Accuracy: 373/590 (63.2203%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 98.41482329368591
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 133.81998252868652 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:233 choose agents : [77, 11, 90, 27, 54, 42, 38, 72, 83, 2]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 23.411580720156557.
Norm before scaling: 23.282278972646907. Distance: 1.480527931983116
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: 1.0863, Accuracy: 6514/10000 (65.1400%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: 0.0628, Accuracy: 8837/9000 (98.1889%)
Scaling by  100
Scaled Norm after poisoning: 147.12164131680288, distance: 148.05277775171933
Total norm for 2 adversaries is: 147.12164131680288. distance: 148.05277775171933
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 23.411580720156557.
Norm before scaling: 23.205325284986447. Distance: 1.0262266402193754
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: 1.0711, Accuracy: 6631/10000 (66.3100%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: 0.0731, Accuracy: 8829/9000 (98.1000%)
Scaling by  100
Scaled Norm after poisoning: 100.06348082748521, distance: 102.62265907805157
Total norm for 2 adversaries is: 100.06348082748521. distance: 102.62265907805157
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 233, local model 90, internal_epoch   1,  Average loss: 0.0182, Accuracy: 421/578 (72.8374%)
___Train Local_ResNet_18,  epoch 233, local model 90, internal_epoch   2,  Average loss: 0.0284, Accuracy: 328/578 (56.7474%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   1,  Average loss: 0.0128, Accuracy: 312/397 (78.5894%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   2,  Average loss: 0.0144, Accuracy: 311/397 (78.3375%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 54, internal_epoch   1,  Average loss: 0.0149, Accuracy: 321/440 (72.9545%)
___Train Local_ResNet_18,  epoch 233, local model 54, internal_epoch   2,  Average loss: 0.0122, Accuracy: 336/440 (76.3636%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 42, internal_epoch   1,  Average loss: 0.0179, Accuracy: 140/198 (70.7071%)
___Train Local_ResNet_18,  epoch 233, local model 42, internal_epoch   2,  Average loss: 0.0202, Accuracy: 140/198 (70.7071%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 38, internal_epoch   1,  Average loss: 0.0175, Accuracy: 519/756 (68.6508%)
___Train Local_ResNet_18,  epoch 233, local model 38, internal_epoch   2,  Average loss: 0.0172, Accuracy: 486/756 (64.2857%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 72, internal_epoch   1,  Average loss: 0.0211, Accuracy: 407/618 (65.8576%)
___Train Local_ResNet_18,  epoch 233, local model 72, internal_epoch   2,  Average loss: 0.0158, Accuracy: 413/618 (66.8285%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 83, internal_epoch   1,  Average loss: 0.0118, Accuracy: 286/366 (78.1421%)
___Train Local_ResNet_18,  epoch 233, local model 83, internal_epoch   2,  Average loss: 0.0099, Accuracy: 298/366 (81.4208%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 2, internal_epoch   1,  Average loss: 0.0195, Accuracy: 314/461 (68.1128%)
___Train Local_ResNet_18,  epoch 233, local model 2, internal_epoch   2,  Average loss: 0.0176, Accuracy: 315/461 (68.3297%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 100.07161092758179
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 133.20209407806396 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:234 choose agents : [77, 11, 97, 33, 72, 68, 86, 48, 84, 58]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 23.106799742412136.
Norm before scaling: 22.92948253741444. Distance: 0.7983692222112603
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: 0.9761, Accuracy: 6678/10000 (66.7800%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: 0.0406, Accuracy: 8876/9000 (98.6222%)
Scaling by  100
Scaled Norm after poisoning: 77.63907317577761, distance: 79.83691873907709
Total norm for 2 adversaries is: 77.63907317577761. distance: 79.83691873907709
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 23.106799742412136.
Norm before scaling: 22.900196644301033. Distance: 0.7824707412124601
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: 1.0921, Accuracy: 6439/10000 (64.3900%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: 0.0871, Accuracy: 8796/9000 (97.7333%)
Scaling by  100
Scaled Norm after poisoning: 75.13182425327498, distance: 78.2470733777788
Total norm for 2 adversaries is: 75.13182425327498. distance: 78.2470733777788
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 234, local model 97, internal_epoch   1,  Average loss: 0.0160, Accuracy: 302/418 (72.2488%)
___Train Local_ResNet_18,  epoch 234, local model 97, internal_epoch   2,  Average loss: 0.0155, Accuracy: 304/418 (72.7273%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 33, internal_epoch   1,  Average loss: 0.0221, Accuracy: 325/527 (61.6698%)
___Train Local_ResNet_18,  epoch 234, local model 33, internal_epoch   2,  Average loss: 0.0235, Accuracy: 252/527 (47.8178%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 72, internal_epoch   1,  Average loss: 0.0164, Accuracy: 434/618 (70.2265%)
___Train Local_ResNet_18,  epoch 234, local model 72, internal_epoch   2,  Average loss: 0.0137, Accuracy: 435/618 (70.3883%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 68, internal_epoch   1,  Average loss: 0.0162, Accuracy: 296/416 (71.1538%)
___Train Local_ResNet_18,  epoch 234, local model 68, internal_epoch   2,  Average loss: 0.0125, Accuracy: 322/416 (77.4038%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 86, internal_epoch   1,  Average loss: 0.0199, Accuracy: 150/212 (70.7547%)
___Train Local_ResNet_18,  epoch 234, local model 86, internal_epoch   2,  Average loss: 0.0154, Accuracy: 162/212 (76.4151%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 48, internal_epoch   1,  Average loss: 0.0191, Accuracy: 246/378 (65.0794%)
___Train Local_ResNet_18,  epoch 234, local model 48, internal_epoch   2,  Average loss: 0.0136, Accuracy: 266/378 (70.3704%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 84, internal_epoch   1,  Average loss: 0.0178, Accuracy: 676/1053 (64.1975%)
___Train Local_ResNet_18,  epoch 234, local model 84, internal_epoch   2,  Average loss: 0.0170, Accuracy: 693/1053 (65.8120%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: 15.4995, Accuracy: 1084/10000 (10.8400%)
___Train Local_ResNet_18,  epoch 234, local model 58, internal_epoch   1,  Average loss: 0.0175, Accuracy: 157/234 (67.0940%)
___Train Local_ResNet_18,  epoch 234, local model 58, internal_epoch   2,  Average loss: 0.0052, Accuracy: 215/234 (91.8803%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 102.80220437049866
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 138.50958919525146 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:235 choose agents : [77, 11, 39, 76, 74, 65, 9, 38, 70, 42]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 22.73785948382675.
Norm before scaling: 22.5701522742236. Distance: 0.7780681282922799
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: 1.0273, Accuracy: 6648/10000 (66.4800%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: 0.0381, Accuracy: 8888/9000 (98.7556%)
Scaling by  100
Scaled Norm after poisoning: 75.83218648972546, distance: 77.80681455132962
Total norm for 2 adversaries is: 75.83218648972546. distance: 77.80681455132962
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   1,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 22.73785948382675.
Norm before scaling: 22.53393775686083. Distance: 0.8463898440935251
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: 1.0632, Accuracy: 6597/10000 (65.9700%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: 0.0990, Accuracy: 8766/9000 (97.4000%)
Scaling by  100
Scaled Norm after poisoning: 81.7675971360676, distance: 84.63897941219223
Total norm for 2 adversaries is: 81.7675971360676. distance: 84.63897941219223
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 235, local model 39, internal_epoch   1,  Average loss: 0.0182, Accuracy: 148/217 (68.2028%)
___Train Local_ResNet_18,  epoch 235, local model 39, internal_epoch   2,  Average loss: 0.0059, Accuracy: 196/217 (90.3226%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 76, internal_epoch   1,  Average loss: 0.0595, Accuracy: 35/65 (53.8462%)
___Train Local_ResNet_18,  epoch 235, local model 76, internal_epoch   2,  Average loss: 0.0465, Accuracy: 62/65 (95.3846%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 74, internal_epoch   1,  Average loss: 0.0132, Accuracy: 355/469 (75.6930%)
___Train Local_ResNet_18,  epoch 235, local model 74, internal_epoch   2,  Average loss: 0.0113, Accuracy: 362/469 (77.1855%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 65, internal_epoch   1,  Average loss: 0.0150, Accuracy: 224/314 (71.3376%)
___Train Local_ResNet_18,  epoch 235, local model 65, internal_epoch   2,  Average loss: 0.0089, Accuracy: 262/314 (83.4395%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 9, internal_epoch   1,  Average loss: 0.0111, Accuracy: 289/368 (78.5326%)
___Train Local_ResNet_18,  epoch 235, local model 9, internal_epoch   2,  Average loss: 0.0084, Accuracy: 313/368 (85.0543%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 38, internal_epoch   1,  Average loss: 0.0181, Accuracy: 513/756 (67.8571%)
___Train Local_ResNet_18,  epoch 235, local model 38, internal_epoch   2,  Average loss: 0.0179, Accuracy: 463/756 (61.2434%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 70, internal_epoch   1,  Average loss: 0.0145, Accuracy: 446/610 (73.1148%)
___Train Local_ResNet_18,  epoch 235, local model 70, internal_epoch   2,  Average loss: 0.0118, Accuracy: 465/610 (76.2295%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 42, internal_epoch   1,  Average loss: 0.0145, Accuracy: 157/198 (79.2929%)
___Train Local_ResNet_18,  epoch 235, local model 42, internal_epoch   2,  Average loss: 0.0109, Accuracy: 172/198 (86.8687%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 105.80692720413208
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 139.50391721725464 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:236 choose agents : [77, 11, 44, 94, 52, 37, 65, 80, 20, 78]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 22.373573982360096.
Norm before scaling: 22.199695426982355. Distance: 0.6245330496717477
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: 0.9079, Accuracy: 6988/10000 (69.8800%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: 0.0459, Accuracy: 8864/9000 (98.4889%)
Scaling by  100
Scaled Norm after poisoning: 59.89121404288988, distance: 62.453302867522545
Total norm for 2 adversaries is: 59.89121404288988. distance: 62.453302867522545
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   3,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 22.373573982360096.
Norm before scaling: 22.16705842018526. Distance: 0.5508800715539134
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: 1.0328, Accuracy: 6666/10000 (66.6600%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: 0.0750, Accuracy: 8824/9000 (98.0444%)
Scaling by  100
Scaled Norm after poisoning: 50.843680374107215, distance: 55.08800221719109
Total norm for 2 adversaries is: 50.843680374107215. distance: 55.08800221719109
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 236, local model 44, internal_epoch   1,  Average loss: 0.0145, Accuracy: 309/436 (70.8716%)
___Train Local_ResNet_18,  epoch 236, local model 44, internal_epoch   2,  Average loss: 0.0117, Accuracy: 336/436 (77.0642%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 94, internal_epoch   1,  Average loss: 0.0151, Accuracy: 158/203 (77.8325%)
___Train Local_ResNet_18,  epoch 236, local model 94, internal_epoch   2,  Average loss: 0.0106, Accuracy: 173/203 (85.2217%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 52, internal_epoch   1,  Average loss: 0.0206, Accuracy: 145/214 (67.7570%)
___Train Local_ResNet_18,  epoch 236, local model 52, internal_epoch   2,  Average loss: 0.0168, Accuracy: 166/214 (77.5701%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 37, internal_epoch   1,  Average loss: 0.0221, Accuracy: 452/725 (62.3448%)
___Train Local_ResNet_18,  epoch 236, local model 37, internal_epoch   2,  Average loss: 0.0210, Accuracy: 377/725 (52.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 65, internal_epoch   1,  Average loss: 0.0164, Accuracy: 233/314 (74.2038%)
___Train Local_ResNet_18,  epoch 236, local model 65, internal_epoch   2,  Average loss: 0.0081, Accuracy: 266/314 (84.7134%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 80, internal_epoch   1,  Average loss: 0.0140, Accuracy: 275/363 (75.7576%)
___Train Local_ResNet_18,  epoch 236, local model 80, internal_epoch   2,  Average loss: 0.0125, Accuracy: 295/363 (81.2672%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 20, internal_epoch   1,  Average loss: 0.0154, Accuracy: 262/362 (72.3757%)
___Train Local_ResNet_18,  epoch 236, local model 20, internal_epoch   2,  Average loss: 0.0129, Accuracy: 284/362 (78.4530%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 78, internal_epoch   1,  Average loss: 0.0123, Accuracy: 190/255 (74.5098%)
___Train Local_ResNet_18,  epoch 236, local model 78, internal_epoch   2,  Average loss: 0.0044, Accuracy: 232/255 (90.9804%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 99.48743653297424
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 133.22180318832397 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:237 choose agents : [77, 11, 99, 89, 22, 63, 67, 42, 36, 91]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   3,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 21.99399623445744.
Norm before scaling: 21.828193506066444. Distance: 0.8519593110487423
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: 0.9376, Accuracy: 6985/10000 (69.8500%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: 0.0447, Accuracy: 8876/9000 (98.6222%)
Scaling by  100
Scaled Norm after poisoning: 83.32416225576469, distance: 85.19593685293918
Total norm for 2 adversaries is: 83.32416225576469. distance: 85.19593685293918
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   2,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 21.99399623445744.
Norm before scaling: 21.792573500291905. Distance: 0.6401629060674343
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: 1.0376, Accuracy: 6646/10000 (66.4600%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: 0.0607, Accuracy: 8865/9000 (98.5000%)
Scaling by  100
Scaled Norm after poisoning: 60.48867565761793, distance: 64.01627905755691
Total norm for 2 adversaries is: 60.48867565761793. distance: 64.01627905755691
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 237, local model 99, internal_epoch   1,  Average loss: 0.0171, Accuracy: 300/391 (76.7263%)
___Train Local_ResNet_18,  epoch 237, local model 99, internal_epoch   2,  Average loss: 0.0408, Accuracy: 148/391 (37.8517%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 89, internal_epoch   1,  Average loss: 0.0175, Accuracy: 293/413 (70.9443%)
___Train Local_ResNet_18,  epoch 237, local model 89, internal_epoch   2,  Average loss: 0.0124, Accuracy: 318/413 (76.9976%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 22, internal_epoch   1,  Average loss: 0.0156, Accuracy: 364/494 (73.6842%)
___Train Local_ResNet_18,  epoch 237, local model 22, internal_epoch   2,  Average loss: 0.0176, Accuracy: 326/494 (65.9919%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 63, internal_epoch   1,  Average loss: 0.0163, Accuracy: 507/752 (67.4202%)
___Train Local_ResNet_18,  epoch 237, local model 63, internal_epoch   2,  Average loss: 0.0166, Accuracy: 481/752 (63.9628%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 67, internal_epoch   1,  Average loss: 0.0193, Accuracy: 520/842 (61.7577%)
___Train Local_ResNet_18,  epoch 237, local model 67, internal_epoch   2,  Average loss: 0.0211, Accuracy: 441/842 (52.3753%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 42, internal_epoch   1,  Average loss: 0.0089, Accuracy: 169/198 (85.3535%)
___Train Local_ResNet_18,  epoch 237, local model 42, internal_epoch   2,  Average loss: 0.0093, Accuracy: 173/198 (87.3737%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 36, internal_epoch   1,  Average loss: 0.0244, Accuracy: 484/849 (57.0082%)
___Train Local_ResNet_18,  epoch 237, local model 36, internal_epoch   2,  Average loss: 0.0261, Accuracy: 377/849 (44.4052%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 91, internal_epoch   1,  Average loss: 0.0112, Accuracy: 183/234 (78.2051%)
___Train Local_ResNet_18,  epoch 237, local model 91, internal_epoch   2,  Average loss: 0.0048, Accuracy: 217/234 (92.7350%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 97.7903082370758
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 131.6142339706421 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:238 choose agents : [77, 11, 2, 16, 34, 25, 93, 47, 46, 26]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 21.633304126094778.
Norm before scaling: 21.475547902552886. Distance: 0.8207791045876347
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: 0.9626, Accuracy: 6871/10000 (68.7100%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: 0.0545, Accuracy: 8817/9000 (97.9667%)
Scaling by  100
Scaled Norm after poisoning: 80.35753236512741, distance: 82.0779034001387
Total norm for 2 adversaries is: 80.35753236512741. distance: 82.0779034001387
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   1,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 21.633304126094778.
Norm before scaling: 21.43786086954828. Distance: 0.6765601019343281
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: 1.0311, Accuracy: 6677/10000 (66.7700%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: 0.0578, Accuracy: 8846/9000 (98.2889%)
Scaling by  100
Scaled Norm after poisoning: 64.48063238775656, distance: 67.65600822705069
Total norm for 2 adversaries is: 64.48063238775656. distance: 67.65600822705069
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 238, local model 2, internal_epoch   1,  Average loss: 0.0207, Accuracy: 323/461 (70.0651%)
___Train Local_ResNet_18,  epoch 238, local model 2, internal_epoch   2,  Average loss: 0.0206, Accuracy: 304/461 (65.9436%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 16, internal_epoch   1,  Average loss: 0.0193, Accuracy: 495/773 (64.0362%)
___Train Local_ResNet_18,  epoch 238, local model 16, internal_epoch   2,  Average loss: 0.0206, Accuracy: 451/773 (58.3441%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 34, internal_epoch   1,  Average loss: 0.0195, Accuracy: 236/349 (67.6218%)
___Train Local_ResNet_18,  epoch 238, local model 34, internal_epoch   2,  Average loss: 0.0200, Accuracy: 242/349 (69.3410%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 25, internal_epoch   1,  Average loss: 0.0138, Accuracy: 418/545 (76.6972%)
___Train Local_ResNet_18,  epoch 238, local model 25, internal_epoch   2,  Average loss: 0.0137, Accuracy: 403/545 (73.9450%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 93, internal_epoch   1,  Average loss: 0.0163, Accuracy: 421/584 (72.0890%)
___Train Local_ResNet_18,  epoch 238, local model 93, internal_epoch   2,  Average loss: 0.0282, Accuracy: 287/584 (49.1438%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 47, internal_epoch   1,  Average loss: 0.0185, Accuracy: 467/654 (71.4067%)
___Train Local_ResNet_18,  epoch 238, local model 47, internal_epoch   2,  Average loss: 0.0185, Accuracy: 427/654 (65.2905%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 46, internal_epoch   1,  Average loss: 0.0178, Accuracy: 416/601 (69.2180%)
___Train Local_ResNet_18,  epoch 238, local model 46, internal_epoch   2,  Average loss: 0.0184, Accuracy: 379/601 (63.0616%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 26, internal_epoch   1,  Average loss: 0.0187, Accuracy: 320/468 (68.3761%)
___Train Local_ResNet_18,  epoch 238, local model 26, internal_epoch   2,  Average loss: 0.0221, Accuracy: 272/468 (58.1197%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 99.9426019191742
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 133.63158774375916 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:239 choose agents : [77, 11, 47, 72, 92, 28, 74, 68, 97, 10]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 21.29286591598265.
Norm before scaling: 21.15995397782684. Distance: 0.8355388582120559
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 82.46553494111949, distance: 83.55388067925092
Total norm for 2 adversaries is: 82.46553494111949. distance: 83.55388067925092
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   3,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 21.29286591598265.
Norm before scaling: 21.110905928479095. Distance: 0.6511653375783726
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: 0.9878, Accuracy: 6809/10000 (68.0900%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: 0.0711, Accuracy: 8843/9000 (98.2556%)
Scaling by  100
Scaled Norm after poisoning: 62.28611841233165, distance: 65.11652341068087
Total norm for 2 adversaries is: 62.28611841233165. distance: 65.11652341068087
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 239, local model 47, internal_epoch   1,  Average loss: 0.0170, Accuracy: 464/654 (70.9480%)
___Train Local_ResNet_18,  epoch 239, local model 47, internal_epoch   2,  Average loss: 0.0189, Accuracy: 416/654 (63.6086%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 72, internal_epoch   1,  Average loss: 0.0192, Accuracy: 428/618 (69.2557%)
___Train Local_ResNet_18,  epoch 239, local model 72, internal_epoch   2,  Average loss: 0.0177, Accuracy: 375/618 (60.6796%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 92, internal_epoch   1,  Average loss: 0.0183, Accuracy: 533/796 (66.9598%)
___Train Local_ResNet_18,  epoch 239, local model 92, internal_epoch   2,  Average loss: 0.0177, Accuracy: 486/796 (61.0553%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 28, internal_epoch   1,  Average loss: 0.0122, Accuracy: 326/423 (77.0686%)
___Train Local_ResNet_18,  epoch 239, local model 28, internal_epoch   2,  Average loss: 0.0150, Accuracy: 299/423 (70.6856%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 74, internal_epoch   1,  Average loss: 0.0162, Accuracy: 345/469 (73.5608%)
___Train Local_ResNet_18,  epoch 239, local model 74, internal_epoch   2,  Average loss: 0.0148, Accuracy: 331/469 (70.5757%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 68, internal_epoch   1,  Average loss: 0.0158, Accuracy: 292/416 (70.1923%)
___Train Local_ResNet_18,  epoch 239, local model 68, internal_epoch   2,  Average loss: 0.0177, Accuracy: 277/416 (66.5865%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 97, internal_epoch   1,  Average loss: 0.0121, Accuracy: 334/418 (79.9043%)
___Train Local_ResNet_18,  epoch 239, local model 97, internal_epoch   2,  Average loss: 0.0135, Accuracy: 315/418 (75.3589%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 10, internal_epoch   1,  Average loss: 0.0165, Accuracy: 572/752 (76.0638%)
___Train Local_ResNet_18,  epoch 239, local model 10, internal_epoch   2,  Average loss: 0.0121, Accuracy: 563/752 (74.8670%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 101.62550044059753
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 135.01295948028564 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:240 choose agents : [77, 11, 56, 63, 73, 98, 46, 62, 16, 95]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   1,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 20.99492111550992.
Norm before scaling: 20.86429746460221. Distance: 1.1856567734084025
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: 1.2770, Accuracy: 5867/10000 (58.6700%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: 0.0139, Accuracy: 8963/9000 (99.5889%)
Scaling by  100
Scaled Norm after poisoning: 117.52122896656799, distance: 118.5656834377574
Total norm for 2 adversaries is: 117.52122896656799. distance: 118.5656834377574
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   2,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 20.99492111550992.
Norm before scaling: 20.811046835999296. Distance: 0.7190377447251194
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: 1.0785, Accuracy: 6554/10000 (65.5400%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: 0.1190, Accuracy: 8735/9000 (97.0556%)
Scaling by  100
Scaled Norm after poisoning: 69.21363200604885, distance: 71.90376462458346
Total norm for 2 adversaries is: 69.21363200604885. distance: 71.90376462458346
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 240, local model 56, internal_epoch   1,  Average loss: 0.0172, Accuracy: 504/743 (67.8331%)
___Train Local_ResNet_18,  epoch 240, local model 56, internal_epoch   2,  Average loss: 0.0226, Accuracy: 391/743 (52.6245%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 63, internal_epoch   1,  Average loss: 0.0164, Accuracy: 516/752 (68.6170%)
___Train Local_ResNet_18,  epoch 240, local model 63, internal_epoch   2,  Average loss: 0.0200, Accuracy: 448/752 (59.5745%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 73, internal_epoch   1,  Average loss: 0.0213, Accuracy: 339/500 (67.8000%)
___Train Local_ResNet_18,  epoch 240, local model 73, internal_epoch   2,  Average loss: 0.0142, Accuracy: 359/500 (71.8000%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 98, internal_epoch   1,  Average loss: 0.0200, Accuracy: 517/802 (64.4638%)
___Train Local_ResNet_18,  epoch 240, local model 98, internal_epoch   2,  Average loss: 0.0210, Accuracy: 412/802 (51.3716%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 46, internal_epoch   1,  Average loss: 0.0144, Accuracy: 442/601 (73.5441%)
___Train Local_ResNet_18,  epoch 240, local model 46, internal_epoch   2,  Average loss: 0.0208, Accuracy: 361/601 (60.0666%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 62, internal_epoch   1,  Average loss: 0.0120, Accuracy: 275/358 (76.8156%)
___Train Local_ResNet_18,  epoch 240, local model 62, internal_epoch   2,  Average loss: 0.0102, Accuracy: 278/358 (77.6536%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 16, internal_epoch   1,  Average loss: 0.0214, Accuracy: 507/773 (65.5886%)
___Train Local_ResNet_18,  epoch 240, local model 16, internal_epoch   2,  Average loss: 0.0246, Accuracy: 420/773 (54.3338%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 95, internal_epoch   1,  Average loss: 0.0202, Accuracy: 378/569 (66.4323%)
___Train Local_ResNet_18,  epoch 240, local model 95, internal_epoch   2,  Average loss: 0.0198, Accuracy: 337/569 (59.2267%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 144.8986051082611
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 194.41750288009644 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:241 choose agents : [77, 11, 50, 23, 10, 32, 26, 47, 54, 46]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   1,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 20.69160056603585.
Norm before scaling: 20.600872191696006. Distance: 1.3943529202001037
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 138.9290230207497, distance: 139.4352868493123
Total norm for 2 adversaries is: 138.9290230207497. distance: 139.4352868493123
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 20.69160056603585.
Norm before scaling: 20.535707962319485. Distance: 0.9706550141046008
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: 1.0707, Accuracy: 6695/10000 (66.9500%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: 0.0947, Accuracy: 8790/9000 (97.6667%)
Scaling by  100
Scaled Norm after poisoning: 95.46163025824826, distance: 97.06549818292801
Total norm for 2 adversaries is: 95.46163025824826. distance: 97.06549818292801
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 241, local model 50, internal_epoch   1,  Average loss: 0.0147, Accuracy: 300/401 (74.8130%)
___Train Local_ResNet_18,  epoch 241, local model 50, internal_epoch   2,  Average loss: 0.0192, Accuracy: 262/401 (65.3367%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 23, internal_epoch   1,  Average loss: 0.0189, Accuracy: 155/248 (62.5000%)
___Train Local_ResNet_18,  epoch 241, local model 23, internal_epoch   2,  Average loss: 0.0074, Accuracy: 208/248 (83.8710%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 10, internal_epoch   1,  Average loss: 0.0134, Accuracy: 590/752 (78.4574%)
___Train Local_ResNet_18,  epoch 241, local model 10, internal_epoch   2,  Average loss: 0.0111, Accuracy: 576/752 (76.5957%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 32, internal_epoch   1,  Average loss: 0.0172, Accuracy: 548/824 (66.5049%)
___Train Local_ResNet_18,  epoch 241, local model 32, internal_epoch   2,  Average loss: 0.0168, Accuracy: 534/824 (64.8058%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 26, internal_epoch   1,  Average loss: 0.0193, Accuracy: 299/468 (63.8889%)
___Train Local_ResNet_18,  epoch 241, local model 26, internal_epoch   2,  Average loss: 0.0201, Accuracy: 285/468 (60.8974%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 47, internal_epoch   1,  Average loss: 0.0168, Accuracy: 472/654 (72.1713%)
___Train Local_ResNet_18,  epoch 241, local model 47, internal_epoch   2,  Average loss: 0.0194, Accuracy: 402/654 (61.4679%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 54, internal_epoch   1,  Average loss: 0.0148, Accuracy: 327/440 (74.3182%)
___Train Local_ResNet_18,  epoch 241, local model 54, internal_epoch   2,  Average loss: 0.0137, Accuracy: 314/440 (71.3636%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 46, internal_epoch   1,  Average loss: 0.0161, Accuracy: 423/601 (70.3827%)
___Train Local_ResNet_18,  epoch 241, local model 46, internal_epoch   2,  Average loss: 0.0203, Accuracy: 355/601 (59.0682%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 150.23907041549683
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 200.74946641921997 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:242 choose agents : [77, 11, 14, 43, 63, 35, 36, 23, 97, 54]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   1,  Average loss: 0.0008, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   2,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 20.47228470195666.
Norm before scaling: 20.39249871659307. Distance: 1.5096670022314003
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: 1.2389, Accuracy: 6020/10000 (60.2000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: 0.0490, Accuracy: 8860/9000 (98.4444%)
Scaling by  100
Scaled Norm after poisoning: 150.51945861540628, distance: 150.9666897240911
Total norm for 2 adversaries is: 150.51945861540628. distance: 150.9666897240911
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   3,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 20.47228470195666.
Norm before scaling: 20.3562779446001. Distance: 1.4614635479218416
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: 1.1948, Accuracy: 6228/10000 (62.2800%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: 0.0807, Accuracy: 8800/9000 (97.7778%)
Scaling by  100
Scaled Norm after poisoning: 145.22616386820593, distance: 146.14636418886718
Total norm for 2 adversaries is: 145.22616386820593. distance: 146.14636418886718
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 242, local model 14, internal_epoch   1,  Average loss: 0.0138, Accuracy: 232/318 (72.9560%)
___Train Local_ResNet_18,  epoch 242, local model 14, internal_epoch   2,  Average loss: 0.0099, Accuracy: 265/318 (83.3333%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 43, internal_epoch   1,  Average loss: 0.0145, Accuracy: 257/345 (74.4928%)
___Train Local_ResNet_18,  epoch 242, local model 43, internal_epoch   2,  Average loss: 0.0186, Accuracy: 232/345 (67.2464%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 63, internal_epoch   1,  Average loss: 0.0159, Accuracy: 520/752 (69.1489%)
___Train Local_ResNet_18,  epoch 242, local model 63, internal_epoch   2,  Average loss: 0.0211, Accuracy: 408/752 (54.2553%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 35, internal_epoch   1,  Average loss: 0.0171, Accuracy: 285/419 (68.0191%)
___Train Local_ResNet_18,  epoch 242, local model 35, internal_epoch   2,  Average loss: 0.0116, Accuracy: 322/419 (76.8496%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 36, internal_epoch   1,  Average loss: 0.0230, Accuracy: 476/849 (56.0660%)
___Train Local_ResNet_18,  epoch 242, local model 36, internal_epoch   2,  Average loss: 0.0248, Accuracy: 404/849 (47.5854%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 23, internal_epoch   1,  Average loss: 0.0169, Accuracy: 166/248 (66.9355%)
___Train Local_ResNet_18,  epoch 242, local model 23, internal_epoch   2,  Average loss: 0.0083, Accuracy: 201/248 (81.0484%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 97, internal_epoch   1,  Average loss: 0.0150, Accuracy: 324/418 (77.5120%)
___Train Local_ResNet_18,  epoch 242, local model 97, internal_epoch   2,  Average loss: 0.0146, Accuracy: 308/418 (73.6842%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 54, internal_epoch   1,  Average loss: 0.0159, Accuracy: 316/440 (71.8182%)
___Train Local_ResNet_18,  epoch 242, local model 54, internal_epoch   2,  Average loss: 0.0139, Accuracy: 321/440 (72.9545%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 147.927720785141
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 197.13268399238586 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:243 choose agents : [77, 11, 19, 0, 84, 35, 34, 48, 75, 61]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 20.304139655700833.
Norm before scaling: 20.229575323605722. Distance: 1.377646500262113
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 137.4748130340609, distance: 137.76465297519172
Total norm for 2 adversaries is: 137.4748130340609. distance: 137.76465297519172
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   1,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 20.304139655700833.
Norm before scaling: 20.163356456788527. Distance: 1.0234114083029031
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 101.05204897260866, distance: 102.34112592055796
Total norm for 2 adversaries is: 101.05204897260866. distance: 102.34112592055796
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 243, local model 19, internal_epoch   1,  Average loss: 0.0245, Accuracy: 105/173 (60.6936%)
___Train Local_ResNet_18,  epoch 243, local model 19, internal_epoch   2,  Average loss: 0.0081, Accuracy: 148/173 (85.5491%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 0, internal_epoch   1,  Average loss: 0.0222, Accuracy: 218/367 (59.4005%)
___Train Local_ResNet_18,  epoch 243, local model 0, internal_epoch   2,  Average loss: 0.0185, Accuracy: 222/367 (60.4905%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 84, internal_epoch   1,  Average loss: 0.0188, Accuracy: 681/1053 (64.6724%)
___Train Local_ResNet_18,  epoch 243, local model 84, internal_epoch   2,  Average loss: 0.0163, Accuracy: 714/1053 (67.8063%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 35, internal_epoch   1,  Average loss: 0.0204, Accuracy: 269/419 (64.2005%)
___Train Local_ResNet_18,  epoch 243, local model 35, internal_epoch   2,  Average loss: 0.0168, Accuracy: 267/419 (63.7232%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 34, internal_epoch   1,  Average loss: 0.0172, Accuracy: 247/349 (70.7736%)
___Train Local_ResNet_18,  epoch 243, local model 34, internal_epoch   2,  Average loss: 0.0223, Accuracy: 241/349 (69.0544%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 48, internal_epoch   1,  Average loss: 0.0219, Accuracy: 217/378 (57.4074%)
___Train Local_ResNet_18,  epoch 243, local model 48, internal_epoch   2,  Average loss: 0.0148, Accuracy: 258/378 (68.2540%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 75, internal_epoch   1,  Average loss: 0.0211, Accuracy: 405/578 (70.0692%)
___Train Local_ResNet_18,  epoch 243, local model 75, internal_epoch   2,  Average loss: 0.0281, Accuracy: 282/578 (48.7889%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 61, internal_epoch   1,  Average loss: 0.0212, Accuracy: 380/590 (64.4068%)
___Train Local_ResNet_18,  epoch 243, local model 61, internal_epoch   2,  Average loss: 0.0235, Accuracy: 285/590 (48.3051%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 154.5051691532135
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 211.71719098091125 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:244 choose agents : [77, 11, 35, 81, 4, 1, 0, 89, 20, 13]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   1,  Average loss: 0.0013, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   2,  Average loss: 0.0009, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   3,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 20.1149058172082.
Norm before scaling: 20.093672543104987. Distance: 1.8891979538130477
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 188.82004081267434, distance: 188.91979118133705
Total norm for 2 adversaries is: 188.82004081267434. distance: 188.91979118133705
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 20.1149058172082.
Norm before scaling: 19.990112912582873. Distance: 1.4190270544084733
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: 1.2490, Accuracy: 6049/10000 (60.4900%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: 0.0908, Accuracy: 8796/9000 (97.7333%)
Scaling by  100
Scaled Norm after poisoning: 140.85147041742235, distance: 141.90272994422975
Total norm for 2 adversaries is: 140.85147041742235. distance: 141.90272994422975
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 244, local model 35, internal_epoch   1,  Average loss: 0.0194, Accuracy: 293/419 (69.9284%)
___Train Local_ResNet_18,  epoch 244, local model 35, internal_epoch   2,  Average loss: 0.0182, Accuracy: 272/419 (64.9165%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 81, internal_epoch   1,  Average loss: 0.0193, Accuracy: 647/1034 (62.5725%)
___Train Local_ResNet_18,  epoch 244, local model 81, internal_epoch   2,  Average loss: 0.0191, Accuracy: 629/1034 (60.8317%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 4, internal_epoch   1,  Average loss: 0.0176, Accuracy: 380/557 (68.2226%)
___Train Local_ResNet_18,  epoch 244, local model 4, internal_epoch   2,  Average loss: 0.0172, Accuracy: 333/557 (59.7846%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 1, internal_epoch   1,  Average loss: 0.0172, Accuracy: 440/641 (68.6427%)
___Train Local_ResNet_18,  epoch 244, local model 1, internal_epoch   2,  Average loss: 0.0185, Accuracy: 403/641 (62.8705%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 0, internal_epoch   1,  Average loss: 0.0195, Accuracy: 225/367 (61.3079%)
___Train Local_ResNet_18,  epoch 244, local model 0, internal_epoch   2,  Average loss: 0.0157, Accuracy: 246/367 (67.0300%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 89, internal_epoch   1,  Average loss: 0.0199, Accuracy: 272/413 (65.8596%)
___Train Local_ResNet_18,  epoch 244, local model 89, internal_epoch   2,  Average loss: 0.0147, Accuracy: 291/413 (70.4600%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 20, internal_epoch   1,  Average loss: 0.0158, Accuracy: 261/362 (72.0994%)
___Train Local_ResNet_18,  epoch 244, local model 20, internal_epoch   2,  Average loss: 0.0140, Accuracy: 266/362 (73.4807%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 13, internal_epoch   1,  Average loss: 0.0174, Accuracy: 439/620 (70.8065%)
___Train Local_ResNet_18,  epoch 244, local model 13, internal_epoch   2,  Average loss: 0.0162, Accuracy: 403/620 (65.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 153.5751655101776
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 202.85818576812744 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:245 choose agents : [77, 11, 68, 52, 55, 39, 27, 83, 57, 87]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   1,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 19.9907311896312.
Norm before scaling: 19.911600444851. Distance: 1.4560724534934337
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 145.16656650637572, distance: 145.60724811328933
Total norm for 2 adversaries is: 145.16656650637572. distance: 145.60724811328933
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   1,  Average loss: 0.0006, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 19.9907311896312.
Norm before scaling: 19.924739377412507. Distance: 1.7147605371814683
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 171.0152531117473, distance: 171.47606543079124
Total norm for 2 adversaries is: 171.0152531117473. distance: 171.47606543079124
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 245, local model 68, internal_epoch   1,  Average loss: 0.0236, Accuracy: 247/416 (59.3750%)
___Train Local_ResNet_18,  epoch 245, local model 68, internal_epoch   2,  Average loss: 0.0187, Accuracy: 272/416 (65.3846%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 52, internal_epoch   1,  Average loss: 0.0256, Accuracy: 134/214 (62.6168%)
___Train Local_ResNet_18,  epoch 245, local model 52, internal_epoch   2,  Average loss: 0.0192, Accuracy: 168/214 (78.5047%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 55, internal_epoch   1,  Average loss: 0.0206, Accuracy: 203/299 (67.8930%)
___Train Local_ResNet_18,  epoch 245, local model 55, internal_epoch   2,  Average loss: 0.0115, Accuracy: 246/299 (82.2742%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 39, internal_epoch   1,  Average loss: 0.0271, Accuracy: 126/217 (58.0645%)
___Train Local_ResNet_18,  epoch 245, local model 39, internal_epoch   2,  Average loss: 0.0120, Accuracy: 171/217 (78.8018%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 27, internal_epoch   1,  Average loss: 0.0202, Accuracy: 286/397 (72.0403%)
___Train Local_ResNet_18,  epoch 245, local model 27, internal_epoch   2,  Average loss: 0.0229, Accuracy: 237/397 (59.6977%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 83, internal_epoch   1,  Average loss: 0.0209, Accuracy: 219/366 (59.8361%)
___Train Local_ResNet_18,  epoch 245, local model 83, internal_epoch   2,  Average loss: 0.0174, Accuracy: 237/366 (64.7541%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 57, internal_epoch   1,  Average loss: 0.0238, Accuracy: 177/290 (61.0345%)
___Train Local_ResNet_18,  epoch 245, local model 57, internal_epoch   2,  Average loss: 0.0201, Accuracy: 192/290 (66.2069%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 87, internal_epoch   1,  Average loss: 0.0223, Accuracy: 254/397 (63.9798%)
___Train Local_ResNet_18,  epoch 245, local model 87, internal_epoch   2,  Average loss: 0.0194, Accuracy: 273/397 (68.7657%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 145.27295470237732
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 194.70570492744446 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:246 choose agents : [77, 11, 30, 57, 99, 40, 80, 66, 35, 45]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   1,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 19.87432745029533.
Norm before scaling: 19.85893473523591. Distance: 1.9360321391251711
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 193.49733525296932, distance: 193.6032206117708
Total norm for 2 adversaries is: 193.49733525296932. distance: 193.6032206117708
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   1,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 19.87432745029533.
Norm before scaling: 19.81205869357686. Distance: 1.8922802323567047
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: 1.2307, Accuracy: 6155/10000 (61.5500%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: 0.0724, Accuracy: 8830/9000 (98.1111%)
Scaling by  100
Scaled Norm after poisoning: 188.6717760092908, distance: 189.22801639160096
Total norm for 2 adversaries is: 188.6717760092908. distance: 189.22801639160096
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 246, local model 30, internal_epoch   1,  Average loss: 0.0230, Accuracy: 189/337 (56.0831%)
___Train Local_ResNet_18,  epoch 246, local model 30, internal_epoch   2,  Average loss: 0.0215, Accuracy: 194/337 (57.5668%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 57, internal_epoch   1,  Average loss: 0.0174, Accuracy: 196/290 (67.5862%)
___Train Local_ResNet_18,  epoch 246, local model 57, internal_epoch   2,  Average loss: 0.0160, Accuracy: 208/290 (71.7241%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 99, internal_epoch   1,  Average loss: 0.0261, Accuracy: 258/391 (65.9847%)
___Train Local_ResNet_18,  epoch 246, local model 99, internal_epoch   2,  Average loss: 0.0349, Accuracy: 156/391 (39.8977%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 40, internal_epoch   1,  Average loss: 0.0213, Accuracy: 404/652 (61.9632%)
___Train Local_ResNet_18,  epoch 246, local model 40, internal_epoch   2,  Average loss: 0.0179, Accuracy: 419/652 (64.2638%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 80, internal_epoch   1,  Average loss: 0.0164, Accuracy: 264/363 (72.7273%)
___Train Local_ResNet_18,  epoch 246, local model 80, internal_epoch   2,  Average loss: 0.0165, Accuracy: 269/363 (74.1047%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 66, internal_epoch   1,  Average loss: 0.0141, Accuracy: 432/555 (77.8378%)
___Train Local_ResNet_18,  epoch 246, local model 66, internal_epoch   2,  Average loss: 0.0136, Accuracy: 407/555 (73.3333%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 35, internal_epoch   1,  Average loss: 0.0228, Accuracy: 259/419 (61.8138%)
___Train Local_ResNet_18,  epoch 246, local model 35, internal_epoch   2,  Average loss: 0.0145, Accuracy: 294/419 (70.1671%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 45, internal_epoch   1,  Average loss: 0.0229, Accuracy: 317/529 (59.9244%)
___Train Local_ResNet_18,  epoch 246, local model 45, internal_epoch   2,  Average loss: 0.0221, Accuracy: 295/529 (55.7656%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 148.43296122550964
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 199.1254689693451 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:247 choose agents : [77, 11, 71, 15, 88, 9, 69, 75, 67, 27]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   1,  Average loss: 0.0009, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   5,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 19.820707432259688.
Norm before scaling: 19.923766760670375. Distance: 2.775317605203667
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 277.58983624675454, distance: 277.5317830897932
Total norm for 2 adversaries is: 277.58983624675454. distance: 277.5317830897932
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   1,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   2,  Average loss: 0.0010, Accuracy: 537/546 (98.3516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   3,  Average loss: 0.0021, Accuracy: 524/546 (95.9707%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   4,  Average loss: 0.0044, Accuracy: 502/546 (91.9414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   5,  Average loss: 0.0084, Accuracy: 462/546 (84.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   6,  Average loss: 0.0083, Accuracy: 454/546 (83.1502%), train_poison_data_count: 45
Global model norm: 19.820707432259688.
Norm before scaling: 23.73847890786971. Distance: 12.006331362987263
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1201.8997982361093, distance: 1200.633114235985
Total norm for 2 adversaries is: 1201.8997982361093. distance: 1200.633114235985
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 247, local model 71, internal_epoch   1,  Average loss: 0.0218, Accuracy: 700/1166 (60.0343%)
___Train Local_ResNet_18,  epoch 247, local model 71, internal_epoch   2,  Average loss: 0.0184, Accuracy: 712/1166 (61.0635%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 15, internal_epoch   1,  Average loss: 0.0286, Accuracy: 206/341 (60.4106%)
___Train Local_ResNet_18,  epoch 247, local model 15, internal_epoch   2,  Average loss: 0.0185, Accuracy: 228/341 (66.8622%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 88, internal_epoch   1,  Average loss: 0.0274, Accuracy: 258/447 (57.7181%)
___Train Local_ResNet_18,  epoch 247, local model 88, internal_epoch   2,  Average loss: 0.0191, Accuracy: 285/447 (63.7584%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 9, internal_epoch   1,  Average loss: 0.0209, Accuracy: 236/368 (64.1304%)
___Train Local_ResNet_18,  epoch 247, local model 9, internal_epoch   2,  Average loss: 0.0188, Accuracy: 251/368 (68.2065%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 69, internal_epoch   1,  Average loss: 0.0279, Accuracy: 133/216 (61.5741%)
___Train Local_ResNet_18,  epoch 247, local model 69, internal_epoch   2,  Average loss: 0.0150, Accuracy: 167/216 (77.3148%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 75, internal_epoch   1,  Average loss: 0.0278, Accuracy: 328/578 (56.7474%)
___Train Local_ResNet_18,  epoch 247, local model 75, internal_epoch   2,  Average loss: 0.0417, Accuracy: 166/578 (28.7197%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 67, internal_epoch   1,  Average loss: 0.0278, Accuracy: 415/842 (49.2874%)
___Train Local_ResNet_18,  epoch 247, local model 67, internal_epoch   2,  Average loss: 0.0240, Accuracy: 369/842 (43.8242%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 27, internal_epoch   1,  Average loss: 0.0215, Accuracy: 278/397 (70.0252%)
___Train Local_ResNet_18,  epoch 247, local model 27, internal_epoch   2,  Average loss: 0.0288, Accuracy: 207/397 (52.1411%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 151.63617873191833
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 206.87236952781677 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:248 choose agents : [77, 11, 99, 85, 44, 25, 65, 13, 67, 52]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   1,  Average loss: 0.0250, Accuracy: 273/496 (55.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   2,  Average loss: 0.0135, Accuracy: 361/496 (72.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   3,  Average loss: 0.0062, Accuracy: 439/496 (88.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   4,  Average loss: 0.0016, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   5,  Average loss: 0.0013, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   6,  Average loss: 0.0009, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Global model norm: 23.892919077233948.
Norm before scaling: 25.564691799371943. Distance: 8.88158419662826
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 888.693458117027, distance: 888.1584177386375
Total norm for 2 adversaries is: 888.693458117027. distance: 888.1584177386375
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   1,  Average loss: 0.0054, Accuracy: 495/546 (90.6593%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   2,  Average loss: 0.0021, Accuracy: 533/546 (97.6190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   3,  Average loss: 0.0012, Accuracy: 531/546 (97.2527%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   4,  Average loss: 0.0016, Accuracy: 534/546 (97.8022%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   5,  Average loss: 0.0010, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   6,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Global model norm: 23.892919077233948.
Norm before scaling: 24.7799975546527. Distance: 6.313646571207724
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 632.0788617728012, distance: 631.3646183070445
Total norm for 2 adversaries is: 632.0788617728012. distance: 631.3646183070445
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 248, local model 99, internal_epoch   1,  Average loss: 0.0268, Accuracy: 208/391 (53.1969%)
___Train Local_ResNet_18,  epoch 248, local model 99, internal_epoch   2,  Average loss: 0.0194, Accuracy: 253/391 (64.7059%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 85, internal_epoch   1,  Average loss: 0.0360, Accuracy: 122/364 (33.5165%)
___Train Local_ResNet_18,  epoch 248, local model 85, internal_epoch   2,  Average loss: 0.0205, Accuracy: 203/364 (55.7692%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 44, internal_epoch   1,  Average loss: 0.0262, Accuracy: 225/436 (51.6055%)
___Train Local_ResNet_18,  epoch 248, local model 44, internal_epoch   2,  Average loss: 0.0154, Accuracy: 309/436 (70.8716%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 25, internal_epoch   1,  Average loss: 0.0225, Accuracy: 345/545 (63.3028%)
___Train Local_ResNet_18,  epoch 248, local model 25, internal_epoch   2,  Average loss: 0.0137, Accuracy: 425/545 (77.9817%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 65, internal_epoch   1,  Average loss: 0.0313, Accuracy: 137/314 (43.6306%)
___Train Local_ResNet_18,  epoch 248, local model 65, internal_epoch   2,  Average loss: 0.0151, Accuracy: 220/314 (70.0637%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 13, internal_epoch   1,  Average loss: 0.0234, Accuracy: 361/620 (58.2258%)
___Train Local_ResNet_18,  epoch 248, local model 13, internal_epoch   2,  Average loss: 0.0160, Accuracy: 432/620 (69.6774%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 67, internal_epoch   1,  Average loss: 0.0243, Accuracy: 468/842 (55.5819%)
___Train Local_ResNet_18,  epoch 248, local model 67, internal_epoch   2,  Average loss: 0.0199, Accuracy: 466/842 (55.3444%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 52, internal_epoch   1,  Average loss: 0.0297, Accuracy: 120/214 (56.0748%)
___Train Local_ResNet_18,  epoch 248, local model 52, internal_epoch   2,  Average loss: 0.0180, Accuracy: 161/214 (75.2336%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 158.1571261882782
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 210.5746877193451 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:249 choose agents : [77, 11, 32, 75, 89, 55, 29, 73, 98, 27]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   1,  Average loss: 0.0053, Accuracy: 440/496 (88.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   2,  Average loss: 0.0034, Accuracy: 473/496 (95.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   3,  Average loss: 0.0019, Accuracy: 482/496 (97.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   4,  Average loss: 0.0018, Accuracy: 486/496 (97.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   5,  Average loss: 0.0012, Accuracy: 487/496 (98.1855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   6,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Global model norm: 26.721772033043347.
Norm before scaling: 27.501536933258954. Distance: 6.494280132430119
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 649.9856248410422, distance: 649.4279694469587
Total norm for 2 adversaries is: 649.9856248410422. distance: 649.4279694469587
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   1,  Average loss: 0.0093, Accuracy: 450/546 (82.4176%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   2,  Average loss: 0.0038, Accuracy: 502/546 (91.9414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   3,  Average loss: 0.0019, Accuracy: 529/546 (96.8864%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   4,  Average loss: 0.0017, Accuracy: 535/546 (97.9853%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   5,  Average loss: 0.0009, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   6,  Average loss: 0.0007, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Global model norm: 26.721772033043347.
Norm before scaling: 28.03454856219264. Distance: 8.319552763876072
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: 2.4251, Accuracy: 4091/10000 (40.9100%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: 0.1812, Accuracy: 8615/9000 (95.7222%)
Scaling by  100
Scaled Norm after poisoning: 832.5445558647297, distance: 831.9552271606929
Total norm for 2 adversaries is: 832.5445558647297. distance: 831.9552271606929
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 249, local model 32, internal_epoch   1,  Average loss: 0.0300, Accuracy: 409/824 (49.6359%)
___Train Local_ResNet_18,  epoch 249, local model 32, internal_epoch   2,  Average loss: 0.0187, Accuracy: 515/824 (62.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 75, internal_epoch   1,  Average loss: 0.0320, Accuracy: 293/578 (50.6920%)
___Train Local_ResNet_18,  epoch 249, local model 75, internal_epoch   2,  Average loss: 0.0215, Accuracy: 353/578 (61.0727%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 89, internal_epoch   1,  Average loss: 0.0346, Accuracy: 202/413 (48.9104%)
___Train Local_ResNet_18,  epoch 249, local model 89, internal_epoch   2,  Average loss: 0.0173, Accuracy: 257/413 (62.2276%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 55, internal_epoch   1,  Average loss: 0.0405, Accuracy: 137/299 (45.8194%)
___Train Local_ResNet_18,  epoch 249, local model 55, internal_epoch   2,  Average loss: 0.0193, Accuracy: 227/299 (75.9197%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 29, internal_epoch   1,  Average loss: 0.0270, Accuracy: 514/848 (60.6132%)
___Train Local_ResNet_18,  epoch 249, local model 29, internal_epoch   2,  Average loss: 0.0147, Accuracy: 616/848 (72.6415%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 73, internal_epoch   1,  Average loss: 0.0362, Accuracy: 265/500 (53.0000%)
___Train Local_ResNet_18,  epoch 249, local model 73, internal_epoch   2,  Average loss: 0.0160, Accuracy: 357/500 (71.4000%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 98, internal_epoch   1,  Average loss: 0.0295, Accuracy: 377/802 (47.0075%)
___Train Local_ResNet_18,  epoch 249, local model 98, internal_epoch   2,  Average loss: 0.0173, Accuracy: 498/802 (62.0948%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 27, internal_epoch   1,  Average loss: 0.0327, Accuracy: 222/397 (55.9194%)
___Train Local_ResNet_18,  epoch 249, local model 27, internal_epoch   2,  Average loss: 0.0210, Accuracy: 258/397 (64.9874%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 154.76885771751404
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.07392644882202 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:250 choose agents : [77, 11, 30, 83, 43, 94, 49, 31, 64, 8]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   1,  Average loss: 0.0072, Accuracy: 422/496 (85.0806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   2,  Average loss: 0.0029, Accuracy: 469/496 (94.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   3,  Average loss: 0.0014, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   4,  Average loss: 0.0013, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   5,  Average loss: 0.0009, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   6,  Average loss: 0.0011, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Global model norm: 29.057563214771964.
Norm before scaling: 29.532905459551596. Distance: 5.8184882050817786
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: 1.9742, Accuracy: 4476/10000 (44.7600%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: 0.0633, Accuracy: 8803/9000 (97.8111%)
Scaling by  100
Scaled Norm after poisoning: 582.0583626235431, distance: 581.8488313127389
Total norm for 2 adversaries is: 582.0583626235431. distance: 581.8488313127389
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   1,  Average loss: 0.0026, Accuracy: 522/546 (95.6044%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   2,  Average loss: 0.0015, Accuracy: 534/546 (97.8022%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   3,  Average loss: 0.0009, Accuracy: 539/546 (98.7179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   4,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   5,  Average loss: 0.0009, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 29.057563214771964.
Norm before scaling: 29.15624790661836. Distance: 4.122870155497478
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: 2.2450, Accuracy: 4287/10000 (42.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: 0.1888, Accuracy: 8588/9000 (95.4222%)
Scaling by  100
Scaled Norm after poisoning: 411.9461433245856, distance: 412.2870852027747
Total norm for 2 adversaries is: 411.9461433245856. distance: 412.2870852027747
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 250, local model 30, internal_epoch   1,  Average loss: 0.0349, Accuracy: 138/337 (40.9496%)
___Train Local_ResNet_18,  epoch 250, local model 30, internal_epoch   2,  Average loss: 0.0160, Accuracy: 219/337 (64.9852%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 83, internal_epoch   1,  Average loss: 0.0272, Accuracy: 190/366 (51.9126%)
___Train Local_ResNet_18,  epoch 250, local model 83, internal_epoch   2,  Average loss: 0.0126, Accuracy: 271/366 (74.0437%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 43, internal_epoch   1,  Average loss: 0.0313, Accuracy: 178/345 (51.5942%)
___Train Local_ResNet_18,  epoch 250, local model 43, internal_epoch   2,  Average loss: 0.0118, Accuracy: 254/345 (73.6232%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 94, internal_epoch   1,  Average loss: 0.0427, Accuracy: 91/203 (44.8276%)
___Train Local_ResNet_18,  epoch 250, local model 94, internal_epoch   2,  Average loss: 0.0211, Accuracy: 155/203 (76.3547%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 49, internal_epoch   1,  Average loss: 0.0273, Accuracy: 255/426 (59.8592%)
___Train Local_ResNet_18,  epoch 250, local model 49, internal_epoch   2,  Average loss: 0.0127, Accuracy: 331/426 (77.6995%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 31, internal_epoch   1,  Average loss: 0.0250, Accuracy: 399/706 (56.5156%)
___Train Local_ResNet_18,  epoch 250, local model 31, internal_epoch   2,  Average loss: 0.0209, Accuracy: 394/706 (55.8074%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 64, internal_epoch   1,  Average loss: 0.0247, Accuracy: 383/686 (55.8309%)
___Train Local_ResNet_18,  epoch 250, local model 64, internal_epoch   2,  Average loss: 0.0132, Accuracy: 501/686 (73.0321%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 8, internal_epoch   1,  Average loss: 0.0287, Accuracy: 262/534 (49.0637%)
___Train Local_ResNet_18,  epoch 250, local model 8, internal_epoch   2,  Average loss: 0.0166, Accuracy: 348/534 (65.1685%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 153.38817954063416
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 204.89304780960083 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:251 choose agents : [77, 11, 31, 2, 38, 10, 89, 57, 78, 16]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   1,  Average loss: 0.0018, Accuracy: 481/496 (96.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   2,  Average loss: 0.0016, Accuracy: 485/496 (97.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   3,  Average loss: 0.0011, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   5,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 29.718044525341103.
Norm before scaling: 29.74602783356124. Distance: 3.6066830327149795
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: 2.2060, Accuracy: 4226/10000 (42.2600%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: 0.0721, Accuracy: 8789/9000 (97.6556%)
Scaling by  100
Scaled Norm after poisoning: 360.319812371593, distance: 360.6682924620627
Total norm for 2 adversaries is: 360.319812371593. distance: 360.6682924620627
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   1,  Average loss: 0.0049, Accuracy: 495/546 (90.6593%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   2,  Average loss: 0.0011, Accuracy: 535/546 (97.9853%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   3,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   4,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 29.718044525341103.
Norm before scaling: 29.914791916218054. Distance: 4.933857213806008
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: 2.4908, Accuracy: 3906/10000 (39.0600%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: 0.0975, Accuracy: 8783/9000 (97.5889%)
Scaling by  100
Scaled Norm after poisoning: 493.00266226461696, distance: 493.38573588521996
Total norm for 2 adversaries is: 493.00266226461696. distance: 493.38573588521996
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 251, local model 31, internal_epoch   1,  Average loss: 0.0325, Accuracy: 350/706 (49.5751%)
___Train Local_ResNet_18,  epoch 251, local model 31, internal_epoch   2,  Average loss: 0.0196, Accuracy: 440/706 (62.3229%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 2, internal_epoch   1,  Average loss: 0.0298, Accuracy: 251/461 (54.4469%)
___Train Local_ResNet_18,  epoch 251, local model 2, internal_epoch   2,  Average loss: 0.0176, Accuracy: 325/461 (70.4989%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 38, internal_epoch   1,  Average loss: 0.0292, Accuracy: 404/756 (53.4392%)
___Train Local_ResNet_18,  epoch 251, local model 38, internal_epoch   2,  Average loss: 0.0150, Accuracy: 529/756 (69.9735%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 10, internal_epoch   1,  Average loss: 0.0266, Accuracy: 481/752 (63.9628%)
___Train Local_ResNet_18,  epoch 251, local model 10, internal_epoch   2,  Average loss: 0.0112, Accuracy: 574/752 (76.3298%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 89, internal_epoch   1,  Average loss: 0.0334, Accuracy: 216/413 (52.3002%)
___Train Local_ResNet_18,  epoch 251, local model 89, internal_epoch   2,  Average loss: 0.0146, Accuracy: 300/413 (72.6392%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 57, internal_epoch   1,  Average loss: 0.0370, Accuracy: 147/290 (50.6897%)
___Train Local_ResNet_18,  epoch 251, local model 57, internal_epoch   2,  Average loss: 0.0153, Accuracy: 202/290 (69.6552%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 78, internal_epoch   1,  Average loss: 0.0372, Accuracy: 114/255 (44.7059%)
___Train Local_ResNet_18,  epoch 251, local model 78, internal_epoch   2,  Average loss: 0.0091, Accuracy: 218/255 (85.4902%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 16, internal_epoch   1,  Average loss: 0.0301, Accuracy: 422/773 (54.5925%)
___Train Local_ResNet_18,  epoch 251, local model 16, internal_epoch   2,  Average loss: 0.0196, Accuracy: 486/773 (62.8719%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 152.53717494010925
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 202.95543670654297 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:252 choose agents : [77, 11, 81, 55, 94, 3, 10, 15, 14, 28]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   1,  Average loss: 0.0053, Accuracy: 449/496 (90.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   2,  Average loss: 0.0011, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   3,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   5,  Average loss: 0.0010, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 29.98697735743228.
Norm before scaling: 30.13902519730441. Distance: 4.666097787969572
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 466.21975438091425, distance: 466.60981424526426
Total norm for 2 adversaries is: 466.21975438091425. distance: 466.60981424526426
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   1,  Average loss: 0.0015, Accuracy: 536/546 (98.1685%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 29.98697735743228.
Norm before scaling: 29.798387686104867. Distance: 2.401786032345954
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: 2.3233, Accuracy: 4122/10000 (41.2200%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: 0.0706, Accuracy: 8815/9000 (97.9444%)
Scaling by  100
Scaled Norm after poisoning: 238.49659326707373, distance: 240.17857126261285
Total norm for 2 adversaries is: 238.49659326707373. distance: 240.17857126261285
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 252, local model 81, internal_epoch   1,  Average loss: 0.0262, Accuracy: 611/1034 (59.0909%)
___Train Local_ResNet_18,  epoch 252, local model 81, internal_epoch   2,  Average loss: 0.0154, Accuracy: 688/1034 (66.5377%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 55, internal_epoch   1,  Average loss: 0.0270, Accuracy: 179/299 (59.8662%)
___Train Local_ResNet_18,  epoch 252, local model 55, internal_epoch   2,  Average loss: 0.0056, Accuracy: 266/299 (88.9632%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 94, internal_epoch   1,  Average loss: 0.0432, Accuracy: 84/203 (41.3793%)
___Train Local_ResNet_18,  epoch 252, local model 94, internal_epoch   2,  Average loss: 0.0130, Accuracy: 160/203 (78.8177%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 3, internal_epoch   1,  Average loss: 0.0260, Accuracy: 460/780 (58.9744%)
___Train Local_ResNet_18,  epoch 252, local model 3, internal_epoch   2,  Average loss: 0.0154, Accuracy: 540/780 (69.2308%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 10, internal_epoch   1,  Average loss: 0.0152, Accuracy: 567/752 (75.3989%)
___Train Local_ResNet_18,  epoch 252, local model 10, internal_epoch   2,  Average loss: 0.0068, Accuracy: 642/752 (85.3723%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 15, internal_epoch   1,  Average loss: 0.0349, Accuracy: 182/341 (53.3724%)
___Train Local_ResNet_18,  epoch 252, local model 15, internal_epoch   2,  Average loss: 0.0158, Accuracy: 261/341 (76.5396%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 14, internal_epoch   1,  Average loss: 0.0287, Accuracy: 165/318 (51.8868%)
___Train Local_ResNet_18,  epoch 252, local model 14, internal_epoch   2,  Average loss: 0.0125, Accuracy: 249/318 (78.3019%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 28, internal_epoch   1,  Average loss: 0.0303, Accuracy: 210/423 (49.6454%)
___Train Local_ResNet_18,  epoch 252, local model 28, internal_epoch   2,  Average loss: 0.0154, Accuracy: 279/423 (65.9574%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 152.56164073944092
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 202.58765769004822 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:253 choose agents : [77, 11, 48, 98, 34, 2, 0, 92, 1, 36]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   1,  Average loss: 0.0014, Accuracy: 483/496 (97.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   3,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   4,  Average loss: 0.0008, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 29.98593725574488.
Norm before scaling: 29.835860786429265. Distance: 2.342261490216198
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: 2.1163, Accuracy: 4421/10000 (44.2100%)
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: 0.0568, Accuracy: 8829/9000 (98.1000%)
Scaling by  100
Scaled Norm after poisoning: 233.0550414467578, distance: 234.22614439628637
Total norm for 2 adversaries is: 233.0550414467578. distance: 234.22614439628637
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   1,  Average loss: 0.0040, Accuracy: 503/546 (92.1245%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   2,  Average loss: 0.0015, Accuracy: 531/546 (97.2527%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   3,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   4,  Average loss: 0.0010, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   5,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 29.98593725574488.
Norm before scaling: 30.235195604173892. Distance: 5.184104451575387
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: 2.6739, Accuracy: 3758/10000 (37.5800%)
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: 0.0815, Accuracy: 8815/9000 (97.9444%)
Scaling by  100
Scaled Norm after poisoning: 518.1332176670397, distance: 518.4104310293149
Total norm for 2 adversaries is: 518.1332176670397. distance: 518.4104310293149
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 253, local model 48, internal_epoch   1,  Average loss: 0.0381, Accuracy: 152/378 (40.2116%)
___Train Local_ResNet_18,  epoch 253, local model 48, internal_epoch   2,  Average loss: 0.0184, Accuracy: 240/378 (63.4921%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 98, internal_epoch   1,  Average loss: 0.0269, Accuracy: 438/802 (54.6135%)
___Train Local_ResNet_18,  epoch 253, local model 98, internal_epoch   2,  Average loss: 0.0134, Accuracy: 568/802 (70.8229%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 34, internal_epoch   1,  Average loss: 0.0326, Accuracy: 184/349 (52.7221%)
___Train Local_ResNet_18,  epoch 253, local model 34, internal_epoch   2,  Average loss: 0.0140, Accuracy: 264/349 (75.6447%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 2, internal_epoch   1,  Average loss: 0.0286, Accuracy: 265/461 (57.4837%)
___Train Local_ResNet_18,  epoch 253, local model 2, internal_epoch   2,  Average loss: 0.0140, Accuracy: 343/461 (74.4035%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 0, internal_epoch   1,  Average loss: 0.0371, Accuracy: 166/367 (45.2316%)
___Train Local_ResNet_18,  epoch 253, local model 0, internal_epoch   2,  Average loss: 0.0131, Accuracy: 263/367 (71.6621%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 92, internal_epoch   1,  Average loss: 0.0274, Accuracy: 462/796 (58.0402%)
___Train Local_ResNet_18,  epoch 253, local model 92, internal_epoch   2,  Average loss: 0.0142, Accuracy: 570/796 (71.6080%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 1, internal_epoch   1,  Average loss: 0.0271, Accuracy: 367/641 (57.2543%)
___Train Local_ResNet_18,  epoch 253, local model 1, internal_epoch   2,  Average loss: 0.0169, Accuracy: 472/641 (73.6349%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 36, internal_epoch   1,  Average loss: 0.0294, Accuracy: 408/849 (48.0565%)
___Train Local_ResNet_18,  epoch 253, local model 36, internal_epoch   2,  Average loss: 0.0185, Accuracy: 525/849 (61.8375%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 157.1840476989746
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.17435503005981 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:254 choose agents : [77, 11, 39, 80, 47, 72, 22, 95, 81, 21]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   1,  Average loss: 0.0053, Accuracy: 447/496 (90.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   2,  Average loss: 0.0013, Accuracy: 484/496 (97.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   3,  Average loss: 0.0010, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 30.114509243754704.
Norm before scaling: 30.340443989894187. Distance: 5.035446407223448
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: 2.0095, Accuracy: 4363/10000 (43.6300%)
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: 0.0637, Accuracy: 8838/9000 (98.2000%)
Scaling by  100
Scaled Norm after poisoning: 503.28360853995633, distance: 503.54456108670263
Total norm for 2 adversaries is: 503.28360853995633. distance: 503.54456108670263
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   1,  Average loss: 0.0009, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 30.114509243754704.
Norm before scaling: 29.86046447842343. Distance: 1.6585266732206334
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: 2.2849, Accuracy: 4060/10000 (40.6000%)
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: 0.0962, Accuracy: 8792/9000 (97.6889%)
Scaling by  100
Scaled Norm after poisoning: 163.14194715607326, distance: 165.85267959283925
Total norm for 2 adversaries is: 163.14194715607326. distance: 165.85267959283925
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 254, local model 39, internal_epoch   1,  Average loss: 0.0496, Accuracy: 85/217 (39.1705%)
___Train Local_ResNet_18,  epoch 254, local model 39, internal_epoch   2,  Average loss: 0.0146, Accuracy: 164/217 (75.5760%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 80, internal_epoch   1,  Average loss: 0.0267, Accuracy: 222/363 (61.1570%)
___Train Local_ResNet_18,  epoch 254, local model 80, internal_epoch   2,  Average loss: 0.0089, Accuracy: 308/363 (84.8485%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 47, internal_epoch   1,  Average loss: 0.0263, Accuracy: 389/654 (59.4801%)
___Train Local_ResNet_18,  epoch 254, local model 47, internal_epoch   2,  Average loss: 0.0189, Accuracy: 417/654 (63.7615%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 72, internal_epoch   1,  Average loss: 0.0283, Accuracy: 368/618 (59.5469%)
___Train Local_ResNet_18,  epoch 254, local model 72, internal_epoch   2,  Average loss: 0.0130, Accuracy: 438/618 (70.8738%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 22, internal_epoch   1,  Average loss: 0.0314, Accuracy: 261/494 (52.8340%)
___Train Local_ResNet_18,  epoch 254, local model 22, internal_epoch   2,  Average loss: 0.0144, Accuracy: 358/494 (72.4696%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 95, internal_epoch   1,  Average loss: 0.0288, Accuracy: 330/569 (57.9965%)
___Train Local_ResNet_18,  epoch 254, local model 95, internal_epoch   2,  Average loss: 0.0122, Accuracy: 408/569 (71.7047%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 81, internal_epoch   1,  Average loss: 0.0248, Accuracy: 606/1034 (58.6074%)
___Train Local_ResNet_18,  epoch 254, local model 81, internal_epoch   2,  Average loss: 0.0141, Accuracy: 721/1034 (69.7292%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 21, internal_epoch   1,  Average loss: 0.0369, Accuracy: 154/262 (58.7786%)
___Train Local_ResNet_18,  epoch 254, local model 21, internal_epoch   2,  Average loss: 0.0211, Accuracy: 177/262 (67.5573%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 154.76809310913086
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 205.51442766189575 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:255 choose agents : [77, 11, 4, 41, 90, 99, 60, 57, 25, 91]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   1,  Average loss: 0.0005, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 30.108419200254957.
Norm before scaling: 29.876631305161084. Distance: 1.1308916314619168
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: 2.1191, Accuracy: 4383/10000 (43.8300%)
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: 0.0484, Accuracy: 8864/9000 (98.4889%)
Scaling by  100
Scaled Norm after poisoning: 110.35119717859884, distance: 113.0891647315847
Total norm for 2 adversaries is: 110.35119717859884. distance: 113.0891647315847
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   1,  Average loss: 0.0045, Accuracy: 498/546 (91.2088%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   2,  Average loss: 0.0010, Accuracy: 537/546 (98.3516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   6,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 30.108419200254957.
Norm before scaling: 30.235667971384082. Distance: 4.714559146663418
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: 2.3051, Accuracy: 4116/10000 (41.1600%)
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: 0.0823, Accuracy: 8806/9000 (97.8444%)
Scaling by  100
Scaled Norm after poisoning: 470.8739215543796, distance: 471.45587346537536
Total norm for 2 adversaries is: 470.8739215543796. distance: 471.45587346537536
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 255, local model 4, internal_epoch   1,  Average loss: 0.0334, Accuracy: 307/557 (55.1167%)
___Train Local_ResNet_18,  epoch 255, local model 4, internal_epoch   2,  Average loss: 0.0117, Accuracy: 420/557 (75.4039%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 41, internal_epoch   1,  Average loss: 0.0248, Accuracy: 327/513 (63.7427%)
___Train Local_ResNet_18,  epoch 255, local model 41, internal_epoch   2,  Average loss: 0.0131, Accuracy: 383/513 (74.6589%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 90, internal_epoch   1,  Average loss: 0.0271, Accuracy: 349/578 (60.3806%)
___Train Local_ResNet_18,  epoch 255, local model 90, internal_epoch   2,  Average loss: 0.0131, Accuracy: 456/578 (78.8927%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 99, internal_epoch   1,  Average loss: 0.0367, Accuracy: 186/391 (47.5703%)
___Train Local_ResNet_18,  epoch 255, local model 99, internal_epoch   2,  Average loss: 0.0195, Accuracy: 253/391 (64.7059%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 60, internal_epoch   1,  Average loss: 0.0395, Accuracy: 122/284 (42.9577%)
___Train Local_ResNet_18,  epoch 255, local model 60, internal_epoch   2,  Average loss: 0.0126, Accuracy: 227/284 (79.9296%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 57, internal_epoch   1,  Average loss: 0.0340, Accuracy: 148/290 (51.0345%)
___Train Local_ResNet_18,  epoch 255, local model 57, internal_epoch   2,  Average loss: 0.0111, Accuracy: 232/290 (80.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 25, internal_epoch   1,  Average loss: 0.0293, Accuracy: 331/545 (60.7339%)
___Train Local_ResNet_18,  epoch 255, local model 25, internal_epoch   2,  Average loss: 0.0110, Accuracy: 447/545 (82.0183%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 91, internal_epoch   1,  Average loss: 0.0414, Accuracy: 111/234 (47.4359%)
___Train Local_ResNet_18,  epoch 255, local model 91, internal_epoch   2,  Average loss: 0.0097, Accuracy: 193/234 (82.4786%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 150.41488361358643
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 201.6600935459137 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:256 choose agents : [77, 11, 84, 88, 78, 12, 51, 53, 17, 40]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   1,  Average loss: 0.0057, Accuracy: 447/496 (90.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   2,  Average loss: 0.0013, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   3,  Average loss: 0.0010, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   4,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 30.007872502218063.
Norm before scaling: 30.316074813369948. Distance: 5.552527757598458
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: 2.0359, Accuracy: 4313/10000 (43.1300%)
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: 0.0690, Accuracy: 8791/9000 (97.6778%)
Scaling by  100
Scaled Norm after poisoning: 554.9614851500958, distance: 555.2527577599233
Total norm for 2 adversaries is: 554.9614851500958. distance: 555.2527577599233
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   1,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   3,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   6,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 30.007872502218063.
Norm before scaling: 29.733713003337538. Distance: 1.494101370501504
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: 2.3211, Accuracy: 3981/10000 (39.8100%)
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: 0.0688, Accuracy: 8808/9000 (97.8667%)
Scaling by  100
Scaled Norm after poisoning: 146.16004845930027, distance: 149.41014884580298
Total norm for 2 adversaries is: 146.16004845930027. distance: 149.41014884580298
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 256, local model 84, internal_epoch   1,  Average loss: 0.0232, Accuracy: 617/1053 (58.5945%)
___Train Local_ResNet_18,  epoch 256, local model 84, internal_epoch   2,  Average loss: 0.0139, Accuracy: 758/1053 (71.9848%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 88, internal_epoch   1,  Average loss: 0.0288, Accuracy: 260/447 (58.1655%)
___Train Local_ResNet_18,  epoch 256, local model 88, internal_epoch   2,  Average loss: 0.0143, Accuracy: 329/447 (73.6018%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 78, internal_epoch   1,  Average loss: 0.0410, Accuracy: 115/255 (45.0980%)
___Train Local_ResNet_18,  epoch 256, local model 78, internal_epoch   2,  Average loss: 0.0089, Accuracy: 212/255 (83.1373%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 12, internal_epoch   1,  Average loss: 0.0300, Accuracy: 507/977 (51.8936%)
___Train Local_ResNet_18,  epoch 256, local model 12, internal_epoch   2,  Average loss: 0.0176, Accuracy: 621/977 (63.5619%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 51, internal_epoch   1,  Average loss: 0.0264, Accuracy: 298/479 (62.2129%)
___Train Local_ResNet_18,  epoch 256, local model 51, internal_epoch   2,  Average loss: 0.0107, Accuracy: 378/479 (78.9144%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 53, internal_epoch   1,  Average loss: 0.0245, Accuracy: 370/625 (59.2000%)
___Train Local_ResNet_18,  epoch 256, local model 53, internal_epoch   2,  Average loss: 0.0134, Accuracy: 445/625 (71.2000%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 17, internal_epoch   1,  Average loss: 0.0310, Accuracy: 306/526 (58.1749%)
___Train Local_ResNet_18,  epoch 256, local model 17, internal_epoch   2,  Average loss: 0.0158, Accuracy: 356/526 (67.6806%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 40, internal_epoch   1,  Average loss: 0.0288, Accuracy: 371/652 (56.9018%)
___Train Local_ResNet_18,  epoch 256, local model 40, internal_epoch   2,  Average loss: 0.0186, Accuracy: 449/652 (68.8650%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 155.5101866722107
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.47223448753357 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:257 choose agents : [77, 11, 50, 30, 28, 13, 27, 57, 19, 4]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   1,  Average loss: 0.0011, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   5,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 30.06208886640645.
Norm before scaling: 29.897153421602596. Distance: 2.19613371452736
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: 2.1374, Accuracy: 4341/10000 (43.4100%)
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: 0.0381, Accuracy: 8872/9000 (98.5778%)
Scaling by  100
Scaled Norm after poisoning: 218.31753680132982, distance: 219.6133765421633
Total norm for 2 adversaries is: 218.31753680132982. distance: 219.6133765421633
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   1,  Average loss: 0.0070, Accuracy: 469/546 (85.8974%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   2,  Average loss: 0.0014, Accuracy: 535/546 (97.9853%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   3,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   4,  Average loss: 0.0006, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 30.06208886640645.
Norm before scaling: 30.42980283193805. Distance: 5.901051650637884
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: 2.4629, Accuracy: 4021/10000 (40.2100%)
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: 0.0993, Accuracy: 8761/9000 (97.3444%)
Scaling by  100
Scaled Norm after poisoning: 589.8049995549377, distance: 590.1052342591107
Total norm for 2 adversaries is: 589.8049995549377. distance: 590.1052342591107
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 257, local model 50, internal_epoch   1,  Average loss: 0.0349, Accuracy: 223/401 (55.6110%)
___Train Local_ResNet_18,  epoch 257, local model 50, internal_epoch   2,  Average loss: 0.0145, Accuracy: 298/401 (74.3142%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 30, internal_epoch   1,  Average loss: 0.0416, Accuracy: 128/337 (37.9822%)
___Train Local_ResNet_18,  epoch 257, local model 30, internal_epoch   2,  Average loss: 0.0196, Accuracy: 233/337 (69.1395%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 28, internal_epoch   1,  Average loss: 0.0362, Accuracy: 200/423 (47.2813%)
___Train Local_ResNet_18,  epoch 257, local model 28, internal_epoch   2,  Average loss: 0.0135, Accuracy: 295/423 (69.7400%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 13, internal_epoch   1,  Average loss: 0.0302, Accuracy: 340/620 (54.8387%)
___Train Local_ResNet_18,  epoch 257, local model 13, internal_epoch   2,  Average loss: 0.0121, Accuracy: 469/620 (75.6452%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 27, internal_epoch   1,  Average loss: 0.0315, Accuracy: 211/397 (53.1486%)
___Train Local_ResNet_18,  epoch 257, local model 27, internal_epoch   2,  Average loss: 0.0121, Accuracy: 312/397 (78.5894%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 57, internal_epoch   1,  Average loss: 0.0337, Accuracy: 150/290 (51.7241%)
___Train Local_ResNet_18,  epoch 257, local model 57, internal_epoch   2,  Average loss: 0.0131, Accuracy: 222/290 (76.5517%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 19, internal_epoch   1,  Average loss: 0.0346, Accuracy: 90/173 (52.0231%)
___Train Local_ResNet_18,  epoch 257, local model 19, internal_epoch   2,  Average loss: 0.0076, Accuracy: 149/173 (86.1272%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 4, internal_epoch   1,  Average loss: 0.0333, Accuracy: 299/557 (53.6804%)
___Train Local_ResNet_18,  epoch 257, local model 4, internal_epoch   2,  Average loss: 0.0129, Accuracy: 405/557 (72.7110%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 154.8693356513977
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.2066888809204 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:258 choose agents : [77, 11, 18, 48, 91, 13, 53, 99, 16, 5]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   1,  Average loss: 0.0083, Accuracy: 422/496 (85.0806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   2,  Average loss: 0.0020, Accuracy: 482/496 (97.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   3,  Average loss: 0.0011, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   5,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   6,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 30.325582107781234.
Norm before scaling: 30.811943374155867. Distance: 6.474280899944543
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: 2.2708, Accuracy: 3810/10000 (38.1000%)
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: 0.0309, Accuracy: 8906/9000 (98.9556%)
Scaling by  100
Scaled Norm after poisoning: 647.1975162189669, distance: 647.42806067547
Total norm for 2 adversaries is: 647.1975162189669. distance: 647.42806067547
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   1,  Average loss: 0.0012, Accuracy: 534/546 (97.8022%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 30.325582107781234.
Norm before scaling: 30.137951864354104. Distance: 2.558911392645587
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: 2.1884, Accuracy: 4323/10000 (43.2300%)
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: 0.1125, Accuracy: 8740/9000 (97.1111%)
Scaling by  100
Scaled Norm after poisoning: 254.18623217043051, distance: 255.89114354301128
Total norm for 2 adversaries is: 254.18623217043051. distance: 255.89114354301128
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 258, local model 18, internal_epoch   1,  Average loss: 0.0371, Accuracy: 197/386 (51.0363%)
___Train Local_ResNet_18,  epoch 258, local model 18, internal_epoch   2,  Average loss: 0.0276, Accuracy: 196/386 (50.7772%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 48, internal_epoch   1,  Average loss: 0.0383, Accuracy: 170/378 (44.9735%)
___Train Local_ResNet_18,  epoch 258, local model 48, internal_epoch   2,  Average loss: 0.0183, Accuracy: 241/378 (63.7566%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 91, internal_epoch   1,  Average loss: 0.0452, Accuracy: 104/234 (44.4444%)
___Train Local_ResNet_18,  epoch 258, local model 91, internal_epoch   2,  Average loss: 0.0103, Accuracy: 191/234 (81.6239%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 13, internal_epoch   1,  Average loss: 0.0283, Accuracy: 360/620 (58.0645%)
___Train Local_ResNet_18,  epoch 258, local model 13, internal_epoch   2,  Average loss: 0.0126, Accuracy: 464/620 (74.8387%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 53, internal_epoch   1,  Average loss: 0.0280, Accuracy: 359/625 (57.4400%)
___Train Local_ResNet_18,  epoch 258, local model 53, internal_epoch   2,  Average loss: 0.0139, Accuracy: 438/625 (70.0800%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 99, internal_epoch   1,  Average loss: 0.0347, Accuracy: 199/391 (50.8951%)
___Train Local_ResNet_18,  epoch 258, local model 99, internal_epoch   2,  Average loss: 0.0203, Accuracy: 259/391 (66.2404%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 16, internal_epoch   1,  Average loss: 0.0323, Accuracy: 402/773 (52.0052%)
___Train Local_ResNet_18,  epoch 258, local model 16, internal_epoch   2,  Average loss: 0.0220, Accuracy: 453/773 (58.6028%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 5, internal_epoch   1,  Average loss: 0.0327, Accuracy: 188/365 (51.5068%)
___Train Local_ResNet_18,  epoch 258, local model 5, internal_epoch   2,  Average loss: 0.0144, Accuracy: 260/365 (71.2329%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 157.1724259853363
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.50780773162842 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:259 choose agents : [77, 11, 8, 3, 37, 26, 18, 91, 90, 14]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   1,  Average loss: 0.0009, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   2,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   5,  Average loss: 0.0009, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   6,  Average loss: 0.0007, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 30.716276206979217.
Norm before scaling: 30.53342294915831. Distance: 2.1927342598319393
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: 2.2297, Accuracy: 4141/10000 (41.4100%)
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: 0.0648, Accuracy: 8801/9000 (97.7889%)
Scaling by  100
Scaled Norm after poisoning: 217.76944517080443, distance: 219.2734362474169
Total norm for 2 adversaries is: 217.76944517080443. distance: 219.2734362474169
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   1,  Average loss: 0.0068, Accuracy: 471/546 (86.2637%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   2,  Average loss: 0.0011, Accuracy: 535/546 (97.9853%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   3,  Average loss: 0.0006, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   6,  Average loss: 0.0005, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 30.716276206979217.
Norm before scaling: 31.135647220381195. Distance: 6.351213546495157
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: 2.5698, Accuracy: 3825/10000 (38.2500%)
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: 0.0791, Accuracy: 8804/9000 (97.8222%)
Scaling by  100
Scaled Norm after poisoning: 634.7303807523317, distance: 635.121322071618
Total norm for 2 adversaries is: 634.7303807523317. distance: 635.121322071618
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 259, local model 8, internal_epoch   1,  Average loss: 0.0338, Accuracy: 271/534 (50.7491%)
___Train Local_ResNet_18,  epoch 259, local model 8, internal_epoch   2,  Average loss: 0.0183, Accuracy: 337/534 (63.1086%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 3, internal_epoch   1,  Average loss: 0.0283, Accuracy: 457/780 (58.5897%)
___Train Local_ResNet_18,  epoch 259, local model 3, internal_epoch   2,  Average loss: 0.0162, Accuracy: 508/780 (65.1282%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 37, internal_epoch   1,  Average loss: 0.0279, Accuracy: 402/725 (55.4483%)
___Train Local_ResNet_18,  epoch 259, local model 37, internal_epoch   2,  Average loss: 0.0158, Accuracy: 485/725 (66.8966%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 26, internal_epoch   1,  Average loss: 0.0434, Accuracy: 201/468 (42.9487%)
___Train Local_ResNet_18,  epoch 259, local model 26, internal_epoch   2,  Average loss: 0.0220, Accuracy: 248/468 (52.9915%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 18, internal_epoch   1,  Average loss: 0.0392, Accuracy: 180/386 (46.6321%)
___Train Local_ResNet_18,  epoch 259, local model 18, internal_epoch   2,  Average loss: 0.0292, Accuracy: 214/386 (55.4404%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 91, internal_epoch   1,  Average loss: 0.0424, Accuracy: 99/234 (42.3077%)
___Train Local_ResNet_18,  epoch 259, local model 91, internal_epoch   2,  Average loss: 0.0124, Accuracy: 186/234 (79.4872%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 90, internal_epoch   1,  Average loss: 0.0325, Accuracy: 361/578 (62.4567%)
___Train Local_ResNet_18,  epoch 259, local model 90, internal_epoch   2,  Average loss: 0.0127, Accuracy: 426/578 (73.7024%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 14, internal_epoch   1,  Average loss: 0.0334, Accuracy: 167/318 (52.5157%)
___Train Local_ResNet_18,  epoch 259, local model 14, internal_epoch   2,  Average loss: 0.0097, Accuracy: 258/318 (81.1321%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 159.19904732704163
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.72707080841064 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:260 choose agents : [77, 11, 72, 39, 85, 42, 58, 14, 78, 2]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   1,  Average loss: 0.0091, Accuracy: 420/496 (84.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   2,  Average loss: 0.0020, Accuracy: 477/496 (96.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   3,  Average loss: 0.0012, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   5,  Average loss: 0.0007, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 31.010772802127267.
Norm before scaling: 31.539142811701065. Distance: 6.735198570218508
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 673.3195981478632, distance: 673.5199050510682
Total norm for 2 adversaries is: 673.3195981478632. distance: 673.5199050510682
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   1,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   2,  Average loss: 0.0006, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 31.010772802127267.
Norm before scaling: 30.79639637660803. Distance: 2.296010691674357
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: 2.2322, Accuracy: 4233/10000 (42.3300%)
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: 0.0577, Accuracy: 8853/9000 (98.3667%)
Scaling by  100
Scaled Norm after poisoning: 227.6535625270336, distance: 229.60107217465253
Total norm for 2 adversaries is: 227.6535625270336. distance: 229.60107217465253
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 260, local model 72, internal_epoch   1,  Average loss: 0.0318, Accuracy: 342/618 (55.3398%)
___Train Local_ResNet_18,  epoch 260, local model 72, internal_epoch   2,  Average loss: 0.0132, Accuracy: 451/618 (72.9773%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 39, internal_epoch   1,  Average loss: 0.0568, Accuracy: 72/217 (33.1797%)
___Train Local_ResNet_18,  epoch 260, local model 39, internal_epoch   2,  Average loss: 0.0127, Accuracy: 175/217 (80.6452%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 85, internal_epoch   1,  Average loss: 0.0488, Accuracy: 121/364 (33.2418%)
___Train Local_ResNet_18,  epoch 260, local model 85, internal_epoch   2,  Average loss: 0.0210, Accuracy: 210/364 (57.6923%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 42, internal_epoch   1,  Average loss: 0.0629, Accuracy: 70/198 (35.3535%)
___Train Local_ResNet_18,  epoch 260, local model 42, internal_epoch   2,  Average loss: 0.0235, Accuracy: 122/198 (61.6162%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 58, internal_epoch   1,  Average loss: 0.0503, Accuracy: 84/234 (35.8974%)
___Train Local_ResNet_18,  epoch 260, local model 58, internal_epoch   2,  Average loss: 0.0108, Accuracy: 195/234 (83.3333%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 14, internal_epoch   1,  Average loss: 0.0338, Accuracy: 155/318 (48.7421%)
___Train Local_ResNet_18,  epoch 260, local model 14, internal_epoch   2,  Average loss: 0.0116, Accuracy: 249/318 (78.3019%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 78, internal_epoch   1,  Average loss: 0.0487, Accuracy: 88/255 (34.5098%)
___Train Local_ResNet_18,  epoch 260, local model 78, internal_epoch   2,  Average loss: 0.0094, Accuracy: 212/255 (83.1373%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 2, internal_epoch   1,  Average loss: 0.0416, Accuracy: 216/461 (46.8547%)
___Train Local_ResNet_18,  epoch 260, local model 2, internal_epoch   2,  Average loss: 0.0188, Accuracy: 310/461 (67.2451%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 154.08159852027893
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.29081988334656 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:261 choose agents : [77, 11, 43, 65, 9, 90, 45, 23, 76, 61]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   1,  Average loss: 0.0012, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   2,  Average loss: 0.0014, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   6,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Global model norm: 31.398800033674654.
Norm before scaling: 31.199251762612434. Distance: 2.1428743225498907
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: 2.1467, Accuracy: 4025/10000 (40.2500%)
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: 0.0439, Accuracy: 8876/9000 (98.6222%)
Scaling by  100
Scaled Norm after poisoning: 212.59507064487644, distance: 214.28743656301924
Total norm for 2 adversaries is: 212.59507064487644. distance: 214.28743656301924
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   1,  Average loss: 0.0081, Accuracy: 454/546 (83.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   2,  Average loss: 0.0012, Accuracy: 537/546 (98.3516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   3,  Average loss: 0.0006, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   5,  Average loss: 0.0006, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 31.398800033674654.
Norm before scaling: 31.69260679848841. Distance: 5.885462109775703
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: 2.4045, Accuracy: 3843/10000 (38.4300%)
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: 0.1080, Accuracy: 8720/9000 (96.8889%)
Scaling by  100
Scaled Norm after poisoning: 588.0155450751281, distance: 588.5461961477621
Total norm for 2 adversaries is: 588.0155450751281. distance: 588.5461961477621
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 261, local model 43, internal_epoch   1,  Average loss: 0.0361, Accuracy: 173/345 (50.1449%)
___Train Local_ResNet_18,  epoch 261, local model 43, internal_epoch   2,  Average loss: 0.0104, Accuracy: 279/345 (80.8696%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 65, internal_epoch   1,  Average loss: 0.0440, Accuracy: 135/314 (42.9936%)
___Train Local_ResNet_18,  epoch 261, local model 65, internal_epoch   2,  Average loss: 0.0137, Accuracy: 222/314 (70.7006%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 9, internal_epoch   1,  Average loss: 0.0386, Accuracy: 184/368 (50.0000%)
___Train Local_ResNet_18,  epoch 261, local model 9, internal_epoch   2,  Average loss: 0.0141, Accuracy: 269/368 (73.0978%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 90, internal_epoch   1,  Average loss: 0.0268, Accuracy: 354/578 (61.2457%)
___Train Local_ResNet_18,  epoch 261, local model 90, internal_epoch   2,  Average loss: 0.0189, Accuracy: 404/578 (69.8962%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 45, internal_epoch   1,  Average loss: 0.0342, Accuracy: 277/529 (52.3629%)
___Train Local_ResNet_18,  epoch 261, local model 45, internal_epoch   2,  Average loss: 0.0172, Accuracy: 351/529 (66.3516%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 23, internal_epoch   1,  Average loss: 0.0435, Accuracy: 105/248 (42.3387%)
___Train Local_ResNet_18,  epoch 261, local model 23, internal_epoch   2,  Average loss: 0.0126, Accuracy: 183/248 (73.7903%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 76, internal_epoch   1,  Average loss: 0.1296, Accuracy: 20/65 (30.7692%)
___Train Local_ResNet_18,  epoch 261, local model 76, internal_epoch   2,  Average loss: 0.0370, Accuracy: 49/65 (75.3846%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 61, internal_epoch   1,  Average loss: 0.0304, Accuracy: 336/590 (56.9492%)
___Train Local_ResNet_18,  epoch 261, local model 61, internal_epoch   2,  Average loss: 0.0150, Accuracy: 436/590 (73.8983%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 162.82157707214355
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 216.12850308418274 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:262 choose agents : [77, 11, 76, 14, 85, 2, 62, 12, 59, 1]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   1,  Average loss: 0.0070, Accuracy: 428/496 (86.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   2,  Average loss: 0.0012, Accuracy: 485/496 (97.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   3,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 31.552899220495572.
Norm before scaling: 31.84377204212927. Distance: 5.811202365862999
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 580.6577089818062, distance: 581.120254336398
Total norm for 2 adversaries is: 580.6577089818062. distance: 581.120254336398
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   1,  Average loss: 0.0007, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   6,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 31.552899220495572.
Norm before scaling: 31.27364535123284. Distance: 1.4964883547864154
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: 2.3292, Accuracy: 4042/10000 (40.4200%)
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: 0.0563, Accuracy: 8851/9000 (98.3444%)
Scaling by  100
Scaled Norm after poisoning: 146.32831103164895, distance: 149.64885330958938
Total norm for 2 adversaries is: 146.32831103164895. distance: 149.64885330958938
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 262, local model 76, internal_epoch   1,  Average loss: 0.1190, Accuracy: 15/65 (23.0769%)
___Train Local_ResNet_18,  epoch 262, local model 76, internal_epoch   2,  Average loss: 0.0533, Accuracy: 39/65 (60.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 14, internal_epoch   1,  Average loss: 0.0379, Accuracy: 143/318 (44.9686%)
___Train Local_ResNet_18,  epoch 262, local model 14, internal_epoch   2,  Average loss: 0.0145, Accuracy: 242/318 (76.1006%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 85, internal_epoch   1,  Average loss: 0.0489, Accuracy: 129/364 (35.4396%)
___Train Local_ResNet_18,  epoch 262, local model 85, internal_epoch   2,  Average loss: 0.0147, Accuracy: 250/364 (68.6813%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 2, internal_epoch   1,  Average loss: 0.0414, Accuracy: 215/461 (46.6377%)
___Train Local_ResNet_18,  epoch 262, local model 2, internal_epoch   2,  Average loss: 0.0173, Accuracy: 315/461 (68.3297%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 62, internal_epoch   1,  Average loss: 0.0356, Accuracy: 178/358 (49.7207%)
___Train Local_ResNet_18,  epoch 262, local model 62, internal_epoch   2,  Average loss: 0.0146, Accuracy: 252/358 (70.3911%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 12, internal_epoch   1,  Average loss: 0.0283, Accuracy: 533/977 (54.5548%)
___Train Local_ResNet_18,  epoch 262, local model 12, internal_epoch   2,  Average loss: 0.0150, Accuracy: 719/977 (73.5926%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 59, internal_epoch   1,  Average loss: 0.0281, Accuracy: 353/642 (54.9844%)
___Train Local_ResNet_18,  epoch 262, local model 59, internal_epoch   2,  Average loss: 0.0134, Accuracy: 502/642 (78.1931%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 1, internal_epoch   1,  Average loss: 0.0375, Accuracy: 327/641 (51.0140%)
___Train Local_ResNet_18,  epoch 262, local model 1, internal_epoch   2,  Average loss: 0.0208, Accuracy: 347/641 (54.1342%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 157.58776259422302
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 212.35624384880066 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:263 choose agents : [77, 11, 82, 9, 0, 14, 86, 16, 46, 42]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   1,  Average loss: 0.0007, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   2,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   3,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   4,  Average loss: 0.0007, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   5,  Average loss: 0.0006, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 31.592862291250317.
Norm before scaling: 31.39526199263095. Distance: 2.1198161230777544
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: 8.5690, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: 4.4607, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 210.33383064191077, distance: 211.9816379872323
Total norm for 2 adversaries is: 210.33383064191077. distance: 211.9816379872323
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   1,  Average loss: 0.0068, Accuracy: 476/546 (87.1795%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   2,  Average loss: 0.0009, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   3,  Average loss: 0.0008, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   6,  Average loss: 0.0006, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 31.592862291250317.
Norm before scaling: 31.787066592233113. Distance: 5.538611045270377
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: 2.5162, Accuracy: 3902/10000 (39.0200%)
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: 0.0916, Accuracy: 8769/9000 (97.4333%)
Scaling by  100
Scaled Norm after poisoning: 553.1035165319418, distance: 553.8611062351282
Total norm for 2 adversaries is: 553.1035165319418. distance: 553.8611062351282
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 263, local model 82, internal_epoch   1,  Average loss: 0.0373, Accuracy: 314/601 (52.2463%)
___Train Local_ResNet_18,  epoch 263, local model 82, internal_epoch   2,  Average loss: 0.0131, Accuracy: 455/601 (75.7072%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 9, internal_epoch   1,  Average loss: 0.0374, Accuracy: 181/368 (49.1848%)
___Train Local_ResNet_18,  epoch 263, local model 9, internal_epoch   2,  Average loss: 0.0111, Accuracy: 293/368 (79.6196%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 0, internal_epoch   1,  Average loss: 0.0346, Accuracy: 188/367 (51.2262%)
___Train Local_ResNet_18,  epoch 263, local model 0, internal_epoch   2,  Average loss: 0.0141, Accuracy: 259/367 (70.5722%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 14, internal_epoch   1,  Average loss: 0.0321, Accuracy: 170/318 (53.4591%)
___Train Local_ResNet_18,  epoch 263, local model 14, internal_epoch   2,  Average loss: 0.0120, Accuracy: 257/318 (80.8176%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 86, internal_epoch   1,  Average loss: 0.0562, Accuracy: 73/212 (34.4340%)
___Train Local_ResNet_18,  epoch 263, local model 86, internal_epoch   2,  Average loss: 0.0171, Accuracy: 156/212 (73.5849%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 16, internal_epoch   1,  Average loss: 0.0343, Accuracy: 394/773 (50.9702%)
___Train Local_ResNet_18,  epoch 263, local model 16, internal_epoch   2,  Average loss: 0.0249, Accuracy: 438/773 (56.6624%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 46, internal_epoch   1,  Average loss: 0.0338, Accuracy: 295/601 (49.0849%)
___Train Local_ResNet_18,  epoch 263, local model 46, internal_epoch   2,  Average loss: 0.0160, Accuracy: 403/601 (67.0549%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 42, internal_epoch   1,  Average loss: 0.0452, Accuracy: 97/198 (48.9899%)
___Train Local_ResNet_18,  epoch 263, local model 42, internal_epoch   2,  Average loss: 0.0277, Accuracy: 140/198 (70.7071%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 174.5514657497406
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.23213124275208 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:264 choose agents : [77, 11, 4, 43, 1, 56, 21, 13, 50, 19]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   1,  Average loss: 0.0085, Accuracy: 425/496 (85.6855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   2,  Average loss: 0.0007, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   3,  Average loss: 0.0009, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   4,  Average loss: 0.0011, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   5,  Average loss: 0.0012, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   6,  Average loss: 0.0008, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Global model norm: 31.631730038283454.
Norm before scaling: 31.989054715355863. Distance: 6.286072962299556
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 628.0680446814661, distance: 628.6072651107366
Total norm for 2 adversaries is: 628.0680446814661. distance: 628.6072651107366
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   1,  Average loss: 0.0012, Accuracy: 539/546 (98.7179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   4,  Average loss: 0.0008, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   5,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   6,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Global model norm: 31.631730038283454.
Norm before scaling: 31.48493718480712. Distance: 3.1717963749202944
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: 2.4522, Accuracy: 3697/10000 (36.9700%)
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: 0.0491, Accuracy: 8863/9000 (98.4778%)
Scaling by  100
Scaled Norm after poisoning: 315.70705616520513, distance: 317.1796366020366
Total norm for 2 adversaries is: 315.70705616520513. distance: 317.1796366020366
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 264, local model 4, internal_epoch   1,  Average loss: 0.0298, Accuracy: 322/557 (57.8097%)
___Train Local_ResNet_18,  epoch 264, local model 4, internal_epoch   2,  Average loss: 0.0141, Accuracy: 387/557 (69.4794%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 43, internal_epoch   1,  Average loss: 0.0453, Accuracy: 156/345 (45.2174%)
___Train Local_ResNet_18,  epoch 264, local model 43, internal_epoch   2,  Average loss: 0.0186, Accuracy: 233/345 (67.5362%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 1, internal_epoch   1,  Average loss: 0.0402, Accuracy: 347/641 (54.1342%)
___Train Local_ResNet_18,  epoch 264, local model 1, internal_epoch   2,  Average loss: 0.0234, Accuracy: 356/641 (55.5382%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 56, internal_epoch   1,  Average loss: 0.0297, Accuracy: 399/743 (53.7012%)
___Train Local_ResNet_18,  epoch 264, local model 56, internal_epoch   2,  Average loss: 0.0156, Accuracy: 516/743 (69.4482%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 21, internal_epoch   1,  Average loss: 0.0421, Accuracy: 143/262 (54.5802%)
___Train Local_ResNet_18,  epoch 264, local model 21, internal_epoch   2,  Average loss: 0.0230, Accuracy: 181/262 (69.0840%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 13, internal_epoch   1,  Average loss: 0.0321, Accuracy: 340/620 (54.8387%)
___Train Local_ResNet_18,  epoch 264, local model 13, internal_epoch   2,  Average loss: 0.0135, Accuracy: 438/620 (70.6452%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 50, internal_epoch   1,  Average loss: 0.0296, Accuracy: 238/401 (59.3516%)
___Train Local_ResNet_18,  epoch 264, local model 50, internal_epoch   2,  Average loss: 0.0150, Accuracy: 311/401 (77.5561%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 19, internal_epoch   1,  Average loss: 0.0800, Accuracy: 37/173 (21.3873%)
___Train Local_ResNet_18,  epoch 264, local model 19, internal_epoch   2,  Average loss: 0.0185, Accuracy: 115/173 (66.4740%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 214.06026601791382
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 287.3693630695343 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:265 choose agents : [77, 11, 93, 45, 91, 54, 5, 30, 73, 13]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   1,  Average loss: 0.0015, Accuracy: 484/496 (97.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   5,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 31.90478942696388.
Norm before scaling: 31.75866196588391. Distance: 2.7882850909881345
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 277.5887245548709, distance: 278.8284502835032
Total norm for 2 adversaries is: 277.5887245548709. distance: 278.8284502835032
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   1,  Average loss: 0.0098, Accuracy: 448/546 (82.0513%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   2,  Average loss: 0.0010, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   3,  Average loss: 0.0009, Accuracy: 539/546 (98.7179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   5,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 31.90478942696388.
Norm before scaling: 32.20231947985754. Distance: 6.117470297482136
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: 2.4531, Accuracy: 3770/10000 (37.7000%)
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: 0.0836, Accuracy: 8778/9000 (97.5333%)
Scaling by  100
Scaled Norm after poisoning: 611.0788615227989, distance: 611.7470627228217
Total norm for 2 adversaries is: 611.0788615227989. distance: 611.7470627228217
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 265, local model 93, internal_epoch   1,  Average loss: 0.0333, Accuracy: 309/584 (52.9110%)
___Train Local_ResNet_18,  epoch 265, local model 93, internal_epoch   2,  Average loss: 0.0165, Accuracy: 400/584 (68.4932%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 45, internal_epoch   1,  Average loss: 0.0384, Accuracy: 247/529 (46.6919%)
___Train Local_ResNet_18,  epoch 265, local model 45, internal_epoch   2,  Average loss: 0.0176, Accuracy: 345/529 (65.2174%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 91, internal_epoch   1,  Average loss: 0.0417, Accuracy: 105/234 (44.8718%)
___Train Local_ResNet_18,  epoch 265, local model 91, internal_epoch   2,  Average loss: 0.0072, Accuracy: 204/234 (87.1795%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 54, internal_epoch   1,  Average loss: 0.0385, Accuracy: 199/440 (45.2273%)
___Train Local_ResNet_18,  epoch 265, local model 54, internal_epoch   2,  Average loss: 0.0142, Accuracy: 319/440 (72.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 5, internal_epoch   1,  Average loss: 0.0395, Accuracy: 167/365 (45.7534%)
___Train Local_ResNet_18,  epoch 265, local model 5, internal_epoch   2,  Average loss: 0.0128, Accuracy: 263/365 (72.0548%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 30, internal_epoch   1,  Average loss: 0.0492, Accuracy: 110/337 (32.6409%)
___Train Local_ResNet_18,  epoch 265, local model 30, internal_epoch   2,  Average loss: 0.0194, Accuracy: 193/337 (57.2700%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 73, internal_epoch   1,  Average loss: 0.0378, Accuracy: 258/500 (51.6000%)
___Train Local_ResNet_18,  epoch 265, local model 73, internal_epoch   2,  Average loss: 0.0139, Accuracy: 388/500 (77.6000%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 13, internal_epoch   1,  Average loss: 0.0298, Accuracy: 343/620 (55.3226%)
___Train Local_ResNet_18,  epoch 265, local model 13, internal_epoch   2,  Average loss: 0.0145, Accuracy: 449/620 (72.4194%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.0763111114502
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 245.04555106163025 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:266 choose agents : [77, 11, 4, 98, 63, 21, 0, 47, 14, 85]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   1,  Average loss: 0.0082, Accuracy: 415/496 (83.6694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   2,  Average loss: 0.0014, Accuracy: 483/496 (97.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   3,  Average loss: 0.0012, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   5,  Average loss: 0.0007, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   6,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Global model norm: 32.14753852783192.
Norm before scaling: 32.61893801440353. Distance: 6.80750140271013
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 680.3477741199716, distance: 680.7501606683616
Total norm for 2 adversaries is: 680.3477741199716. distance: 680.7501606683616
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   1,  Average loss: 0.0013, Accuracy: 533/546 (97.6190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   3,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 32.14753852783192.
Norm before scaling: 31.99582644902691. Distance: 3.0870696103743556
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 307.2577170511751, distance: 308.70698080866265
Total norm for 2 adversaries is: 307.2577170511751. distance: 308.70698080866265
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 266, local model 4, internal_epoch   1,  Average loss: 0.0337, Accuracy: 294/557 (52.7828%)
___Train Local_ResNet_18,  epoch 266, local model 4, internal_epoch   2,  Average loss: 0.0151, Accuracy: 393/557 (70.5566%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 98, internal_epoch   1,  Average loss: 0.0327, Accuracy: 404/802 (50.3741%)
___Train Local_ResNet_18,  epoch 266, local model 98, internal_epoch   2,  Average loss: 0.0190, Accuracy: 495/802 (61.7207%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 63, internal_epoch   1,  Average loss: 0.0298, Accuracy: 378/752 (50.2660%)
___Train Local_ResNet_18,  epoch 266, local model 63, internal_epoch   2,  Average loss: 0.0155, Accuracy: 526/752 (69.9468%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 21, internal_epoch   1,  Average loss: 0.0328, Accuracy: 155/262 (59.1603%)
___Train Local_ResNet_18,  epoch 266, local model 21, internal_epoch   2,  Average loss: 0.0142, Accuracy: 208/262 (79.3893%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 0, internal_epoch   1,  Average loss: 0.0492, Accuracy: 119/367 (32.4251%)
___Train Local_ResNet_18,  epoch 266, local model 0, internal_epoch   2,  Average loss: 0.0169, Accuracy: 222/367 (60.4905%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 47, internal_epoch   1,  Average loss: 0.0293, Accuracy: 370/654 (56.5749%)
___Train Local_ResNet_18,  epoch 266, local model 47, internal_epoch   2,  Average loss: 0.0154, Accuracy: 475/654 (72.6300%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 14, internal_epoch   1,  Average loss: 0.0388, Accuracy: 132/318 (41.5094%)
___Train Local_ResNet_18,  epoch 266, local model 14, internal_epoch   2,  Average loss: 0.0138, Accuracy: 243/318 (76.4151%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 85, internal_epoch   1,  Average loss: 0.0464, Accuracy: 134/364 (36.8132%)
___Train Local_ResNet_18,  epoch 266, local model 85, internal_epoch   2,  Average loss: 0.0212, Accuracy: 201/364 (55.2198%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 195.69598507881165
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 278.81413435935974 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:267 choose agents : [77, 11, 53, 29, 90, 87, 67, 71, 15, 30]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   1,  Average loss: 0.0018, Accuracy: 478/496 (96.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   4,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   6,  Average loss: 0.0007, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Global model norm: 32.595133824290976.
Norm before scaling: 32.50170893944463. Distance: 3.446766795088069
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 343.6106422064078, distance: 344.67669407359125
Total norm for 2 adversaries is: 343.6106422064078. distance: 344.67669407359125
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   1,  Average loss: 0.0075, Accuracy: 468/546 (85.7143%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   2,  Average loss: 0.0013, Accuracy: 534/546 (97.8022%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   3,  Average loss: 0.0007, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   4,  Average loss: 0.0008, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   5,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   6,  Average loss: 0.0003, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Global model norm: 32.595133824290976.
Norm before scaling: 32.91197532991886. Distance: 6.164748159742365
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: 2.1365, Accuracy: 4121/10000 (41.2100%)
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: 0.0819, Accuracy: 8806/9000 (97.8444%)
Scaling by  100
Scaled Norm after poisoning: 615.937268518475, distance: 616.4747815198931
Total norm for 2 adversaries is: 615.937268518475. distance: 616.4747815198931
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 267, local model 53, internal_epoch   1,  Average loss: 0.0350, Accuracy: 323/625 (51.6800%)
___Train Local_ResNet_18,  epoch 267, local model 53, internal_epoch   2,  Average loss: 0.0157, Accuracy: 418/625 (66.8800%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 29, internal_epoch   1,  Average loss: 0.0266, Accuracy: 533/848 (62.8538%)
___Train Local_ResNet_18,  epoch 267, local model 29, internal_epoch   2,  Average loss: 0.0146, Accuracy: 641/848 (75.5896%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 90, internal_epoch   1,  Average loss: 0.0356, Accuracy: 337/578 (58.3045%)
___Train Local_ResNet_18,  epoch 267, local model 90, internal_epoch   2,  Average loss: 0.0148, Accuracy: 405/578 (70.0692%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 87, internal_epoch   1,  Average loss: 0.0398, Accuracy: 195/397 (49.1184%)
___Train Local_ResNet_18,  epoch 267, local model 87, internal_epoch   2,  Average loss: 0.0153, Accuracy: 298/397 (75.0630%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 67, internal_epoch   1,  Average loss: 0.0341, Accuracy: 369/842 (43.8242%)
___Train Local_ResNet_18,  epoch 267, local model 67, internal_epoch   2,  Average loss: 0.0204, Accuracy: 506/842 (60.0950%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 71, internal_epoch   1,  Average loss: 0.0238, Accuracy: 697/1166 (59.7770%)
___Train Local_ResNet_18,  epoch 267, local model 71, internal_epoch   2,  Average loss: 0.0128, Accuracy: 854/1166 (73.2419%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 15, internal_epoch   1,  Average loss: 0.0400, Accuracy: 163/341 (47.8006%)
___Train Local_ResNet_18,  epoch 267, local model 15, internal_epoch   2,  Average loss: 0.0190, Accuracy: 237/341 (69.5015%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 30, internal_epoch   1,  Average loss: 0.0517, Accuracy: 118/337 (35.0148%)
___Train Local_ResNet_18,  epoch 267, local model 30, internal_epoch   2,  Average loss: 0.0182, Accuracy: 202/337 (59.9407%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 213.65982389450073
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 276.19347739219666 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:268 choose agents : [77, 11, 34, 21, 1, 0, 94, 52, 35, 58]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   1,  Average loss: 0.0059, Accuracy: 443/496 (89.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   2,  Average loss: 0.0011, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   4,  Average loss: 0.0009, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   5,  Average loss: 0.0011, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   6,  Average loss: 0.0007, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Global model norm: 32.91109814119509.
Norm before scaling: 33.12894839380942. Distance: 5.646525585719553
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 564.0620810247751, distance: 564.6524926890875
Total norm for 2 adversaries is: 564.0620810247751. distance: 564.6524926890875
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   1,  Average loss: 0.0013, Accuracy: 536/546 (98.1685%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   3,  Average loss: 0.0005, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   4,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 32.91109814119509.
Norm before scaling: 32.70028244036567. Distance: 2.741521249023997
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: 2.0896, Accuracy: 4083/10000 (40.8300%)
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: 0.0629, Accuracy: 8844/9000 (98.2667%)
Scaling by  100
Scaled Norm after poisoning: 272.2273291754522, distance: 274.1521019434285
Total norm for 2 adversaries is: 272.2273291754522. distance: 274.1521019434285
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 268, local model 34, internal_epoch   1,  Average loss: 0.0461, Accuracy: 143/349 (40.9742%)
___Train Local_ResNet_18,  epoch 268, local model 34, internal_epoch   2,  Average loss: 0.0137, Accuracy: 256/349 (73.3524%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 21, internal_epoch   1,  Average loss: 0.0347, Accuracy: 154/262 (58.7786%)
___Train Local_ResNet_18,  epoch 268, local model 21, internal_epoch   2,  Average loss: 0.0262, Accuracy: 158/262 (60.3053%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 1, internal_epoch   1,  Average loss: 0.0361, Accuracy: 340/641 (53.0421%)
___Train Local_ResNet_18,  epoch 268, local model 1, internal_epoch   2,  Average loss: 0.0201, Accuracy: 356/641 (55.5382%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 0, internal_epoch   1,  Average loss: 0.0429, Accuracy: 144/367 (39.2371%)
___Train Local_ResNet_18,  epoch 268, local model 0, internal_epoch   2,  Average loss: 0.0156, Accuracy: 237/367 (64.5777%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 94, internal_epoch   1,  Average loss: 0.0587, Accuracy: 71/203 (34.9754%)
___Train Local_ResNet_18,  epoch 268, local model 94, internal_epoch   2,  Average loss: 0.0191, Accuracy: 164/203 (80.7882%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 52, internal_epoch   1,  Average loss: 0.0485, Accuracy: 97/214 (45.3271%)
___Train Local_ResNet_18,  epoch 268, local model 52, internal_epoch   2,  Average loss: 0.0121, Accuracy: 176/214 (82.2430%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 35, internal_epoch   1,  Average loss: 0.0396, Accuracy: 197/419 (47.0167%)
___Train Local_ResNet_18,  epoch 268, local model 35, internal_epoch   2,  Average loss: 0.0155, Accuracy: 272/419 (64.9165%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 58, internal_epoch   1,  Average loss: 0.0541, Accuracy: 82/234 (35.0427%)
___Train Local_ResNet_18,  epoch 268, local model 58, internal_epoch   2,  Average loss: 0.0152, Accuracy: 190/234 (81.1966%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 204.7588174343109
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 275.511638879776 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:269 choose agents : [77, 11, 29, 4, 34, 18, 93, 45, 86, 8]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   1,  Average loss: 0.0012, Accuracy: 488/496 (98.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   2,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   3,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   4,  Average loss: 0.0009, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   5,  Average loss: 0.0007, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 32.98926346413709.
Norm before scaling: 32.81214471533844. Distance: 2.6417611290762353
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 262.7050984469087, distance: 264.1760776451948
Total norm for 2 adversaries is: 262.7050984469087. distance: 264.1760776451948
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   1,  Average loss: 0.0057, Accuracy: 495/546 (90.6593%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   2,  Average loss: 0.0008, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   3,  Average loss: 0.0009, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   4,  Average loss: 0.0006, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 32.98926346413709.
Norm before scaling: 33.11044417811206. Distance: 5.2776008955555325
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: 7.5515, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: 7.2341, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 526.9105711598506, distance: 527.7601254357893
Total norm for 2 adversaries is: 526.9105711598506. distance: 527.7601254357893
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 269, local model 29, internal_epoch   1,  Average loss: 0.0280, Accuracy: 526/848 (62.0283%)
___Train Local_ResNet_18,  epoch 269, local model 29, internal_epoch   2,  Average loss: 0.0127, Accuracy: 657/848 (77.4764%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 4, internal_epoch   1,  Average loss: 0.0361, Accuracy: 263/557 (47.2172%)
___Train Local_ResNet_18,  epoch 269, local model 4, internal_epoch   2,  Average loss: 0.0150, Accuracy: 378/557 (67.8636%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 34, internal_epoch   1,  Average loss: 0.0404, Accuracy: 168/349 (48.1375%)
___Train Local_ResNet_18,  epoch 269, local model 34, internal_epoch   2,  Average loss: 0.0148, Accuracy: 253/349 (72.4928%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 18, internal_epoch   1,  Average loss: 0.0401, Accuracy: 179/386 (46.3731%)
___Train Local_ResNet_18,  epoch 269, local model 18, internal_epoch   2,  Average loss: 0.0181, Accuracy: 263/386 (68.1347%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 93, internal_epoch   1,  Average loss: 0.0370, Accuracy: 292/584 (50.0000%)
___Train Local_ResNet_18,  epoch 269, local model 93, internal_epoch   2,  Average loss: 0.0209, Accuracy: 370/584 (63.3562%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 45, internal_epoch   1,  Average loss: 0.0400, Accuracy: 252/529 (47.6371%)
___Train Local_ResNet_18,  epoch 269, local model 45, internal_epoch   2,  Average loss: 0.0187, Accuracy: 331/529 (62.5709%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 86, internal_epoch   1,  Average loss: 0.0556, Accuracy: 74/212 (34.9057%)
___Train Local_ResNet_18,  epoch 269, local model 86, internal_epoch   2,  Average loss: 0.0200, Accuracy: 146/212 (68.8679%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 8, internal_epoch   1,  Average loss: 0.0380, Accuracy: 255/534 (47.7528%)
___Train Local_ResNet_18,  epoch 269, local model 8, internal_epoch   2,  Average loss: 0.0193, Accuracy: 327/534 (61.2360%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 187.70301175117493
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 251.29516077041626 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:270 choose agents : [77, 11, 64, 47, 56, 42, 25, 20, 76, 96]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   1,  Average loss: 0.0039, Accuracy: 458/496 (92.3387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   2,  Average loss: 0.0010, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   3,  Average loss: 0.0006, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   4,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   6,  Average loss: 0.0006, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Global model norm: 32.97402023930639.
Norm before scaling: 32.97798300808056. Distance: 4.336151502672154
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 432.7300688651067, distance: 433.6151447424317
Total norm for 2 adversaries is: 432.7300688651067. distance: 433.6151447424317
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   1,  Average loss: 0.0007, Accuracy: 541/546 (99.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   6,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 32.97402023930639.
Norm before scaling: 32.69167299785126. Distance: 1.9436542843131108
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 191.3984411672415, distance: 194.36541375074938
Total norm for 2 adversaries is: 191.3984411672415. distance: 194.36541375074938
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 270, local model 64, internal_epoch   1,  Average loss: 0.0261, Accuracy: 373/686 (54.3732%)
___Train Local_ResNet_18,  epoch 270, local model 64, internal_epoch   2,  Average loss: 0.0120, Accuracy: 519/686 (75.6560%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 47, internal_epoch   1,  Average loss: 0.0244, Accuracy: 404/654 (61.7737%)
___Train Local_ResNet_18,  epoch 270, local model 47, internal_epoch   2,  Average loss: 0.0141, Accuracy: 491/654 (75.0765%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 56, internal_epoch   1,  Average loss: 0.0281, Accuracy: 402/743 (54.1050%)
___Train Local_ResNet_18,  epoch 270, local model 56, internal_epoch   2,  Average loss: 0.0154, Accuracy: 504/743 (67.8331%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 42, internal_epoch   1,  Average loss: 0.0439, Accuracy: 89/198 (44.9495%)
___Train Local_ResNet_18,  epoch 270, local model 42, internal_epoch   2,  Average loss: 0.0217, Accuracy: 156/198 (78.7879%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 25, internal_epoch   1,  Average loss: 0.0254, Accuracy: 347/545 (63.6697%)
___Train Local_ResNet_18,  epoch 270, local model 25, internal_epoch   2,  Average loss: 0.0110, Accuracy: 433/545 (79.4495%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 20, internal_epoch   1,  Average loss: 0.0444, Accuracy: 152/362 (41.9890%)
___Train Local_ResNet_18,  epoch 270, local model 20, internal_epoch   2,  Average loss: 0.0125, Accuracy: 266/362 (73.4807%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 76, internal_epoch   1,  Average loss: 0.1015, Accuracy: 24/65 (36.9231%)
___Train Local_ResNet_18,  epoch 270, local model 76, internal_epoch   2,  Average loss: 0.0211, Accuracy: 47/65 (72.3077%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 96, internal_epoch   1,  Average loss: 0.0308, Accuracy: 358/708 (50.5650%)
___Train Local_ResNet_18,  epoch 270, local model 96, internal_epoch   2,  Average loss: 0.0188, Accuracy: 423/708 (59.7458%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 210.9509437084198
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 282.99141788482666 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:271 choose agents : [77, 11, 31, 79, 15, 53, 12, 45, 25, 80]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   1,  Average loss: 0.0007, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   4,  Average loss: 0.0005, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 32.72276046934878.
Norm before scaling: 32.4666257425895. Distance: 1.6973062209705594
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 167.09715432757974, distance: 169.73062872718347
Total norm for 2 adversaries is: 167.09715432757974. distance: 169.73062872718347
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   1,  Average loss: 0.0037, Accuracy: 511/546 (93.5897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 32.72276046934878.
Norm before scaling: 32.62449861923168. Distance: 3.892292814235024
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: 6.4996, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: 5.3419, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 387.83130997896495, distance: 389.22932668286956
Total norm for 2 adversaries is: 387.83130997896495. distance: 389.22932668286956
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 271, local model 31, internal_epoch   1,  Average loss: 0.0335, Accuracy: 348/706 (49.2918%)
___Train Local_ResNet_18,  epoch 271, local model 31, internal_epoch   2,  Average loss: 0.0183, Accuracy: 473/706 (66.9972%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 79, internal_epoch   1,  Average loss: 0.0509, Accuracy: 64/154 (41.5584%)
___Train Local_ResNet_18,  epoch 271, local model 79, internal_epoch   2,  Average loss: 0.0111, Accuracy: 129/154 (83.7662%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 15, internal_epoch   1,  Average loss: 0.0381, Accuracy: 184/341 (53.9589%)
___Train Local_ResNet_18,  epoch 271, local model 15, internal_epoch   2,  Average loss: 0.0144, Accuracy: 254/341 (74.4868%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 53, internal_epoch   1,  Average loss: 0.0312, Accuracy: 329/625 (52.6400%)
___Train Local_ResNet_18,  epoch 271, local model 53, internal_epoch   2,  Average loss: 0.0123, Accuracy: 463/625 (74.0800%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 12, internal_epoch   1,  Average loss: 0.0255, Accuracy: 581/977 (59.4678%)
___Train Local_ResNet_18,  epoch 271, local model 12, internal_epoch   2,  Average loss: 0.0157, Accuracy: 654/977 (66.9396%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 45, internal_epoch   1,  Average loss: 0.0321, Accuracy: 274/529 (51.7958%)
___Train Local_ResNet_18,  epoch 271, local model 45, internal_epoch   2,  Average loss: 0.0140, Accuracy: 399/529 (75.4253%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 25, internal_epoch   1,  Average loss: 0.0251, Accuracy: 341/545 (62.5688%)
___Train Local_ResNet_18,  epoch 271, local model 25, internal_epoch   2,  Average loss: 0.0119, Accuracy: 436/545 (80.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 80, internal_epoch   1,  Average loss: 0.0358, Accuracy: 185/363 (50.9642%)
___Train Local_ResNet_18,  epoch 271, local model 80, internal_epoch   2,  Average loss: 0.0091, Accuracy: 302/363 (83.1956%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 173.03331089019775
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 232.57232189178467 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:272 choose agents : [77, 11, 99, 79, 12, 62, 68, 60, 24, 16]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   1,  Average loss: 0.0031, Accuracy: 468/496 (94.3548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 32.37502450831601.
Norm before scaling: 32.335104143344545. Distance: 3.923498174941843
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 391.3934042303217, distance: 392.34977220587245
Total norm for 2 adversaries is: 391.3934042303217. distance: 392.34977220587245
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   1,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   2,  Average loss: 0.0003, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 32.37502450831601.
Norm before scaling: 32.05719604643199. Distance: 1.1787377886175026
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 112.94065608484395, distance: 117.87375728401128
Total norm for 2 adversaries is: 112.94065608484395. distance: 117.87375728401128
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 272, local model 99, internal_epoch   1,  Average loss: 0.0403, Accuracy: 189/391 (48.3376%)
___Train Local_ResNet_18,  epoch 272, local model 99, internal_epoch   2,  Average loss: 0.0237, Accuracy: 233/391 (59.5908%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 79, internal_epoch   1,  Average loss: 0.0550, Accuracy: 58/154 (37.6623%)
___Train Local_ResNet_18,  epoch 272, local model 79, internal_epoch   2,  Average loss: 0.0093, Accuracy: 133/154 (86.3636%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 12, internal_epoch   1,  Average loss: 0.0259, Accuracy: 563/977 (57.6254%)
___Train Local_ResNet_18,  epoch 272, local model 12, internal_epoch   2,  Average loss: 0.0138, Accuracy: 701/977 (71.7503%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 62, internal_epoch   1,  Average loss: 0.0366, Accuracy: 160/358 (44.6927%)
___Train Local_ResNet_18,  epoch 272, local model 62, internal_epoch   2,  Average loss: 0.0147, Accuracy: 259/358 (72.3464%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 68, internal_epoch   1,  Average loss: 0.0324, Accuracy: 199/416 (47.8365%)
___Train Local_ResNet_18,  epoch 272, local model 68, internal_epoch   2,  Average loss: 0.0147, Accuracy: 293/416 (70.4327%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 60, internal_epoch   1,  Average loss: 0.0369, Accuracy: 129/284 (45.4225%)
___Train Local_ResNet_18,  epoch 272, local model 60, internal_epoch   2,  Average loss: 0.0142, Accuracy: 220/284 (77.4648%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 24, internal_epoch   1,  Average loss: 0.0327, Accuracy: 161/320 (50.3125%)
___Train Local_ResNet_18,  epoch 272, local model 24, internal_epoch   2,  Average loss: 0.0102, Accuracy: 248/320 (77.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 16, internal_epoch   1,  Average loss: 0.0310, Accuracy: 423/773 (54.7219%)
___Train Local_ResNet_18,  epoch 272, local model 16, internal_epoch   2,  Average loss: 0.0182, Accuracy: 525/773 (67.9172%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.71500778198242
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.28117084503174 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:273 choose agents : [77, 11, 21, 70, 56, 27, 15, 28, 59, 81]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   1,  Average loss: 0.0008, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   5,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 32.031754950288196.
Norm before scaling: 31.782876602302498. Distance: 1.5323487057454501
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 150.611922409466, distance: 153.23489678839476
Total norm for 2 adversaries is: 150.611922409466. distance: 153.23489678839476
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   1,  Average loss: 0.0033, Accuracy: 520/546 (95.2381%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 32.031754950288196.
Norm before scaling: 31.944755551210005. Distance: 3.8584004148470004
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 384.5169046999104, distance: 385.8400534871931
Total norm for 2 adversaries is: 384.5169046999104. distance: 385.8400534871931
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 273, local model 21, internal_epoch   1,  Average loss: 0.0461, Accuracy: 142/262 (54.1985%)
___Train Local_ResNet_18,  epoch 273, local model 21, internal_epoch   2,  Average loss: 0.0116, Accuracy: 204/262 (77.8626%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 70, internal_epoch   1,  Average loss: 0.0291, Accuracy: 363/610 (59.5082%)
___Train Local_ResNet_18,  epoch 273, local model 70, internal_epoch   2,  Average loss: 0.0107, Accuracy: 488/610 (80.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 56, internal_epoch   1,  Average loss: 0.0277, Accuracy: 404/743 (54.3742%)
___Train Local_ResNet_18,  epoch 273, local model 56, internal_epoch   2,  Average loss: 0.0148, Accuracy: 505/743 (67.9677%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 27, internal_epoch   1,  Average loss: 0.0329, Accuracy: 219/397 (55.1637%)
___Train Local_ResNet_18,  epoch 273, local model 27, internal_epoch   2,  Average loss: 0.0113, Accuracy: 322/397 (81.1083%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 15, internal_epoch   1,  Average loss: 0.0344, Accuracy: 186/341 (54.5455%)
___Train Local_ResNet_18,  epoch 273, local model 15, internal_epoch   2,  Average loss: 0.0137, Accuracy: 257/341 (75.3666%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 28, internal_epoch   1,  Average loss: 0.0364, Accuracy: 185/423 (43.7352%)
___Train Local_ResNet_18,  epoch 273, local model 28, internal_epoch   2,  Average loss: 0.0155, Accuracy: 292/423 (69.0307%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 59, internal_epoch   1,  Average loss: 0.0303, Accuracy: 364/642 (56.6978%)
___Train Local_ResNet_18,  epoch 273, local model 59, internal_epoch   2,  Average loss: 0.0233, Accuracy: 330/642 (51.4019%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 81, internal_epoch   1,  Average loss: 0.0212, Accuracy: 692/1034 (66.9246%)
___Train Local_ResNet_18,  epoch 273, local model 81, internal_epoch   2,  Average loss: 0.0103, Accuracy: 841/1034 (81.3346%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 162.5625011920929
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 215.29777359962463 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:274 choose agents : [77, 11, 67, 19, 32, 8, 27, 48, 91, 90]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   1,  Average loss: 0.0020, Accuracy: 477/496 (96.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   3,  Average loss: 0.0007, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 31.697995827072805.
Norm before scaling: 31.54899347455973. Distance: 2.818348546843371
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 280.53332299835614, distance: 281.8348641048513
Total norm for 2 adversaries is: 280.53332299835614. distance: 281.8348641048513
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   1,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   2,  Average loss: 0.0004, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 31.697995827072805.
Norm before scaling: 31.392736520571123. Distance: 1.257605067616971
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 121.39358846459932, distance: 125.76051847782952
Total norm for 2 adversaries is: 121.39358846459932. distance: 125.76051847782952
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 274, local model 67, internal_epoch   1,  Average loss: 0.0270, Accuracy: 471/842 (55.9382%)
___Train Local_ResNet_18,  epoch 274, local model 67, internal_epoch   2,  Average loss: 0.0151, Accuracy: 561/842 (66.6271%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 19, internal_epoch   1,  Average loss: 0.0513, Accuracy: 54/173 (31.2139%)
___Train Local_ResNet_18,  epoch 274, local model 19, internal_epoch   2,  Average loss: 0.0084, Accuracy: 149/173 (86.1272%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 32, internal_epoch   1,  Average loss: 0.0242, Accuracy: 481/824 (58.3738%)
___Train Local_ResNet_18,  epoch 274, local model 32, internal_epoch   2,  Average loss: 0.0127, Accuracy: 620/824 (75.2427%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 8, internal_epoch   1,  Average loss: 0.0304, Accuracy: 276/534 (51.6854%)
___Train Local_ResNet_18,  epoch 274, local model 8, internal_epoch   2,  Average loss: 0.0127, Accuracy: 407/534 (76.2172%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 27, internal_epoch   1,  Average loss: 0.0280, Accuracy: 247/397 (62.2166%)
___Train Local_ResNet_18,  epoch 274, local model 27, internal_epoch   2,  Average loss: 0.0156, Accuracy: 305/397 (76.8262%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 48, internal_epoch   1,  Average loss: 0.0389, Accuracy: 154/378 (40.7407%)
___Train Local_ResNet_18,  epoch 274, local model 48, internal_epoch   2,  Average loss: 0.0145, Accuracy: 266/378 (70.3704%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 91, internal_epoch   1,  Average loss: 0.0410, Accuracy: 107/234 (45.7265%)
___Train Local_ResNet_18,  epoch 274, local model 91, internal_epoch   2,  Average loss: 0.0081, Accuracy: 197/234 (84.1880%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 90, internal_epoch   1,  Average loss: 0.0292, Accuracy: 347/578 (60.0346%)
___Train Local_ResNet_18,  epoch 274, local model 90, internal_epoch   2,  Average loss: 0.0116, Accuracy: 427/578 (73.8754%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.97035717964172
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 229.8256733417511 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:275 choose agents : [77, 11, 58, 93, 5, 2, 42, 0, 6, 39]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   1,  Average loss: 0.0006, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   2,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   3,  Average loss: 0.0010, Accuracy: 490/496 (98.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   6,  Average loss: 0.0005, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 31.23784236163177.
Norm before scaling: 30.97780282037648. Distance: 1.3562597335958366
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 132.5458794389701, distance: 135.62597925913752
Total norm for 2 adversaries is: 132.5458794389701. distance: 135.62597925913752
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   1,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   3,  Average loss: 0.0004, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   4,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   5,  Average loss: 0.0006, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 31.23784236163177.
Norm before scaling: 30.951536627910837. Distance: 1.3089540811036835
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 127.11233958589544, distance: 130.89541388070094
Total norm for 2 adversaries is: 127.11233958589544. distance: 130.89541388070094
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 275, local model 58, internal_epoch   1,  Average loss: 0.0459, Accuracy: 95/234 (40.5983%)
___Train Local_ResNet_18,  epoch 275, local model 58, internal_epoch   2,  Average loss: 0.0080, Accuracy: 200/234 (85.4701%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 93, internal_epoch   1,  Average loss: 0.0289, Accuracy: 338/584 (57.8767%)
___Train Local_ResNet_18,  epoch 275, local model 93, internal_epoch   2,  Average loss: 0.0169, Accuracy: 429/584 (73.4589%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 5, internal_epoch   1,  Average loss: 0.0280, Accuracy: 201/365 (55.0685%)
___Train Local_ResNet_18,  epoch 275, local model 5, internal_epoch   2,  Average loss: 0.0105, Accuracy: 290/365 (79.4521%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 2, internal_epoch   1,  Average loss: 0.0293, Accuracy: 276/461 (59.8698%)
___Train Local_ResNet_18,  epoch 275, local model 2, internal_epoch   2,  Average loss: 0.0119, Accuracy: 368/461 (79.8265%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 42, internal_epoch   1,  Average loss: 0.0347, Accuracy: 107/198 (54.0404%)
___Train Local_ResNet_18,  epoch 275, local model 42, internal_epoch   2,  Average loss: 0.0192, Accuracy: 158/198 (79.7980%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 0, internal_epoch   1,  Average loss: 0.0336, Accuracy: 179/367 (48.7738%)
___Train Local_ResNet_18,  epoch 275, local model 0, internal_epoch   2,  Average loss: 0.0134, Accuracy: 261/367 (71.1172%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 6, internal_epoch   1,  Average loss: 0.0279, Accuracy: 304/520 (58.4615%)
___Train Local_ResNet_18,  epoch 275, local model 6, internal_epoch   2,  Average loss: 0.0112, Accuracy: 404/520 (77.6923%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 39, internal_epoch   1,  Average loss: 0.0462, Accuracy: 82/217 (37.7880%)
___Train Local_ResNet_18,  epoch 275, local model 39, internal_epoch   2,  Average loss: 0.0122, Accuracy: 183/217 (84.3318%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 178.40030598640442
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.81697130203247 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:276 choose agents : [77, 11, 18, 51, 99, 48, 20, 14, 76, 17]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 30.67224711631123.
Norm before scaling: 30.41801063668941. Distance: 0.7391884291225254
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 69.2604311581927, distance: 73.9188480277527
Total norm for 2 adversaries is: 69.2604311581927. distance: 73.9188480277527
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   1,  Average loss: 0.0003, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 30.67224711631123.
Norm before scaling: 30.36409610904845. Distance: 0.6992937399434124
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 62.45933247234255, distance: 69.9293763434313
Total norm for 2 adversaries is: 62.45933247234255. distance: 69.9293763434313
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 276, local model 18, internal_epoch   1,  Average loss: 0.0307, Accuracy: 207/386 (53.6269%)
___Train Local_ResNet_18,  epoch 276, local model 18, internal_epoch   2,  Average loss: 0.0168, Accuracy: 273/386 (70.7254%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 51, internal_epoch   1,  Average loss: 0.0241, Accuracy: 297/479 (62.0042%)
___Train Local_ResNet_18,  epoch 276, local model 51, internal_epoch   2,  Average loss: 0.0101, Accuracy: 385/479 (80.3758%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 99, internal_epoch   1,  Average loss: 0.0362, Accuracy: 195/391 (49.8721%)
___Train Local_ResNet_18,  epoch 276, local model 99, internal_epoch   2,  Average loss: 0.0196, Accuracy: 257/391 (65.7289%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 48, internal_epoch   1,  Average loss: 0.0326, Accuracy: 174/378 (46.0317%)
___Train Local_ResNet_18,  epoch 276, local model 48, internal_epoch   2,  Average loss: 0.0117, Accuracy: 277/378 (73.2804%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 20, internal_epoch   1,  Average loss: 0.0322, Accuracy: 179/362 (49.4475%)
___Train Local_ResNet_18,  epoch 276, local model 20, internal_epoch   2,  Average loss: 0.0109, Accuracy: 288/362 (79.5580%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 14, internal_epoch   1,  Average loss: 0.0257, Accuracy: 189/318 (59.4340%)
___Train Local_ResNet_18,  epoch 276, local model 14, internal_epoch   2,  Average loss: 0.0063, Accuracy: 270/318 (84.9057%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 76, internal_epoch   1,  Average loss: 0.0538, Accuracy: 21/65 (32.3077%)
___Train Local_ResNet_18,  epoch 276, local model 76, internal_epoch   2,  Average loss: 0.0608, Accuracy: 52/65 (80.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 17, internal_epoch   1,  Average loss: 0.0277, Accuracy: 306/526 (58.1749%)
___Train Local_ResNet_18,  epoch 276, local model 17, internal_epoch   2,  Average loss: 0.0137, Accuracy: 396/526 (75.2852%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.84001779556274
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.41943621635437 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:277 choose agents : [77, 11, 69, 97, 95, 70, 40, 87, 16, 48]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   1,  Average loss: 0.0007, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   4,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 30.087525925349755.
Norm before scaling: 29.825194657003077. Distance: 0.7300809759142521
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 67.90028160609866, distance: 73.00808963631188
Total norm for 2 adversaries is: 67.90028160609866. distance: 73.00808963631188
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   5,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 30.087525925349755.
Norm before scaling: 29.78721534890745. Distance: 0.8333910365789632
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 77.35064678846422, distance: 83.33908931944092
Total norm for 2 adversaries is: 77.35064678846422. distance: 83.33908931944092
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 277, local model 69, internal_epoch   1,  Average loss: 0.0332, Accuracy: 118/216 (54.6296%)
___Train Local_ResNet_18,  epoch 277, local model 69, internal_epoch   2,  Average loss: 0.0086, Accuracy: 195/216 (90.2778%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 97, internal_epoch   1,  Average loss: 0.0232, Accuracy: 260/418 (62.2010%)
___Train Local_ResNet_18,  epoch 277, local model 97, internal_epoch   2,  Average loss: 0.0106, Accuracy: 327/418 (78.2297%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 95, internal_epoch   1,  Average loss: 0.0262, Accuracy: 328/569 (57.6450%)
___Train Local_ResNet_18,  epoch 277, local model 95, internal_epoch   2,  Average loss: 0.0114, Accuracy: 436/569 (76.6257%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 70, internal_epoch   1,  Average loss: 0.0228, Accuracy: 384/610 (62.9508%)
___Train Local_ResNet_18,  epoch 277, local model 70, internal_epoch   2,  Average loss: 0.0108, Accuracy: 480/610 (78.6885%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 40, internal_epoch   1,  Average loss: 0.0248, Accuracy: 393/652 (60.2761%)
___Train Local_ResNet_18,  epoch 277, local model 40, internal_epoch   2,  Average loss: 0.0180, Accuracy: 437/652 (67.0245%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 87, internal_epoch   1,  Average loss: 0.0287, Accuracy: 212/397 (53.4005%)
___Train Local_ResNet_18,  epoch 277, local model 87, internal_epoch   2,  Average loss: 0.0133, Accuracy: 305/397 (76.8262%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 16, internal_epoch   1,  Average loss: 0.0248, Accuracy: 439/773 (56.7917%)
___Train Local_ResNet_18,  epoch 277, local model 16, internal_epoch   2,  Average loss: 0.0138, Accuracy: 576/773 (74.5149%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 48, internal_epoch   1,  Average loss: 0.0286, Accuracy: 193/378 (51.0582%)
___Train Local_ResNet_18,  epoch 277, local model 48, internal_epoch   2,  Average loss: 0.0103, Accuracy: 290/378 (76.7196%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 174.0521376132965
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 239.0213131904602 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:278 choose agents : [77, 11, 15, 3, 83, 24, 36, 58, 74, 29]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   1,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 29.499537577480027.
Norm before scaling: 29.240520799750215. Distance: 0.48735836551394524
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 41.233118290341714, distance: 48.73583778663936
Total norm for 2 adversaries is: 41.233118290341714. distance: 48.73583778663936
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   6,  Average loss: 0.0005, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 29.499537577480027.
Norm before scaling: 29.19938362202617. Distance: 0.42045050769643244
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 29.299322814406693, distance: 42.04505030182283
Total norm for 2 adversaries is: 29.299322814406693. distance: 42.04505030182283
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 278, local model 15, internal_epoch   1,  Average loss: 0.0267, Accuracy: 205/341 (60.1173%)
___Train Local_ResNet_18,  epoch 278, local model 15, internal_epoch   2,  Average loss: 0.0094, Accuracy: 277/341 (81.2317%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 3, internal_epoch   1,  Average loss: 0.0218, Accuracy: 488/780 (62.5641%)
___Train Local_ResNet_18,  epoch 278, local model 3, internal_epoch   2,  Average loss: 0.0117, Accuracy: 604/780 (77.4359%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 83, internal_epoch   1,  Average loss: 0.0241, Accuracy: 197/366 (53.8251%)
___Train Local_ResNet_18,  epoch 278, local model 83, internal_epoch   2,  Average loss: 0.0098, Accuracy: 297/366 (81.1475%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 24, internal_epoch   1,  Average loss: 0.0260, Accuracy: 177/320 (55.3125%)
___Train Local_ResNet_18,  epoch 278, local model 24, internal_epoch   2,  Average loss: 0.0069, Accuracy: 276/320 (86.2500%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 36, internal_epoch   1,  Average loss: 0.0263, Accuracy: 458/849 (53.9458%)
___Train Local_ResNet_18,  epoch 278, local model 36, internal_epoch   2,  Average loss: 0.0154, Accuracy: 580/849 (68.3157%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 58, internal_epoch   1,  Average loss: 0.0342, Accuracy: 113/234 (48.2906%)
___Train Local_ResNet_18,  epoch 278, local model 58, internal_epoch   2,  Average loss: 0.0070, Accuracy: 203/234 (86.7521%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 74, internal_epoch   1,  Average loss: 0.0230, Accuracy: 280/469 (59.7015%)
___Train Local_ResNet_18,  epoch 278, local model 74, internal_epoch   2,  Average loss: 0.0123, Accuracy: 370/469 (78.8913%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 29, internal_epoch   1,  Average loss: 0.0198, Accuracy: 604/848 (71.2264%)
___Train Local_ResNet_18,  epoch 278, local model 29, internal_epoch   2,  Average loss: 0.0118, Accuracy: 656/848 (77.3585%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.26601696014404
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.7508339881897 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:279 choose agents : [77, 11, 52, 50, 82, 86, 80, 94, 75, 93]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   5,  Average loss: 0.0005, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   6,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 28.917042959734943.
Norm before scaling: 28.664176418757002. Distance: 0.5954595849666405
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 53.76268927251036, distance: 59.54595249875826
Total norm for 2 adversaries is: 53.76268927251036. distance: 59.54595249875826
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   2,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 28.917042959734943.
Norm before scaling: 28.623759013765557. Distance: 0.5607203039179564
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 47.552517739436, distance: 56.072031833225466
Total norm for 2 adversaries is: 47.552517739436. distance: 56.072031833225466
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 279, local model 52, internal_epoch   1,  Average loss: 0.0370, Accuracy: 113/214 (52.8037%)
___Train Local_ResNet_18,  epoch 279, local model 52, internal_epoch   2,  Average loss: 0.0087, Accuracy: 187/214 (87.3832%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 50, internal_epoch   1,  Average loss: 0.0213, Accuracy: 266/401 (66.3342%)
___Train Local_ResNet_18,  epoch 279, local model 50, internal_epoch   2,  Average loss: 0.0126, Accuracy: 310/401 (77.3067%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 82, internal_epoch   1,  Average loss: 0.0185, Accuracy: 408/601 (67.8869%)
___Train Local_ResNet_18,  epoch 279, local model 82, internal_epoch   2,  Average loss: 0.0101, Accuracy: 488/601 (81.1980%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 86, internal_epoch   1,  Average loss: 0.0318, Accuracy: 105/212 (49.5283%)
___Train Local_ResNet_18,  epoch 279, local model 86, internal_epoch   2,  Average loss: 0.0108, Accuracy: 184/212 (86.7925%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 80, internal_epoch   1,  Average loss: 0.0217, Accuracy: 235/363 (64.7383%)
___Train Local_ResNet_18,  epoch 279, local model 80, internal_epoch   2,  Average loss: 0.0060, Accuracy: 321/363 (88.4298%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 94, internal_epoch   1,  Average loss: 0.0293, Accuracy: 118/203 (58.1281%)
___Train Local_ResNet_18,  epoch 279, local model 94, internal_epoch   2,  Average loss: 0.0095, Accuracy: 176/203 (86.6995%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 75, internal_epoch   1,  Average loss: 0.0258, Accuracy: 368/578 (63.6678%)
___Train Local_ResNet_18,  epoch 279, local model 75, internal_epoch   2,  Average loss: 0.0325, Accuracy: 251/578 (43.4256%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 93, internal_epoch   1,  Average loss: 0.0209, Accuracy: 387/584 (66.2671%)
___Train Local_ResNet_18,  epoch 279, local model 93, internal_epoch   2,  Average loss: 0.0136, Accuracy: 436/584 (74.6575%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 186.0425796508789
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 263.67386412620544 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:280 choose agents : [77, 11, 6, 34, 44, 79, 13, 53, 65, 78]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   2,  Average loss: 0.0004, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   4,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 28.35426090251913.
Norm before scaling: 28.11203802873257. Distance: 0.5648599498319865
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 50.94103946675141, distance: 56.485989344150646
Total norm for 2 adversaries is: 50.94103946675141. distance: 56.485989344150646
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   3,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 28.35426090251913.
Norm before scaling: 28.06622765470317. Distance: 0.43083562915209983
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 31.882632549724956, distance: 43.083561102869474
Total norm for 2 adversaries is: 31.882632549724956. distance: 43.083561102869474
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 280, local model 6, internal_epoch   1,  Average loss: 0.0197, Accuracy: 326/520 (62.6923%)
___Train Local_ResNet_18,  epoch 280, local model 6, internal_epoch   2,  Average loss: 0.0120, Accuracy: 399/520 (76.7308%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 34, internal_epoch   1,  Average loss: 0.0261, Accuracy: 204/349 (58.4527%)
___Train Local_ResNet_18,  epoch 280, local model 34, internal_epoch   2,  Average loss: 0.0070, Accuracy: 310/349 (88.8252%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 44, internal_epoch   1,  Average loss: 0.0235, Accuracy: 251/436 (57.5688%)
___Train Local_ResNet_18,  epoch 280, local model 44, internal_epoch   2,  Average loss: 0.0108, Accuracy: 357/436 (81.8807%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 79, internal_epoch   1,  Average loss: 0.0316, Accuracy: 85/154 (55.1948%)
___Train Local_ResNet_18,  epoch 280, local model 79, internal_epoch   2,  Average loss: 0.0080, Accuracy: 138/154 (89.6104%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 13, internal_epoch   1,  Average loss: 0.0227, Accuracy: 399/620 (64.3548%)
___Train Local_ResNet_18,  epoch 280, local model 13, internal_epoch   2,  Average loss: 0.0094, Accuracy: 493/620 (79.5161%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 53, internal_epoch   1,  Average loss: 0.0206, Accuracy: 384/625 (61.4400%)
___Train Local_ResNet_18,  epoch 280, local model 53, internal_epoch   2,  Average loss: 0.0093, Accuracy: 503/625 (80.4800%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 65, internal_epoch   1,  Average loss: 0.0258, Accuracy: 180/314 (57.3248%)
___Train Local_ResNet_18,  epoch 280, local model 65, internal_epoch   2,  Average loss: 0.0080, Accuracy: 271/314 (86.3057%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 78, internal_epoch   1,  Average loss: 0.0268, Accuracy: 135/255 (52.9412%)
___Train Local_ResNet_18,  epoch 280, local model 78, internal_epoch   2,  Average loss: 0.0055, Accuracy: 230/255 (90.1961%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 206.4834885597229
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 275.1597533226013 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:281 choose agents : [77, 11, 99, 78, 13, 16, 29, 45, 48, 85]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 27.807160214226972.
Norm before scaling: 27.569599647202555. Distance: 0.4811416968562668
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 41.82740707265841, distance: 48.11417288920698
Total norm for 2 adversaries is: 41.82740707265841. distance: 48.11417288920698
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   1,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   2,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   3,  Average loss: 0.0002, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   4,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   5,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Global model norm: 27.807160214226972.
Norm before scaling: 27.521208751658126. Distance: 0.3882217100611402
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 26.138179101427117, distance: 38.82216849432245
Total norm for 2 adversaries is: 26.138179101427117. distance: 38.82216849432245
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 281, local model 99, internal_epoch   1,  Average loss: 0.0278, Accuracy: 225/391 (57.5448%)
___Train Local_ResNet_18,  epoch 281, local model 99, internal_epoch   2,  Average loss: 0.0233, Accuracy: 227/391 (58.0563%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 78, internal_epoch   1,  Average loss: 0.0240, Accuracy: 152/255 (59.6078%)
___Train Local_ResNet_18,  epoch 281, local model 78, internal_epoch   2,  Average loss: 0.0034, Accuracy: 240/255 (94.1176%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 13, internal_epoch   1,  Average loss: 0.0204, Accuracy: 398/620 (64.1935%)
___Train Local_ResNet_18,  epoch 281, local model 13, internal_epoch   2,  Average loss: 0.0072, Accuracy: 519/620 (83.7097%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 16, internal_epoch   1,  Average loss: 0.0232, Accuracy: 472/773 (61.0608%)
___Train Local_ResNet_18,  epoch 281, local model 16, internal_epoch   2,  Average loss: 0.0172, Accuracy: 538/773 (69.5990%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 29, internal_epoch   1,  Average loss: 0.0160, Accuracy: 629/848 (74.1745%)
___Train Local_ResNet_18,  epoch 281, local model 29, internal_epoch   2,  Average loss: 0.0097, Accuracy: 713/848 (84.0802%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 45, internal_epoch   1,  Average loss: 0.0248, Accuracy: 296/529 (55.9546%)
___Train Local_ResNet_18,  epoch 281, local model 45, internal_epoch   2,  Average loss: 0.0119, Accuracy: 403/529 (76.1815%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 48, internal_epoch   1,  Average loss: 0.0258, Accuracy: 208/378 (55.0265%)
___Train Local_ResNet_18,  epoch 281, local model 48, internal_epoch   2,  Average loss: 0.0101, Accuracy: 305/378 (80.6878%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 85, internal_epoch   1,  Average loss: 0.0325, Accuracy: 158/364 (43.4066%)
___Train Local_ResNet_18,  epoch 281, local model 85, internal_epoch   2,  Average loss: 0.0112, Accuracy: 273/364 (75.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.481680393219
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 248.30761575698853 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:282 choose agents : [77, 11, 59, 40, 8, 35, 56, 29, 32, 80]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   5,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   6,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Global model norm: 27.264235951365276.
Norm before scaling: 27.03133693085733. Distance: 0.34895386859068306
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 26.15937901311043, distance: 34.89538459755011
Total norm for 2 adversaries is: 26.15937901311043. distance: 34.89538459755011
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   2,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 545/546 (99.8168%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   6,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 27.264235951365276.
Norm before scaling: 26.987678259384065. Distance: 0.5083997412073901
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 42.447774955029296, distance: 50.839975658924146
Total norm for 2 adversaries is: 42.447774955029296. distance: 50.839975658924146
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 282, local model 59, internal_epoch   1,  Average loss: 0.0205, Accuracy: 429/642 (66.8224%)
___Train Local_ResNet_18,  epoch 282, local model 59, internal_epoch   2,  Average loss: 0.0155, Accuracy: 426/642 (66.3551%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 40, internal_epoch   1,  Average loss: 0.0239, Accuracy: 397/652 (60.8896%)
___Train Local_ResNet_18,  epoch 282, local model 40, internal_epoch   2,  Average loss: 0.0151, Accuracy: 472/652 (72.3926%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 8, internal_epoch   1,  Average loss: 0.0213, Accuracy: 341/534 (63.8577%)
___Train Local_ResNet_18,  epoch 282, local model 8, internal_epoch   2,  Average loss: 0.0118, Accuracy: 417/534 (78.0899%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 35, internal_epoch   1,  Average loss: 0.0260, Accuracy: 243/419 (57.9952%)
___Train Local_ResNet_18,  epoch 282, local model 35, internal_epoch   2,  Average loss: 0.0099, Accuracy: 318/419 (75.8950%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 56, internal_epoch   1,  Average loss: 0.0184, Accuracy: 483/743 (65.0067%)
___Train Local_ResNet_18,  epoch 282, local model 56, internal_epoch   2,  Average loss: 0.0116, Accuracy: 549/743 (73.8896%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 29, internal_epoch   1,  Average loss: 0.0156, Accuracy: 635/848 (74.8821%)
___Train Local_ResNet_18,  epoch 282, local model 29, internal_epoch   2,  Average loss: 0.0095, Accuracy: 691/848 (81.4858%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 32, internal_epoch   1,  Average loss: 0.0191, Accuracy: 543/824 (65.8981%)
___Train Local_ResNet_18,  epoch 282, local model 32, internal_epoch   2,  Average loss: 0.0093, Accuracy: 668/824 (81.0680%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 80, internal_epoch   1,  Average loss: 0.0187, Accuracy: 241/363 (66.3912%)
___Train Local_ResNet_18,  epoch 282, local model 80, internal_epoch   2,  Average loss: 0.0060, Accuracy: 316/363 (87.0523%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 204.5972397327423
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 280.6733441352844 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:283 choose agents : [77, 11, 0, 51, 72, 61, 57, 28, 16, 48]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   3,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   6,  Average loss: 0.0000, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Global model norm: 26.739595760693774.
Norm before scaling: 26.517597617401872. Distance: 0.45810595926889974
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 40.128801112305084, distance: 45.81059479752609
Total norm for 2 adversaries is: 40.128801112305084. distance: 45.81059479752609
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   2,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   3,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   4,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   5,  Average loss: 0.0004, Accuracy: 543/546 (99.4505%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Global model norm: 26.739595760693774.
Norm before scaling: 26.470181945475225. Distance: 0.4740324870637933
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 38.80777572898568, distance: 47.40324232383794
Total norm for 2 adversaries is: 38.80777572898568. distance: 47.40324232383794
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 283, local model 0, internal_epoch   1,  Average loss: 0.0253, Accuracy: 202/367 (55.0409%)
___Train Local_ResNet_18,  epoch 283, local model 0, internal_epoch   2,  Average loss: 0.0084, Accuracy: 302/367 (82.2888%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 51, internal_epoch   1,  Average loss: 0.0202, Accuracy: 321/479 (67.0146%)
___Train Local_ResNet_18,  epoch 283, local model 51, internal_epoch   2,  Average loss: 0.0099, Accuracy: 375/479 (78.2881%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 72, internal_epoch   1,  Average loss: 0.0231, Accuracy: 384/618 (62.1359%)
___Train Local_ResNet_18,  epoch 283, local model 72, internal_epoch   2,  Average loss: 0.0105, Accuracy: 490/618 (79.2880%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 61, internal_epoch   1,  Average loss: 0.0221, Accuracy: 390/590 (66.1017%)
___Train Local_ResNet_18,  epoch 283, local model 61, internal_epoch   2,  Average loss: 0.0182, Accuracy: 377/590 (63.8983%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 57, internal_epoch   1,  Average loss: 0.0222, Accuracy: 169/290 (58.2759%)
___Train Local_ResNet_18,  epoch 283, local model 57, internal_epoch   2,  Average loss: 0.0077, Accuracy: 252/290 (86.8966%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 28, internal_epoch   1,  Average loss: 0.0217, Accuracy: 256/423 (60.5201%)
___Train Local_ResNet_18,  epoch 283, local model 28, internal_epoch   2,  Average loss: 0.0085, Accuracy: 352/423 (83.2151%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 16, internal_epoch   1,  Average loss: 0.0225, Accuracy: 479/773 (61.9664%)
___Train Local_ResNet_18,  epoch 283, local model 16, internal_epoch   2,  Average loss: 0.0150, Accuracy: 539/773 (69.7283%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 48, internal_epoch   1,  Average loss: 0.0219, Accuracy: 218/378 (57.6720%)
___Train Local_ResNet_18,  epoch 283, local model 48, internal_epoch   2,  Average loss: 0.0100, Accuracy: 295/378 (78.0423%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 211.87037181854248
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 274.487370967865 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:284 choose agents : [77, 11, 95, 32, 63, 4, 84, 12, 43, 85]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   1,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   2,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   3,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   4,  Average loss: 0.0001, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   6,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Global model norm: 26.232028585880826.
Norm before scaling: 26.00844026164872. Distance: 0.5125518598137064
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 46.053149491918575, distance: 51.255187428017955
Total norm for 2 adversaries is: 46.053149491918575. distance: 51.255187428017955
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   1,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   2,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   3,  Average loss: 0.0000, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   4,  Average loss: 0.0002, Accuracy: 544/546 (99.6337%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   5,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   6,  Average loss: 0.0001, Accuracy: 546/546 (100.0000%), train_poison_data_count: 45
Global model norm: 26.232028585880826.
Norm before scaling: 25.969801751791323. Distance: 0.399982020599888
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 30.051686838444486, distance: 39.99819942236463
Total norm for 2 adversaries is: 30.051686838444486. distance: 39.99819942236463
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 284, local model 95, internal_epoch   1,  Average loss: 0.0224, Accuracy: 354/569 (62.2144%)
___Train Local_ResNet_18,  epoch 284, local model 95, internal_epoch   2,  Average loss: 0.0097, Accuracy: 464/569 (81.5466%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 32, internal_epoch   1,  Average loss: 0.0196, Accuracy: 515/824 (62.5000%)
___Train Local_ResNet_18,  epoch 284, local model 32, internal_epoch   2,  Average loss: 0.0118, Accuracy: 626/824 (75.9709%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 63, internal_epoch   1,  Average loss: 0.0194, Accuracy: 454/752 (60.3723%)
___Train Local_ResNet_18,  epoch 284, local model 63, internal_epoch   2,  Average loss: 0.0116, Accuracy: 575/752 (76.4628%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 4, internal_epoch   1,  Average loss: 0.0192, Accuracy: 353/557 (63.3752%)
___Train Local_ResNet_18,  epoch 284, local model 4, internal_epoch   2,  Average loss: 0.0088, Accuracy: 457/557 (82.0467%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 84, internal_epoch   1,  Average loss: 0.0197, Accuracy: 660/1053 (62.6781%)
___Train Local_ResNet_18,  epoch 284, local model 84, internal_epoch   2,  Average loss: 0.0120, Accuracy: 792/1053 (75.2137%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 12, internal_epoch   1,  Average loss: 0.0203, Accuracy: 611/977 (62.5384%)
___Train Local_ResNet_18,  epoch 284, local model 12, internal_epoch   2,  Average loss: 0.0125, Accuracy: 745/977 (76.2538%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 43, internal_epoch   1,  Average loss: 0.0191, Accuracy: 229/345 (66.3768%)
___Train Local_ResNet_18,  epoch 284, local model 43, internal_epoch   2,  Average loss: 0.0085, Accuracy: 289/345 (83.7681%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 85, internal_epoch   1,  Average loss: 0.0283, Accuracy: 170/364 (46.7033%)
___Train Local_ResNet_18,  epoch 284, local model 85, internal_epoch   2,  Average loss: 0.0105, Accuracy: 276/364 (75.8242%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 191.16277933120728
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 265.3738465309143 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:285 choose agents : [77, 11, 93, 25, 40, 44, 86, 90, 36, 51]. Adversary List: [77, 11]
poison local model 77 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   1,  Average loss: 0.0002, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   2,  Average loss: 0.0002, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   3,  Average loss: 0.0003, Accuracy: 495/496 (99.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   4,  Average loss: 0.0004, Accuracy: 493/496 (99.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   5,  Average loss: 0.0001, Accuracy: 496/496 (100.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   6,  Average loss: 0.0003, Accuracy: 494/496 (99.5968%), train_poison_data_count: 40
Global model norm: 25.737369143138082.
Norm before scaling: 25.523877502329192. Distance: 0.6572205768556368
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 62.00154554840246, distance: 65.72205992021439
Total norm for 2 adversaries is: 62.00154554840246. distance: 65.72205992021439
