current path: saved_models/model_cifar_Nov.13_07.47.21
Loading data
build_classes_dict done
train loaders done
get poison test loader
load data done
Loaded parameters from saved model: LR is 0.1 and current epoch is 201
create model done
Poisoned following participants: [17, 33, 77, 11]
We use following environment for graphs:  cifar
----------------------------------Start one training epoch------------------------------------------
Server Epoch:201 choose agents : [17, 33, 77, 11, 37, 53, 39, 57, 63, 48]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   1,  Average loss: 0.0159, Accuracy: 447/526 (84.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   2,  Average loss: 0.0179, Accuracy: 404/526 (76.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   3,  Average loss: 0.0110, Accuracy: 435/526 (82.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   4,  Average loss: 0.0066, Accuracy: 480/526 (91.2548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   5,  Average loss: 0.0040, Accuracy: 495/526 (94.1065%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   6,  Average loss: 0.0024, Accuracy: 511/526 (97.1483%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 39.68560834566638. Distance: 13.579497624629001
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.2501, Accuracy: 3987/10000 (39.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.2462, Accuracy: 8230/9000 (91.4444%)
Scaling by  100
Scaled Norm after poisoning: 1357.4425402203956, distance: 1357.9496953127534
Total norm for 4 adversaries is: 1357.4425402203956. distance: 1357.9496953127534
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   1,  Average loss: 0.0159, Accuracy: 433/527 (82.1632%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   2,  Average loss: 0.0166, Accuracy: 431/527 (81.7837%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   3,  Average loss: 0.0095, Accuracy: 459/527 (87.0968%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   4,  Average loss: 0.0062, Accuracy: 485/527 (92.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   5,  Average loss: 0.0039, Accuracy: 506/527 (96.0152%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   6,  Average loss: 0.0033, Accuracy: 508/527 (96.3947%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 39.0235508944799. Distance: 11.592548318366928
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.0760, Accuracy: 4484/10000 (44.8400%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.2963, Accuracy: 8077/9000 (89.7444%)
Scaling by  100
Scaled Norm after poisoning: 1158.5702395625394, distance: 1159.254879221994
Total norm for 4 adversaries is: 1158.5702395625394. distance: 1159.254879221994
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   1,  Average loss: 0.0098, Accuracy: 428/496 (86.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   2,  Average loss: 0.0062, Accuracy: 456/496 (91.9355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   3,  Average loss: 0.0036, Accuracy: 475/496 (95.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   4,  Average loss: 0.0019, Accuracy: 483/496 (97.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   5,  Average loss: 0.0012, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   6,  Average loss: 0.0008, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 37.66304237236004.
Norm before scaling: 37.93101262489574. Distance: 6.73611633020922
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.1797, Accuracy: 6225/10000 (62.2500%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.1855, Accuracy: 8589/9000 (95.4333%)
Scaling by  100
Scaled Norm after poisoning: 672.7996312053092, distance: 673.611604524447
Total norm for 4 adversaries is: 672.7996312053092. distance: 673.611604524447
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   1,  Average loss: 0.0076, Accuracy: 485/546 (88.8278%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   2,  Average loss: 0.0061, Accuracy: 500/546 (91.5751%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   3,  Average loss: 0.0027, Accuracy: 520/546 (95.2381%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   4,  Average loss: 0.0019, Accuracy: 539/546 (98.7179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   5,  Average loss: 0.0010, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   6,  Average loss: 0.0009, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 37.97010349953796. Distance: 7.084876606687121
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.4227, Accuracy: 5842/10000 (58.4200%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.1960, Accuracy: 8545/9000 (94.9444%)
Scaling by  100
Scaled Norm after poisoning: 707.5846680786689, distance: 708.4876498570741
Total norm for 4 adversaries is: 707.5846680786689. distance: 708.4876498570741
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   1,  Average loss: 0.0111, Accuracy: 583/725 (80.4138%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   2,  Average loss: 0.0175, Accuracy: 518/725 (71.4483%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 20.3995, Accuracy: 1790/10000 (17.9000%)
___Train Local_ResNet_18,  epoch 201, local model 53, internal_epoch   1,  Average loss: 0.0049, Accuracy: 558/625 (89.2800%)
___Train Local_ResNet_18,  epoch 201, local model 53, internal_epoch   2,  Average loss: 0.0040, Accuracy: 572/625 (91.5200%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.6577, Accuracy: 4228/10000 (42.2800%)
___Train Local_ResNet_18,  epoch 201, local model 39, internal_epoch   1,  Average loss: 0.0074, Accuracy: 186/217 (85.7143%)
___Train Local_ResNet_18,  epoch 201, local model 39, internal_epoch   2,  Average loss: 0.0012, Accuracy: 215/217 (99.0783%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 4.1625, Accuracy: 3154/10000 (31.5400%)
___Train Local_ResNet_18,  epoch 201, local model 57, internal_epoch   1,  Average loss: 0.0074, Accuracy: 245/290 (84.4828%)
___Train Local_ResNet_18,  epoch 201, local model 57, internal_epoch   2,  Average loss: 0.0019, Accuracy: 280/290 (96.5517%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 4.7562, Accuracy: 2989/10000 (29.8900%)
___Train Local_ResNet_18,  epoch 201, local model 63, internal_epoch   1,  Average loss: 0.0032, Accuracy: 705/752 (93.7500%)
___Train Local_ResNet_18,  epoch 201, local model 63, internal_epoch   2,  Average loss: 0.0029, Accuracy: 711/752 (94.5479%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.7668, Accuracy: 5589/10000 (55.8900%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   1,  Average loss: 0.0059, Accuracy: 332/378 (87.8307%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   2,  Average loss: 0.0019, Accuracy: 363/378 (96.0317%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.7407, Accuracy: 3240/10000 (32.4000%)
time spent on training: 148.17621994018555
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 201: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 185.39472222328186 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:202 choose agents : [17, 33, 77, 11, 63, 50, 39, 72, 88, 71]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   1,  Average loss: 0.0388, Accuracy: 212/526 (40.3042%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   2,  Average loss: 0.0158, Accuracy: 371/526 (70.5323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   3,  Average loss: 0.0101, Accuracy: 440/526 (83.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   4,  Average loss: 0.0055, Accuracy: 496/526 (94.2966%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   5,  Average loss: 0.0044, Accuracy: 504/526 (95.8175%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   6,  Average loss: 0.0038, Accuracy: 500/526 (95.0570%), train_poison_data_count: 45
Global model norm: 42.14160698244076.
Norm before scaling: 42.52462234822756. Distance: 8.120243499562529
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.4671, Accuracy: 4005/10000 (40.0500%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.4832, Accuracy: 7277/9000 (80.8556%)
Scaling by  100
Scaled Norm after poisoning: 811.0539054218283, distance: 812.024399263963
Total norm for 4 adversaries is: 811.0539054218283. distance: 812.024399263963
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   1,  Average loss: 0.0361, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   2,  Average loss: 0.0167, Accuracy: 357/527 (67.7419%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   3,  Average loss: 0.0106, Accuracy: 426/527 (80.8349%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   4,  Average loss: 0.0062, Accuracy: 486/527 (92.2201%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   5,  Average loss: 0.0044, Accuracy: 506/527 (96.0152%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   6,  Average loss: 0.0026, Accuracy: 511/527 (96.9639%), train_poison_data_count: 45
Global model norm: 42.14160698244076.
Norm before scaling: 42.50555742616929. Distance: 8.134483085204405
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.5305, Accuracy: 3818/10000 (38.1800%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.5362, Accuracy: 7387/9000 (82.0778%)
Scaling by  100
Scaled Norm after poisoning: 812.3656042694078, distance: 813.4482927635905
Total norm for 4 adversaries is: 812.3656042694078. distance: 813.4482927635905
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   1,  Average loss: 0.0373, Accuracy: 184/496 (37.0968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   2,  Average loss: 0.0222, Accuracy: 272/496 (54.8387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   3,  Average loss: 0.0158, Accuracy: 336/496 (67.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   4,  Average loss: 0.0113, Accuracy: 384/496 (77.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   5,  Average loss: 0.0065, Accuracy: 438/496 (88.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   6,  Average loss: 0.0037, Accuracy: 466/496 (93.9516%), train_poison_data_count: 40
Global model norm: 42.14160698244076.
Norm before scaling: 42.392878268993336. Distance: 7.311620414847882
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 1.8619, Accuracy: 4439/10000 (44.3900%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.3757, Accuracy: 8029/9000 (89.2111%)
Scaling by  100
Scaled Norm after poisoning: 730.172539541169, distance: 731.162045992542
Total norm for 4 adversaries is: 730.172539541169. distance: 731.162045992542
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   1,  Average loss: 0.0413, Accuracy: 161/546 (29.4872%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   2,  Average loss: 0.0229, Accuracy: 286/546 (52.3810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   3,  Average loss: 0.0178, Accuracy: 350/546 (64.1026%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   4,  Average loss: 0.0121, Accuracy: 415/546 (76.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   5,  Average loss: 0.0065, Accuracy: 495/546 (90.6593%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   6,  Average loss: 0.0035, Accuracy: 527/546 (96.5201%), train_poison_data_count: 45
Global model norm: 42.14160698244076.
Norm before scaling: 42.38892453048983. Distance: 7.961588674760472
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.7360, Accuracy: 3505/10000 (35.0500%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 1.1536, Accuracy: 6278/9000 (69.7556%)
Scaling by  100
Scaled Norm after poisoning: 794.604736645837, distance: 796.1588252352667
Total norm for 4 adversaries is: 794.604736645837. distance: 796.1588252352667
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 202, local model 63, internal_epoch   1,  Average loss: 0.0466, Accuracy: 219/752 (29.1223%)
___Train Local_ResNet_18,  epoch 202, local model 63, internal_epoch   2,  Average loss: 0.0242, Accuracy: 351/752 (46.6755%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 16.6008, Accuracy: 1042/10000 (10.4200%)
___Train Local_ResNet_18,  epoch 202, local model 50, internal_epoch   1,  Average loss: 0.0507, Accuracy: 142/401 (35.4115%)
___Train Local_ResNet_18,  epoch 202, local model 50, internal_epoch   2,  Average loss: 0.0243, Accuracy: 252/401 (62.8429%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 81.2600, Accuracy: 1236/10000 (12.3600%)
___Train Local_ResNet_18,  epoch 202, local model 39, internal_epoch   1,  Average loss: 0.0915, Accuracy: 30/217 (13.8249%)
___Train Local_ResNet_18,  epoch 202, local model 39, internal_epoch   2,  Average loss: 0.0266, Accuracy: 127/217 (58.5253%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 202, local model 72, internal_epoch   1,  Average loss: 0.0360, Accuracy: 280/618 (45.3074%)
___Train Local_ResNet_18,  epoch 202, local model 72, internal_epoch   2,  Average loss: 0.0123, Accuracy: 459/618 (74.2718%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.5190, Accuracy: 2394/10000 (23.9400%)
___Train Local_ResNet_18,  epoch 202, local model 88, internal_epoch   1,  Average loss: 0.0509, Accuracy: 164/447 (36.6890%)
___Train Local_ResNet_18,  epoch 202, local model 88, internal_epoch   2,  Average loss: 0.0229, Accuracy: 281/447 (62.8635%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 12.9611, Accuracy: 1138/10000 (11.3800%)
___Train Local_ResNet_18,  epoch 202, local model 71, internal_epoch   1,  Average loss: 0.0321, Accuracy: 593/1166 (50.8576%)
___Train Local_ResNet_18,  epoch 202, local model 71, internal_epoch   2,  Average loss: 0.0171, Accuracy: 804/1166 (68.9537%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.5167, Accuracy: 2683/10000 (26.8300%)
time spent on training: 165.57112884521484
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.52917861938477 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:203 choose agents : [17, 33, 77, 11, 92, 23, 26, 50, 14, 76]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   1,  Average loss: 0.0660, Accuracy: 265/526 (50.3802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   2,  Average loss: 0.0303, Accuracy: 338/526 (64.2586%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   3,  Average loss: 0.0194, Accuracy: 399/526 (75.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   4,  Average loss: 0.0140, Accuracy: 417/526 (79.2776%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   5,  Average loss: 0.0085, Accuracy: 461/526 (87.6426%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   6,  Average loss: 0.0046, Accuracy: 500/526 (95.0570%), train_poison_data_count: 45
Global model norm: 46.16413058993963.
Norm before scaling: 46.628440095946274. Distance: 11.476327830097361
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.2021, Accuracy: 3626/10000 (36.2600%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.3088, Accuracy: 7913/9000 (87.9222%)
Scaling by  100
Scaled Norm after poisoning: 1144.6964663175997, distance: 1147.63283544869
Total norm for 4 adversaries is: 1144.6964663175997. distance: 1147.63283544869
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   1,  Average loss: 0.0747, Accuracy: 209/527 (39.6584%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   2,  Average loss: 0.0315, Accuracy: 345/527 (65.4649%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   3,  Average loss: 0.0197, Accuracy: 382/527 (72.4858%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   4,  Average loss: 0.0119, Accuracy: 439/527 (83.3017%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   5,  Average loss: 0.0068, Accuracy: 480/527 (91.0816%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   6,  Average loss: 0.0043, Accuracy: 499/527 (94.6869%), train_poison_data_count: 45
Global model norm: 46.16413058993963.
Norm before scaling: 46.821508541581345. Distance: 12.325648688835242
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.3026, Accuracy: 3969/10000 (39.6900%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.3964, Accuracy: 7625/9000 (84.7222%)
Scaling by  100
Scaled Norm after poisoning: 1229.7430625947845, distance: 1232.5649070130141
Total norm for 4 adversaries is: 1229.7430625947845. distance: 1232.5649070130141
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   1,  Average loss: 0.0759, Accuracy: 180/496 (36.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   2,  Average loss: 0.0323, Accuracy: 272/496 (54.8387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   3,  Average loss: 0.0168, Accuracy: 329/496 (66.3306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   4,  Average loss: 0.0118, Accuracy: 375/496 (75.6048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   5,  Average loss: 0.0069, Accuracy: 455/496 (91.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   6,  Average loss: 0.0044, Accuracy: 466/496 (93.9516%), train_poison_data_count: 40
Global model norm: 46.16413058993963.
Norm before scaling: 46.5329840383746. Distance: 10.82836702414856
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.0978, Accuracy: 3511/10000 (35.1100%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.1093, Accuracy: 8704/9000 (96.7111%)
Scaling by  100
Scaled Norm after poisoning: 1079.9815391940735, distance: 1082.8366104819322
Total norm for 4 adversaries is: 1079.9815391940735. distance: 1082.8366104819322
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   1,  Average loss: 0.0551, Accuracy: 268/546 (49.0842%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   2,  Average loss: 0.0260, Accuracy: 350/546 (64.1026%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   3,  Average loss: 0.0134, Accuracy: 430/546 (78.7546%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   4,  Average loss: 0.0072, Accuracy: 492/546 (90.1099%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   5,  Average loss: 0.0050, Accuracy: 517/546 (94.6886%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   6,  Average loss: 0.0026, Accuracy: 532/546 (97.4359%), train_poison_data_count: 45
Global model norm: 46.16413058993963.
Norm before scaling: 46.77166474530146. Distance: 11.306403609160704
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.4566, Accuracy: 3711/10000 (37.1100%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.3576, Accuracy: 8074/9000 (89.7111%)
Scaling by  100
Scaled Norm after poisoning: 1128.4242885546198, distance: 1130.6403605921735
Total norm for 4 adversaries is: 1128.4242885546198. distance: 1130.6403605921735
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   1,  Average loss: 0.0357, Accuracy: 400/796 (50.2513%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   2,  Average loss: 0.0172, Accuracy: 526/796 (66.0804%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 4.8874, Accuracy: 2731/10000 (27.3100%)
___Train Local_ResNet_18,  epoch 203, local model 23, internal_epoch   1,  Average loss: 0.0718, Accuracy: 93/248 (37.5000%)
___Train Local_ResNet_18,  epoch 203, local model 23, internal_epoch   2,  Average loss: 0.0227, Accuracy: 172/248 (69.3548%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 26, internal_epoch   1,  Average loss: 0.0955, Accuracy: 114/468 (24.3590%)
___Train Local_ResNet_18,  epoch 203, local model 26, internal_epoch   2,  Average loss: 0.0329, Accuracy: 187/468 (39.9573%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 31.4045, Accuracy: 1252/10000 (12.5200%)
___Train Local_ResNet_18,  epoch 203, local model 50, internal_epoch   1,  Average loss: 0.0446, Accuracy: 221/401 (55.1122%)
___Train Local_ResNet_18,  epoch 203, local model 50, internal_epoch   2,  Average loss: 0.0241, Accuracy: 262/401 (65.3367%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 14, internal_epoch   1,  Average loss: 0.1200, Accuracy: 64/318 (20.1258%)
___Train Local_ResNet_18,  epoch 203, local model 14, internal_epoch   2,  Average loss: 0.0336, Accuracy: 146/318 (45.9119%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 76, internal_epoch   1,  Average loss: 0.2018, Accuracy: 12/65 (18.4615%)
___Train Local_ResNet_18,  epoch 203, local model 76, internal_epoch   2,  Average loss: 0.0972, Accuracy: 29/65 (44.6154%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.42587304115295
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 226.7418670654297 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:204 choose agents : [17, 33, 77, 11, 49, 86, 26, 58, 6, 94]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   1,  Average loss: 0.0907, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   2,  Average loss: 0.0354, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   3,  Average loss: 0.0293, Accuracy: 207/526 (39.3536%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   4,  Average loss: 0.0260, Accuracy: 255/526 (48.4791%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   5,  Average loss: 0.0257, Accuracy: 256/526 (48.6692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   6,  Average loss: 0.0254, Accuracy: 268/526 (50.9506%), train_poison_data_count: 45
Global model norm: 54.07325353672437.
Norm before scaling: 54.326819530619495. Distance: 12.967735747236533
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 3.1517, Accuracy: 1399/10000 (13.9900%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.4332, Accuracy: 7773/9000 (86.3667%)
Scaling by  100
Scaled Norm after poisoning: 1292.4698255665392, distance: 1296.7736406173592
Total norm for 4 adversaries is: 1292.4698255665392. distance: 1296.7736406173592
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   1,  Average loss: 0.0754, Accuracy: 88/527 (16.6983%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   2,  Average loss: 0.0316, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   3,  Average loss: 0.0309, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   4,  Average loss: 0.0297, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   5,  Average loss: 0.0284, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   6,  Average loss: 0.0278, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Global model norm: 54.07325353672437.
Norm before scaling: 54.22285422146159. Distance: 11.923447891408786
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.7719, Accuracy: 1413/10000 (14.1300%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 1.8916, Accuracy: 2960/9000 (32.8889%)
Scaling by  100
Scaled Norm after poisoning: 1188.281584894759, distance: 1192.3448012215258
Total norm for 4 adversaries is: 1188.281584894759. distance: 1192.3448012215258
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   1,  Average loss: 0.0743, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   2,  Average loss: 0.0319, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   3,  Average loss: 0.0308, Accuracy: 144/496 (29.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   4,  Average loss: 0.0297, Accuracy: 184/496 (37.0968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   5,  Average loss: 0.0287, Accuracy: 203/496 (40.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   6,  Average loss: 0.0278, Accuracy: 211/496 (42.5403%), train_poison_data_count: 40
Global model norm: 54.07325353672437.
Norm before scaling: 54.18708324162111. Distance: 11.264846499735256
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.4554, Accuracy: 1732/10000 (17.3200%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.3473, Accuracy: 7879/9000 (87.5444%)
Scaling by  100
Scaled Norm after poisoning: 1122.690629692793, distance: 1126.484631497474
Total norm for 4 adversaries is: 1122.690629692793. distance: 1126.484631497474
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   1,  Average loss: 0.0782, Accuracy: 51/546 (9.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   2,  Average loss: 0.0335, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   3,  Average loss: 0.0314, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   4,  Average loss: 0.0303, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   5,  Average loss: 0.0297, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   6,  Average loss: 0.0279, Accuracy: 214/546 (39.1941%), train_poison_data_count: 45
Global model norm: 54.07325353672437.
Norm before scaling: 54.297909162813305. Distance: 12.53106065259847
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.6773, Accuracy: 1600/10000 (16.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.5079, Accuracy: 7675/9000 (85.2778%)
Scaling by  100
Scaled Norm after poisoning: 1248.9718771853911, distance: 1253.1060410037132
Total norm for 4 adversaries is: 1248.9718771853911. distance: 1253.1060410037132
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 204, local model 49, internal_epoch   1,  Average loss: 0.1374, Accuracy: 22/426 (5.1643%)
___Train Local_ResNet_18,  epoch 204, local model 49, internal_epoch   2,  Average loss: 0.0288, Accuracy: 151/426 (35.4460%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 86, internal_epoch   1,  Average loss: 0.2056, Accuracy: 10/212 (4.7170%)
___Train Local_ResNet_18,  epoch 204, local model 86, internal_epoch   2,  Average loss: 0.0370, Accuracy: 67/212 (31.6038%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 26, internal_epoch   1,  Average loss: 0.0914, Accuracy: 153/468 (32.6923%)
___Train Local_ResNet_18,  epoch 204, local model 26, internal_epoch   2,  Average loss: 0.0370, Accuracy: 93/468 (19.8718%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 58, internal_epoch   1,  Average loss: 0.1954, Accuracy: 45/234 (19.2308%)
___Train Local_ResNet_18,  epoch 204, local model 58, internal_epoch   2,  Average loss: 0.0462, Accuracy: 27/234 (11.5385%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 6, internal_epoch   1,  Average loss: 0.0998, Accuracy: 127/520 (24.4231%)
___Train Local_ResNet_18,  epoch 204, local model 6, internal_epoch   2,  Average loss: 0.0365, Accuracy: 93/520 (17.8846%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 94, internal_epoch   1,  Average loss: 0.1862, Accuracy: 23/203 (11.3300%)
___Train Local_ResNet_18,  epoch 204, local model 94, internal_epoch   2,  Average loss: 0.0504, Accuracy: 76/203 (37.4384%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 186.71632766723633
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 232.7921667098999 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:205 choose agents : [17, 33, 77, 11, 61, 71, 8, 69, 89, 64]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   1,  Average loss: 0.0570, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   2,  Average loss: 0.0434, Accuracy: 187/526 (35.5513%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   3,  Average loss: 0.0303, Accuracy: 220/526 (41.8251%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   4,  Average loss: 0.0273, Accuracy: 239/526 (45.4373%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   5,  Average loss: 0.0261, Accuracy: 244/526 (46.3878%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   6,  Average loss: 0.0251, Accuracy: 262/526 (49.8099%), train_poison_data_count: 45
Global model norm: 64.83480736528605.
Norm before scaling: 64.21103207880248. Distance: 6.390571575361194
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.1274, Accuracy: 1645/10000 (16.4500%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 1.1762, Accuracy: 6267/9000 (69.6333%)
Scaling by  100
Scaled Norm after poisoning: 632.8223486887928, distance: 639.0571668481623
Total norm for 4 adversaries is: 632.8223486887928. distance: 639.0571668481623
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   1,  Average loss: 0.0615, Accuracy: 85/527 (16.1290%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   2,  Average loss: 0.0392, Accuracy: 178/527 (33.7761%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   3,  Average loss: 0.0315, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   4,  Average loss: 0.0303, Accuracy: 206/527 (39.0892%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   5,  Average loss: 0.0267, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   6,  Average loss: 0.0275, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Global model norm: 64.83480736528605.
Norm before scaling: 64.1747187859051. Distance: 6.186490679791924
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.2300, Accuracy: 1060/10000 (10.6000%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.8692, Accuracy: 6761/9000 (75.1222%)
Scaling by  100
Scaled Norm after poisoning: 612.0352062994416, distance: 618.649082679349
Total norm for 4 adversaries is: 612.0352062994416. distance: 618.649082679349
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   1,  Average loss: 0.0700, Accuracy: 30/496 (6.0484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   2,  Average loss: 0.0463, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   3,  Average loss: 0.0407, Accuracy: 144/496 (29.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   4,  Average loss: 0.0353, Accuracy: 157/496 (31.6532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   5,  Average loss: 0.0318, Accuracy: 145/496 (29.2339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   6,  Average loss: 0.0311, Accuracy: 180/496 (36.2903%), train_poison_data_count: 40
Global model norm: 64.83480736528605.
Norm before scaling: 64.15384874342108. Distance: 6.38250709279283
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 2.4874, Accuracy: 1164/10000 (11.6400%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.2115, Accuracy: 8425/9000 (93.6111%)
Scaling by  100
Scaled Norm after poisoning: 631.4350223894776, distance: 638.2506854677086
Total norm for 4 adversaries is: 631.4350223894776. distance: 638.2506854677086
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   1,  Average loss: 0.0492, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   2,  Average loss: 0.0310, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   3,  Average loss: 0.0300, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   4,  Average loss: 0.0302, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   5,  Average loss: 0.0287, Accuracy: 198/546 (36.2637%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   6,  Average loss: 0.0285, Accuracy: 209/546 (38.2784%), train_poison_data_count: 45
Global model norm: 64.83480736528605.
Norm before scaling: 64.16145939030494. Distance: 4.995567646019523
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.3693, Accuracy: 1230/10000 (12.3000%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.7622, Accuracy: 7992/9000 (88.8000%)
Scaling by  100
Scaled Norm after poisoning: 492.5230483185533, distance: 499.5567566603419
Total norm for 4 adversaries is: 492.5230483185533. distance: 499.5567566603419
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 205, local model 61, internal_epoch   1,  Average loss: 0.0629, Accuracy: 198/590 (33.5593%)
___Train Local_ResNet_18,  epoch 205, local model 61, internal_epoch   2,  Average loss: 0.0416, Accuracy: 218/590 (36.9492%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 71, internal_epoch   1,  Average loss: 0.0386, Accuracy: 408/1166 (34.9914%)
___Train Local_ResNet_18,  epoch 205, local model 71, internal_epoch   2,  Average loss: 0.0285, Accuracy: 524/1166 (44.9400%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 5.0012, Accuracy: 1280/10000 (12.8000%)
___Train Local_ResNet_18,  epoch 205, local model 8, internal_epoch   1,  Average loss: 0.0898, Accuracy: 36/534 (6.7416%)
___Train Local_ResNet_18,  epoch 205, local model 8, internal_epoch   2,  Average loss: 0.0524, Accuracy: 98/534 (18.3521%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 69, internal_epoch   1,  Average loss: 0.0443, Accuracy: 45/216 (20.8333%)
___Train Local_ResNet_18,  epoch 205, local model 69, internal_epoch   2,  Average loss: 0.0333, Accuracy: 117/216 (54.1667%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 89, internal_epoch   1,  Average loss: 0.0834, Accuracy: 50/413 (12.1065%)
___Train Local_ResNet_18,  epoch 205, local model 89, internal_epoch   2,  Average loss: 0.0544, Accuracy: 145/413 (35.1090%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 64, internal_epoch   1,  Average loss: 0.0567, Accuracy: 156/686 (22.7405%)
___Train Local_ResNet_18,  epoch 205, local model 64, internal_epoch   2,  Average loss: 0.0397, Accuracy: 255/686 (37.1720%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.39775609970093
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 212.39777421951294 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:206 choose agents : [17, 33, 77, 11, 38, 64, 29, 23, 83, 43]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   1,  Average loss: 0.1433, Accuracy: 114/526 (21.6730%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   2,  Average loss: 0.0363, Accuracy: 162/526 (30.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   3,  Average loss: 0.0342, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   4,  Average loss: 0.0346, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   5,  Average loss: 0.0312, Accuracy: 186/526 (35.3612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   6,  Average loss: 0.0295, Accuracy: 188/526 (35.7414%), train_poison_data_count: 45
Global model norm: 64.20649213913264.
Norm before scaling: 64.84231173103717. Distance: 18.561699333005755
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1850.2002594313947, distance: 1856.1699814402775
Total norm for 4 adversaries is: 1850.2002594313947. distance: 1856.1699814402775
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   1,  Average loss: 0.1390, Accuracy: 128/527 (24.2884%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   2,  Average loss: 0.0340, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   3,  Average loss: 0.0323, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   4,  Average loss: 0.0295, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   5,  Average loss: 0.0309, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   6,  Average loss: 0.0290, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 64.20649213913264.
Norm before scaling: 64.91381380458438. Distance: 18.522724937528174
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1846.5805560548936, distance: 1852.2724556608837
Total norm for 4 adversaries is: 1846.5805560548936. distance: 1852.2724556608837
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   1,  Average loss: 0.1455, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   2,  Average loss: 0.0419, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   3,  Average loss: 0.0365, Accuracy: 166/496 (33.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   4,  Average loss: 0.0352, Accuracy: 185/496 (37.2984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   5,  Average loss: 0.0329, Accuracy: 195/496 (39.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   6,  Average loss: 0.0316, Accuracy: 189/496 (38.1048%), train_poison_data_count: 40
Global model norm: 64.20649213913264.
Norm before scaling: 67.02120044130626. Distance: 24.948616628576573
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2490.6125752513176, distance: 2494.8616194089805
Total norm for 4 adversaries is: 2490.6125752513176. distance: 2494.8616194089805
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   1,  Average loss: 0.1511, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   2,  Average loss: 0.0347, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   3,  Average loss: 0.0318, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   4,  Average loss: 0.0294, Accuracy: 196/546 (35.8974%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   5,  Average loss: 0.0299, Accuracy: 202/546 (36.9963%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   6,  Average loss: 0.0301, Accuracy: 194/546 (35.5311%), train_poison_data_count: 45
Global model norm: 64.20649213913264.
Norm before scaling: 65.2857787742189. Distance: 20.35401181878257
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2029.6618560735678, distance: 2035.4010047162697
Total norm for 4 adversaries is: 2029.6618560735678. distance: 2035.4010047162697
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 206, local model 38, internal_epoch   1,  Average loss: 0.1345, Accuracy: 188/756 (24.8677%)
___Train Local_ResNet_18,  epoch 206, local model 38, internal_epoch   2,  Average loss: 0.0274, Accuracy: 283/756 (37.4339%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 64, internal_epoch   1,  Average loss: 0.1498, Accuracy: 200/686 (29.1545%)
___Train Local_ResNet_18,  epoch 206, local model 64, internal_epoch   2,  Average loss: 0.0393, Accuracy: 282/686 (41.1079%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 29, internal_epoch   1,  Average loss: 0.1165, Accuracy: 322/848 (37.9717%)
___Train Local_ResNet_18,  epoch 206, local model 29, internal_epoch   2,  Average loss: 0.0259, Accuracy: 468/848 (55.1887%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 23, internal_epoch   1,  Average loss: 0.3370, Accuracy: 36/248 (14.5161%)
___Train Local_ResNet_18,  epoch 206, local model 23, internal_epoch   2,  Average loss: 0.0435, Accuracy: 76/248 (30.6452%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 83, internal_epoch   1,  Average loss: 0.2496, Accuracy: 57/366 (15.5738%)
___Train Local_ResNet_18,  epoch 206, local model 83, internal_epoch   2,  Average loss: 0.0537, Accuracy: 64/366 (17.4863%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 43, internal_epoch   1,  Average loss: 0.2577, Accuracy: 89/345 (25.7971%)
___Train Local_ResNet_18,  epoch 206, local model 43, internal_epoch   2,  Average loss: 0.0308, Accuracy: 126/345 (36.5217%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 177.50724339485168
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 223.91771030426025 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:207 choose agents : [17, 33, 77, 11, 56, 45, 1, 50, 16, 12]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   1,  Average loss: 0.0597, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   2,  Average loss: 0.0501, Accuracy: 155/526 (29.4677%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   3,  Average loss: 0.0441, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   4,  Average loss: 0.0426, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   5,  Average loss: 0.0422, Accuracy: 189/526 (35.9316%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   6,  Average loss: 0.0384, Accuracy: 186/526 (35.3612%), train_poison_data_count: 45
Global model norm: 95.28652822376047.
Norm before scaling: 94.05367483517058. Distance: 5.769355042904188
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 561.482635528473, distance: 576.93554666011
Total norm for 4 adversaries is: 561.482635528473. distance: 576.93554666011
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   1,  Average loss: 0.0594, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   2,  Average loss: 0.0503, Accuracy: 115/527 (21.8216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   3,  Average loss: 0.0466, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   4,  Average loss: 0.0432, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   5,  Average loss: 0.0393, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   6,  Average loss: 0.0307, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 95.28652822376047.
Norm before scaling: 94.07317215205406. Distance: 5.957983402389145
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 580.9727295665434, distance: 595.7983089939078
Total norm for 4 adversaries is: 580.9727295665434. distance: 595.7983089939078
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   1,  Average loss: 0.0688, Accuracy: 26/496 (5.2419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   2,  Average loss: 0.0585, Accuracy: 84/496 (16.9355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   3,  Average loss: 0.0497, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   4,  Average loss: 0.0437, Accuracy: 115/496 (23.1855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   5,  Average loss: 0.0374, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   6,  Average loss: 0.0343, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Global model norm: 95.28652822376047.
Norm before scaling: 94.18994688261587. Distance: 6.316409873607495
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 619.0981848624659, distance: 631.6410175091545
Total norm for 4 adversaries is: 619.0981848624659. distance: 631.6410175091545
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   1,  Average loss: 0.0559, Accuracy: 83/546 (15.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   2,  Average loss: 0.0459, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   3,  Average loss: 0.0434, Accuracy: 156/546 (28.5714%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   4,  Average loss: 0.0403, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   5,  Average loss: 0.0418, Accuracy: 153/546 (28.0220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   6,  Average loss: 0.0387, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Global model norm: 95.28652822376047.
Norm before scaling: 94.08359398030031. Distance: 5.90914797455236
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 576.1839712713293, distance: 590.914862734049
Total norm for 4 adversaries is: 576.1839712713293. distance: 590.914862734049
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 207, local model 56, internal_epoch   1,  Average loss: 0.0437, Accuracy: 143/743 (19.2463%)
___Train Local_ResNet_18,  epoch 207, local model 56, internal_epoch   2,  Average loss: 0.0358, Accuracy: 185/743 (24.8991%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 45, internal_epoch   1,  Average loss: 0.0573, Accuracy: 20/529 (3.7807%)
___Train Local_ResNet_18,  epoch 207, local model 45, internal_epoch   2,  Average loss: 0.0347, Accuracy: 158/529 (29.8677%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 1, internal_epoch   1,  Average loss: 0.0536, Accuracy: 136/641 (21.2168%)
___Train Local_ResNet_18,  epoch 207, local model 1, internal_epoch   2,  Average loss: 0.0386, Accuracy: 207/641 (32.2933%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 50, internal_epoch   1,  Average loss: 0.0382, Accuracy: 166/401 (41.3965%)
___Train Local_ResNet_18,  epoch 207, local model 50, internal_epoch   2,  Average loss: 0.0358, Accuracy: 187/401 (46.6334%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 16, internal_epoch   1,  Average loss: 0.0558, Accuracy: 121/773 (15.6533%)
___Train Local_ResNet_18,  epoch 207, local model 16, internal_epoch   2,  Average loss: 0.0390, Accuracy: 203/773 (26.2613%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 12, internal_epoch   1,  Average loss: 0.0506, Accuracy: 243/977 (24.8721%)
___Train Local_ResNet_18,  epoch 207, local model 12, internal_epoch   2,  Average loss: 0.0349, Accuracy: 394/977 (40.3275%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.55625367164612
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 229.85204005241394 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:208 choose agents : [17, 33, 77, 11, 44, 86, 20, 50, 49, 43]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   1,  Average loss: 0.1182, Accuracy: 30/526 (5.7034%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   2,  Average loss: 0.0651, Accuracy: 121/526 (23.0038%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   3,  Average loss: 0.0472, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   4,  Average loss: 0.0375, Accuracy: 223/526 (42.3954%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   5,  Average loss: 0.0320, Accuracy: 194/526 (36.8821%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   6,  Average loss: 0.0303, Accuracy: 237/526 (45.0570%), train_poison_data_count: 45
Global model norm: 91.75038849543091.
Norm before scaling: 90.80393972042182. Distance: 12.642754789096662
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1254.4116648851764, distance: 1264.2754842201125
Total norm for 4 adversaries is: 1254.4116648851764. distance: 1264.2754842201125
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   1,  Average loss: 0.1004, Accuracy: 67/527 (12.7135%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   2,  Average loss: 0.0503, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   3,  Average loss: 0.0429, Accuracy: 183/527 (34.7249%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   4,  Average loss: 0.0369, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   5,  Average loss: 0.0315, Accuracy: 189/527 (35.8634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   6,  Average loss: 0.0304, Accuracy: 204/527 (38.7097%), train_poison_data_count: 45
Global model norm: 91.75038849543091.
Norm before scaling: 90.80746716955605. Distance: 11.418651621728305
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1132.2639378696117, distance: 1141.8651408988717
Total norm for 4 adversaries is: 1132.2639378696117. distance: 1141.8651408988717
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   1,  Average loss: 0.0881, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   2,  Average loss: 0.0490, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   3,  Average loss: 0.0424, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   4,  Average loss: 0.0369, Accuracy: 153/496 (30.8468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   5,  Average loss: 0.0356, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   6,  Average loss: 0.0338, Accuracy: 147/496 (29.6371%), train_poison_data_count: 40
Global model norm: 91.75038849543091.
Norm before scaling: 90.87504298485916. Distance: 10.009679306030254
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 992.1438907739139, distance: 1000.9679065784277
Total norm for 4 adversaries is: 992.1438907739139. distance: 1000.9679065784277
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   1,  Average loss: 0.1041, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   2,  Average loss: 0.0579, Accuracy: 64/546 (11.7216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   3,  Average loss: 0.0480, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   4,  Average loss: 0.0426, Accuracy: 153/546 (28.0220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   5,  Average loss: 0.0361, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   6,  Average loss: 0.0326, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Global model norm: 91.75038849543091.
Norm before scaling: 90.73427678873624. Distance: 11.816007870350608
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1171.3642153489238, distance: 1181.6008738148428
Total norm for 4 adversaries is: 1171.3642153489238. distance: 1181.6008738148428
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 208, local model 44, internal_epoch   1,  Average loss: 0.0955, Accuracy: 19/436 (4.3578%)
___Train Local_ResNet_18,  epoch 208, local model 44, internal_epoch   2,  Average loss: 0.0450, Accuracy: 72/436 (16.5138%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 86, internal_epoch   1,  Average loss: 0.1428, Accuracy: 34/212 (16.0377%)
___Train Local_ResNet_18,  epoch 208, local model 86, internal_epoch   2,  Average loss: 0.0744, Accuracy: 47/212 (22.1698%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 20, internal_epoch   1,  Average loss: 0.0889, Accuracy: 24/362 (6.6298%)
___Train Local_ResNet_18,  epoch 208, local model 20, internal_epoch   2,  Average loss: 0.0371, Accuracy: 85/362 (23.4807%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   1,  Average loss: 0.1489, Accuracy: 14/401 (3.4913%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   2,  Average loss: 0.0737, Accuracy: 38/401 (9.4763%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 49, internal_epoch   1,  Average loss: 0.1091, Accuracy: 9/426 (2.1127%)
___Train Local_ResNet_18,  epoch 208, local model 49, internal_epoch   2,  Average loss: 0.0518, Accuracy: 65/426 (15.2582%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 43, internal_epoch   1,  Average loss: 0.0839, Accuracy: 101/345 (29.2754%)
___Train Local_ResNet_18,  epoch 208, local model 43, internal_epoch   2,  Average loss: 0.0429, Accuracy: 155/345 (44.9275%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.07354879379272
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 210.39022779464722 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:209 choose agents : [17, 33, 77, 11, 28, 51, 4, 97, 85, 59]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   1,  Average loss: 0.1133, Accuracy: 126/526 (23.9544%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   2,  Average loss: 0.0553, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   3,  Average loss: 0.0464, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   4,  Average loss: 0.0391, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   5,  Average loss: 0.0351, Accuracy: 195/526 (37.0722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   6,  Average loss: 0.0322, Accuracy: 221/526 (42.0152%), train_poison_data_count: 45
Global model norm: 95.95954551267945.
Norm before scaling: 94.95563828539883. Distance: 12.605445145430332
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1250.2500249950008, distance: 1260.544574777108
Total norm for 4 adversaries is: 1250.2500249950008. distance: 1260.544574777108
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   1,  Average loss: 0.1187, Accuracy: 63/527 (11.9545%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   2,  Average loss: 0.0545, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   3,  Average loss: 0.0491, Accuracy: 185/527 (35.1044%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   4,  Average loss: 0.0442, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   5,  Average loss: 0.0420, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   6,  Average loss: 0.0403, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 95.95954551267945.
Norm before scaling: 95.05053138002438. Distance: 13.575269181478847
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1347.7002634117127, distance: 1357.526979474073
Total norm for 4 adversaries is: 1347.7002634117127. distance: 1357.526979474073
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   1,  Average loss: 0.1569, Accuracy: 64/496 (12.9032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   2,  Average loss: 0.0802, Accuracy: 62/496 (12.5000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   3,  Average loss: 0.0703, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   4,  Average loss: 0.0656, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   5,  Average loss: 0.0569, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   6,  Average loss: 0.0521, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Global model norm: 95.95954551267945.
Norm before scaling: 95.05604329650745. Distance: 15.246429525670921
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1514.3449904166487, distance: 1524.6428270253987
Total norm for 4 adversaries is: 1514.3449904166487. distance: 1524.6428270253987
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   1,  Average loss: 0.1283, Accuracy: 84/546 (15.3846%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   2,  Average loss: 0.0604, Accuracy: 98/546 (17.9487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   3,  Average loss: 0.0511, Accuracy: 166/546 (30.4029%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   4,  Average loss: 0.0469, Accuracy: 192/546 (35.1648%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   5,  Average loss: 0.0464, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   6,  Average loss: 0.0415, Accuracy: 207/546 (37.9121%), train_poison_data_count: 45
Global model norm: 95.95954551267945.
Norm before scaling: 94.88018245891763. Distance: 13.192409089805146
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1308.2821274480516, distance: 1319.2407854519963
Total norm for 4 adversaries is: 1308.2821274480516. distance: 1319.2407854519963
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 209, local model 28, internal_epoch   1,  Average loss: 0.1185, Accuracy: 27/423 (6.3830%)
___Train Local_ResNet_18,  epoch 209, local model 28, internal_epoch   2,  Average loss: 0.0509, Accuracy: 64/423 (15.1300%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 51, internal_epoch   1,  Average loss: 0.0957, Accuracy: 227/479 (47.3904%)
___Train Local_ResNet_18,  epoch 209, local model 51, internal_epoch   2,  Average loss: 0.0404, Accuracy: 280/479 (58.4551%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 4, internal_epoch   1,  Average loss: 0.1336, Accuracy: 51/557 (9.1562%)
___Train Local_ResNet_18,  epoch 209, local model 4, internal_epoch   2,  Average loss: 0.0672, Accuracy: 184/557 (33.0341%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 97, internal_epoch   1,  Average loss: 0.0867, Accuracy: 158/418 (37.7990%)
___Train Local_ResNet_18,  epoch 209, local model 97, internal_epoch   2,  Average loss: 0.0447, Accuracy: 165/418 (39.4737%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 85, internal_epoch   1,  Average loss: 0.1433, Accuracy: 21/364 (5.7692%)
___Train Local_ResNet_18,  epoch 209, local model 85, internal_epoch   2,  Average loss: 0.0664, Accuracy: 69/364 (18.9560%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 59, internal_epoch   1,  Average loss: 0.0971, Accuracy: 51/642 (7.9439%)
___Train Local_ResNet_18,  epoch 209, local model 59, internal_epoch   2,  Average loss: 0.0395, Accuracy: 138/642 (21.4953%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 173.66809034347534
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 217.18340277671814 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:210 choose agents : [17, 33, 77, 11, 51, 13, 57, 76, 80, 85]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   1,  Average loss: 0.1126, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   2,  Average loss: 0.0876, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   3,  Average loss: 0.0719, Accuracy: 164/526 (31.1787%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   4,  Average loss: 0.0585, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   5,  Average loss: 0.0466, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   6,  Average loss: 0.0393, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Global model norm: 102.56456617358161.
Norm before scaling: 100.94169399181638. Distance: 11.111466652162052
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1095.3509140910048, distance: 1111.1467049854398
Total norm for 4 adversaries is: 1095.3509140910048. distance: 1111.1467049854398
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   1,  Average loss: 0.1156, Accuracy: 42/527 (7.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   2,  Average loss: 0.0696, Accuracy: 120/527 (22.7704%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   3,  Average loss: 0.0559, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   4,  Average loss: 0.0480, Accuracy: 168/527 (31.8786%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   5,  Average loss: 0.0455, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   6,  Average loss: 0.0396, Accuracy: 205/527 (38.8994%), train_poison_data_count: 45
Global model norm: 102.56456617358161.
Norm before scaling: 101.09050902841967. Distance: 10.600202997531094
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1045.421565685346, distance: 1060.0202828248146
Total norm for 4 adversaries is: 1045.421565685346. distance: 1060.0202828248146
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   1,  Average loss: 0.1001, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   2,  Average loss: 0.0655, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   3,  Average loss: 0.0532, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   4,  Average loss: 0.0428, Accuracy: 146/496 (29.4355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   5,  Average loss: 0.0371, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   6,  Average loss: 0.0341, Accuracy: 162/496 (32.6613%), train_poison_data_count: 40
Global model norm: 102.56456617358161.
Norm before scaling: 101.34823552361432. Distance: 9.174851202732672
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 905.0293503527938, distance: 917.4851497435803
Total norm for 4 adversaries is: 905.0293503527938. distance: 917.4851497435803
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   1,  Average loss: 0.0907, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   2,  Average loss: 0.0627, Accuracy: 152/546 (27.8388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   3,  Average loss: 0.0540, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   4,  Average loss: 0.0452, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   5,  Average loss: 0.0414, Accuracy: 205/546 (37.5458%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   6,  Average loss: 0.0377, Accuracy: 210/546 (38.4615%), train_poison_data_count: 45
Global model norm: 102.56456617358161.
Norm before scaling: 101.12472477558345. Distance: 9.475871313288087
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 932.8093990735728, distance: 947.5871331967314
Total norm for 4 adversaries is: 932.8093990735728. distance: 947.5871331967314
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 210, local model 51, internal_epoch   1,  Average loss: 0.1117, Accuracy: 38/479 (7.9332%)
___Train Local_ResNet_18,  epoch 210, local model 51, internal_epoch   2,  Average loss: 0.0375, Accuracy: 259/479 (54.0710%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 13, internal_epoch   1,  Average loss: 0.0778, Accuracy: 288/620 (46.4516%)
___Train Local_ResNet_18,  epoch 210, local model 13, internal_epoch   2,  Average loss: 0.0411, Accuracy: 310/620 (50.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 57, internal_epoch   1,  Average loss: 0.1273, Accuracy: 34/290 (11.7241%)
___Train Local_ResNet_18,  epoch 210, local model 57, internal_epoch   2,  Average loss: 0.0746, Accuracy: 87/290 (30.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 76, internal_epoch   1,  Average loss: 0.3050, Accuracy: 12/65 (18.4615%)
___Train Local_ResNet_18,  epoch 210, local model 76, internal_epoch   2,  Average loss: 0.0843, Accuracy: 13/65 (20.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 80, internal_epoch   1,  Average loss: 0.1144, Accuracy: 151/363 (41.5978%)
___Train Local_ResNet_18,  epoch 210, local model 80, internal_epoch   2,  Average loss: 0.0724, Accuracy: 181/363 (49.8623%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 85, internal_epoch   1,  Average loss: 0.1043, Accuracy: 32/364 (8.7912%)
___Train Local_ResNet_18,  epoch 210, local model 85, internal_epoch   2,  Average loss: 0.0557, Accuracy: 104/364 (28.5714%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.43181014060974
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 226.35169959068298 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:211 choose agents : [17, 33, 77, 11, 90, 24, 63, 1, 52, 31]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   1,  Average loss: 0.1571, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   2,  Average loss: 0.1149, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   3,  Average loss: 0.0924, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   4,  Average loss: 0.0557, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   5,  Average loss: 0.0365, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   6,  Average loss: 0.0307, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Global model norm: 101.44963440206426.
Norm before scaling: 99.82745856914819. Distance: 11.778840726794275
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1162.4017700433874, distance: 1177.8840138146031
Total norm for 4 adversaries is: 1162.4017700433874. distance: 1177.8840138146031
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   1,  Average loss: 0.1287, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   2,  Average loss: 0.0839, Accuracy: 178/527 (33.7761%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   3,  Average loss: 0.0721, Accuracy: 182/527 (34.5351%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   4,  Average loss: 0.0603, Accuracy: 186/527 (35.2941%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   5,  Average loss: 0.0518, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   6,  Average loss: 0.0450, Accuracy: 186/527 (35.2941%), train_poison_data_count: 45
Global model norm: 101.44963440206426.
Norm before scaling: 99.91879026708389. Distance: 12.640544122500843
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1249.5281609471633, distance: 1264.0543896525971
Total norm for 4 adversaries is: 1249.5281609471633. distance: 1264.0543896525971
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   1,  Average loss: 0.1401, Accuracy: 34/496 (6.8548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   2,  Average loss: 0.1005, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   3,  Average loss: 0.0822, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   4,  Average loss: 0.0562, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   5,  Average loss: 0.0452, Accuracy: 151/496 (30.4435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   6,  Average loss: 0.0372, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Global model norm: 101.44963440206426.
Norm before scaling: 100.08158293206348. Distance: 11.310633721443908
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1117.6908114501075, distance: 1131.063327139555
Total norm for 4 adversaries is: 1117.6908114501075. distance: 1131.063327139555
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   1,  Average loss: 0.1526, Accuracy: 107/546 (19.5971%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   2,  Average loss: 0.1083, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   3,  Average loss: 0.0920, Accuracy: 98/546 (17.9487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   4,  Average loss: 0.0760, Accuracy: 126/546 (23.0769%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   5,  Average loss: 0.0618, Accuracy: 122/546 (22.3443%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   6,  Average loss: 0.0525, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Global model norm: 101.44963440206426.
Norm before scaling: 99.69616439619179. Distance: 13.636234236594554
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1347.551761529033, distance: 1363.6233900898005
Total norm for 4 adversaries is: 1347.551761529033. distance: 1363.6233900898005
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 211, local model 90, internal_epoch   1,  Average loss: 0.0742, Accuracy: 216/578 (37.3702%)
___Train Local_ResNet_18,  epoch 211, local model 90, internal_epoch   2,  Average loss: 0.0622, Accuracy: 73/578 (12.6298%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   1,  Average loss: 0.1430, Accuracy: 32/320 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   2,  Average loss: 0.1012, Accuracy: 19/320 (5.9375%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 63, internal_epoch   1,  Average loss: 0.1286, Accuracy: 80/752 (10.6383%)
___Train Local_ResNet_18,  epoch 211, local model 63, internal_epoch   2,  Average loss: 0.0646, Accuracy: 121/752 (16.0904%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 1, internal_epoch   1,  Average loss: 0.1177, Accuracy: 61/641 (9.5164%)
___Train Local_ResNet_18,  epoch 211, local model 1, internal_epoch   2,  Average loss: 0.0730, Accuracy: 145/641 (22.6209%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 52, internal_epoch   1,  Average loss: 0.2667, Accuracy: 35/214 (16.3551%)
___Train Local_ResNet_18,  epoch 211, local model 52, internal_epoch   2,  Average loss: 0.1795, Accuracy: 38/214 (17.7570%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 31, internal_epoch   1,  Average loss: 0.0925, Accuracy: 106/706 (15.0142%)
___Train Local_ResNet_18,  epoch 211, local model 31, internal_epoch   2,  Average loss: 0.0587, Accuracy: 189/706 (26.7705%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 184.17693281173706
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 229.92732191085815 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:212 choose agents : [17, 33, 77, 11, 59, 67, 71, 66, 76, 96]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   1,  Average loss: 0.2745, Accuracy: 79/526 (15.0190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   2,  Average loss: 0.1474, Accuracy: 64/526 (12.1673%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   3,  Average loss: 0.1266, Accuracy: 57/526 (10.8365%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   4,  Average loss: 0.1051, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   5,  Average loss: 0.0862, Accuracy: 89/526 (16.9202%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   6,  Average loss: 0.0762, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Global model norm: 102.80312457252941.
Norm before scaling: 100.69815857613783. Distance: 17.51344872463641
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1733.2827957376142, distance: 1751.3449117749478
Total norm for 4 adversaries is: 1733.2827957376142. distance: 1751.3449117749478
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   1,  Average loss: 0.2729, Accuracy: 104/527 (19.7343%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   2,  Average loss: 0.1310, Accuracy: 129/527 (24.4782%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   3,  Average loss: 0.1145, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   4,  Average loss: 0.0989, Accuracy: 124/527 (23.5294%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   5,  Average loss: 0.0875, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   6,  Average loss: 0.0684, Accuracy: 131/527 (24.8577%), train_poison_data_count: 45
Global model norm: 102.80312457252941.
Norm before scaling: 100.9941259507824. Distance: 19.100604685853124
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1893.55472590575, distance: 1910.06047024695
Total norm for 4 adversaries is: 1893.55472590575. distance: 1910.06047024695
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   1,  Average loss: 0.2089, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   2,  Average loss: 0.0845, Accuracy: 84/496 (16.9355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   3,  Average loss: 0.0743, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   4,  Average loss: 0.0699, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   5,  Average loss: 0.0650, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   6,  Average loss: 0.0604, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Global model norm: 102.80312457252941.
Norm before scaling: 101.4433916958123. Distance: 15.76992796596604
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1563.596335375598, distance: 1576.9927076559359
Total norm for 4 adversaries is: 1563.596335375598. distance: 1576.9927076559359
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   1,  Average loss: 0.2169, Accuracy: 155/546 (28.3883%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   2,  Average loss: 0.1014, Accuracy: 175/546 (32.0513%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   3,  Average loss: 0.0926, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   4,  Average loss: 0.0830, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   5,  Average loss: 0.0736, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   6,  Average loss: 0.0679, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Global model norm: 102.80312457252941.
Norm before scaling: 100.93252212957675. Distance: 15.731877633548804
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1556.4794409178683, distance: 1573.1877669242156
Total norm for 4 adversaries is: 1556.4794409178683. distance: 1573.1877669242156
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 212, local model 59, internal_epoch   1,  Average loss: 0.2100, Accuracy: 30/642 (4.6729%)
___Train Local_ResNet_18,  epoch 212, local model 59, internal_epoch   2,  Average loss: 0.0929, Accuracy: 101/642 (15.7321%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 67, internal_epoch   1,  Average loss: 0.1669, Accuracy: 176/842 (20.9026%)
___Train Local_ResNet_18,  epoch 212, local model 67, internal_epoch   2,  Average loss: 0.0758, Accuracy: 223/842 (26.4846%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 71, internal_epoch   1,  Average loss: 0.1395, Accuracy: 251/1166 (21.5266%)
___Train Local_ResNet_18,  epoch 212, local model 71, internal_epoch   2,  Average loss: 0.0629, Accuracy: 396/1166 (33.9623%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 66, internal_epoch   1,  Average loss: 0.2882, Accuracy: 6/555 (1.0811%)
___Train Local_ResNet_18,  epoch 212, local model 66, internal_epoch   2,  Average loss: 0.1346, Accuracy: 136/555 (24.5045%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 76, internal_epoch   1,  Average loss: 0.3328, Accuracy: 14/65 (21.5385%)
___Train Local_ResNet_18,  epoch 212, local model 76, internal_epoch   2,  Average loss: 0.4093, Accuracy: 2/65 (3.0769%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 96, internal_epoch   1,  Average loss: 0.1996, Accuracy: 53/708 (7.4859%)
___Train Local_ResNet_18,  epoch 212, local model 96, internal_epoch   2,  Average loss: 0.0851, Accuracy: 175/708 (24.7175%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 168.49503183364868
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.45063948631287 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:213 choose agents : [17, 33, 77, 11, 80, 81, 22, 72, 64, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   1,  Average loss: 0.0839, Accuracy: 73/526 (13.8783%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   2,  Average loss: 0.0512, Accuracy: 67/526 (12.7376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   3,  Average loss: 0.0437, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   4,  Average loss: 0.0431, Accuracy: 204/526 (38.7833%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   5,  Average loss: 0.0388, Accuracy: 200/526 (38.0228%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   6,  Average loss: 0.0395, Accuracy: 202/526 (38.4030%), train_poison_data_count: 45
Global model norm: 110.59023553330782.
Norm before scaling: 109.18785328362995. Distance: 8.589114516851767
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 843.6589950922114, distance: 858.9114477057574
Total norm for 4 adversaries is: 843.6589950922114. distance: 858.9114477057574
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   1,  Average loss: 0.1406, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   2,  Average loss: 0.0971, Accuracy: 47/527 (8.9184%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   3,  Average loss: 0.0846, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   4,  Average loss: 0.0776, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   5,  Average loss: 0.0690, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   6,  Average loss: 0.0654, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 110.59023553330782.
Norm before scaling: 108.69374442958987. Distance: 10.208789509033188
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1001.20677185085, distance: 1020.8789411580592
Total norm for 4 adversaries is: 1001.20677185085. distance: 1020.8789411580592
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   1,  Average loss: 0.1397, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   2,  Average loss: 0.0925, Accuracy: 52/496 (10.4839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   3,  Average loss: 0.0808, Accuracy: 58/496 (11.6935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   4,  Average loss: 0.0705, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   5,  Average loss: 0.0606, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   6,  Average loss: 0.0552, Accuracy: 123/496 (24.7984%), train_poison_data_count: 40
Global model norm: 110.59023553330782.
Norm before scaling: 109.03014383933005. Distance: 11.058475775377426
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1090.2464744267693, distance: 1105.847582173963
Total norm for 4 adversaries is: 1090.2464744267693. distance: 1105.847582173963
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   1,  Average loss: 0.1511, Accuracy: 94/546 (17.2161%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   2,  Average loss: 0.1076, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   3,  Average loss: 0.0951, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   4,  Average loss: 0.0871, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   5,  Average loss: 0.0795, Accuracy: 113/546 (20.6960%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   6,  Average loss: 0.0705, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Global model norm: 110.59023553330782.
Norm before scaling: 108.58147862319798. Distance: 11.274052656683136
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1107.4909141839494, distance: 1127.4052066581917
Total norm for 4 adversaries is: 1107.4909141839494. distance: 1127.4052066581917
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 213, local model 80, internal_epoch   1,  Average loss: 0.0791, Accuracy: 55/363 (15.1515%)
___Train Local_ResNet_18,  epoch 213, local model 80, internal_epoch   2,  Average loss: 0.0382, Accuracy: 180/363 (49.5868%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 81, internal_epoch   1,  Average loss: 0.0677, Accuracy: 351/1034 (33.9458%)
___Train Local_ResNet_18,  epoch 213, local model 81, internal_epoch   2,  Average loss: 0.0470, Accuracy: 514/1034 (49.7099%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 22, internal_epoch   1,  Average loss: 0.1600, Accuracy: 5/494 (1.0121%)
___Train Local_ResNet_18,  epoch 213, local model 22, internal_epoch   2,  Average loss: 0.1002, Accuracy: 66/494 (13.3603%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 72, internal_epoch   1,  Average loss: 0.1276, Accuracy: 16/618 (2.5890%)
___Train Local_ResNet_18,  epoch 213, local model 72, internal_epoch   2,  Average loss: 0.0789, Accuracy: 303/618 (49.0291%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 64, internal_epoch   1,  Average loss: 0.1210, Accuracy: 3/686 (0.4373%)
___Train Local_ResNet_18,  epoch 213, local model 64, internal_epoch   2,  Average loss: 0.0611, Accuracy: 105/686 (15.3061%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 45, internal_epoch   1,  Average loss: 0.1723, Accuracy: 2/529 (0.3781%)
___Train Local_ResNet_18,  epoch 213, local model 45, internal_epoch   2,  Average loss: 0.1068, Accuracy: 83/529 (15.6900%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 185.49077796936035
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 224.59345722198486 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:214 choose agents : [17, 33, 77, 11, 80, 54, 44, 35, 68, 25]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   1,  Average loss: 0.0934, Accuracy: 68/526 (12.9278%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   2,  Average loss: 0.0753, Accuracy: 101/526 (19.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   3,  Average loss: 0.0652, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   4,  Average loss: 0.0537, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   5,  Average loss: 0.0494, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   6,  Average loss: 0.0461, Accuracy: 188/526 (35.7414%), train_poison_data_count: 45
Global model norm: 108.51107914344507.
Norm before scaling: 106.8973523774677. Distance: 8.09610811147766
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 791.1565505637933, distance: 809.610824717654
Total norm for 4 adversaries is: 791.1565505637933. distance: 809.610824717654
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   1,  Average loss: 0.1003, Accuracy: 64/527 (12.1442%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   2,  Average loss: 0.0818, Accuracy: 74/527 (14.0417%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   3,  Average loss: 0.0697, Accuracy: 107/527 (20.3036%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   4,  Average loss: 0.0583, Accuracy: 143/527 (27.1347%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   5,  Average loss: 0.0526, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   6,  Average loss: 0.0446, Accuracy: 143/527 (27.1347%), train_poison_data_count: 45
Global model norm: 108.51107914344507.
Norm before scaling: 106.87710158752435. Distance: 9.280307092518292
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 910.6093426931221, distance: 928.0307106987354
Total norm for 4 adversaries is: 910.6093426931221. distance: 928.0307106987354
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   1,  Average loss: 0.0707, Accuracy: 123/496 (24.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   2,  Average loss: 0.0634, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   3,  Average loss: 0.0588, Accuracy: 143/496 (28.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   4,  Average loss: 0.0555, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   5,  Average loss: 0.0535, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   6,  Average loss: 0.0516, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Global model norm: 108.51107914344507.
Norm before scaling: 107.0947895339101. Distance: 5.533390643883934
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 533.2551570308533, distance: 553.3390405077162
Total norm for 4 adversaries is: 533.2551570308533. distance: 553.3390405077162
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   1,  Average loss: 0.0962, Accuracy: 51/546 (9.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   2,  Average loss: 0.0786, Accuracy: 59/546 (10.8059%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   3,  Average loss: 0.0711, Accuracy: 166/546 (30.4029%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   4,  Average loss: 0.0651, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   5,  Average loss: 0.0618, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   6,  Average loss: 0.0557, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Global model norm: 108.51107914344507.
Norm before scaling: 106.77623817620895. Distance: 7.6322372360305195
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 742.3686752550918, distance: 763.2237139266573
Total norm for 4 adversaries is: 742.3686752550918. distance: 763.2237139266573
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 214, local model 80, internal_epoch   1,  Average loss: 0.1050, Accuracy: 13/363 (3.5813%)
___Train Local_ResNet_18,  epoch 214, local model 80, internal_epoch   2,  Average loss: 0.0604, Accuracy: 55/363 (15.1515%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 54, internal_epoch   1,  Average loss: 0.1207, Accuracy: 13/440 (2.9545%)
___Train Local_ResNet_18,  epoch 214, local model 54, internal_epoch   2,  Average loss: 0.0747, Accuracy: 34/440 (7.7273%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 44, internal_epoch   1,  Average loss: 0.0966, Accuracy: 14/436 (3.2110%)
___Train Local_ResNet_18,  epoch 214, local model 44, internal_epoch   2,  Average loss: 0.0572, Accuracy: 73/436 (16.7431%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 35, internal_epoch   1,  Average loss: 0.0698, Accuracy: 68/419 (16.2291%)
___Train Local_ResNet_18,  epoch 214, local model 35, internal_epoch   2,  Average loss: 0.0359, Accuracy: 109/419 (26.0143%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 68, internal_epoch   1,  Average loss: 0.1202, Accuracy: 5/416 (1.2019%)
___Train Local_ResNet_18,  epoch 214, local model 68, internal_epoch   2,  Average loss: 0.0815, Accuracy: 66/416 (15.8654%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 25, internal_epoch   1,  Average loss: 0.1137, Accuracy: 88/545 (16.1468%)
___Train Local_ResNet_18,  epoch 214, local model 25, internal_epoch   2,  Average loss: 0.0759, Accuracy: 168/545 (30.8257%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 200.20700931549072
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 241.27163743972778 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:215 choose agents : [17, 33, 77, 11, 4, 79, 43, 63, 35, 49]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   1,  Average loss: 0.1058, Accuracy: 50/526 (9.5057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   2,  Average loss: 0.0801, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   3,  Average loss: 0.0634, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   4,  Average loss: 0.0479, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   5,  Average loss: 0.0439, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   6,  Average loss: 0.0415, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Global model norm: 104.46569319488336.
Norm before scaling: 102.86086913125662. Distance: 8.765123648764174
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 859.2042830433284, distance: 876.5123715612917
Total norm for 4 adversaries is: 859.2042830433284. distance: 876.5123715612917
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   1,  Average loss: 0.1023, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   2,  Average loss: 0.0819, Accuracy: 175/527 (33.2068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   3,  Average loss: 0.0621, Accuracy: 191/527 (36.2429%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   4,  Average loss: 0.0517, Accuracy: 168/527 (31.8786%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   5,  Average loss: 0.0469, Accuracy: 142/527 (26.9450%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   6,  Average loss: 0.0425, Accuracy: 181/527 (34.3454%), train_poison_data_count: 45
Global model norm: 104.46569319488336.
Norm before scaling: 102.83281999044614. Distance: 8.688845742918808
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 851.1607515622417, distance: 868.8845579246993
Total norm for 4 adversaries is: 851.1607515622417. distance: 868.8845579246993
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   1,  Average loss: 0.1436, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   2,  Average loss: 0.1217, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   3,  Average loss: 0.1039, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   4,  Average loss: 0.0823, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   5,  Average loss: 0.0692, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   6,  Average loss: 0.0592, Accuracy: 61/496 (12.2984%), train_poison_data_count: 40
Global model norm: 104.46569319488336.
Norm before scaling: 102.67307700749744. Distance: 10.500199815574568
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1032.1325011838353, distance: 1050.0199998095275
Total norm for 4 adversaries is: 1032.1325011838353. distance: 1050.0199998095275
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   1,  Average loss: 0.1031, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   2,  Average loss: 0.0795, Accuracy: 74/546 (13.5531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   3,  Average loss: 0.0577, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   4,  Average loss: 0.0482, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   5,  Average loss: 0.0410, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   6,  Average loss: 0.0356, Accuracy: 192/546 (35.1648%), train_poison_data_count: 45
Global model norm: 104.46569319488336.
Norm before scaling: 102.88938519564348. Distance: 9.213719330507478
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 904.8008068077747, distance: 921.3719390126878
Total norm for 4 adversaries is: 904.8008068077747. distance: 921.3719390126878
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 215, local model 4, internal_epoch   1,  Average loss: 0.1246, Accuracy: 0/557 (0.0000%)
___Train Local_ResNet_18,  epoch 215, local model 4, internal_epoch   2,  Average loss: 0.0746, Accuracy: 119/557 (21.3645%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 79, internal_epoch   1,  Average loss: 0.1734, Accuracy: 7/154 (4.5455%)
___Train Local_ResNet_18,  epoch 215, local model 79, internal_epoch   2,  Average loss: 0.1650, Accuracy: 7/154 (4.5455%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 43, internal_epoch   1,  Average loss: 0.1350, Accuracy: 14/345 (4.0580%)
___Train Local_ResNet_18,  epoch 215, local model 43, internal_epoch   2,  Average loss: 0.1073, Accuracy: 56/345 (16.2319%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   1,  Average loss: 0.1114, Accuracy: 52/752 (6.9149%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   2,  Average loss: 0.0610, Accuracy: 82/752 (10.9043%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 35, internal_epoch   1,  Average loss: 0.1584, Accuracy: 12/419 (2.8640%)
___Train Local_ResNet_18,  epoch 215, local model 35, internal_epoch   2,  Average loss: 0.1134, Accuracy: 8/419 (1.9093%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 49, internal_epoch   1,  Average loss: 0.1024, Accuracy: 34/426 (7.9812%)
___Train Local_ResNet_18,  epoch 215, local model 49, internal_epoch   2,  Average loss: 0.0701, Accuracy: 75/426 (17.6056%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.65093970298767
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 229.68217134475708 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:216 choose agents : [17, 33, 77, 11, 8, 12, 18, 94, 57, 83]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   1,  Average loss: 0.1856, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   2,  Average loss: 0.1453, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   3,  Average loss: 0.1297, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   4,  Average loss: 0.1253, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   5,  Average loss: 0.1089, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   6,  Average loss: 0.1007, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Global model norm: 102.3181551964875.
Norm before scaling: 100.04575613344376. Distance: 12.97032769959054
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1276.6969099986104, distance: 1297.0327675120625
Total norm for 4 adversaries is: 1276.6969099986104. distance: 1297.0327675120625
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   1,  Average loss: 0.1772, Accuracy: 106/527 (20.1139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   2,  Average loss: 0.1515, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   3,  Average loss: 0.1392, Accuracy: 92/527 (17.4573%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   4,  Average loss: 0.1199, Accuracy: 92/527 (17.4573%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   5,  Average loss: 0.1102, Accuracy: 120/527 (22.7704%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   6,  Average loss: 0.0922, Accuracy: 138/527 (26.1860%), train_poison_data_count: 45
Global model norm: 102.3181551964875.
Norm before scaling: 100.02975143363598. Distance: 12.68519067653301
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1247.883408015348, distance: 1268.5191169233517
Total norm for 4 adversaries is: 1247.883408015348. distance: 1268.5191169233517
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   1,  Average loss: 0.1495, Accuracy: 59/496 (11.8952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   2,  Average loss: 0.1266, Accuracy: 120/496 (24.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   3,  Average loss: 0.1068, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   4,  Average loss: 0.0843, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   5,  Average loss: 0.0706, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   6,  Average loss: 0.0530, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Global model norm: 102.3181551964875.
Norm before scaling: 100.55906224701978. Distance: 9.679334780321982
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 949.8985472143854, distance: 967.9334946162365
Total norm for 4 adversaries is: 949.8985472143854. distance: 967.9334946162365
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   1,  Average loss: 0.1269, Accuracy: 115/546 (21.0623%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   2,  Average loss: 0.1050, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   3,  Average loss: 0.0906, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   4,  Average loss: 0.0833, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   5,  Average loss: 0.0767, Accuracy: 175/546 (32.0513%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   6,  Average loss: 0.0736, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Global model norm: 102.3181551964875.
Norm before scaling: 100.3374774199551. Distance: 8.882380465801823
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 866.8371386829247, distance: 888.2380733789787
Total norm for 4 adversaries is: 866.8371386829247. distance: 888.2380733789787
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 216, local model 8, internal_epoch   1,  Average loss: 0.1878, Accuracy: 42/534 (7.8652%)
___Train Local_ResNet_18,  epoch 216, local model 8, internal_epoch   2,  Average loss: 0.0765, Accuracy: 108/534 (20.2247%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 12, internal_epoch   1,  Average loss: 0.2783, Accuracy: 35/977 (3.5824%)
___Train Local_ResNet_18,  epoch 216, local model 12, internal_epoch   2,  Average loss: 0.0927, Accuracy: 206/977 (21.0850%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 18, internal_epoch   1,  Average loss: 0.2976, Accuracy: 2/386 (0.5181%)
___Train Local_ResNet_18,  epoch 216, local model 18, internal_epoch   2,  Average loss: 0.1783, Accuracy: 11/386 (2.8497%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 94, internal_epoch   1,  Average loss: 0.4287, Accuracy: 3/203 (1.4778%)
___Train Local_ResNet_18,  epoch 216, local model 94, internal_epoch   2,  Average loss: 0.3030, Accuracy: 4/203 (1.9704%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 57, internal_epoch   1,  Average loss: 0.1715, Accuracy: 34/290 (11.7241%)
___Train Local_ResNet_18,  epoch 216, local model 57, internal_epoch   2,  Average loss: 0.0864, Accuracy: 80/290 (27.5862%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 83, internal_epoch   1,  Average loss: 0.2625, Accuracy: 20/366 (5.4645%)
___Train Local_ResNet_18,  epoch 216, local model 83, internal_epoch   2,  Average loss: 0.1513, Accuracy: 25/366 (6.8306%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 176.16050171852112
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 219.23137712478638 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:217 choose agents : [17, 33, 77, 11, 37, 22, 38, 65, 29, 18]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   1,  Average loss: 0.1520, Accuracy: 48/526 (9.1255%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   2,  Average loss: 0.1083, Accuracy: 60/526 (11.4068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   3,  Average loss: 0.0729, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   4,  Average loss: 0.0421, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   5,  Average loss: 0.0355, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   6,  Average loss: 0.0316, Accuracy: 199/526 (37.8327%), train_poison_data_count: 45
Global model norm: 99.12754666495333.
Norm before scaling: 97.59725718161859. Distance: 9.71372929750641
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 955.9558044177566, distance: 971.3729330180041
Total norm for 4 adversaries is: 955.9558044177566. distance: 971.3729330180041
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   1,  Average loss: 0.1128, Accuracy: 114/527 (21.6319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   2,  Average loss: 0.0796, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   3,  Average loss: 0.0725, Accuracy: 171/527 (32.4478%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   4,  Average loss: 0.0628, Accuracy: 176/527 (33.3966%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   5,  Average loss: 0.0547, Accuracy: 182/527 (34.5351%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   6,  Average loss: 0.0394, Accuracy: 178/527 (33.7761%), train_poison_data_count: 45
Global model norm: 99.12754666495333.
Norm before scaling: 97.60652734160507. Distance: 9.493410736511372
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 933.8837588265469, distance: 949.341054363499
Total norm for 4 adversaries is: 933.8837588265469. distance: 949.341054363499
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   1,  Average loss: 0.1171, Accuracy: 29/496 (5.8468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   2,  Average loss: 0.0792, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   3,  Average loss: 0.0604, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   4,  Average loss: 0.0429, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   5,  Average loss: 0.0356, Accuracy: 177/496 (35.6855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   6,  Average loss: 0.0329, Accuracy: 181/496 (36.4919%), train_poison_data_count: 40
Global model norm: 99.12754666495333.
Norm before scaling: 97.91604443507968. Distance: 8.474344467872205
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 834.8162222908704, distance: 847.4344369920307
Total norm for 4 adversaries is: 834.8162222908704. distance: 847.4344369920307
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   1,  Average loss: 0.1131, Accuracy: 162/546 (29.6703%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   2,  Average loss: 0.0855, Accuracy: 156/546 (28.5714%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   3,  Average loss: 0.0714, Accuracy: 213/546 (39.0110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   4,  Average loss: 0.0589, Accuracy: 227/546 (41.5751%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   5,  Average loss: 0.0467, Accuracy: 193/546 (35.3480%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   6,  Average loss: 0.0320, Accuracy: 193/546 (35.3480%), train_poison_data_count: 45
Global model norm: 99.12754666495333.
Norm before scaling: 97.54875583842677. Distance: 8.619355939625933
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 845.1502824941846, distance: 861.9356124444563
Total norm for 4 adversaries is: 845.1502824941846. distance: 861.9356124444563
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 217, local model 37, internal_epoch   1,  Average loss: 0.0623, Accuracy: 159/725 (21.9310%)
___Train Local_ResNet_18,  epoch 217, local model 37, internal_epoch   2,  Average loss: 0.0335, Accuracy: 312/725 (43.0345%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 22, internal_epoch   1,  Average loss: 0.0580, Accuracy: 146/494 (29.5547%)
___Train Local_ResNet_18,  epoch 217, local model 22, internal_epoch   2,  Average loss: 0.0423, Accuracy: 186/494 (37.6518%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 38, internal_epoch   1,  Average loss: 0.1240, Accuracy: 197/756 (26.0582%)
___Train Local_ResNet_18,  epoch 217, local model 38, internal_epoch   2,  Average loss: 0.0598, Accuracy: 166/756 (21.9577%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 65, internal_epoch   1,  Average loss: 0.0663, Accuracy: 47/314 (14.9682%)
___Train Local_ResNet_18,  epoch 217, local model 65, internal_epoch   2,  Average loss: 0.0401, Accuracy: 110/314 (35.0318%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 29, internal_epoch   1,  Average loss: 0.1032, Accuracy: 210/848 (24.7642%)
___Train Local_ResNet_18,  epoch 217, local model 29, internal_epoch   2,  Average loss: 0.0445, Accuracy: 401/848 (47.2877%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 18, internal_epoch   1,  Average loss: 0.0686, Accuracy: 96/386 (24.8705%)
___Train Local_ResNet_18,  epoch 217, local model 18, internal_epoch   2,  Average loss: 0.0423, Accuracy: 86/386 (22.2798%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 177.79055786132812
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 224.3167450428009 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:218 choose agents : [17, 33, 77, 11, 53, 15, 7, 29, 86, 60]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   1,  Average loss: 0.2789, Accuracy: 99/526 (18.8213%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   2,  Average loss: 0.0419, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   3,  Average loss: 0.0393, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   4,  Average loss: 0.0353, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   5,  Average loss: 0.0335, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   6,  Average loss: 0.0327, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Global model norm: 96.51545678510516.
Norm before scaling: 96.1337162823221. Distance: 21.842737089802156
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2173.7760924253444, distance: 2184.2737923621207
Total norm for 4 adversaries is: 2173.7760924253444. distance: 2184.2737923621207
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   1,  Average loss: 0.3367, Accuracy: 85/527 (16.1290%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   2,  Average loss: 0.0626, Accuracy: 148/527 (28.0835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   3,  Average loss: 0.0544, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   4,  Average loss: 0.0497, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   5,  Average loss: 0.0439, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   6,  Average loss: 0.0394, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 96.51545678510516.
Norm before scaling: 96.34426694639126. Distance: 25.03374553532379
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2492.0333063584844, distance: 2503.374622384752
Total norm for 4 adversaries is: 2492.0333063584844. distance: 2503.374622384752
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   1,  Average loss: 0.3460, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   2,  Average loss: 0.0415, Accuracy: 77/496 (15.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   3,  Average loss: 0.0394, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   4,  Average loss: 0.0369, Accuracy: 108/496 (21.7742%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   5,  Average loss: 0.0356, Accuracy: 160/496 (32.2581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   6,  Average loss: 0.0353, Accuracy: 176/496 (35.4839%), train_poison_data_count: 40
Global model norm: 96.51545678510516.
Norm before scaling: 96.4659357380236. Distance: 24.096115926314244
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2399.276140839149, distance: 2409.6116907086916
Total norm for 4 adversaries is: 2399.276140839149. distance: 2409.6116907086916
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   1,  Average loss: 0.3326, Accuracy: 74/546 (13.5531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   2,  Average loss: 0.0659, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   3,  Average loss: 0.0581, Accuracy: 124/546 (22.7106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   4,  Average loss: 0.0515, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   5,  Average loss: 0.0419, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   6,  Average loss: 0.0326, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Global model norm: 96.51545678510516.
Norm before scaling: 96.3228569626. Distance: 25.11341097191959
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2499.8734967993882, distance: 2511.3411755474403
Total norm for 4 adversaries is: 2499.8734967993882. distance: 2511.3411755474403
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 218, local model 53, internal_epoch   1,  Average loss: 0.2600, Accuracy: 82/625 (13.1200%)
___Train Local_ResNet_18,  epoch 218, local model 53, internal_epoch   2,  Average loss: 0.0371, Accuracy: 211/625 (33.7600%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 15, internal_epoch   1,  Average loss: 0.2411, Accuracy: 145/341 (42.5220%)
___Train Local_ResNet_18,  epoch 218, local model 15, internal_epoch   2,  Average loss: 0.0482, Accuracy: 73/341 (21.4076%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 7, internal_epoch   1,  Average loss: 0.3830, Accuracy: 33/352 (9.3750%)
___Train Local_ResNet_18,  epoch 218, local model 7, internal_epoch   2,  Average loss: 0.0566, Accuracy: 50/352 (14.2045%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 29, internal_epoch   1,  Average loss: 0.1824, Accuracy: 165/848 (19.4575%)
___Train Local_ResNet_18,  epoch 218, local model 29, internal_epoch   2,  Average loss: 0.0291, Accuracy: 363/848 (42.8066%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 86, internal_epoch   1,  Average loss: 0.5184, Accuracy: 45/212 (21.2264%)
___Train Local_ResNet_18,  epoch 218, local model 86, internal_epoch   2,  Average loss: 0.0992, Accuracy: 37/212 (17.4528%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   1,  Average loss: 0.5306, Accuracy: 12/284 (4.2254%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   2,  Average loss: 0.0672, Accuracy: 56/284 (19.7183%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 171.83904838562012
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 224.31243920326233 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:219 choose agents : [17, 33, 77, 11, 81, 8, 28, 1, 93, 53]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   1,  Average loss: 0.1065, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   2,  Average loss: 0.0505, Accuracy: 118/526 (22.4335%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   3,  Average loss: 0.0422, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   4,  Average loss: 0.0329, Accuracy: 187/526 (35.5513%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   5,  Average loss: 0.0304, Accuracy: 193/526 (36.6920%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   6,  Average loss: 0.0306, Accuracy: 199/526 (37.8327%), train_poison_data_count: 45
Global model norm: 124.86863409699811.
Norm before scaling: 123.49798359942967. Distance: 11.790125086721806
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1165.212319708301, distance: 1179.0125105358297
Total norm for 4 adversaries is: 1165.212319708301. distance: 1179.0125105358297
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   1,  Average loss: 0.0933, Accuracy: 122/527 (23.1499%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   2,  Average loss: 0.0435, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   3,  Average loss: 0.0366, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   4,  Average loss: 0.0355, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   5,  Average loss: 0.0324, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   6,  Average loss: 0.0313, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Global model norm: 124.86863409699811.
Norm before scaling: 123.51601142412672. Distance: 11.031315011759563
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1089.3691982060077, distance: 1103.1315651362715
Total norm for 4 adversaries is: 1089.3691982060077. distance: 1103.1315651362715
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   1,  Average loss: 0.1139, Accuracy: 55/496 (11.0887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   2,  Average loss: 0.0533, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   3,  Average loss: 0.0427, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   4,  Average loss: 0.0358, Accuracy: 198/496 (39.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   5,  Average loss: 0.0329, Accuracy: 183/496 (36.8952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   6,  Average loss: 0.0306, Accuracy: 208/496 (41.9355%), train_poison_data_count: 40
Global model norm: 124.86863409699811.
Norm before scaling: 123.6914160572592. Distance: 11.937743499029992
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1182.0226309170228, distance: 1193.7743191240127
Total norm for 4 adversaries is: 1182.0226309170228. distance: 1193.7743191240127
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   1,  Average loss: 0.0947, Accuracy: 164/546 (30.0366%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   2,  Average loss: 0.0498, Accuracy: 171/546 (31.3187%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   3,  Average loss: 0.0434, Accuracy: 191/546 (34.9817%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   4,  Average loss: 0.0384, Accuracy: 193/546 (35.3480%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   5,  Average loss: 0.0339, Accuracy: 192/546 (35.1648%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   6,  Average loss: 0.0309, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Global model norm: 124.86863409699811.
Norm before scaling: 123.41765267654178. Distance: 10.866017808635238
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1071.6635432821254, distance: 1086.6018129931497
Total norm for 4 adversaries is: 1071.6635432821254. distance: 1086.6018129931497
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 219, local model 81, internal_epoch   1,  Average loss: 0.0927, Accuracy: 220/1034 (21.2766%)
___Train Local_ResNet_18,  epoch 219, local model 81, internal_epoch   2,  Average loss: 0.0291, Accuracy: 513/1034 (49.6132%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 8, internal_epoch   1,  Average loss: 0.1338, Accuracy: 82/534 (15.3558%)
___Train Local_ResNet_18,  epoch 219, local model 8, internal_epoch   2,  Average loss: 0.0532, Accuracy: 98/534 (18.3521%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 28, internal_epoch   1,  Average loss: 0.1345, Accuracy: 87/423 (20.5674%)
___Train Local_ResNet_18,  epoch 219, local model 28, internal_epoch   2,  Average loss: 0.0472, Accuracy: 87/423 (20.5674%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 1, internal_epoch   1,  Average loss: 0.1119, Accuracy: 145/641 (22.6209%)
___Train Local_ResNet_18,  epoch 219, local model 1, internal_epoch   2,  Average loss: 0.0403, Accuracy: 222/641 (34.6334%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 93, internal_epoch   1,  Average loss: 0.1343, Accuracy: 30/584 (5.1370%)
___Train Local_ResNet_18,  epoch 219, local model 93, internal_epoch   2,  Average loss: 0.0414, Accuracy: 165/584 (28.2534%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   1,  Average loss: 0.1264, Accuracy: 31/625 (4.9600%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   2,  Average loss: 0.0420, Accuracy: 197/625 (31.5200%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 176.29796886444092
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 217.82555174827576 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:220 choose agents : [17, 33, 77, 11, 12, 50, 10, 18, 39, 62]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   1,  Average loss: 0.0993, Accuracy: 111/526 (21.1027%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   2,  Average loss: 0.0573, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   3,  Average loss: 0.0434, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   4,  Average loss: 0.0393, Accuracy: 204/526 (38.7833%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   5,  Average loss: 0.0352, Accuracy: 210/526 (39.9240%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   6,  Average loss: 0.0346, Accuracy: 213/526 (40.4943%), train_poison_data_count: 45
Global model norm: 124.44110994261503.
Norm before scaling: 122.93405244276299. Distance: 9.754707178269836
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 959.2873982806195, distance: 975.4706876682661
Total norm for 4 adversaries is: 959.2873982806195. distance: 975.4706876682661
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   1,  Average loss: 0.1223, Accuracy: 79/527 (14.9905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   2,  Average loss: 0.0758, Accuracy: 74/527 (14.0417%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   3,  Average loss: 0.0661, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   4,  Average loss: 0.0585, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   5,  Average loss: 0.0508, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   6,  Average loss: 0.0436, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Global model norm: 124.44110994261503.
Norm before scaling: 122.74710409007619. Distance: 11.080485233740294
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1090.4611409857757, distance: 1108.0485097684127
Total norm for 4 adversaries is: 1090.4611409857757. distance: 1108.0485097684127
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   1,  Average loss: 0.1056, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   2,  Average loss: 0.0656, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   3,  Average loss: 0.0583, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   4,  Average loss: 0.0483, Accuracy: 145/496 (29.2339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   5,  Average loss: 0.0417, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   6,  Average loss: 0.0368, Accuracy: 176/496 (35.4839%), train_poison_data_count: 40
Global model norm: 124.44110994261503.
Norm before scaling: 123.04543749160308. Distance: 10.070985237420604
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 992.4965050316298, distance: 1007.0984311376917
Total norm for 4 adversaries is: 992.4965050316298. distance: 1007.0984311376917
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   1,  Average loss: 0.1142, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   2,  Average loss: 0.0762, Accuracy: 124/546 (22.7106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   3,  Average loss: 0.0500, Accuracy: 137/546 (25.0916%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   4,  Average loss: 0.0379, Accuracy: 163/546 (29.8535%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   5,  Average loss: 0.0327, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   6,  Average loss: 0.0309, Accuracy: 159/546 (29.1209%), train_poison_data_count: 45
Global model norm: 124.44110994261503.
Norm before scaling: 122.88802941473796. Distance: 9.37226848227825
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 920.1541311106525, distance: 937.2268602104829
Total norm for 4 adversaries is: 920.1541311106525. distance: 937.2268602104829
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 220, local model 12, internal_epoch   1,  Average loss: 0.0679, Accuracy: 226/977 (23.1320%)
___Train Local_ResNet_18,  epoch 220, local model 12, internal_epoch   2,  Average loss: 0.0329, Accuracy: 419/977 (42.8864%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   1,  Average loss: 0.1520, Accuracy: 33/401 (8.2294%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   2,  Average loss: 0.0739, Accuracy: 63/401 (15.7107%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 10, internal_epoch   1,  Average loss: 0.0604, Accuracy: 322/752 (42.8191%)
___Train Local_ResNet_18,  epoch 220, local model 10, internal_epoch   2,  Average loss: 0.0305, Accuracy: 439/752 (58.3777%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 18, internal_epoch   1,  Average loss: 0.1411, Accuracy: 49/386 (12.6943%)
___Train Local_ResNet_18,  epoch 220, local model 18, internal_epoch   2,  Average loss: 0.0851, Accuracy: 93/386 (24.0933%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 39, internal_epoch   1,  Average loss: 0.1725, Accuracy: 8/217 (3.6866%)
___Train Local_ResNet_18,  epoch 220, local model 39, internal_epoch   2,  Average loss: 0.0721, Accuracy: 9/217 (4.1475%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 62, internal_epoch   1,  Average loss: 0.1235, Accuracy: 47/358 (13.1285%)
___Train Local_ResNet_18,  epoch 220, local model 62, internal_epoch   2,  Average loss: 0.0688, Accuracy: 80/358 (22.3464%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 189.66249823570251
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 227.74102759361267 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:221 choose agents : [17, 33, 77, 11, 65, 87, 12, 74, 4, 7]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   1,  Average loss: 0.1234, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   2,  Average loss: 0.0724, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   3,  Average loss: 0.0571, Accuracy: 185/526 (35.1711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   4,  Average loss: 0.0529, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   5,  Average loss: 0.0451, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   6,  Average loss: 0.0379, Accuracy: 207/526 (39.3536%), train_poison_data_count: 45
Global model norm: 121.86838924378627.
Norm before scaling: 120.16544584446895. Distance: 10.484807240065415
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1030.5114021688455, distance: 1048.4807461274622
Total norm for 4 adversaries is: 1030.5114021688455. distance: 1048.4807461274622
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   1,  Average loss: 0.0885, Accuracy: 111/527 (21.0626%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   2,  Average loss: 0.0494, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   3,  Average loss: 0.0408, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   4,  Average loss: 0.0374, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   5,  Average loss: 0.0359, Accuracy: 204/527 (38.7097%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   6,  Average loss: 0.0340, Accuracy: 207/527 (39.2789%), train_poison_data_count: 45
Global model norm: 121.86838924378627.
Norm before scaling: 120.40403579588809. Distance: 9.20110077284935
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 904.1632526817267, distance: 920.1100817293548
Total norm for 4 adversaries is: 904.1632526817267. distance: 920.1100817293548
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   1,  Average loss: 0.1141, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   2,  Average loss: 0.0705, Accuracy: 54/496 (10.8871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   3,  Average loss: 0.0563, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   4,  Average loss: 0.0509, Accuracy: 153/496 (30.8468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   5,  Average loss: 0.0448, Accuracy: 152/496 (30.6452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   6,  Average loss: 0.0403, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Global model norm: 121.86838924378627.
Norm before scaling: 120.41882882646509. Distance: 9.482474373889172
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 932.690932195655, distance: 948.247396516331
Total norm for 4 adversaries is: 932.690932195655. distance: 948.247396516331
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   1,  Average loss: 0.1098, Accuracy: 122/546 (22.3443%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   2,  Average loss: 0.0702, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   3,  Average loss: 0.0581, Accuracy: 159/546 (29.1209%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   4,  Average loss: 0.0517, Accuracy: 161/546 (29.4872%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   5,  Average loss: 0.0462, Accuracy: 177/546 (32.4176%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   6,  Average loss: 0.0392, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Global model norm: 121.86838924378627.
Norm before scaling: 120.1966731418761. Distance: 9.934149027195598
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 975.3921647214519, distance: 993.4149120584007
Total norm for 4 adversaries is: 975.3921647214519. distance: 993.4149120584007
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 221, local model 65, internal_epoch   1,  Average loss: 0.0910, Accuracy: 47/314 (14.9682%)
___Train Local_ResNet_18,  epoch 221, local model 65, internal_epoch   2,  Average loss: 0.0508, Accuracy: 110/314 (35.0318%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 87, internal_epoch   1,  Average loss: 0.1122, Accuracy: 19/397 (4.7859%)
___Train Local_ResNet_18,  epoch 221, local model 87, internal_epoch   2,  Average loss: 0.0519, Accuracy: 199/397 (50.1259%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 12, internal_epoch   1,  Average loss: 0.0743, Accuracy: 245/977 (25.0768%)
___Train Local_ResNet_18,  epoch 221, local model 12, internal_epoch   2,  Average loss: 0.0341, Accuracy: 415/977 (42.4770%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 74, internal_epoch   1,  Average loss: 0.1432, Accuracy: 5/469 (1.0661%)
___Train Local_ResNet_18,  epoch 221, local model 74, internal_epoch   2,  Average loss: 0.0664, Accuracy: 69/469 (14.7122%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 4, internal_epoch   1,  Average loss: 0.0969, Accuracy: 133/557 (23.8779%)
___Train Local_ResNet_18,  epoch 221, local model 4, internal_epoch   2,  Average loss: 0.0431, Accuracy: 192/557 (34.4704%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 7, internal_epoch   1,  Average loss: 0.0970, Accuracy: 120/352 (34.0909%)
___Train Local_ResNet_18,  epoch 221, local model 7, internal_epoch   2,  Average loss: 0.0569, Accuracy: 109/352 (30.9659%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 189.5179727077484
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.54750180244446 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:222 choose agents : [17, 33, 77, 11, 35, 30, 72, 51, 63, 46]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   1,  Average loss: 0.1228, Accuracy: 100/526 (19.0114%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   2,  Average loss: 0.0982, Accuracy: 111/526 (21.1027%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   3,  Average loss: 0.0849, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   4,  Average loss: 0.0692, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   5,  Average loss: 0.0620, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   6,  Average loss: 0.0516, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Global model norm: 119.08621811003152.
Norm before scaling: 117.18648749562597. Distance: 10.044066420711877
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 983.8904918739687, distance: 1004.4066656489292
Total norm for 4 adversaries is: 983.8904918739687. distance: 1004.4066656489292
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   1,  Average loss: 0.1108, Accuracy: 95/527 (18.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   2,  Average loss: 0.0771, Accuracy: 102/527 (19.3548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   3,  Average loss: 0.0605, Accuracy: 113/527 (21.4421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   4,  Average loss: 0.0502, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   5,  Average loss: 0.0481, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   6,  Average loss: 0.0477, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Global model norm: 119.08621811003152.
Norm before scaling: 117.3992087654342. Distance: 9.171391696966152
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 898.3424319267125, distance: 917.1391661029421
Total norm for 4 adversaries is: 898.3424319267125. distance: 917.1391661029421
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   1,  Average loss: 0.0843, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   2,  Average loss: 0.0633, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   3,  Average loss: 0.0523, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   4,  Average loss: 0.0439, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   5,  Average loss: 0.0387, Accuracy: 165/496 (33.2661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   6,  Average loss: 0.0370, Accuracy: 186/496 (37.5000%), train_poison_data_count: 40
Global model norm: 119.08621811003152.
Norm before scaling: 117.68077018729525. Distance: 7.766014534527236
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 760.2524251852144, distance: 776.6014099909941
Total norm for 4 adversaries is: 760.2524251852144. distance: 776.6014099909941
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   1,  Average loss: 0.0908, Accuracy: 123/546 (22.5275%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   2,  Average loss: 0.0670, Accuracy: 130/546 (23.8095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   3,  Average loss: 0.0563, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   4,  Average loss: 0.0507, Accuracy: 164/546 (30.0366%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   5,  Average loss: 0.0485, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   6,  Average loss: 0.0463, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Global model norm: 119.08621811003152.
Norm before scaling: 117.39548210536043. Distance: 7.957061452906596
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 775.2518945478301, distance: 795.70613294105
Total norm for 4 adversaries is: 775.2518945478301. distance: 795.70613294105
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 222, local model 35, internal_epoch   1,  Average loss: 0.1348, Accuracy: 26/419 (6.2053%)
___Train Local_ResNet_18,  epoch 222, local model 35, internal_epoch   2,  Average loss: 0.0639, Accuracy: 94/419 (22.4344%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 30, internal_epoch   1,  Average loss: 0.1398, Accuracy: 9/337 (2.6706%)
___Train Local_ResNet_18,  epoch 222, local model 30, internal_epoch   2,  Average loss: 0.0838, Accuracy: 10/337 (2.9674%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   1,  Average loss: 0.1506, Accuracy: 173/618 (27.9935%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   2,  Average loss: 0.0888, Accuracy: 177/618 (28.6408%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 51, internal_epoch   1,  Average loss: 0.0556, Accuracy: 183/479 (38.2046%)
___Train Local_ResNet_18,  epoch 222, local model 51, internal_epoch   2,  Average loss: 0.0364, Accuracy: 279/479 (58.2463%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 63, internal_epoch   1,  Average loss: 0.0725, Accuracy: 191/752 (25.3989%)
___Train Local_ResNet_18,  epoch 222, local model 63, internal_epoch   2,  Average loss: 0.0495, Accuracy: 169/752 (22.4734%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 46, internal_epoch   1,  Average loss: 0.1027, Accuracy: 153/601 (25.4576%)
___Train Local_ResNet_18,  epoch 222, local model 46, internal_epoch   2,  Average loss: 0.0676, Accuracy: 167/601 (27.7870%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 185.90024733543396
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.17005562782288 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:223 choose agents : [17, 33, 77, 11, 54, 95, 26, 2, 82, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   1,  Average loss: 0.1128, Accuracy: 63/526 (11.9772%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   2,  Average loss: 0.0918, Accuracy: 111/526 (21.1027%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   3,  Average loss: 0.0740, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   4,  Average loss: 0.0616, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   5,  Average loss: 0.0428, Accuracy: 192/526 (36.5019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   6,  Average loss: 0.0365, Accuracy: 187/526 (35.5513%), train_poison_data_count: 45
Global model norm: 115.53776269850044.
Norm before scaling: 113.8420772591905. Distance: 8.638867273606888
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 844.5653467908803, distance: 863.886711322729
Total norm for 4 adversaries is: 844.5653467908803. distance: 863.886711322729
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   1,  Average loss: 0.0688, Accuracy: 179/527 (33.9658%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   2,  Average loss: 0.0599, Accuracy: 203/527 (38.5199%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   3,  Average loss: 0.0558, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   4,  Average loss: 0.0540, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   5,  Average loss: 0.0528, Accuracy: 191/527 (36.2429%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   6,  Average loss: 0.0501, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Global model norm: 115.53776269850044.
Norm before scaling: 113.895091188668. Distance: 5.096356620131734
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 482.4852815112602, distance: 509.6356541687404
Total norm for 4 adversaries is: 482.4852815112602. distance: 509.6356541687404
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   1,  Average loss: 0.1130, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   2,  Average loss: 0.1023, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   3,  Average loss: 0.0934, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   4,  Average loss: 0.0832, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   5,  Average loss: 0.0730, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   6,  Average loss: 0.0604, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Global model norm: 115.53776269850044.
Norm before scaling: 113.81765673380822. Distance: 7.854553563903707
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 764.6359836549677, distance: 785.4552819861866
Total norm for 4 adversaries is: 764.6359836549677. distance: 785.4552819861866
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   1,  Average loss: 0.0960, Accuracy: 83/546 (15.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   2,  Average loss: 0.0877, Accuracy: 172/546 (31.5018%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   3,  Average loss: 0.0805, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   4,  Average loss: 0.0714, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   5,  Average loss: 0.0644, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   6,  Average loss: 0.0559, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Global model norm: 115.53776269850044.
Norm before scaling: 113.68034010576542. Distance: 7.620189212242114
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 738.6742769990032, distance: 762.0189056053662
Total norm for 4 adversaries is: 738.6742769990032. distance: 762.0189056053662
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 223, local model 54, internal_epoch   1,  Average loss: 0.1258, Accuracy: 35/440 (7.9545%)
___Train Local_ResNet_18,  epoch 223, local model 54, internal_epoch   2,  Average loss: 0.1015, Accuracy: 119/440 (27.0455%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   1,  Average loss: 0.1678, Accuracy: 60/569 (10.5448%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   2,  Average loss: 0.1067, Accuracy: 82/569 (14.4112%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 26, internal_epoch   1,  Average loss: 0.0894, Accuracy: 40/468 (8.5470%)
___Train Local_ResNet_18,  epoch 223, local model 26, internal_epoch   2,  Average loss: 0.0606, Accuracy: 92/468 (19.6581%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 2, internal_epoch   1,  Average loss: 0.0951, Accuracy: 71/461 (15.4013%)
___Train Local_ResNet_18,  epoch 223, local model 2, internal_epoch   2,  Average loss: 0.0540, Accuracy: 201/461 (43.6009%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 82, internal_epoch   1,  Average loss: 0.0734, Accuracy: 60/601 (9.9834%)
___Train Local_ResNet_18,  epoch 223, local model 82, internal_epoch   2,  Average loss: 0.0529, Accuracy: 232/601 (38.6023%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 45, internal_epoch   1,  Average loss: 0.1442, Accuracy: 19/529 (3.5917%)
___Train Local_ResNet_18,  epoch 223, local model 45, internal_epoch   2,  Average loss: 0.1044, Accuracy: 144/529 (27.2212%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 173.40807557106018
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 217.21596574783325 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:224 choose agents : [17, 33, 77, 11, 0, 34, 62, 66, 95, 10]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   1,  Average loss: 0.1712, Accuracy: 122/526 (23.1939%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   2,  Average loss: 0.0536, Accuracy: 66/526 (12.5475%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   3,  Average loss: 0.0451, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   4,  Average loss: 0.0419, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   5,  Average loss: 0.0382, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   6,  Average loss: 0.0379, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Global model norm: 110.63199130450468.
Norm before scaling: 109.29615461699693. Distance: 14.428028781727848
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1429.5887957731063, distance: 1442.8029577873758
Total norm for 4 adversaries is: 1429.5887957731063. distance: 1442.8029577873758
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   1,  Average loss: 0.2433, Accuracy: 51/527 (9.6774%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   2,  Average loss: 0.0832, Accuracy: 56/527 (10.6262%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   3,  Average loss: 0.0688, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   4,  Average loss: 0.0531, Accuracy: 104/527 (19.7343%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   5,  Average loss: 0.0413, Accuracy: 104/527 (19.7343%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   6,  Average loss: 0.0328, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Global model norm: 110.63199130450468.
Norm before scaling: 109.42679577147683. Distance: 19.29194332223785
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1915.8003549430719, distance: 1929.1943914494464
Total norm for 4 adversaries is: 1915.8003549430719. distance: 1929.1943914494464
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   1,  Average loss: 0.1972, Accuracy: 61/496 (12.2984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   2,  Average loss: 0.0678, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   3,  Average loss: 0.0574, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   4,  Average loss: 0.0492, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   5,  Average loss: 0.0426, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   6,  Average loss: 0.0399, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Global model norm: 110.63199130450468.
Norm before scaling: 109.41635825197712. Distance: 15.332846315914763
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1520.835954335641, distance: 1533.284627849637
Total norm for 4 adversaries is: 1520.835954335641. distance: 1533.284627849637
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   1,  Average loss: 0.1792, Accuracy: 119/546 (21.7949%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   2,  Average loss: 0.0662, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   3,  Average loss: 0.0557, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   4,  Average loss: 0.0461, Accuracy: 129/546 (23.6264%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   5,  Average loss: 0.0394, Accuracy: 111/546 (20.3297%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   6,  Average loss: 0.0354, Accuracy: 173/546 (31.6850%), train_poison_data_count: 45
Global model norm: 110.63199130450468.
Norm before scaling: 109.33435405471832. Distance: 16.036120650810275
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1590.4564596366668, distance: 1603.6120166673734
Total norm for 4 adversaries is: 1590.4564596366668. distance: 1603.6120166673734
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 224, local model 0, internal_epoch   1,  Average loss: 0.2911, Accuracy: 26/367 (7.0845%)
___Train Local_ResNet_18,  epoch 224, local model 0, internal_epoch   2,  Average loss: 0.0905, Accuracy: 46/367 (12.5341%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 34, internal_epoch   1,  Average loss: 0.2509, Accuracy: 52/349 (14.8997%)
___Train Local_ResNet_18,  epoch 224, local model 34, internal_epoch   2,  Average loss: 0.0841, Accuracy: 45/349 (12.8940%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 62, internal_epoch   1,  Average loss: 0.1984, Accuracy: 54/358 (15.0838%)
___Train Local_ResNet_18,  epoch 224, local model 62, internal_epoch   2,  Average loss: 0.0645, Accuracy: 55/358 (15.3631%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 66, internal_epoch   1,  Average loss: 0.2267, Accuracy: 6/555 (1.0811%)
___Train Local_ResNet_18,  epoch 224, local model 66, internal_epoch   2,  Average loss: 0.0412, Accuracy: 202/555 (36.3964%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 95, internal_epoch   1,  Average loss: 0.1550, Accuracy: 73/569 (12.8295%)
___Train Local_ResNet_18,  epoch 224, local model 95, internal_epoch   2,  Average loss: 0.0464, Accuracy: 155/569 (27.2408%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 10, internal_epoch   1,  Average loss: 0.0843, Accuracy: 347/752 (46.1436%)
___Train Local_ResNet_18,  epoch 224, local model 10, internal_epoch   2,  Average loss: 0.0269, Accuracy: 421/752 (55.9840%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 161.94321823120117
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 205.22879147529602 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:225 choose agents : [17, 33, 77, 11, 12, 38, 41, 4, 68, 55]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   1,  Average loss: 0.1376, Accuracy: 66/526 (12.5475%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   2,  Average loss: 0.1132, Accuracy: 60/526 (11.4068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   3,  Average loss: 0.0895, Accuracy: 39/526 (7.4144%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   4,  Average loss: 0.0683, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   5,  Average loss: 0.0628, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   6,  Average loss: 0.0525, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Global model norm: 118.490085621646.
Norm before scaling: 116.60323517435097. Distance: 10.706577340114055
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1050.9643190898537, distance: 1070.6576833890467
Total norm for 4 adversaries is: 1050.9643190898537. distance: 1070.6576833890467
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   1,  Average loss: 0.0809, Accuracy: 171/527 (32.4478%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   2,  Average loss: 0.0699, Accuracy: 175/527 (33.2068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   3,  Average loss: 0.0562, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   4,  Average loss: 0.0473, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   5,  Average loss: 0.0459, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   6,  Average loss: 0.0445, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Global model norm: 118.490085621646.
Norm before scaling: 116.85800344328153. Distance: 7.189655809931599
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 698.1199529808613, distance: 718.9656198317135
Total norm for 4 adversaries is: 698.1199529808613. distance: 718.9656198317135
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   1,  Average loss: 0.1152, Accuracy: 75/496 (15.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   2,  Average loss: 0.0953, Accuracy: 80/496 (16.1290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   3,  Average loss: 0.0790, Accuracy: 79/496 (15.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   4,  Average loss: 0.0714, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   5,  Average loss: 0.0685, Accuracy: 154/496 (31.0484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   6,  Average loss: 0.0666, Accuracy: 157/496 (31.6532%), train_poison_data_count: 40
Global model norm: 118.490085621646.
Norm before scaling: 116.78953258693606. Distance: 7.618659963850296
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 740.7189075486058, distance: 761.866006919852
Total norm for 4 adversaries is: 740.7189075486058. distance: 761.866006919852
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   1,  Average loss: 0.1136, Accuracy: 71/546 (13.0037%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   2,  Average loss: 0.0984, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   3,  Average loss: 0.0827, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   4,  Average loss: 0.0746, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   5,  Average loss: 0.0683, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   6,  Average loss: 0.0605, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Global model norm: 118.490085621646.
Norm before scaling: 116.55325449258163. Distance: 8.713919227630244
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 848.6734501561834, distance: 871.3919181401673
Total norm for 4 adversaries is: 848.6734501561834. distance: 871.3919181401673
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 225, local model 12, internal_epoch   1,  Average loss: 0.0963, Accuracy: 396/977 (40.5322%)
___Train Local_ResNet_18,  epoch 225, local model 12, internal_epoch   2,  Average loss: 0.0665, Accuracy: 405/977 (41.4534%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 38, internal_epoch   1,  Average loss: 0.0966, Accuracy: 86/756 (11.3757%)
___Train Local_ResNet_18,  epoch 225, local model 38, internal_epoch   2,  Average loss: 0.0640, Accuracy: 255/756 (33.7302%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 41, internal_epoch   1,  Average loss: 0.0751, Accuracy: 316/513 (61.5984%)
___Train Local_ResNet_18,  epoch 225, local model 41, internal_epoch   2,  Average loss: 0.0667, Accuracy: 318/513 (61.9883%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 4, internal_epoch   1,  Average loss: 0.0691, Accuracy: 44/557 (7.8995%)
___Train Local_ResNet_18,  epoch 225, local model 4, internal_epoch   2,  Average loss: 0.0486, Accuracy: 218/557 (39.1382%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 68, internal_epoch   1,  Average loss: 0.1075, Accuracy: 76/416 (18.2692%)
___Train Local_ResNet_18,  epoch 225, local model 68, internal_epoch   2,  Average loss: 0.0925, Accuracy: 77/416 (18.5096%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 55, internal_epoch   1,  Average loss: 0.2200, Accuracy: 2/299 (0.6689%)
___Train Local_ResNet_18,  epoch 225, local model 55, internal_epoch   2,  Average loss: 0.1874, Accuracy: 6/299 (2.0067%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.7407214641571
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 214.32865262031555 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:226 choose agents : [17, 33, 77, 11, 30, 39, 10, 64, 23, 60]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   1,  Average loss: 0.1122, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   2,  Average loss: 0.0687, Accuracy: 188/526 (35.7414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   3,  Average loss: 0.0611, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   4,  Average loss: 0.0490, Accuracy: 185/526 (35.1711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   5,  Average loss: 0.0433, Accuracy: 204/526 (38.7833%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   6,  Average loss: 0.0345, Accuracy: 193/526 (36.6920%), train_poison_data_count: 45
Global model norm: 114.04229273059184.
Norm before scaling: 112.55375451867432. Distance: 10.987818475302156
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1083.7547577750236, distance: 1098.7818254776514
Total norm for 4 adversaries is: 1083.7547577750236. distance: 1098.7818254776514
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   1,  Average loss: 0.1962, Accuracy: 106/527 (20.1139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   2,  Average loss: 0.1298, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   3,  Average loss: 0.0623, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   4,  Average loss: 0.0405, Accuracy: 125/527 (23.7192%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   5,  Average loss: 0.0311, Accuracy: 186/527 (35.2941%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   6,  Average loss: 0.0338, Accuracy: 142/527 (26.9450%), train_poison_data_count: 45
Global model norm: 114.04229273059184.
Norm before scaling: 112.5600187122408. Distance: 13.301556741342875
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1315.6891255155983, distance: 1330.1556769792023
Total norm for 4 adversaries is: 1315.6891255155983. distance: 1330.1556769792023
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   1,  Average loss: 0.1314, Accuracy: 64/496 (12.9032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   2,  Average loss: 0.0818, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   3,  Average loss: 0.0583, Accuracy: 153/496 (30.8468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   4,  Average loss: 0.0397, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   5,  Average loss: 0.0345, Accuracy: 161/496 (32.4597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   6,  Average loss: 0.0314, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Global model norm: 114.04229273059184.
Norm before scaling: 112.87905758210864. Distance: 11.377165535839005
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1126.0837557659731, distance: 1137.7165727895504
Total norm for 4 adversaries is: 1126.0837557659731. distance: 1137.7165727895504
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   1,  Average loss: 0.1518, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   2,  Average loss: 0.1007, Accuracy: 99/546 (18.1319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   3,  Average loss: 0.0588, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   4,  Average loss: 0.0396, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   5,  Average loss: 0.0316, Accuracy: 201/546 (36.8132%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   6,  Average loss: 0.0312, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Global model norm: 114.04229273059184.
Norm before scaling: 112.52911515608972. Distance: 11.005316403254483
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1085.2554998708829, distance: 1100.5316896845816
Total norm for 4 adversaries is: 1085.2554998708829. distance: 1100.5316896845816
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 226, local model 30, internal_epoch   1,  Average loss: 0.2065, Accuracy: 49/337 (14.5401%)
___Train Local_ResNet_18,  epoch 226, local model 30, internal_epoch   2,  Average loss: 0.1194, Accuracy: 23/337 (6.8249%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 39, internal_epoch   1,  Average loss: 0.2677, Accuracy: 11/217 (5.0691%)
___Train Local_ResNet_18,  epoch 226, local model 39, internal_epoch   2,  Average loss: 0.1613, Accuracy: 16/217 (7.3733%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 10, internal_epoch   1,  Average loss: 0.0903, Accuracy: 162/752 (21.5426%)
___Train Local_ResNet_18,  epoch 226, local model 10, internal_epoch   2,  Average loss: 0.0231, Accuracy: 391/752 (51.9947%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 64, internal_epoch   1,  Average loss: 0.0968, Accuracy: 111/686 (16.1808%)
___Train Local_ResNet_18,  epoch 226, local model 64, internal_epoch   2,  Average loss: 0.0490, Accuracy: 201/686 (29.3003%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 23, internal_epoch   1,  Average loss: 0.2704, Accuracy: 8/248 (3.2258%)
___Train Local_ResNet_18,  epoch 226, local model 23, internal_epoch   2,  Average loss: 0.1546, Accuracy: 12/248 (4.8387%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 60, internal_epoch   1,  Average loss: 0.1836, Accuracy: 39/284 (13.7324%)
___Train Local_ResNet_18,  epoch 226, local model 60, internal_epoch   2,  Average loss: 0.1163, Accuracy: 42/284 (14.7887%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.92650604248047
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.23456716537476 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:227 choose agents : [17, 33, 77, 11, 23, 34, 52, 92, 57, 74]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   1,  Average loss: 0.7353, Accuracy: 35/526 (6.6540%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   2,  Average loss: 0.0649, Accuracy: 51/526 (9.6958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   3,  Average loss: 0.0462, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   4,  Average loss: 0.0357, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   5,  Average loss: 0.0326, Accuracy: 217/526 (41.2548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   6,  Average loss: 0.0312, Accuracy: 210/526 (39.9240%), train_poison_data_count: 45
Global model norm: 113.86384670270674.
Norm before scaling: 114.02008200997972. Distance: 35.83498625972075
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3567.85285571028, distance: 3583.498709362123
Total norm for 4 adversaries is: 3567.85285571028. distance: 3583.498709362123
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   1,  Average loss: 0.5041, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   2,  Average loss: 0.0630, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   3,  Average loss: 0.0491, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   4,  Average loss: 0.0378, Accuracy: 87/527 (16.5085%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   5,  Average loss: 0.0311, Accuracy: 146/527 (27.7040%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   6,  Average loss: 0.0285, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Global model norm: 113.86384670270674.
Norm before scaling: 112.78379136094867. Distance: 27.03828485049024
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2688.1343902416784, distance: 2703.828489383156
Total norm for 4 adversaries is: 2688.1343902416784. distance: 2703.828489383156
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   1,  Average loss: 0.6785, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   2,  Average loss: 0.0521, Accuracy: 127/496 (25.6048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   3,  Average loss: 0.0480, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   4,  Average loss: 0.0415, Accuracy: 115/496 (23.1855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   5,  Average loss: 0.0381, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   6,  Average loss: 0.0347, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Global model norm: 113.86384670270674.
Norm before scaling: 113.85860200265942. Distance: 33.42126321611644
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3327.3046148496833, distance: 3342.1264189135636
Total norm for 4 adversaries is: 3327.3046148496833. distance: 3342.1264189135636
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   1,  Average loss: 0.5568, Accuracy: 92/546 (16.8498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   2,  Average loss: 0.0568, Accuracy: 96/546 (17.5824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   3,  Average loss: 0.0457, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   4,  Average loss: 0.0386, Accuracy: 194/546 (35.5311%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   5,  Average loss: 0.0348, Accuracy: 199/546 (36.4469%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   6,  Average loss: 0.0316, Accuracy: 214/546 (39.1941%), train_poison_data_count: 45
Global model norm: 113.86384670270674.
Norm before scaling: 113.32384974874. Distance: 30.955508884097473
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3080.1473990703757, distance: 3095.5511625557087
Total norm for 4 adversaries is: 3080.1473990703757. distance: 3095.5511625557087
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 227, local model 23, internal_epoch   1,  Average loss: 0.6303, Accuracy: 55/248 (22.1774%)
___Train Local_ResNet_18,  epoch 227, local model 23, internal_epoch   2,  Average loss: 0.0967, Accuracy: 41/248 (16.5323%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 34, internal_epoch   1,  Average loss: 0.5716, Accuracy: 137/349 (39.2550%)
___Train Local_ResNet_18,  epoch 227, local model 34, internal_epoch   2,  Average loss: 0.0825, Accuracy: 18/349 (5.1576%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 52, internal_epoch   1,  Average loss: 1.2103, Accuracy: 2/214 (0.9346%)
___Train Local_ResNet_18,  epoch 227, local model 52, internal_epoch   2,  Average loss: 0.0671, Accuracy: 81/214 (37.8505%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 92, internal_epoch   1,  Average loss: 0.3258, Accuracy: 117/796 (14.6985%)
___Train Local_ResNet_18,  epoch 227, local model 92, internal_epoch   2,  Average loss: 0.0304, Accuracy: 222/796 (27.8894%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 57, internal_epoch   1,  Average loss: 0.8113, Accuracy: 17/290 (5.8621%)
___Train Local_ResNet_18,  epoch 227, local model 57, internal_epoch   2,  Average loss: 0.0574, Accuracy: 87/290 (30.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 74, internal_epoch   1,  Average loss: 0.4725, Accuracy: 66/469 (14.0725%)
___Train Local_ResNet_18,  epoch 227, local model 74, internal_epoch   2,  Average loss: 0.0421, Accuracy: 155/469 (33.0490%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 191.71773266792297
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.13348603248596 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:228 choose agents : [17, 33, 77, 11, 67, 16, 64, 30, 35, 81]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   1,  Average loss: 0.0847, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   2,  Average loss: 0.0586, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   3,  Average loss: 0.0465, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   4,  Average loss: 0.0486, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   5,  Average loss: 0.0419, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   6,  Average loss: 0.0403, Accuracy: 186/526 (35.3612%), train_poison_data_count: 45
Global model norm: 157.42198588705773.
Norm before scaling: 155.49458642103912. Distance: 9.552110400867003
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 931.543745617993, distance: 955.2111023224134
Total norm for 4 adversaries is: 931.543745617993. distance: 955.2111023224134
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   1,  Average loss: 0.1220, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   2,  Average loss: 0.0768, Accuracy: 105/527 (19.9241%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   3,  Average loss: 0.0604, Accuracy: 138/527 (26.1860%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   4,  Average loss: 0.0517, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   5,  Average loss: 0.0482, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   6,  Average loss: 0.0474, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Global model norm: 157.42198588705773.
Norm before scaling: 155.47996504775142. Distance: 11.343800442165742
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1112.6387553918837, distance: 1134.380061972177
Total norm for 4 adversaries is: 1112.6387553918837. distance: 1134.380061972177
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   1,  Average loss: 0.1443, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   2,  Average loss: 0.1075, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   3,  Average loss: 0.0904, Accuracy: 77/496 (15.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   4,  Average loss: 0.0780, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   5,  Average loss: 0.0684, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   6,  Average loss: 0.0589, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Global model norm: 157.42198588705773.
Norm before scaling: 155.53378350859984. Distance: 11.794519373669255
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1158.8290426115493, distance: 1179.4518854111855
Total norm for 4 adversaries is: 1158.8290426115493. distance: 1179.4518854111855
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   1,  Average loss: 0.1022, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   2,  Average loss: 0.0681, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   3,  Average loss: 0.0551, Accuracy: 105/546 (19.2308%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   4,  Average loss: 0.0498, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   5,  Average loss: 0.0484, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   6,  Average loss: 0.0466, Accuracy: 176/546 (32.2344%), train_poison_data_count: 45
Global model norm: 157.42198588705773.
Norm before scaling: 155.52175289971495. Distance: 10.791004136023295
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1057.4155403624443, distance: 1079.1003197108228
Total norm for 4 adversaries is: 1057.4155403624443. distance: 1079.1003197108228
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 228, local model 67, internal_epoch   1,  Average loss: 0.1259, Accuracy: 209/842 (24.8219%)
___Train Local_ResNet_18,  epoch 228, local model 67, internal_epoch   2,  Average loss: 0.0516, Accuracy: 213/842 (25.2969%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 16, internal_epoch   1,  Average loss: 0.1449, Accuracy: 51/773 (6.5977%)
___Train Local_ResNet_18,  epoch 228, local model 16, internal_epoch   2,  Average loss: 0.0496, Accuracy: 292/773 (37.7749%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 64, internal_epoch   1,  Average loss: 0.1575, Accuracy: 47/686 (6.8513%)
___Train Local_ResNet_18,  epoch 228, local model 64, internal_epoch   2,  Average loss: 0.0514, Accuracy: 212/686 (30.9038%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 30, internal_epoch   1,  Average loss: 0.1554, Accuracy: 43/337 (12.7596%)
___Train Local_ResNet_18,  epoch 228, local model 30, internal_epoch   2,  Average loss: 0.0803, Accuracy: 26/337 (7.7151%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 35, internal_epoch   1,  Average loss: 0.1998, Accuracy: 32/419 (7.6372%)
___Train Local_ResNet_18,  epoch 228, local model 35, internal_epoch   2,  Average loss: 0.0961, Accuracy: 29/419 (6.9212%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 81, internal_epoch   1,  Average loss: 0.1235, Accuracy: 162/1034 (15.6673%)
___Train Local_ResNet_18,  epoch 228, local model 81, internal_epoch   2,  Average loss: 0.0403, Accuracy: 401/1034 (38.7814%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 180.49796843528748
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.69758915901184 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:229 choose agents : [17, 33, 77, 11, 62, 68, 2, 74, 39, 1]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   1,  Average loss: 0.1643, Accuracy: 82/526 (15.5894%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   2,  Average loss: 0.1358, Accuracy: 91/526 (17.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   3,  Average loss: 0.1201, Accuracy: 73/526 (13.8783%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   4,  Average loss: 0.1049, Accuracy: 76/526 (14.4487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   5,  Average loss: 0.0923, Accuracy: 84/526 (15.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   6,  Average loss: 0.0721, Accuracy: 89/526 (16.9202%), train_poison_data_count: 45
Global model norm: 153.1571904939497.
Norm before scaling: 150.77845528498096. Distance: 11.433675824995817
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1115.963989114344, distance: 1143.3675590115367
Total norm for 4 adversaries is: 1115.963989114344. distance: 1143.3675590115367
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   1,  Average loss: 0.0789, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   2,  Average loss: 0.0686, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   3,  Average loss: 0.0603, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   4,  Average loss: 0.0567, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   5,  Average loss: 0.0538, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   6,  Average loss: 0.0514, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Global model norm: 153.1571904939497.
Norm before scaling: 151.33085390544124. Distance: 9.403968508999895
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 918.3409973969365, distance: 940.3965918696218
Total norm for 4 adversaries is: 918.3409973969365. distance: 940.3965918696218
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   1,  Average loss: 0.0705, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   2,  Average loss: 0.0607, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   3,  Average loss: 0.0555, Accuracy: 108/496 (21.7742%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   4,  Average loss: 0.0511, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   5,  Average loss: 0.0481, Accuracy: 148/496 (29.8387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   6,  Average loss: 0.0476, Accuracy: 145/496 (29.2339%), train_poison_data_count: 40
Global model norm: 153.1571904939497.
Norm before scaling: 151.455406751872. Distance: 5.420526078371784
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 512.3492461202612, distance: 542.0526093009792
Total norm for 4 adversaries is: 512.3492461202612. distance: 542.0526093009792
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   1,  Average loss: 0.0817, Accuracy: 89/546 (16.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   2,  Average loss: 0.0740, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   3,  Average loss: 0.0722, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   4,  Average loss: 0.0669, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   5,  Average loss: 0.0637, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   6,  Average loss: 0.0601, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Global model norm: 153.1571904939497.
Norm before scaling: 151.05470992532804. Distance: 5.573053870487829
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 516.7018603604984, distance: 557.305375220803
Total norm for 4 adversaries is: 516.7018603604984. distance: 557.305375220803
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 229, local model 62, internal_epoch   1,  Average loss: 0.1281, Accuracy: 9/358 (2.5140%)
___Train Local_ResNet_18,  epoch 229, local model 62, internal_epoch   2,  Average loss: 0.0837, Accuracy: 58/358 (16.2011%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 68, internal_epoch   1,  Average loss: 0.1118, Accuracy: 72/416 (17.3077%)
___Train Local_ResNet_18,  epoch 229, local model 68, internal_epoch   2,  Average loss: 0.0730, Accuracy: 70/416 (16.8269%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 2, internal_epoch   1,  Average loss: 0.1315, Accuracy: 79/461 (17.1367%)
___Train Local_ResNet_18,  epoch 229, local model 2, internal_epoch   2,  Average loss: 0.0612, Accuracy: 73/461 (15.8351%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 74, internal_epoch   1,  Average loss: 0.0964, Accuracy: 21/469 (4.4776%)
___Train Local_ResNet_18,  epoch 229, local model 74, internal_epoch   2,  Average loss: 0.0492, Accuracy: 98/469 (20.8955%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 39, internal_epoch   1,  Average loss: 0.1121, Accuracy: 47/217 (21.6590%)
___Train Local_ResNet_18,  epoch 229, local model 39, internal_epoch   2,  Average loss: 0.0695, Accuracy: 47/217 (21.6590%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 1, internal_epoch   1,  Average loss: 0.1125, Accuracy: 28/641 (4.3682%)
___Train Local_ResNet_18,  epoch 229, local model 1, internal_epoch   2,  Average loss: 0.0528, Accuracy: 207/641 (32.2933%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 186.21256470680237
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 240.15672087669373 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:230 choose agents : [17, 33, 77, 11, 64, 29, 21, 39, 95, 90]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   1,  Average loss: 0.0600, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   2,  Average loss: 0.0502, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   3,  Average loss: 0.0453, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   4,  Average loss: 0.0390, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   5,  Average loss: 0.0326, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   6,  Average loss: 0.0302, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Global model norm: 146.46349934582676.
Norm before scaling: 144.69204906455641. Distance: 5.541295643865226
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 523.3200203986084, distance: 554.1295538951158
Total norm for 4 adversaries is: 523.3200203986084. distance: 554.1295538951158
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   1,  Average loss: 0.1013, Accuracy: 63/527 (11.9545%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   2,  Average loss: 0.0699, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   3,  Average loss: 0.0413, Accuracy: 145/527 (27.5142%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   4,  Average loss: 0.0350, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   5,  Average loss: 0.0338, Accuracy: 146/527 (27.7040%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   6,  Average loss: 0.0312, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Global model norm: 146.46349934582676.
Norm before scaling: 144.6643272480296. Distance: 6.713682170746163
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 644.4382728392223, distance: 671.3682158473098
Total norm for 4 adversaries is: 644.4382728392223. distance: 671.3682158473098
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   1,  Average loss: 0.0738, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   2,  Average loss: 0.0553, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   3,  Average loss: 0.0518, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   4,  Average loss: 0.0474, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   5,  Average loss: 0.0464, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   6,  Average loss: 0.0423, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Global model norm: 146.46349934582676.
Norm before scaling: 144.856596652517. Distance: 6.416394050388682
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 618.2422664295931, distance: 641.63937983107
Total norm for 4 adversaries is: 618.2422664295931. distance: 641.63937983107
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   1,  Average loss: 0.0920, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   2,  Average loss: 0.0679, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   3,  Average loss: 0.0515, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   4,  Average loss: 0.0447, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   5,  Average loss: 0.0342, Accuracy: 174/546 (31.8681%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   6,  Average loss: 0.0316, Accuracy: 149/546 (27.2894%), train_poison_data_count: 45
Global model norm: 146.46349934582676.
Norm before scaling: 144.64275090935251. Distance: 7.413831733352126
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 715.9618530340845, distance: 741.3831667902907
Total norm for 4 adversaries is: 715.9618530340845. distance: 741.3831667902907
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 230, local model 64, internal_epoch   1,  Average loss: 0.0566, Accuracy: 91/686 (13.2653%)
___Train Local_ResNet_18,  epoch 230, local model 64, internal_epoch   2,  Average loss: 0.0310, Accuracy: 241/686 (35.1312%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 29, internal_epoch   1,  Average loss: 0.0503, Accuracy: 259/848 (30.5425%)
___Train Local_ResNet_18,  epoch 230, local model 29, internal_epoch   2,  Average loss: 0.0280, Accuracy: 380/848 (44.8113%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 21, internal_epoch   1,  Average loss: 0.1331, Accuracy: 23/262 (8.7786%)
___Train Local_ResNet_18,  epoch 230, local model 21, internal_epoch   2,  Average loss: 0.0828, Accuracy: 3/262 (1.1450%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 39, internal_epoch   1,  Average loss: 0.1332, Accuracy: 12/217 (5.5300%)
___Train Local_ResNet_18,  epoch 230, local model 39, internal_epoch   2,  Average loss: 0.0852, Accuracy: 8/217 (3.6866%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 95, internal_epoch   1,  Average loss: 0.0584, Accuracy: 199/569 (34.9736%)
___Train Local_ResNet_18,  epoch 230, local model 95, internal_epoch   2,  Average loss: 0.0377, Accuracy: 299/569 (52.5483%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 90, internal_epoch   1,  Average loss: 0.0851, Accuracy: 71/578 (12.2837%)
___Train Local_ResNet_18,  epoch 230, local model 90, internal_epoch   2,  Average loss: 0.0516, Accuracy: 320/578 (55.3633%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 185.1734962463379
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 235.83744478225708 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:231 choose agents : [17, 33, 77, 11, 68, 38, 97, 3, 98, 90]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   1,  Average loss: 0.0728, Accuracy: 89/526 (16.9202%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   2,  Average loss: 0.0564, Accuracy: 91/526 (17.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   3,  Average loss: 0.0421, Accuracy: 91/526 (17.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   4,  Average loss: 0.0333, Accuracy: 114/526 (21.6730%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   5,  Average loss: 0.0297, Accuracy: 193/526 (36.6920%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   6,  Average loss: 0.0292, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Global model norm: 140.79046515345064.
Norm before scaling: 139.13328956660587. Distance: 7.599441467642026
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 738.3585680413006, distance: 759.9441591327616
Total norm for 4 adversaries is: 738.3585680413006. distance: 759.9441591327616
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   1,  Average loss: 0.0433, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   2,  Average loss: 0.0395, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   3,  Average loss: 0.0358, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   4,  Average loss: 0.0326, Accuracy: 205/527 (38.8994%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   5,  Average loss: 0.0310, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   6,  Average loss: 0.0302, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Global model norm: 140.79046515345064.
Norm before scaling: 139.1387150697102. Distance: 4.765805900767368
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 445.4686612153542, distance: 476.580593918804
Total norm for 4 adversaries is: 445.4686612153542. distance: 476.580593918804
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   1,  Average loss: 0.0578, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   2,  Average loss: 0.0495, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   3,  Average loss: 0.0411, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   4,  Average loss: 0.0359, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   5,  Average loss: 0.0338, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   6,  Average loss: 0.0323, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Global model norm: 140.79046515345064.
Norm before scaling: 139.31688810944638. Distance: 5.8370776920190135
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 562.0083406854386, distance: 583.7077875529844
Total norm for 4 adversaries is: 562.0083406854386. distance: 583.7077875529844
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   1,  Average loss: 0.0511, Accuracy: 92/546 (16.8498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   2,  Average loss: 0.0438, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   3,  Average loss: 0.0381, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   4,  Average loss: 0.0343, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   5,  Average loss: 0.0329, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   6,  Average loss: 0.0309, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Global model norm: 140.79046515345064.
Norm before scaling: 139.10860190872452. Distance: 5.392796352769258
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 510.54970375077096, distance: 539.2796410490572
Total norm for 4 adversaries is: 510.54970375077096. distance: 539.2796410490572
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 231, local model 68, internal_epoch   1,  Average loss: 0.0595, Accuracy: 76/416 (18.2692%)
___Train Local_ResNet_18,  epoch 231, local model 68, internal_epoch   2,  Average loss: 0.0454, Accuracy: 85/416 (20.4327%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 38, internal_epoch   1,  Average loss: 0.0602, Accuracy: 100/756 (13.2275%)
___Train Local_ResNet_18,  epoch 231, local model 38, internal_epoch   2,  Average loss: 0.0315, Accuracy: 257/756 (33.9947%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 97, internal_epoch   1,  Average loss: 0.0807, Accuracy: 9/418 (2.1531%)
___Train Local_ResNet_18,  epoch 231, local model 97, internal_epoch   2,  Average loss: 0.0515, Accuracy: 37/418 (8.8517%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 3, internal_epoch   1,  Average loss: 0.0693, Accuracy: 36/780 (4.6154%)
___Train Local_ResNet_18,  epoch 231, local model 3, internal_epoch   2,  Average loss: 0.0313, Accuracy: 329/780 (42.1795%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 98, internal_epoch   1,  Average loss: 0.0652, Accuracy: 66/802 (8.2294%)
___Train Local_ResNet_18,  epoch 231, local model 98, internal_epoch   2,  Average loss: 0.0329, Accuracy: 200/802 (24.9377%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 90, internal_epoch   1,  Average loss: 0.0476, Accuracy: 54/578 (9.3426%)
___Train Local_ResNet_18,  epoch 231, local model 90, internal_epoch   2,  Average loss: 0.0259, Accuracy: 322/578 (55.7093%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.88133454322815
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 220.88096928596497 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:232 choose agents : [17, 33, 77, 11, 88, 25, 27, 56, 93, 42]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   1,  Average loss: 0.0757, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   2,  Average loss: 0.0627, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   3,  Average loss: 0.0631, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   4,  Average loss: 0.0580, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   5,  Average loss: 0.0536, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   6,  Average loss: 0.0483, Accuracy: 195/526 (37.0722%), train_poison_data_count: 45
Global model norm: 135.40446499515812.
Norm before scaling: 133.49302855158766. Distance: 6.058980962602192
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 574.784878237067, distance: 605.8980937418437
Total norm for 4 adversaries is: 574.784878237067. distance: 605.8980937418437
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   1,  Average loss: 0.1534, Accuracy: 108/527 (20.4934%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   2,  Average loss: 0.1344, Accuracy: 114/527 (21.6319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   3,  Average loss: 0.1196, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   4,  Average loss: 0.0964, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   5,  Average loss: 0.0775, Accuracy: 107/527 (20.3036%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   6,  Average loss: 0.0627, Accuracy: 106/527 (20.1139%), train_poison_data_count: 45
Global model norm: 135.40446499515812.
Norm before scaling: 133.1144802181566. Distance: 11.70949764956115
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1146.4100488045278, distance: 1170.9497213800428
Total norm for 4 adversaries is: 1146.4100488045278. distance: 1170.9497213800428
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   1,  Average loss: 0.1071, Accuracy: 55/496 (11.0887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   2,  Average loss: 0.0918, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   3,  Average loss: 0.0829, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   4,  Average loss: 0.0717, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   5,  Average loss: 0.0612, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   6,  Average loss: 0.0537, Accuracy: 146/496 (29.4355%), train_poison_data_count: 40
Global model norm: 135.40446499515812.
Norm before scaling: 133.60734945400645. Distance: 8.344411988018164
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 811.9847212232506, distance: 834.4411677883588
Total norm for 4 adversaries is: 811.9847212232506. distance: 834.4411677883588
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   1,  Average loss: 0.1225, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   2,  Average loss: 0.1068, Accuracy: 118/546 (21.6117%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   3,  Average loss: 0.0939, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   4,  Average loss: 0.0784, Accuracy: 119/546 (21.7949%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   5,  Average loss: 0.0641, Accuracy: 149/546 (27.2894%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   6,  Average loss: 0.0543, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Global model norm: 135.40446499515812.
Norm before scaling: 133.2812463364595. Distance: 9.905807918467737
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 965.7765657749209, distance: 990.5807639965557
Total norm for 4 adversaries is: 965.7765657749209. distance: 990.5807639965557
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 232, local model 88, internal_epoch   1,  Average loss: 0.1844, Accuracy: 3/447 (0.6711%)
___Train Local_ResNet_18,  epoch 232, local model 88, internal_epoch   2,  Average loss: 0.1262, Accuracy: 6/447 (1.3423%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 25, internal_epoch   1,  Average loss: 0.1218, Accuracy: 5/545 (0.9174%)
___Train Local_ResNet_18,  epoch 232, local model 25, internal_epoch   2,  Average loss: 0.0620, Accuracy: 58/545 (10.6422%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 27, internal_epoch   1,  Average loss: 0.1040, Accuracy: 83/397 (20.9068%)
___Train Local_ResNet_18,  epoch 232, local model 27, internal_epoch   2,  Average loss: 0.0686, Accuracy: 125/397 (31.4861%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 56, internal_epoch   1,  Average loss: 0.1334, Accuracy: 123/743 (16.5545%)
___Train Local_ResNet_18,  epoch 232, local model 56, internal_epoch   2,  Average loss: 0.0788, Accuracy: 98/743 (13.1898%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 93, internal_epoch   1,  Average loss: 0.1159, Accuracy: 115/584 (19.6918%)
___Train Local_ResNet_18,  epoch 232, local model 93, internal_epoch   2,  Average loss: 0.0735, Accuracy: 107/584 (18.3219%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 42, internal_epoch   1,  Average loss: 0.1606, Accuracy: 13/198 (6.5657%)
___Train Local_ResNet_18,  epoch 232, local model 42, internal_epoch   2,  Average loss: 0.1215, Accuracy: 12/198 (6.0606%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 201.85423946380615
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 252.13953113555908 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:233 choose agents : [17, 33, 77, 11, 18, 66, 27, 82, 86, 67]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   1,  Average loss: 0.1863, Accuracy: 71/526 (13.4981%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   2,  Average loss: 0.1479, Accuracy: 87/526 (16.5399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   3,  Average loss: 0.1282, Accuracy: 88/526 (16.7300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   4,  Average loss: 0.1137, Accuracy: 81/526 (15.3992%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   5,  Average loss: 0.0989, Accuracy: 85/526 (16.1597%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   6,  Average loss: 0.0857, Accuracy: 90/526 (17.1103%), train_poison_data_count: 45
Global model norm: 130.17241421236298.
Norm before scaling: 127.87306404326323. Distance: 12.884577771908226
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1265.3591387428314, distance: 1288.457750568485
Total norm for 4 adversaries is: 1265.3591387428314. distance: 1288.457750568485
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   1,  Average loss: 0.1085, Accuracy: 168/527 (31.8786%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   2,  Average loss: 0.0843, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   3,  Average loss: 0.0835, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   4,  Average loss: 0.0777, Accuracy: 191/527 (36.2429%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   5,  Average loss: 0.0763, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   6,  Average loss: 0.0714, Accuracy: 197/527 (37.3814%), train_poison_data_count: 45
Global model norm: 130.17241421236298.
Norm before scaling: 128.1744035850177. Distance: 8.056429211241305
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 779.6775375115022, distance: 805.6429109723489
Total norm for 4 adversaries is: 779.6775375115022. distance: 805.6429109723489
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   1,  Average loss: 0.1197, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   2,  Average loss: 0.0952, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   3,  Average loss: 0.0839, Accuracy: 120/496 (24.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   4,  Average loss: 0.0780, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   5,  Average loss: 0.0748, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   6,  Average loss: 0.0680, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 130.17241421236298.
Norm before scaling: 128.40632224991884. Distance: 8.965750907261182
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 875.8345662852089, distance: 896.5751502244527
Total norm for 4 adversaries is: 875.8345662852089. distance: 896.5751502244527
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   1,  Average loss: 0.1164, Accuracy: 148/546 (27.1062%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   2,  Average loss: 0.0959, Accuracy: 101/546 (18.4982%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   3,  Average loss: 0.0887, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   4,  Average loss: 0.0859, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   5,  Average loss: 0.0809, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   6,  Average loss: 0.0749, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Global model norm: 130.17241421236298.
Norm before scaling: 128.0746852426349. Distance: 8.351779917071758
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 808.2814717040098, distance: 835.1779750448404
Total norm for 4 adversaries is: 808.2814717040098. distance: 835.1779750448404
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 233, local model 18, internal_epoch   1,  Average loss: 0.1061, Accuracy: 95/386 (24.6114%)
___Train Local_ResNet_18,  epoch 233, local model 18, internal_epoch   2,  Average loss: 0.0798, Accuracy: 70/386 (18.1347%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 66, internal_epoch   1,  Average loss: 0.1737, Accuracy: 80/555 (14.4144%)
___Train Local_ResNet_18,  epoch 233, local model 66, internal_epoch   2,  Average loss: 0.1254, Accuracy: 163/555 (29.3694%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   1,  Average loss: 0.1891, Accuracy: 42/397 (10.5793%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   2,  Average loss: 0.1434, Accuracy: 22/397 (5.5416%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 82, internal_epoch   1,  Average loss: 0.1622, Accuracy: 60/601 (9.9834%)
___Train Local_ResNet_18,  epoch 233, local model 82, internal_epoch   2,  Average loss: 0.1246, Accuracy: 100/601 (16.6389%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 86, internal_epoch   1,  Average loss: 0.2146, Accuracy: 37/212 (17.4528%)
___Train Local_ResNet_18,  epoch 233, local model 86, internal_epoch   2,  Average loss: 0.1690, Accuracy: 31/212 (14.6226%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 67, internal_epoch   1,  Average loss: 0.1523, Accuracy: 102/842 (12.1140%)
___Train Local_ResNet_18,  epoch 233, local model 67, internal_epoch   2,  Average loss: 0.1050, Accuracy: 233/842 (27.6722%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 191.49388885498047
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 234.29238963127136 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:234 choose agents : [17, 33, 77, 11, 38, 29, 30, 96, 0, 3]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   1,  Average loss: 0.0623, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   2,  Average loss: 0.0553, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   3,  Average loss: 0.0480, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   4,  Average loss: 0.0464, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   5,  Average loss: 0.0438, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   6,  Average loss: 0.0412, Accuracy: 186/526 (35.3612%), train_poison_data_count: 45
Global model norm: 125.53176733152051.
Norm before scaling: 123.89179849519903. Distance: 5.3626581484364815
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 509.4693470906763, distance: 536.2658214449249
Total norm for 4 adversaries is: 509.4693470906763. distance: 536.2658214449249
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   1,  Average loss: 0.0969, Accuracy: 47/527 (8.9184%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   2,  Average loss: 0.0847, Accuracy: 52/527 (9.8672%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   3,  Average loss: 0.0708, Accuracy: 95/527 (18.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   4,  Average loss: 0.0565, Accuracy: 95/527 (18.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   5,  Average loss: 0.0448, Accuracy: 110/527 (20.8729%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   6,  Average loss: 0.0368, Accuracy: 110/527 (20.8729%), train_poison_data_count: 45
Global model norm: 125.53176733152051.
Norm before scaling: 123.79969409417981. Distance: 9.688077257246807
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 949.618410204857, distance: 968.8077402147445
Total norm for 4 adversaries is: 949.618410204857. distance: 968.8077402147445
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   1,  Average loss: 0.0744, Accuracy: 75/496 (15.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   2,  Average loss: 0.0669, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   3,  Average loss: 0.0613, Accuracy: 144/496 (29.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   4,  Average loss: 0.0551, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   5,  Average loss: 0.0493, Accuracy: 142/496 (28.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   6,  Average loss: 0.0443, Accuracy: 142/496 (28.6290%), train_poison_data_count: 40
Global model norm: 125.53176733152051.
Norm before scaling: 124.01239148644582. Distance: 6.422508189967165
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 621.4534626583072, distance: 642.2508271695724
Total norm for 4 adversaries is: 621.4534626583072. distance: 642.2508271695724
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   1,  Average loss: 0.0813, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   2,  Average loss: 0.0713, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   3,  Average loss: 0.0594, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   4,  Average loss: 0.0488, Accuracy: 105/546 (19.2308%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   5,  Average loss: 0.0406, Accuracy: 115/546 (21.0623%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   6,  Average loss: 0.0373, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Global model norm: 125.53176733152051.
Norm before scaling: 123.85828595616847. Distance: 8.208250351952724
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 800.6495019669968, distance: 820.8250803307609
Total norm for 4 adversaries is: 800.6495019669968. distance: 820.8250803307609
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 234, local model 38, internal_epoch   1,  Average loss: 0.0776, Accuracy: 69/756 (9.1270%)
___Train Local_ResNet_18,  epoch 234, local model 38, internal_epoch   2,  Average loss: 0.0422, Accuracy: 283/756 (37.4339%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 29, internal_epoch   1,  Average loss: 0.0569, Accuracy: 169/848 (19.9292%)
___Train Local_ResNet_18,  epoch 234, local model 29, internal_epoch   2,  Average loss: 0.0370, Accuracy: 360/848 (42.4528%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 30, internal_epoch   1,  Average loss: 0.1180, Accuracy: 11/337 (3.2641%)
___Train Local_ResNet_18,  epoch 234, local model 30, internal_epoch   2,  Average loss: 0.0877, Accuracy: 75/337 (22.2552%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 96, internal_epoch   1,  Average loss: 0.1008, Accuracy: 47/708 (6.6384%)
___Train Local_ResNet_18,  epoch 234, local model 96, internal_epoch   2,  Average loss: 0.0675, Accuracy: 190/708 (26.8362%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 0, internal_epoch   1,  Average loss: 0.1165, Accuracy: 26/367 (7.0845%)
___Train Local_ResNet_18,  epoch 234, local model 0, internal_epoch   2,  Average loss: 0.0842, Accuracy: 57/367 (15.5313%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 3, internal_epoch   1,  Average loss: 0.0618, Accuracy: 341/780 (43.7179%)
___Train Local_ResNet_18,  epoch 234, local model 3, internal_epoch   2,  Average loss: 0.0401, Accuracy: 376/780 (48.2051%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 189.4979453086853
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 240.07580423355103 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:235 choose agents : [17, 33, 77, 11, 8, 68, 79, 90, 21, 25]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   1,  Average loss: 0.1411, Accuracy: 79/526 (15.0190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   2,  Average loss: 0.1155, Accuracy: 73/526 (13.8783%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   3,  Average loss: 0.0885, Accuracy: 54/526 (10.2662%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   4,  Average loss: 0.0762, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   5,  Average loss: 0.0635, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   6,  Average loss: 0.0516, Accuracy: 189/526 (35.9316%), train_poison_data_count: 45
Global model norm: 120.98605695104912.
Norm before scaling: 119.03362100552725. Distance: 10.665667804997609
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1045.927399488129, distance: 1066.5668052213139
Total norm for 4 adversaries is: 1045.927399488129. distance: 1066.5668052213139
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   1,  Average loss: 0.0783, Accuracy: 187/527 (35.4839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   2,  Average loss: 0.0717, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   3,  Average loss: 0.0616, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   4,  Average loss: 0.0534, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   5,  Average loss: 0.0477, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   6,  Average loss: 0.0461, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Global model norm: 120.98605695104912.
Norm before scaling: 119.25828718583878. Distance: 7.062490547646468
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 683.3218494969994, distance: 706.2490486719256
Total norm for 4 adversaries is: 683.3218494969994. distance: 706.2490486719256
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   1,  Average loss: 0.1236, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   2,  Average loss: 0.1114, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   3,  Average loss: 0.0931, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   4,  Average loss: 0.0807, Accuracy: 117/496 (23.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   5,  Average loss: 0.0738, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   6,  Average loss: 0.0659, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Global model norm: 120.98605695104912.
Norm before scaling: 119.16501901905819. Distance: 8.799141356452903
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 858.7267100189675, distance: 879.9142358775655
Total norm for 4 adversaries is: 858.7267100189675. distance: 879.9142358775655
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   1,  Average loss: 0.0930, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   2,  Average loss: 0.0787, Accuracy: 177/546 (32.4176%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   3,  Average loss: 0.0654, Accuracy: 191/546 (34.9817%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   4,  Average loss: 0.0607, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   5,  Average loss: 0.0565, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   6,  Average loss: 0.0522, Accuracy: 158/546 (28.9377%), train_poison_data_count: 45
Global model norm: 120.98605695104912.
Norm before scaling: 119.13117278078396. Distance: 7.260421103462896
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 701.4017215547735, distance: 726.0421389285887
Total norm for 4 adversaries is: 701.4017215547735. distance: 726.0421389285887
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 235, local model 8, internal_epoch   1,  Average loss: 0.1527, Accuracy: 55/534 (10.2996%)
___Train Local_ResNet_18,  epoch 235, local model 8, internal_epoch   2,  Average loss: 0.1132, Accuracy: 80/534 (14.9813%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 68, internal_epoch   1,  Average loss: 0.1294, Accuracy: 74/416 (17.7885%)
___Train Local_ResNet_18,  epoch 235, local model 68, internal_epoch   2,  Average loss: 0.1116, Accuracy: 82/416 (19.7115%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 79, internal_epoch   1,  Average loss: 0.1652, Accuracy: 6/154 (3.8961%)
___Train Local_ResNet_18,  epoch 235, local model 79, internal_epoch   2,  Average loss: 0.1534, Accuracy: 6/154 (3.8961%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 90, internal_epoch   1,  Average loss: 0.1139, Accuracy: 18/578 (3.1142%)
___Train Local_ResNet_18,  epoch 235, local model 90, internal_epoch   2,  Average loss: 0.0473, Accuracy: 257/578 (44.4637%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 21, internal_epoch   1,  Average loss: 0.1273, Accuracy: 3/262 (1.1450%)
___Train Local_ResNet_18,  epoch 235, local model 21, internal_epoch   2,  Average loss: 0.0902, Accuracy: 6/262 (2.2901%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 25, internal_epoch   1,  Average loss: 0.1575, Accuracy: 7/545 (1.2844%)
___Train Local_ResNet_18,  epoch 235, local model 25, internal_epoch   2,  Average loss: 0.0828, Accuracy: 116/545 (21.2844%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 190.2379937171936
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 235.2793164253235 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:236 choose agents : [17, 33, 77, 11, 53, 14, 6, 12, 7, 58]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   1,  Average loss: 0.1182, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   2,  Average loss: 0.0733, Accuracy: 126/526 (23.9544%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   3,  Average loss: 0.0650, Accuracy: 155/526 (29.4677%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   4,  Average loss: 0.0572, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   5,  Average loss: 0.0533, Accuracy: 187/526 (35.5513%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   6,  Average loss: 0.0542, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Global model norm: 116.48884234391292.
Norm before scaling: 114.71782211556102. Distance: 8.01395915011835
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 780.0227560783082, distance: 801.3959695431466
Total norm for 4 adversaries is: 780.0227560783082. distance: 801.3959695431466
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   1,  Average loss: 0.2179, Accuracy: 108/527 (20.4934%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   2,  Average loss: 0.1628, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   3,  Average loss: 0.1417, Accuracy: 90/527 (17.0778%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   4,  Average loss: 0.1168, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   5,  Average loss: 0.0979, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   6,  Average loss: 0.0727, Accuracy: 62/527 (11.7647%), train_poison_data_count: 45
Global model norm: 116.48884234391292.
Norm before scaling: 114.11191994457678. Distance: 13.774528680897193
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1355.4187544814333, distance: 1377.4528122589172
Total norm for 4 adversaries is: 1355.4187544814333. distance: 1377.4528122589172
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   1,  Average loss: 0.1367, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   2,  Average loss: 0.0940, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   3,  Average loss: 0.0794, Accuracy: 110/496 (22.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   4,  Average loss: 0.0710, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   5,  Average loss: 0.0644, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   6,  Average loss: 0.0575, Accuracy: 143/496 (28.8306%), train_poison_data_count: 40
Global model norm: 116.48884234391292.
Norm before scaling: 114.90015621589686. Distance: 9.989562882186009
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 982.2136987438121, distance: 998.9563303768589
Total norm for 4 adversaries is: 982.2136987438121. distance: 998.9563303768589
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   1,  Average loss: 0.1700, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   2,  Average loss: 0.1185, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   3,  Average loss: 0.1038, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   4,  Average loss: 0.0886, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   5,  Average loss: 0.0774, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   6,  Average loss: 0.0582, Accuracy: 115/546 (21.0623%), train_poison_data_count: 45
Global model norm: 116.48884234391292.
Norm before scaling: 114.41700475262626. Distance: 12.119984012001495
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1191.6292418365706, distance: 1211.9983498338602
Total norm for 4 adversaries is: 1191.6292418365706. distance: 1211.9983498338602
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 236, local model 53, internal_epoch   1,  Average loss: 0.1128, Accuracy: 82/625 (13.1200%)
___Train Local_ResNet_18,  epoch 236, local model 53, internal_epoch   2,  Average loss: 0.0571, Accuracy: 212/625 (33.9200%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 14, internal_epoch   1,  Average loss: 0.1723, Accuracy: 25/318 (7.8616%)
___Train Local_ResNet_18,  epoch 236, local model 14, internal_epoch   2,  Average loss: 0.0595, Accuracy: 119/318 (37.4214%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 6, internal_epoch   1,  Average loss: 0.1689, Accuracy: 26/520 (5.0000%)
___Train Local_ResNet_18,  epoch 236, local model 6, internal_epoch   2,  Average loss: 0.0668, Accuracy: 136/520 (26.1538%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 12, internal_epoch   1,  Average loss: 0.1768, Accuracy: 57/977 (5.8342%)
___Train Local_ResNet_18,  epoch 236, local model 12, internal_epoch   2,  Average loss: 0.0574, Accuracy: 230/977 (23.5415%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 7, internal_epoch   1,  Average loss: 0.1712, Accuracy: 34/352 (9.6591%)
___Train Local_ResNet_18,  epoch 236, local model 7, internal_epoch   2,  Average loss: 0.0855, Accuracy: 77/352 (21.8750%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 58, internal_epoch   1,  Average loss: 0.2120, Accuracy: 12/234 (5.1282%)
___Train Local_ResNet_18,  epoch 236, local model 58, internal_epoch   2,  Average loss: 0.0882, Accuracy: 19/234 (8.1197%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.79507207870483
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 218.04870533943176 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:237 choose agents : [17, 33, 77, 11, 65, 0, 98, 20, 45, 82]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   1,  Average loss: 0.3388, Accuracy: 34/526 (6.4639%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   2,  Average loss: 0.0654, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   3,  Average loss: 0.0502, Accuracy: 152/526 (28.8973%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   4,  Average loss: 0.0362, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   5,  Average loss: 0.0355, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   6,  Average loss: 0.0327, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Global model norm: 113.60200279512021.
Norm before scaling: 112.95107053913875. Distance: 23.62943803387789
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2350.7077657590703, distance: 2362.943714945407
Total norm for 4 adversaries is: 2350.7077657590703. distance: 2362.943714945407
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   1,  Average loss: 0.2571, Accuracy: 114/527 (21.6319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   2,  Average loss: 0.0598, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   3,  Average loss: 0.0509, Accuracy: 184/527 (34.9146%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   4,  Average loss: 0.0450, Accuracy: 175/527 (33.2068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   5,  Average loss: 0.0396, Accuracy: 176/527 (33.3966%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   6,  Average loss: 0.0342, Accuracy: 174/527 (33.0171%), train_poison_data_count: 45
Global model norm: 113.60200279512021.
Norm before scaling: 112.37606454584757. Distance: 17.30749307110218
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1717.7717397838398, distance: 1730.7492597138385
Total norm for 4 adversaries is: 1717.7717397838398. distance: 1730.7492597138385
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   1,  Average loss: 0.3347, Accuracy: 36/496 (7.2581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   2,  Average loss: 0.0782, Accuracy: 86/496 (17.3387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   3,  Average loss: 0.0672, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   4,  Average loss: 0.0538, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   5,  Average loss: 0.0383, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   6,  Average loss: 0.0360, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Global model norm: 113.60200279512021.
Norm before scaling: 113.7507254441153. Distance: 22.50574335334691
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2242.926882446238, distance: 2250.574371132845
Total norm for 4 adversaries is: 2242.926882446238. distance: 2250.574371132845
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   1,  Average loss: 0.2826, Accuracy: 107/546 (19.5971%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   2,  Average loss: 0.0622, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   3,  Average loss: 0.0550, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   4,  Average loss: 0.0469, Accuracy: 157/546 (28.7546%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   5,  Average loss: 0.0389, Accuracy: 192/546 (35.1648%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   6,  Average loss: 0.0343, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Global model norm: 113.60200279512021.
Norm before scaling: 112.61419551393155. Distance: 21.09372468169777
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2096.5489500605513, distance: 2109.372418516939
Total norm for 4 adversaries is: 2096.5489500605513. distance: 2109.372418516939
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 237, local model 65, internal_epoch   1,  Average loss: 0.3295, Accuracy: 31/314 (9.8726%)
___Train Local_ResNet_18,  epoch 237, local model 65, internal_epoch   2,  Average loss: 0.0415, Accuracy: 49/314 (15.6051%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 0, internal_epoch   1,  Average loss: 0.2457, Accuracy: 76/367 (20.7084%)
___Train Local_ResNet_18,  epoch 237, local model 0, internal_epoch   2,  Average loss: 0.0607, Accuracy: 87/367 (23.7057%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 98, internal_epoch   1,  Average loss: 0.2011, Accuracy: 86/802 (10.7232%)
___Train Local_ResNet_18,  epoch 237, local model 98, internal_epoch   2,  Average loss: 0.0487, Accuracy: 238/802 (29.6758%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 20, internal_epoch   1,  Average loss: 0.2262, Accuracy: 105/362 (29.0055%)
___Train Local_ResNet_18,  epoch 237, local model 20, internal_epoch   2,  Average loss: 0.0456, Accuracy: 159/362 (43.9227%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 45, internal_epoch   1,  Average loss: 0.2824, Accuracy: 72/529 (13.6106%)
___Train Local_ResNet_18,  epoch 237, local model 45, internal_epoch   2,  Average loss: 0.0637, Accuracy: 115/529 (21.7391%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 82, internal_epoch   1,  Average loss: 0.2265, Accuracy: 61/601 (10.1498%)
___Train Local_ResNet_18,  epoch 237, local model 82, internal_epoch   2,  Average loss: 0.0433, Accuracy: 96/601 (15.9734%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 195.0074746608734
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.03791451454163 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:238 choose agents : [17, 33, 77, 11, 88, 46, 85, 42, 29, 8]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   1,  Average loss: 0.3529, Accuracy: 97/526 (18.4411%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   2,  Average loss: 0.0524, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   3,  Average loss: 0.0406, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   4,  Average loss: 0.0384, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   5,  Average loss: 0.0374, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   6,  Average loss: 0.0369, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Global model norm: 130.23897056228984.
Norm before scaling: 128.92588108095288. Distance: 22.31653171733065
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2216.6200621667213, distance: 2231.653198864017
Total norm for 4 adversaries is: 2216.6200621667213. distance: 2231.653198864017
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   1,  Average loss: 0.4113, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   2,  Average loss: 0.0821, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   3,  Average loss: 0.0568, Accuracy: 95/527 (18.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   4,  Average loss: 0.0417, Accuracy: 168/527 (31.8786%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   5,  Average loss: 0.0324, Accuracy: 147/527 (27.8937%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   6,  Average loss: 0.0309, Accuracy: 154/527 (29.2220%), train_poison_data_count: 45
Global model norm: 130.23897056228984.
Norm before scaling: 128.80696555310973. Distance: 23.327820190155332
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2316.7477204046195, distance: 2332.7821372772896
Total norm for 4 adversaries is: 2316.7477204046195. distance: 2332.7821372772896
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   1,  Average loss: 0.4074, Accuracy: 61/496 (12.2984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   2,  Average loss: 0.0762, Accuracy: 46/496 (9.2742%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   3,  Average loss: 0.0516, Accuracy: 75/496 (15.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   4,  Average loss: 0.0436, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   5,  Average loss: 0.0384, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   6,  Average loss: 0.0350, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Global model norm: 130.23897056228984.
Norm before scaling: 128.97113897108918. Distance: 22.772616033640602
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2262.3350768619575, distance: 2277.2614035283696
Total norm for 4 adversaries is: 2262.3350768619575. distance: 2277.2614035283696
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   1,  Average loss: 0.3914, Accuracy: 77/546 (14.1026%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   2,  Average loss: 0.0741, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   3,  Average loss: 0.0542, Accuracy: 116/546 (21.2454%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   4,  Average loss: 0.0446, Accuracy: 126/546 (23.0769%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   5,  Average loss: 0.0335, Accuracy: 170/546 (31.1355%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   6,  Average loss: 0.0314, Accuracy: 151/546 (27.6557%), train_poison_data_count: 45
Global model norm: 130.23897056228984.
Norm before scaling: 128.81917892680033. Distance: 23.326265990479353
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2316.660635483756, distance: 2332.6266310749347
Total norm for 4 adversaries is: 2316.660635483756. distance: 2332.6266310749347
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 238, local model 88, internal_epoch   1,  Average loss: 0.4213, Accuracy: 6/447 (1.3423%)
___Train Local_ResNet_18,  epoch 238, local model 88, internal_epoch   2,  Average loss: 0.0787, Accuracy: 5/447 (1.1186%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 46, internal_epoch   1,  Average loss: 0.2487, Accuracy: 110/601 (18.3028%)
___Train Local_ResNet_18,  epoch 238, local model 46, internal_epoch   2,  Average loss: 0.0487, Accuracy: 128/601 (21.2978%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 85, internal_epoch   1,  Average loss: 0.4666, Accuracy: 33/364 (9.0659%)
___Train Local_ResNet_18,  epoch 238, local model 85, internal_epoch   2,  Average loss: 0.0894, Accuracy: 21/364 (5.7692%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 42, internal_epoch   1,  Average loss: 0.7494, Accuracy: 7/198 (3.5354%)
___Train Local_ResNet_18,  epoch 238, local model 42, internal_epoch   2,  Average loss: 0.1275, Accuracy: 27/198 (13.6364%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 29, internal_epoch   1,  Average loss: 0.1913, Accuracy: 224/848 (26.4151%)
___Train Local_ResNet_18,  epoch 238, local model 29, internal_epoch   2,  Average loss: 0.0316, Accuracy: 386/848 (45.5189%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 8, internal_epoch   1,  Average loss: 0.3195, Accuracy: 55/534 (10.2996%)
___Train Local_ResNet_18,  epoch 238, local model 8, internal_epoch   2,  Average loss: 0.0577, Accuracy: 59/534 (11.0487%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 199.7308988571167
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 242.63846445083618 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:239 choose agents : [17, 33, 77, 11, 63, 48, 69, 96, 88, 20]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   1,  Average loss: 0.1913, Accuracy: 78/526 (14.8289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   2,  Average loss: 0.1040, Accuracy: 83/526 (15.7795%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   3,  Average loss: 0.0681, Accuracy: 186/526 (35.3612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   4,  Average loss: 0.0401, Accuracy: 113/526 (21.4829%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   5,  Average loss: 0.0342, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   6,  Average loss: 0.0325, Accuracy: 200/526 (38.0228%), train_poison_data_count: 45
Global model norm: 146.18335153369893.
Norm before scaling: 144.29561535048458. Distance: 11.001549698299788
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1079.2460910283623, distance: 1100.1549322709052
Total norm for 4 adversaries is: 1079.2460910283623. distance: 1100.1549322709052
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   1,  Average loss: 0.1214, Accuracy: 172/527 (32.6376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   2,  Average loss: 0.0745, Accuracy: 170/527 (32.2581%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   3,  Average loss: 0.0604, Accuracy: 108/527 (20.4934%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   4,  Average loss: 0.0440, Accuracy: 112/527 (21.2524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   5,  Average loss: 0.0348, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   6,  Average loss: 0.0308, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Global model norm: 146.18335153369893.
Norm before scaling: 144.33151401374545. Distance: 8.826033352876804
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 859.517088253631, distance: 882.6032871568063
Total norm for 4 adversaries is: 859.517088253631. distance: 882.6032871568063
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   1,  Average loss: 0.1412, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   2,  Average loss: 0.0787, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   3,  Average loss: 0.0608, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   4,  Average loss: 0.0511, Accuracy: 125/496 (25.2016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   5,  Average loss: 0.0427, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   6,  Average loss: 0.0385, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Global model norm: 146.18335153369893.
Norm before scaling: 144.56158127680396. Distance: 11.237506965745373
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1106.5281288787917, distance: 1123.750639599373
Total norm for 4 adversaries is: 1106.5281288787917. distance: 1123.750639599373
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   1,  Average loss: 0.1465, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   2,  Average loss: 0.0877, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   3,  Average loss: 0.0618, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   4,  Average loss: 0.0482, Accuracy: 157/546 (28.7546%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   5,  Average loss: 0.0388, Accuracy: 152/546 (27.8388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   6,  Average loss: 0.0310, Accuracy: 172/546 (31.5018%), train_poison_data_count: 45
Global model norm: 146.18335153369893.
Norm before scaling: 144.28865112596347. Distance: 9.804683609311978
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 958.1432891274666, distance: 980.4684148405802
Total norm for 4 adversaries is: 958.1432891274666. distance: 980.4684148405802
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 239, local model 63, internal_epoch   1,  Average loss: 0.1372, Accuracy: 21/752 (2.7926%)
___Train Local_ResNet_18,  epoch 239, local model 63, internal_epoch   2,  Average loss: 0.0533, Accuracy: 162/752 (21.5426%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 48, internal_epoch   1,  Average loss: 0.1522, Accuracy: 23/378 (6.0847%)
___Train Local_ResNet_18,  epoch 239, local model 48, internal_epoch   2,  Average loss: 0.0571, Accuracy: 52/378 (13.7566%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 69, internal_epoch   1,  Average loss: 0.1596, Accuracy: 30/216 (13.8889%)
___Train Local_ResNet_18,  epoch 239, local model 69, internal_epoch   2,  Average loss: 0.0955, Accuracy: 74/216 (34.2593%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 96, internal_epoch   1,  Average loss: 0.1076, Accuracy: 126/708 (17.7966%)
___Train Local_ResNet_18,  epoch 239, local model 96, internal_epoch   2,  Average loss: 0.0492, Accuracy: 190/708 (26.8362%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 88, internal_epoch   1,  Average loss: 0.0934, Accuracy: 134/447 (29.9776%)
___Train Local_ResNet_18,  epoch 239, local model 88, internal_epoch   2,  Average loss: 0.0410, Accuracy: 172/447 (38.4787%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 20, internal_epoch   1,  Average loss: 0.1086, Accuracy: 187/362 (51.6575%)
___Train Local_ResNet_18,  epoch 239, local model 20, internal_epoch   2,  Average loss: 0.0474, Accuracy: 187/362 (51.6575%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.40851259231567
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.21203756332397 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:240 choose agents : [17, 33, 77, 11, 71, 51, 95, 80, 24, 55]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   1,  Average loss: 0.0767, Accuracy: 80/526 (15.2091%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   2,  Average loss: 0.0574, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   3,  Average loss: 0.0502, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   4,  Average loss: 0.0438, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   5,  Average loss: 0.0366, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   6,  Average loss: 0.0323, Accuracy: 187/526 (35.5513%), train_poison_data_count: 45
Global model norm: 142.25877334544256.
Norm before scaling: 140.51585347612917. Distance: 8.753064736019564
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 854.0796947592186, distance: 875.3064820392912
Total norm for 4 adversaries is: 854.0796947592186. distance: 875.3064820392912
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   1,  Average loss: 0.0997, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   2,  Average loss: 0.0696, Accuracy: 44/527 (8.3491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   3,  Average loss: 0.0537, Accuracy: 54/527 (10.2467%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   4,  Average loss: 0.0415, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   5,  Average loss: 0.0355, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   6,  Average loss: 0.0315, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 142.25877334544256.
Norm before scaling: 140.53685431898282. Distance: 10.417628577006239
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1022.7216752372075, distance: 1041.7629288854544
Total norm for 4 adversaries is: 1022.7216752372075. distance: 1041.7629288854544
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   1,  Average loss: 0.0788, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   2,  Average loss: 0.0521, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   3,  Average loss: 0.0465, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   4,  Average loss: 0.0419, Accuracy: 142/496 (28.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   5,  Average loss: 0.0379, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   6,  Average loss: 0.0348, Accuracy: 145/496 (29.2339%), train_poison_data_count: 40
Global model norm: 142.25877334544256.
Norm before scaling: 140.75706298886035. Distance: 8.23795109209813
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 805.9707655988523, distance: 823.7951049866708
Total norm for 4 adversaries is: 805.9707655988523. distance: 823.7951049866708
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   1,  Average loss: 0.0748, Accuracy: 111/546 (20.3297%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   2,  Average loss: 0.0534, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   3,  Average loss: 0.0448, Accuracy: 107/546 (19.5971%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   4,  Average loss: 0.0404, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   5,  Average loss: 0.0377, Accuracy: 191/546 (34.9817%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   6,  Average loss: 0.0350, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Global model norm: 142.25877334544256.
Norm before scaling: 140.53369257939536. Distance: 8.02128249723139
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 780.0189100271865, distance: 802.1282628108798
Total norm for 4 adversaries is: 780.0189100271865. distance: 802.1282628108798
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 240, local model 71, internal_epoch   1,  Average loss: 0.0575, Accuracy: 289/1166 (24.7856%)
___Train Local_ResNet_18,  epoch 240, local model 71, internal_epoch   2,  Average loss: 0.0299, Accuracy: 371/1166 (31.8182%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 51, internal_epoch   1,  Average loss: 0.0387, Accuracy: 193/479 (40.2923%)
___Train Local_ResNet_18,  epoch 240, local model 51, internal_epoch   2,  Average loss: 0.0273, Accuracy: 281/479 (58.6639%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 95, internal_epoch   1,  Average loss: 0.0582, Accuracy: 295/569 (51.8453%)
___Train Local_ResNet_18,  epoch 240, local model 95, internal_epoch   2,  Average loss: 0.0342, Accuracy: 292/569 (51.3181%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 80, internal_epoch   1,  Average loss: 0.0949, Accuracy: 42/363 (11.5702%)
___Train Local_ResNet_18,  epoch 240, local model 80, internal_epoch   2,  Average loss: 0.0499, Accuracy: 180/363 (49.5868%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 24, internal_epoch   1,  Average loss: 0.1006, Accuracy: 26/320 (8.1250%)
___Train Local_ResNet_18,  epoch 240, local model 24, internal_epoch   2,  Average loss: 0.0525, Accuracy: 51/320 (15.9375%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 55, internal_epoch   1,  Average loss: 0.0568, Accuracy: 69/299 (23.0769%)
___Train Local_ResNet_18,  epoch 240, local model 55, internal_epoch   2,  Average loss: 0.0385, Accuracy: 145/299 (48.4950%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.58669781684875
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 214.56936383247375 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:241 choose agents : [17, 33, 77, 11, 13, 63, 61, 41, 90, 74]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   1,  Average loss: 0.1383, Accuracy: 71/526 (13.4981%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   2,  Average loss: 0.1189, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   3,  Average loss: 0.1003, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   4,  Average loss: 0.0879, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   5,  Average loss: 0.0731, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   6,  Average loss: 0.0614, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Global model norm: 138.3021770887935.
Norm before scaling: 136.08709441245705. Distance: 10.249431687393734
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 999.1752536467263, distance: 1024.9431081772295
Total norm for 4 adversaries is: 999.1752536467263. distance: 1024.9431081772295
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   1,  Average loss: 0.0822, Accuracy: 181/527 (34.3454%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   2,  Average loss: 0.0728, Accuracy: 190/527 (36.0531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   3,  Average loss: 0.0623, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   4,  Average loss: 0.0563, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   5,  Average loss: 0.0479, Accuracy: 138/527 (26.1860%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   6,  Average loss: 0.0443, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 138.3021770887935.
Norm before scaling: 136.39791283227174. Distance: 7.008827909904358
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 673.1580191530069, distance: 700.8827915564771
Total norm for 4 adversaries is: 673.1580191530069. distance: 700.8827915564771
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   1,  Average loss: 0.1387, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   2,  Average loss: 0.1245, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   3,  Average loss: 0.1044, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   4,  Average loss: 0.0911, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   5,  Average loss: 0.0823, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   6,  Average loss: 0.0731, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Global model norm: 138.3021770887935.
Norm before scaling: 136.29836440920704. Distance: 9.337080294203867
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 909.5026800400316, distance: 933.7080646540438
Total norm for 4 adversaries is: 909.5026800400316. distance: 933.7080646540438
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   1,  Average loss: 0.1237, Accuracy: 76/546 (13.9194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   2,  Average loss: 0.1059, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   3,  Average loss: 0.0859, Accuracy: 122/546 (22.3443%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   4,  Average loss: 0.0785, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   5,  Average loss: 0.0696, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   6,  Average loss: 0.0638, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Global model norm: 138.3021770887935.
Norm before scaling: 136.14295536998966. Distance: 8.935137669933466
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 866.1708477546448, distance: 893.5138499206378
Total norm for 4 adversaries is: 866.1708477546448. distance: 893.5138499206378
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 241, local model 13, internal_epoch   1,  Average loss: 0.1626, Accuracy: 102/620 (16.4516%)
___Train Local_ResNet_18,  epoch 241, local model 13, internal_epoch   2,  Average loss: 0.0995, Accuracy: 108/620 (17.4194%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 63, internal_epoch   1,  Average loss: 0.1644, Accuracy: 35/752 (4.6543%)
___Train Local_ResNet_18,  epoch 241, local model 63, internal_epoch   2,  Average loss: 0.1041, Accuracy: 69/752 (9.1755%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 61, internal_epoch   1,  Average loss: 0.1492, Accuracy: 37/590 (6.2712%)
___Train Local_ResNet_18,  epoch 241, local model 61, internal_epoch   2,  Average loss: 0.0920, Accuracy: 138/590 (23.3898%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 41, internal_epoch   1,  Average loss: 0.0732, Accuracy: 315/513 (61.4035%)
___Train Local_ResNet_18,  epoch 241, local model 41, internal_epoch   2,  Average loss: 0.0807, Accuracy: 315/513 (61.4035%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 90, internal_epoch   1,  Average loss: 0.1010, Accuracy: 38/578 (6.5744%)
___Train Local_ResNet_18,  epoch 241, local model 90, internal_epoch   2,  Average loss: 0.0553, Accuracy: 265/578 (45.8478%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 74, internal_epoch   1,  Average loss: 0.1740, Accuracy: 25/469 (5.3305%)
___Train Local_ResNet_18,  epoch 241, local model 74, internal_epoch   2,  Average loss: 0.1280, Accuracy: 37/469 (7.8891%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.57002973556519
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 219.79999375343323 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:242 choose agents : [17, 33, 77, 11, 85, 14, 21, 78, 1, 2]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   1,  Average loss: 0.1431, Accuracy: 59/526 (11.2167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   2,  Average loss: 0.1070, Accuracy: 109/526 (20.7224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   3,  Average loss: 0.1006, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   4,  Average loss: 0.0880, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   5,  Average loss: 0.0814, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   6,  Average loss: 0.0716, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Global model norm: 132.76748501845248.
Norm before scaling: 130.83695423598792. Distance: 12.52698990477037
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1233.0043592785876, distance: 1252.6989861894197
Total norm for 4 adversaries is: 1233.0043592785876. distance: 1252.6989861894197
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   1,  Average loss: 0.1758, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   2,  Average loss: 0.1248, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   3,  Average loss: 0.1153, Accuracy: 117/527 (22.2011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   4,  Average loss: 0.1019, Accuracy: 140/527 (26.5655%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   5,  Average loss: 0.0894, Accuracy: 145/527 (27.5142%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   6,  Average loss: 0.0799, Accuracy: 137/527 (25.9962%), train_poison_data_count: 45
Global model norm: 132.76748501845248.
Norm before scaling: 130.84751532079238. Distance: 14.731971196747462
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1454.517273874738, distance: 1473.197203364166
Total norm for 4 adversaries is: 1454.517273874738. distance: 1473.197203364166
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   1,  Average loss: 0.0968, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   2,  Average loss: 0.0720, Accuracy: 142/496 (28.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   3,  Average loss: 0.0709, Accuracy: 143/496 (28.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   4,  Average loss: 0.0664, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   5,  Average loss: 0.0631, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   6,  Average loss: 0.0587, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Global model norm: 132.76748501845248.
Norm before scaling: 131.3347717309662. Distance: 10.666590173764932
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1051.7472367446467, distance: 1066.6588020543402
Total norm for 4 adversaries is: 1051.7472367446467. distance: 1066.6588020543402
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   1,  Average loss: 0.1051, Accuracy: 96/546 (17.5824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   2,  Average loss: 0.0746, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   3,  Average loss: 0.0709, Accuracy: 193/546 (35.3480%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   4,  Average loss: 0.0707, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   5,  Average loss: 0.0687, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   6,  Average loss: 0.0635, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Global model norm: 132.76748501845248.
Norm before scaling: 131.0352633239427. Distance: 10.669819087860665
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1048.3303987770269, distance: 1066.9819000339228
Total norm for 4 adversaries is: 1048.3303987770269. distance: 1066.9819000339228
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 242, local model 85, internal_epoch   1,  Average loss: 0.2284, Accuracy: 40/364 (10.9890%)
___Train Local_ResNet_18,  epoch 242, local model 85, internal_epoch   2,  Average loss: 0.1037, Accuracy: 57/364 (15.6593%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 14, internal_epoch   1,  Average loss: 0.1355, Accuracy: 21/318 (6.6038%)
___Train Local_ResNet_18,  epoch 242, local model 14, internal_epoch   2,  Average loss: 0.0388, Accuracy: 57/318 (17.9245%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 21, internal_epoch   1,  Average loss: 0.2326, Accuracy: 3/262 (1.1450%)
___Train Local_ResNet_18,  epoch 242, local model 21, internal_epoch   2,  Average loss: 0.0790, Accuracy: 37/262 (14.1221%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 78, internal_epoch   1,  Average loss: 0.2324, Accuracy: 2/255 (0.7843%)
___Train Local_ResNet_18,  epoch 242, local model 78, internal_epoch   2,  Average loss: 0.1003, Accuracy: 21/255 (8.2353%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 1, internal_epoch   1,  Average loss: 0.1229, Accuracy: 74/641 (11.5445%)
___Train Local_ResNet_18,  epoch 242, local model 1, internal_epoch   2,  Average loss: 0.0445, Accuracy: 225/641 (35.1014%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 2, internal_epoch   1,  Average loss: 0.1474, Accuracy: 48/461 (10.4121%)
___Train Local_ResNet_18,  epoch 242, local model 2, internal_epoch   2,  Average loss: 0.0799, Accuracy: 160/461 (34.7072%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 185.66804695129395
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 234.94209098815918 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:243 choose agents : [17, 33, 77, 11, 9, 5, 16, 36, 94, 57]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   1,  Average loss: 0.0638, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   2,  Average loss: 0.0540, Accuracy: 162/526 (30.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   3,  Average loss: 0.0467, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   4,  Average loss: 0.0400, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   5,  Average loss: 0.0377, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   6,  Average loss: 0.0352, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Global model norm: 130.95609205712807.
Norm before scaling: 129.34916710690487. Distance: 6.196678059228716
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 596.2120532998306, distance: 619.6678545801775
Total norm for 4 adversaries is: 596.2120532998306. distance: 619.6678545801775
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   1,  Average loss: 0.0597, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   2,  Average loss: 0.0553, Accuracy: 184/527 (34.9146%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   3,  Average loss: 0.0514, Accuracy: 180/527 (34.1556%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   4,  Average loss: 0.0464, Accuracy: 189/527 (35.8634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   5,  Average loss: 0.0447, Accuracy: 189/527 (35.8634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   6,  Average loss: 0.0427, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Global model norm: 130.95609205712807.
Norm before scaling: 129.28594459085645. Distance: 5.13591237283983
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 484.5859701848579, distance: 513.5912467614688
Total norm for 4 adversaries is: 484.5859701848579. distance: 513.5912467614688
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   1,  Average loss: 0.0915, Accuracy: 36/496 (7.2581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   2,  Average loss: 0.0796, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   3,  Average loss: 0.0705, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   4,  Average loss: 0.0624, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   5,  Average loss: 0.0548, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   6,  Average loss: 0.0490, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Global model norm: 130.95609205712807.
Norm before scaling: 129.3602120171616. Distance: 7.677142104636034
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 747.7282260286821, distance: 767.7142209181748
Total norm for 4 adversaries is: 747.7282260286821. distance: 767.7142209181748
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   1,  Average loss: 0.0645, Accuracy: 84/546 (15.3846%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   2,  Average loss: 0.0564, Accuracy: 92/546 (16.8498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   3,  Average loss: 0.0509, Accuracy: 170/546 (31.1355%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   4,  Average loss: 0.0474, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   5,  Average loss: 0.0445, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   6,  Average loss: 0.0431, Accuracy: 177/546 (32.4176%), train_poison_data_count: 45
Global model norm: 130.95609205712807.
Norm before scaling: 129.27405482153023. Distance: 5.6029423885512
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 533.0742502222369, distance: 560.2942307395285
Total norm for 4 adversaries is: 533.0742502222369. distance: 560.2942307395285
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 243, local model 9, internal_epoch   1,  Average loss: 0.0817, Accuracy: 1/368 (0.2717%)
___Train Local_ResNet_18,  epoch 243, local model 9, internal_epoch   2,  Average loss: 0.0613, Accuracy: 101/368 (27.4457%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 5, internal_epoch   1,  Average loss: 0.0476, Accuracy: 42/365 (11.5068%)
___Train Local_ResNet_18,  epoch 243, local model 5, internal_epoch   2,  Average loss: 0.0387, Accuracy: 99/365 (27.1233%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 16, internal_epoch   1,  Average loss: 0.0747, Accuracy: 111/773 (14.3596%)
___Train Local_ResNet_18,  epoch 243, local model 16, internal_epoch   2,  Average loss: 0.0565, Accuracy: 275/773 (35.5757%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 36, internal_epoch   1,  Average loss: 0.0809, Accuracy: 128/849 (15.0766%)
___Train Local_ResNet_18,  epoch 243, local model 36, internal_epoch   2,  Average loss: 0.0563, Accuracy: 143/849 (16.8433%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 94, internal_epoch   1,  Average loss: 0.0789, Accuracy: 4/203 (1.9704%)
___Train Local_ResNet_18,  epoch 243, local model 94, internal_epoch   2,  Average loss: 0.0792, Accuracy: 77/203 (37.9310%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 57, internal_epoch   1,  Average loss: 0.1062, Accuracy: 23/290 (7.9310%)
___Train Local_ResNet_18,  epoch 243, local model 57, internal_epoch   2,  Average loss: 0.0904, Accuracy: 25/290 (8.6207%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.63777804374695
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 225.96082472801208 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:244 choose agents : [17, 33, 77, 11, 63, 92, 28, 56, 44, 40]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   1,  Average loss: 0.1002, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   2,  Average loss: 0.0851, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   3,  Average loss: 0.0775, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   4,  Average loss: 0.0646, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   5,  Average loss: 0.0575, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   6,  Average loss: 0.0457, Accuracy: 188/526 (35.7414%), train_poison_data_count: 45
Global model norm: 125.62786066394668.
Norm before scaling: 123.7606450598291. Distance: 8.758831254166553
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 853.6484200184523, distance: 875.8830900867991
Total norm for 4 adversaries is: 853.6484200184523. distance: 875.8830900867991
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   1,  Average loss: 0.1101, Accuracy: 41/527 (7.7799%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   2,  Average loss: 0.0891, Accuracy: 44/527 (8.3491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   3,  Average loss: 0.0727, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   4,  Average loss: 0.0591, Accuracy: 118/527 (22.3909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   5,  Average loss: 0.0473, Accuracy: 140/527 (26.5655%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   6,  Average loss: 0.0414, Accuracy: 139/527 (26.3757%), train_poison_data_count: 45
Global model norm: 125.62786066394668.
Norm before scaling: 123.85033022513505. Distance: 10.08631609051749
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 989.2426395985972, distance: 1008.6315915635402
Total norm for 4 adversaries is: 989.2426395985972. distance: 1008.6315915635402
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   1,  Average loss: 0.0736, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   2,  Average loss: 0.0618, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   3,  Average loss: 0.0556, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   4,  Average loss: 0.0513, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   5,  Average loss: 0.0477, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   6,  Average loss: 0.0444, Accuracy: 146/496 (29.4355%), train_poison_data_count: 40
Global model norm: 125.62786066394668.
Norm before scaling: 124.11155752361462. Distance: 6.026554790291121
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 580.9268187560289, distance: 602.6554519375063
Total norm for 4 adversaries is: 580.9268187560289. distance: 602.6554519375063
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   1,  Average loss: 0.0876, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   2,  Average loss: 0.0694, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   3,  Average loss: 0.0564, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   4,  Average loss: 0.0508, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   5,  Average loss: 0.0488, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   6,  Average loss: 0.0452, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Global model norm: 125.62786066394668.
Norm before scaling: 123.88891745102748. Distance: 7.261822761829068
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 703.1785424058388, distance: 726.182268786563
Total norm for 4 adversaries is: 703.1785424058388. distance: 726.182268786563
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 244, local model 63, internal_epoch   1,  Average loss: 0.0787, Accuracy: 100/752 (13.2979%)
___Train Local_ResNet_18,  epoch 244, local model 63, internal_epoch   2,  Average loss: 0.0519, Accuracy: 167/752 (22.2074%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 92, internal_epoch   1,  Average loss: 0.0914, Accuracy: 83/796 (10.4271%)
___Train Local_ResNet_18,  epoch 244, local model 92, internal_epoch   2,  Average loss: 0.0477, Accuracy: 242/796 (30.4020%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 28, internal_epoch   1,  Average loss: 0.1091, Accuracy: 44/423 (10.4019%)
___Train Local_ResNet_18,  epoch 244, local model 28, internal_epoch   2,  Average loss: 0.0740, Accuracy: 41/423 (9.6927%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 56, internal_epoch   1,  Average loss: 0.1122, Accuracy: 33/743 (4.4415%)
___Train Local_ResNet_18,  epoch 244, local model 56, internal_epoch   2,  Average loss: 0.0694, Accuracy: 108/743 (14.5357%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 44, internal_epoch   1,  Average loss: 0.0880, Accuracy: 37/436 (8.4862%)
___Train Local_ResNet_18,  epoch 244, local model 44, internal_epoch   2,  Average loss: 0.0514, Accuracy: 91/436 (20.8716%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 40, internal_epoch   1,  Average loss: 0.0810, Accuracy: 52/652 (7.9755%)
___Train Local_ResNet_18,  epoch 244, local model 40, internal_epoch   2,  Average loss: 0.0459, Accuracy: 338/652 (51.8405%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 196.25507140159607
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 240.00240015983582 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:245 choose agents : [17, 33, 77, 11, 74, 85, 2, 99, 35, 70]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   1,  Average loss: 0.1585, Accuracy: 72/526 (13.6882%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   2,  Average loss: 0.1342, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   3,  Average loss: 0.1202, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   4,  Average loss: 0.1100, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   5,  Average loss: 0.0936, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   6,  Average loss: 0.0852, Accuracy: 187/526 (35.5513%), train_poison_data_count: 45
Global model norm: 121.19759257226399.
Norm before scaling: 118.86576183215038. Distance: 10.010600003334357
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 975.0948671795991, distance: 1001.0600319161683
Total norm for 4 adversaries is: 975.0948671795991. distance: 1001.0600319161683
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   1,  Average loss: 0.0810, Accuracy: 175/527 (33.2068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   2,  Average loss: 0.0666, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   3,  Average loss: 0.0580, Accuracy: 118/527 (22.3909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   4,  Average loss: 0.0509, Accuracy: 127/527 (24.0987%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   5,  Average loss: 0.0477, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   6,  Average loss: 0.0429, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Global model norm: 121.19759257226399.
Norm before scaling: 119.45783693290072. Distance: 6.610525188963868
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 636.7426383555604, distance: 661.0525224972672
Total norm for 4 adversaries is: 636.7426383555604. distance: 661.0525224972672
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   1,  Average loss: 0.1528, Accuracy: 86/496 (17.3387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   2,  Average loss: 0.1333, Accuracy: 96/496 (19.3548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   3,  Average loss: 0.1121, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   4,  Average loss: 0.0983, Accuracy: 54/496 (10.8871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   5,  Average loss: 0.0816, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   6,  Average loss: 0.0709, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Global model norm: 121.19759257226399.
Norm before scaling: 119.20820317044041. Distance: 10.323646763383431
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1010.931068372122, distance: 1032.3647005782404
Total norm for 4 adversaries is: 1010.931068372122. distance: 1032.3647005782404
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   1,  Average loss: 0.1084, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   2,  Average loss: 0.0865, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   3,  Average loss: 0.0711, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   4,  Average loss: 0.0663, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   5,  Average loss: 0.0634, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   6,  Average loss: 0.0592, Accuracy: 194/546 (35.5311%), train_poison_data_count: 45
Global model norm: 121.19759257226399.
Norm before scaling: 119.27337788406514. Distance: 7.617350258677811
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 736.7868585961614, distance: 761.734985083395
Total norm for 4 adversaries is: 736.7868585961614. distance: 761.734985083395
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 245, local model 74, internal_epoch   1,  Average loss: 0.1519, Accuracy: 20/469 (4.2644%)
___Train Local_ResNet_18,  epoch 245, local model 74, internal_epoch   2,  Average loss: 0.0774, Accuracy: 78/469 (16.6311%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 85, internal_epoch   1,  Average loss: 0.1134, Accuracy: 89/364 (24.4505%)
___Train Local_ResNet_18,  epoch 245, local model 85, internal_epoch   2,  Average loss: 0.0883, Accuracy: 85/364 (23.3516%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 2, internal_epoch   1,  Average loss: 0.1171, Accuracy: 76/461 (16.4859%)
___Train Local_ResNet_18,  epoch 245, local model 2, internal_epoch   2,  Average loss: 0.0715, Accuracy: 95/461 (20.6074%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 99, internal_epoch   1,  Average loss: 0.1680, Accuracy: 4/391 (1.0230%)
___Train Local_ResNet_18,  epoch 245, local model 99, internal_epoch   2,  Average loss: 0.1330, Accuracy: 44/391 (11.2532%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 35, internal_epoch   1,  Average loss: 0.1594, Accuracy: 12/419 (2.8640%)
___Train Local_ResNet_18,  epoch 245, local model 35, internal_epoch   2,  Average loss: 0.0939, Accuracy: 44/419 (10.5012%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 70, internal_epoch   1,  Average loss: 0.1405, Accuracy: 43/610 (7.0492%)
___Train Local_ResNet_18,  epoch 245, local model 70, internal_epoch   2,  Average loss: 0.0636, Accuracy: 98/610 (16.0656%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.0180263519287
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 206.26522517204285 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:246 choose agents : [17, 33, 77, 11, 88, 50, 86, 60, 41, 79]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   1,  Average loss: 0.1692, Accuracy: 51/526 (9.6958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   2,  Average loss: 0.1248, Accuracy: 56/526 (10.6464%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   3,  Average loss: 0.1070, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   4,  Average loss: 0.0892, Accuracy: 77/526 (14.6388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   5,  Average loss: 0.0765, Accuracy: 86/526 (16.3498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   6,  Average loss: 0.0665, Accuracy: 111/526 (21.1027%), train_poison_data_count: 45
Global model norm: 116.11283069981974.
Norm before scaling: 114.1309127028037. Distance: 12.766624234148098
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1257.5443829145754, distance: 1276.662347686341
Total norm for 4 adversaries is: 1257.5443829145754. distance: 1276.662347686341
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   1,  Average loss: 0.1754, Accuracy: 100/527 (18.9753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   2,  Average loss: 0.1342, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   3,  Average loss: 0.1239, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   4,  Average loss: 0.1092, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   5,  Average loss: 0.0996, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   6,  Average loss: 0.0886, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Global model norm: 116.11283069981974.
Norm before scaling: 113.90212183877436. Distance: 11.603675233763829
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1138.253376889346, distance: 1160.3675064392314
Total norm for 4 adversaries is: 1138.253376889346. distance: 1160.3675064392314
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   1,  Average loss: 0.1092, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   2,  Average loss: 0.0865, Accuracy: 142/496 (28.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   3,  Average loss: 0.0763, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   4,  Average loss: 0.0722, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   5,  Average loss: 0.0680, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   6,  Average loss: 0.0681, Accuracy: 125/496 (25.2016%), train_poison_data_count: 40
Global model norm: 116.11283069981974.
Norm before scaling: 114.52933149825637. Distance: 8.571449225264598
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 839.2321267086955, distance: 857.1449337772464
Total norm for 4 adversaries is: 839.2321267086955. distance: 857.1449337772464
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   1,  Average loss: 0.1158, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   2,  Average loss: 0.0886, Accuracy: 111/546 (20.3297%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   3,  Average loss: 0.0772, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   4,  Average loss: 0.0697, Accuracy: 199/546 (36.4469%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   5,  Average loss: 0.0696, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   6,  Average loss: 0.0670, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Global model norm: 116.11283069981974.
Norm before scaling: 114.2815533561738. Distance: 9.072127917079193
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 886.6201977171511, distance: 907.2127989066291
Total norm for 4 adversaries is: 886.6201977171511. distance: 907.2127989066291
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 246, local model 88, internal_epoch   1,  Average loss: 0.1117, Accuracy: 10/447 (2.2371%)
___Train Local_ResNet_18,  epoch 246, local model 88, internal_epoch   2,  Average loss: 0.0393, Accuracy: 198/447 (44.2953%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 50, internal_epoch   1,  Average loss: 0.1877, Accuracy: 14/401 (3.4913%)
___Train Local_ResNet_18,  epoch 246, local model 50, internal_epoch   2,  Average loss: 0.1115, Accuracy: 54/401 (13.4663%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 86, internal_epoch   1,  Average loss: 0.2303, Accuracy: 41/212 (19.3396%)
___Train Local_ResNet_18,  epoch 246, local model 86, internal_epoch   2,  Average loss: 0.1488, Accuracy: 46/212 (21.6981%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 60, internal_epoch   1,  Average loss: 0.1625, Accuracy: 3/284 (1.0563%)
___Train Local_ResNet_18,  epoch 246, local model 60, internal_epoch   2,  Average loss: 0.0872, Accuracy: 60/284 (21.1268%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 41, internal_epoch   1,  Average loss: 0.2776, Accuracy: 14/513 (2.7290%)
___Train Local_ResNet_18,  epoch 246, local model 41, internal_epoch   2,  Average loss: 0.1675, Accuracy: 7/513 (1.3645%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 79, internal_epoch   1,  Average loss: 0.1748, Accuracy: 42/154 (27.2727%)
___Train Local_ResNet_18,  epoch 246, local model 79, internal_epoch   2,  Average loss: 0.0937, Accuracy: 45/154 (29.2208%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 165.89059948921204
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 208.6134111881256 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:247 choose agents : [17, 33, 77, 11, 76, 67, 9, 40, 72, 44]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   1,  Average loss: 0.0719, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   2,  Average loss: 0.0653, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   3,  Average loss: 0.0589, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   4,  Average loss: 0.0526, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   5,  Average loss: 0.0498, Accuracy: 153/526 (29.0875%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   6,  Average loss: 0.0441, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Global model norm: 113.07591735616165.
Norm before scaling: 111.51412641735126. Distance: 7.366194301092343
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 717.5596665086465, distance: 736.6193895085847
Total norm for 4 adversaries is: 717.5596665086465. distance: 736.6193895085847
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   1,  Average loss: 0.1071, Accuracy: 69/527 (13.0930%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   2,  Average loss: 0.0861, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   3,  Average loss: 0.0734, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   4,  Average loss: 0.0683, Accuracy: 148/527 (28.0835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   5,  Average loss: 0.0601, Accuracy: 181/527 (34.3454%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   6,  Average loss: 0.0612, Accuracy: 178/527 (33.7761%), train_poison_data_count: 45
Global model norm: 113.07591735616165.
Norm before scaling: 111.3528799231861. Distance: 8.558638321426615
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 836.2379670285247, distance: 855.8638180224702
Total norm for 4 adversaries is: 836.2379670285247. distance: 855.8638180224702
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   1,  Average loss: 0.1299, Accuracy: 18/496 (3.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   2,  Average loss: 0.1133, Accuracy: 34/496 (6.8548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   3,  Average loss: 0.0982, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   4,  Average loss: 0.0895, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   5,  Average loss: 0.0785, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   6,  Average loss: 0.0725, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Global model norm: 113.07591735616165.
Norm before scaling: 111.27003857451925. Distance: 8.834522191303433
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 863.107756887864, distance: 883.4522482851012
Total norm for 4 adversaries is: 863.107756887864. distance: 883.4522482851012
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   1,  Average loss: 0.1094, Accuracy: 63/546 (11.5385%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   2,  Average loss: 0.0921, Accuracy: 80/546 (14.6520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   3,  Average loss: 0.0815, Accuracy: 153/546 (28.0220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   4,  Average loss: 0.0762, Accuracy: 155/546 (28.3883%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   5,  Average loss: 0.0674, Accuracy: 162/546 (29.6703%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   6,  Average loss: 0.0624, Accuracy: 171/546 (31.3187%), train_poison_data_count: 45
Global model norm: 113.07591735616165.
Norm before scaling: 111.17172017733422. Distance: 8.037185553633508
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 780.7617274175266, distance: 803.7185452632034
Total norm for 4 adversaries is: 780.7617274175266. distance: 803.7185452632034
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 247, local model 76, internal_epoch   1,  Average loss: 0.2402, Accuracy: 0/65 (0.0000%)
___Train Local_ResNet_18,  epoch 247, local model 76, internal_epoch   2,  Average loss: 0.1535, Accuracy: 0/65 (0.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 67, internal_epoch   1,  Average loss: 0.0975, Accuracy: 209/842 (24.8219%)
___Train Local_ResNet_18,  epoch 247, local model 67, internal_epoch   2,  Average loss: 0.0753, Accuracy: 227/842 (26.9596%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 9, internal_epoch   1,  Average loss: 0.1573, Accuracy: 1/368 (0.2717%)
___Train Local_ResNet_18,  epoch 247, local model 9, internal_epoch   2,  Average loss: 0.1306, Accuracy: 36/368 (9.7826%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 40, internal_epoch   1,  Average loss: 0.1032, Accuracy: 10/652 (1.5337%)
___Train Local_ResNet_18,  epoch 247, local model 40, internal_epoch   2,  Average loss: 0.0498, Accuracy: 165/652 (25.3067%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 72, internal_epoch   1,  Average loss: 0.1108, Accuracy: 305/618 (49.3528%)
___Train Local_ResNet_18,  epoch 247, local model 72, internal_epoch   2,  Average loss: 0.0919, Accuracy: 309/618 (50.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 44, internal_epoch   1,  Average loss: 0.1042, Accuracy: 27/436 (6.1927%)
___Train Local_ResNet_18,  epoch 247, local model 44, internal_epoch   2,  Average loss: 0.0794, Accuracy: 45/436 (10.3211%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.16092801094055
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 210.90662097930908 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:248 choose agents : [17, 33, 77, 11, 46, 96, 54, 39, 67, 82]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   1,  Average loss: 0.1786, Accuracy: 83/526 (15.7795%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   2,  Average loss: 0.1565, Accuracy: 91/526 (17.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   3,  Average loss: 0.1279, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   4,  Average loss: 0.1056, Accuracy: 77/526 (14.6388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   5,  Average loss: 0.0872, Accuracy: 85/526 (16.1597%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   6,  Average loss: 0.0715, Accuracy: 82/526 (15.5894%), train_poison_data_count: 45
Global model norm: 108.62895562417968.
Norm before scaling: 106.31463107799415. Distance: 12.479680139404051
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1226.3381976437006, distance: 1247.967998387779
Total norm for 4 adversaries is: 1226.3381976437006. distance: 1247.967998387779
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   1,  Average loss: 0.1053, Accuracy: 197/527 (37.3814%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   2,  Average loss: 0.0953, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   3,  Average loss: 0.0779, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   4,  Average loss: 0.0677, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   5,  Average loss: 0.0547, Accuracy: 204/527 (38.7097%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   6,  Average loss: 0.0493, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 108.62895562417968.
Norm before scaling: 106.78209137801385. Distance: 9.023415516748113
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 882.0969334489266, distance: 902.3415719670684
Total norm for 4 adversaries is: 882.0969334489266. distance: 902.3415719670684
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   1,  Average loss: 0.1139, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   2,  Average loss: 0.0994, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   3,  Average loss: 0.0825, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   4,  Average loss: 0.0665, Accuracy: 84/496 (16.9355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   5,  Average loss: 0.0557, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   6,  Average loss: 0.0490, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Global model norm: 108.62895562417968.
Norm before scaling: 106.99918315254794. Distance: 9.618769623238796
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 944.78201851009, distance: 961.8769411936228
Total norm for 4 adversaries is: 944.78201851009. distance: 961.8769411936228
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   1,  Average loss: 0.1361, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   2,  Average loss: 0.1107, Accuracy: 92/546 (16.8498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   3,  Average loss: 0.0871, Accuracy: 76/546 (13.9194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   4,  Average loss: 0.0706, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   5,  Average loss: 0.0606, Accuracy: 162/546 (29.6703%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   6,  Average loss: 0.0589, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Global model norm: 108.62895562417968.
Norm before scaling: 106.72801021316991. Distance: 10.723836242563769
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1053.2656953494688, distance: 1072.3836183940894
Total norm for 4 adversaries is: 1053.2656953494688. distance: 1072.3836183940894
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 248, local model 46, internal_epoch   1,  Average loss: 0.1575, Accuracy: 6/601 (0.9983%)
___Train Local_ResNet_18,  epoch 248, local model 46, internal_epoch   2,  Average loss: 0.0975, Accuracy: 98/601 (16.3062%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 96, internal_epoch   1,  Average loss: 0.1152, Accuracy: 134/708 (18.9266%)
___Train Local_ResNet_18,  epoch 248, local model 96, internal_epoch   2,  Average loss: 0.0677, Accuracy: 158/708 (22.3164%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 54, internal_epoch   1,  Average loss: 0.1840, Accuracy: 21/440 (4.7727%)
___Train Local_ResNet_18,  epoch 248, local model 54, internal_epoch   2,  Average loss: 0.1226, Accuracy: 27/440 (6.1364%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 39, internal_epoch   1,  Average loss: 0.1357, Accuracy: 48/217 (22.1198%)
___Train Local_ResNet_18,  epoch 248, local model 39, internal_epoch   2,  Average loss: 0.0923, Accuracy: 51/217 (23.5023%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 67, internal_epoch   1,  Average loss: 0.1612, Accuracy: 12/842 (1.4252%)
___Train Local_ResNet_18,  epoch 248, local model 67, internal_epoch   2,  Average loss: 0.0739, Accuracy: 153/842 (18.1710%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 82, internal_epoch   1,  Average loss: 0.2013, Accuracy: 16/601 (2.6622%)
___Train Local_ResNet_18,  epoch 248, local model 82, internal_epoch   2,  Average loss: 0.1208, Accuracy: 45/601 (7.4875%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 199.74032330513
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 241.98089814186096 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:249 choose agents : [17, 33, 77, 11, 21, 80, 91, 23, 65, 69]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   1,  Average loss: 0.1303, Accuracy: 32/526 (6.0837%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   2,  Average loss: 0.1016, Accuracy: 42/526 (7.9848%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   3,  Average loss: 0.0814, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   4,  Average loss: 0.0741, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   5,  Average loss: 0.0639, Accuracy: 198/526 (37.6426%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   6,  Average loss: 0.0580, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Global model norm: 105.96249705084342.
Norm before scaling: 104.28715427546673. Distance: 10.228666854011404
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1005.8815163825211, distance: 1022.8666213148223
Total norm for 4 adversaries is: 1005.8815163825211. distance: 1022.8666213148223
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   1,  Average loss: 0.1684, Accuracy: 109/527 (20.6831%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   2,  Average loss: 0.1479, Accuracy: 126/527 (23.9089%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   3,  Average loss: 0.1354, Accuracy: 127/527 (24.0987%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   4,  Average loss: 0.1221, Accuracy: 125/527 (23.7192%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   5,  Average loss: 0.1090, Accuracy: 110/527 (20.8729%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   6,  Average loss: 0.1007, Accuracy: 105/527 (19.9241%), train_poison_data_count: 45
Global model norm: 105.96249705084342.
Norm before scaling: 103.67035723267283. Distance: 10.860815509785517
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1063.4635043103265, distance: 1086.0815462017574
Total norm for 4 adversaries is: 1063.4635043103265. distance: 1086.0815462017574
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   1,  Average loss: 0.1398, Accuracy: 50/496 (10.0806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   2,  Average loss: 0.1233, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   3,  Average loss: 0.1098, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   4,  Average loss: 0.1071, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   5,  Average loss: 0.0984, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   6,  Average loss: 0.0953, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Global model norm: 105.96249705084342.
Norm before scaling: 104.01332828506884. Distance: 8.032498155077791
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 780.422001227541, distance: 803.2498054777232
Total norm for 4 adversaries is: 780.422001227541. distance: 803.2498054777232
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   1,  Average loss: 0.1016, Accuracy: 159/546 (29.1209%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   2,  Average loss: 0.0857, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   3,  Average loss: 0.0731, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   4,  Average loss: 0.0631, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   5,  Average loss: 0.0632, Accuracy: 194/546 (35.5311%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   6,  Average loss: 0.0609, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Global model norm: 105.96249705084342.
Norm before scaling: 104.24968618807685. Distance: 8.071947816526961
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 787.5724569841177, distance: 807.1947952632004
Total norm for 4 adversaries is: 787.5724569841177. distance: 807.1947952632004
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 249, local model 21, internal_epoch   1,  Average loss: 0.1436, Accuracy: 9/262 (3.4351%)
___Train Local_ResNet_18,  epoch 249, local model 21, internal_epoch   2,  Average loss: 0.1170, Accuracy: 22/262 (8.3969%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 80, internal_epoch   1,  Average loss: 0.1138, Accuracy: 2/363 (0.5510%)
___Train Local_ResNet_18,  epoch 249, local model 80, internal_epoch   2,  Average loss: 0.0743, Accuracy: 9/363 (2.4793%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 91, internal_epoch   1,  Average loss: 0.1218, Accuracy: 16/234 (6.8376%)
___Train Local_ResNet_18,  epoch 249, local model 91, internal_epoch   2,  Average loss: 0.1073, Accuracy: 34/234 (14.5299%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 23, internal_epoch   1,  Average loss: 0.1424, Accuracy: 74/248 (29.8387%)
___Train Local_ResNet_18,  epoch 249, local model 23, internal_epoch   2,  Average loss: 0.1282, Accuracy: 81/248 (32.6613%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 65, internal_epoch   1,  Average loss: 0.1048, Accuracy: 47/314 (14.9682%)
___Train Local_ResNet_18,  epoch 249, local model 65, internal_epoch   2,  Average loss: 0.0850, Accuracy: 53/314 (16.8790%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 69, internal_epoch   1,  Average loss: 0.0894, Accuracy: 11/216 (5.0926%)
___Train Local_ResNet_18,  epoch 249, local model 69, internal_epoch   2,  Average loss: 0.0689, Accuracy: 15/216 (6.9444%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 170.56512761116028
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 215.32935285568237 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:250 choose agents : [17, 33, 77, 11, 44, 38, 93, 2, 16, 36]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   1,  Average loss: 0.1663, Accuracy: 156/526 (29.6578%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   2,  Average loss: 0.0608, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   3,  Average loss: 0.0573, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   4,  Average loss: 0.0535, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   5,  Average loss: 0.0553, Accuracy: 186/526 (35.3612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   6,  Average loss: 0.0449, Accuracy: 185/526 (35.1711%), train_poison_data_count: 45
Global model norm: 102.02461215008367.
Norm before scaling: 101.6144194215319. Distance: 19.54768371128821
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1945.498329477566, distance: 1954.7684006040204
Total norm for 4 adversaries is: 1945.498329477566. distance: 1954.7684006040204
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   1,  Average loss: 0.2246, Accuracy: 41/527 (7.7799%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   2,  Average loss: 0.1335, Accuracy: 48/527 (9.1082%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   3,  Average loss: 0.1115, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   4,  Average loss: 0.0835, Accuracy: 122/527 (23.1499%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   5,  Average loss: 0.0655, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   6,  Average loss: 0.0431, Accuracy: 169/527 (32.0683%), train_poison_data_count: 45
Global model norm: 102.02461215008367.
Norm before scaling: 101.84351027894462. Distance: 23.38977693435879
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2328.6960943841514, distance: 2338.9779819399755
Total norm for 4 adversaries is: 2328.6960943841514. distance: 2338.9779819399755
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   1,  Average loss: 0.2554, Accuracy: 75/496 (15.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   2,  Average loss: 0.1338, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   3,  Average loss: 0.1183, Accuracy: 62/496 (12.5000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   4,  Average loss: 0.0934, Accuracy: 54/496 (10.8871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   5,  Average loss: 0.0683, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   6,  Average loss: 0.0428, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Global model norm: 102.02461215008367.
Norm before scaling: 101.37748051065138. Distance: 21.06798339463002
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2095.5809457045557, distance: 2106.798400417088
Total norm for 4 adversaries is: 2095.5809457045557. distance: 2106.798400417088
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   1,  Average loss: 0.2233, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   2,  Average loss: 0.1228, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   3,  Average loss: 0.1094, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   4,  Average loss: 0.0961, Accuracy: 122/546 (22.3443%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   5,  Average loss: 0.0790, Accuracy: 115/546 (21.0623%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   6,  Average loss: 0.0498, Accuracy: 129/546 (23.6264%), train_poison_data_count: 45
Global model norm: 102.02461215008367.
Norm before scaling: 100.97758975541306. Distance: 20.437068456357526
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2030.7943027298456, distance: 2043.7071096416923
Total norm for 4 adversaries is: 2030.7943027298456. distance: 2043.7071096416923
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 250, local model 44, internal_epoch   1,  Average loss: 0.3439, Accuracy: 41/436 (9.4037%)
___Train Local_ResNet_18,  epoch 250, local model 44, internal_epoch   2,  Average loss: 0.0855, Accuracy: 62/436 (14.2202%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 38, internal_epoch   1,  Average loss: 0.2341, Accuracy: 99/756 (13.0952%)
___Train Local_ResNet_18,  epoch 250, local model 38, internal_epoch   2,  Average loss: 0.0760, Accuracy: 280/756 (37.0370%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 93, internal_epoch   1,  Average loss: 0.2664, Accuracy: 39/584 (6.6781%)
___Train Local_ResNet_18,  epoch 250, local model 93, internal_epoch   2,  Average loss: 0.0661, Accuracy: 150/584 (25.6849%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 2, internal_epoch   1,  Average loss: 0.3344, Accuracy: 53/461 (11.4967%)
___Train Local_ResNet_18,  epoch 250, local model 2, internal_epoch   2,  Average loss: 0.1579, Accuracy: 56/461 (12.1475%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 16, internal_epoch   1,  Average loss: 0.2441, Accuracy: 63/773 (8.1501%)
___Train Local_ResNet_18,  epoch 250, local model 16, internal_epoch   2,  Average loss: 0.0960, Accuracy: 267/773 (34.5408%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 36, internal_epoch   1,  Average loss: 0.2813, Accuracy: 45/849 (5.3004%)
___Train Local_ResNet_18,  epoch 250, local model 36, internal_epoch   2,  Average loss: 0.1145, Accuracy: 95/849 (11.1896%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.1741542816162
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 211.5511486530304 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:251 choose agents : [17, 33, 77, 11, 36, 26, 95, 49, 48, 27]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   1,  Average loss: 0.6095, Accuracy: 28/526 (5.3232%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   2,  Average loss: 0.1666, Accuracy: 58/526 (11.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   3,  Average loss: 0.1328, Accuracy: 54/526 (10.2662%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   4,  Average loss: 0.1070, Accuracy: 38/526 (7.2243%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   5,  Average loss: 0.0873, Accuracy: 79/526 (15.0190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   6,  Average loss: 0.0708, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Global model norm: 116.57904540750452.
Norm before scaling: 114.48772621169921. Distance: 27.7555497951958
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2755.3469835938995, distance: 2775.5551696912817
Total norm for 4 adversaries is: 2755.3469835938995. distance: 2775.5551696912817
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   1,  Average loss: 0.3827, Accuracy: 109/527 (20.6831%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   2,  Average loss: 0.1160, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   3,  Average loss: 0.0714, Accuracy: 172/527 (32.6376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   4,  Average loss: 0.0546, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   5,  Average loss: 0.0469, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   6,  Average loss: 0.0391, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Global model norm: 116.57904540750452.
Norm before scaling: 114.6531198468886. Distance: 20.852164747531685
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2067.2938833170288, distance: 2085.216655410176
Total norm for 4 adversaries is: 2067.2938833170288. distance: 2085.216655410176
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   1,  Average loss: 0.4204, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   2,  Average loss: 0.1323, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   3,  Average loss: 0.1041, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   4,  Average loss: 0.0842, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   5,  Average loss: 0.0711, Accuracy: 111/496 (22.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   6,  Average loss: 0.0618, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Global model norm: 116.57904540750452.
Norm before scaling: 114.7106116018152. Distance: 21.109075740384306
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2093.2621670493163, distance: 2110.907624696069
Total norm for 4 adversaries is: 2093.2621670493163. distance: 2110.907624696069
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   1,  Average loss: 0.4371, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   2,  Average loss: 0.1411, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   3,  Average loss: 0.1003, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   4,  Average loss: 0.0766, Accuracy: 79/546 (14.4689%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   5,  Average loss: 0.0619, Accuracy: 164/546 (30.0366%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   6,  Average loss: 0.0517, Accuracy: 165/546 (30.2198%), train_poison_data_count: 45
Global model norm: 116.57904540750452.
Norm before scaling: 114.40517446913186. Distance: 22.735540133373785
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2254.0485797781735, distance: 2273.5539360217517
Total norm for 4 adversaries is: 2254.0485797781735. distance: 2273.5539360217517
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 251, local model 36, internal_epoch   1,  Average loss: 0.2147, Accuracy: 206/849 (24.2638%)
___Train Local_ResNet_18,  epoch 251, local model 36, internal_epoch   2,  Average loss: 0.0631, Accuracy: 143/849 (16.8433%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 26, internal_epoch   1,  Average loss: 0.3975, Accuracy: 78/468 (16.6667%)
___Train Local_ResNet_18,  epoch 251, local model 26, internal_epoch   2,  Average loss: 0.1573, Accuracy: 40/468 (8.5470%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 95, internal_epoch   1,  Average loss: 0.2446, Accuracy: 189/569 (33.2162%)
___Train Local_ResNet_18,  epoch 251, local model 95, internal_epoch   2,  Average loss: 0.0833, Accuracy: 55/569 (9.6661%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 49, internal_epoch   1,  Average loss: 0.5333, Accuracy: 26/426 (6.1033%)
___Train Local_ResNet_18,  epoch 251, local model 49, internal_epoch   2,  Average loss: 0.1204, Accuracy: 39/426 (9.1549%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 48, internal_epoch   1,  Average loss: 0.4277, Accuracy: 34/378 (8.9947%)
___Train Local_ResNet_18,  epoch 251, local model 48, internal_epoch   2,  Average loss: 0.1094, Accuracy: 18/378 (4.7619%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 27, internal_epoch   1,  Average loss: 0.6284, Accuracy: 7/397 (1.7632%)
___Train Local_ResNet_18,  epoch 251, local model 27, internal_epoch   2,  Average loss: 0.1730, Accuracy: 7/397 (1.7632%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 192.25628089904785
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 238.62584686279297 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:252 choose agents : [17, 33, 77, 11, 49, 74, 94, 29, 76, 70]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   1,  Average loss: 0.2904, Accuracy: 109/526 (20.7224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   2,  Average loss: 0.1292, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   3,  Average loss: 0.0897, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   4,  Average loss: 0.0708, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   5,  Average loss: 0.0658, Accuracy: 119/526 (22.6236%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   6,  Average loss: 0.0639, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Global model norm: 132.7278259493841.
Norm before scaling: 130.84691078699566. Distance: 19.130894369703828
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1895.0865415595142, distance: 1913.0894516462108
Total norm for 4 adversaries is: 1895.0865415595142. distance: 1913.0894516462108
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   1,  Average loss: 0.4366, Accuracy: 60/527 (11.3852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   2,  Average loss: 0.1879, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   3,  Average loss: 0.1331, Accuracy: 79/527 (14.9905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   4,  Average loss: 0.1122, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   5,  Average loss: 0.1045, Accuracy: 104/527 (19.7343%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   6,  Average loss: 0.0994, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Global model norm: 132.7278259493841.
Norm before scaling: 130.72213792525733. Distance: 24.3176082157752
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2412.2816999678957, distance: 2431.7607818204488
Total norm for 4 adversaries is: 2412.2816999678957. distance: 2431.7607818204488
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   1,  Average loss: 0.3309, Accuracy: 62/496 (12.5000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   2,  Average loss: 0.1572, Accuracy: 19/496 (3.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   3,  Average loss: 0.1087, Accuracy: 32/496 (6.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   4,  Average loss: 0.0885, Accuracy: 123/496 (24.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   5,  Average loss: 0.0899, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   6,  Average loss: 0.0747, Accuracy: 123/496 (24.7984%), train_poison_data_count: 40
Global model norm: 132.7278259493841.
Norm before scaling: 131.19067111460328. Distance: 21.183153995181968
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2102.245466162313, distance: 2118.3153684000877
Total norm for 4 adversaries is: 2102.245466162313. distance: 2118.3153684000877
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   1,  Average loss: 0.3013, Accuracy: 79/546 (14.4689%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   2,  Average loss: 0.1247, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   3,  Average loss: 0.0823, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   4,  Average loss: 0.0635, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   5,  Average loss: 0.0614, Accuracy: 173/546 (31.6850%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   6,  Average loss: 0.0601, Accuracy: 176/546 (32.2344%), train_poison_data_count: 45
Global model norm: 132.7278259493841.
Norm before scaling: 130.97325734906727. Distance: 20.39420017747463
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2022.1253052172608, distance: 2039.420076884603
Total norm for 4 adversaries is: 2022.1253052172608. distance: 2039.420076884603
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 252, local model 49, internal_epoch   1,  Average loss: 0.2714, Accuracy: 19/426 (4.4601%)
___Train Local_ResNet_18,  epoch 252, local model 49, internal_epoch   2,  Average loss: 0.1000, Accuracy: 49/426 (11.5023%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 74, internal_epoch   1,  Average loss: 0.2668, Accuracy: 35/469 (7.4627%)
___Train Local_ResNet_18,  epoch 252, local model 74, internal_epoch   2,  Average loss: 0.0780, Accuracy: 32/469 (6.8230%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 94, internal_epoch   1,  Average loss: 0.8004, Accuracy: 18/203 (8.8670%)
___Train Local_ResNet_18,  epoch 252, local model 94, internal_epoch   2,  Average loss: 0.3161, Accuracy: 1/203 (0.4926%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 29, internal_epoch   1,  Average loss: 0.1786, Accuracy: 238/848 (28.0660%)
___Train Local_ResNet_18,  epoch 252, local model 29, internal_epoch   2,  Average loss: 0.0467, Accuracy: 375/848 (44.2217%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 76, internal_epoch   1,  Average loss: 1.1515, Accuracy: 17/65 (26.1538%)
___Train Local_ResNet_18,  epoch 252, local model 76, internal_epoch   2,  Average loss: 0.2154, Accuracy: 18/65 (27.6923%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 252, local model 70, internal_epoch   1,  Average loss: 0.3119, Accuracy: 19/610 (3.1148%)
___Train Local_ResNet_18,  epoch 252, local model 70, internal_epoch   2,  Average loss: 0.0936, Accuracy: 74/610 (12.1311%)
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 190.95424103736877
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 239.43086338043213 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:253 choose agents : [17, 33, 77, 11, 99, 76, 10, 58, 65, 75]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 17, internal_epoch   1,  Average loss: 0.1662, Accuracy: 23/526 (4.3726%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 17, internal_epoch   2,  Average loss: 0.1584, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 17, internal_epoch   3,  Average loss: 0.1357, Accuracy: 156/526 (29.6578%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 17, internal_epoch   4,  Average loss: 0.1222, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 17, internal_epoch   5,  Average loss: 0.1119, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 17, internal_epoch   6,  Average loss: 0.1093, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Global model norm: 143.7226808279577.
Norm before scaling: 141.1807490639216. Distance: 9.849848139023079
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 953.2726524976996, distance: 984.9848031822623
Total norm for 4 adversaries is: 953.2726524976996. distance: 984.9848031822623
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 33, internal_epoch   1,  Average loss: 0.1375, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 33, internal_epoch   2,  Average loss: 0.1188, Accuracy: 110/527 (20.8729%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 33, internal_epoch   3,  Average loss: 0.0982, Accuracy: 127/527 (24.0987%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 33, internal_epoch   4,  Average loss: 0.0871, Accuracy: 127/527 (24.0987%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 33, internal_epoch   5,  Average loss: 0.0700, Accuracy: 174/527 (33.0171%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 33, internal_epoch   6,  Average loss: 0.0750, Accuracy: 191/527 (36.2429%), train_poison_data_count: 45
Global model norm: 143.7226808279577.
Norm before scaling: 141.53468269738693. Distance: 9.59473525961756
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 932.53692956365, distance: 959.4734884299826
Total norm for 4 adversaries is: 932.53692956365. distance: 959.4734884299826
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   1,  Average loss: 0.0977, Accuracy: 31/496 (6.2500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   2,  Average loss: 0.0814, Accuracy: 41/496 (8.2661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   3,  Average loss: 0.0645, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   4,  Average loss: 0.0551, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   5,  Average loss: 0.0493, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 77, internal_epoch   6,  Average loss: 0.0487, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Global model norm: 143.7226808279577.
Norm before scaling: 142.02865440422576. Distance: 8.041596512826148
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 782.5950022201778, distance: 804.1596156858413
Total norm for 4 adversaries is: 782.5950022201778. distance: 804.1596156858413
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   1,  Average loss: 0.1093, Accuracy: 152/546 (27.8388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   2,  Average loss: 0.0973, Accuracy: 156/546 (28.5714%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   3,  Average loss: 0.0843, Accuracy: 159/546 (29.1209%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   4,  Average loss: 0.0797, Accuracy: 166/546 (30.4029%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   5,  Average loss: 0.0734, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 253, local model 11, internal_epoch   6,  Average loss: 0.0715, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Global model norm: 143.7226808279577.
Norm before scaling: 141.55299361016708. Distance: 7.118557342789206
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 678.5509376605414, distance: 711.8557613730467
Total norm for 4 adversaries is: 678.5509376605414. distance: 711.8557613730467
___Test Local_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 253, local model 99, internal_epoch   1,  Average loss: 0.1048, Accuracy: 81/391 (20.7161%)
___Train Local_ResNet_18,  epoch 253, local model 99, internal_epoch   2,  Average loss: 0.0883, Accuracy: 87/391 (22.2506%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 76, internal_epoch   1,  Average loss: 0.0961, Accuracy: 3/65 (4.6154%)
___Train Local_ResNet_18,  epoch 253, local model 76, internal_epoch   2,  Average loss: 0.0822, Accuracy: 3/65 (4.6154%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 10, internal_epoch   1,  Average loss: 0.0668, Accuracy: 37/752 (4.9202%)
___Train Local_ResNet_18,  epoch 253, local model 10, internal_epoch   2,  Average loss: 0.0298, Accuracy: 414/752 (55.0532%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 58, internal_epoch   1,  Average loss: 0.1074, Accuracy: 7/234 (2.9915%)
___Train Local_ResNet_18,  epoch 253, local model 58, internal_epoch   2,  Average loss: 0.0875, Accuracy: 6/234 (2.5641%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 65, internal_epoch   1,  Average loss: 0.0882, Accuracy: 50/314 (15.9236%)
___Train Local_ResNet_18,  epoch 253, local model 65, internal_epoch   2,  Average loss: 0.0728, Accuracy: 49/314 (15.6051%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 253, local model 75, internal_epoch   1,  Average loss: 0.0789, Accuracy: 131/578 (22.6644%)
___Train Local_ResNet_18,  epoch 253, local model 75, internal_epoch   2,  Average loss: 0.0656, Accuracy: 227/578 (39.2734%)
___Test Local_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 174.08813619613647
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 253: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 253: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 212.35876321792603 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:254 choose agents : [17, 33, 77, 11, 48, 64, 16, 97, 52, 24]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 17, internal_epoch   1,  Average loss: 0.2089, Accuracy: 88/526 (16.7300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 17, internal_epoch   2,  Average loss: 0.1761, Accuracy: 91/526 (17.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 17, internal_epoch   3,  Average loss: 0.1427, Accuracy: 78/526 (14.8289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 17, internal_epoch   4,  Average loss: 0.1262, Accuracy: 44/526 (8.3650%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 17, internal_epoch   5,  Average loss: 0.1053, Accuracy: 67/526 (12.7376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 17, internal_epoch   6,  Average loss: 0.0884, Accuracy: 88/526 (16.7300%), train_poison_data_count: 45
Global model norm: 137.72540473483824.
Norm before scaling: 135.2611839761319. Distance: 14.06980224904204
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1382.56848835781, distance: 1406.9801882045106
Total norm for 4 adversaries is: 1382.56848835781. distance: 1406.9801882045106
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 33, internal_epoch   1,  Average loss: 0.1538, Accuracy: 184/527 (34.9146%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 33, internal_epoch   2,  Average loss: 0.1299, Accuracy: 197/527 (37.3814%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 33, internal_epoch   3,  Average loss: 0.1065, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 33, internal_epoch   4,  Average loss: 0.0963, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 33, internal_epoch   5,  Average loss: 0.0884, Accuracy: 191/527 (36.2429%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 33, internal_epoch   6,  Average loss: 0.0836, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Global model norm: 137.72540473483824.
Norm before scaling: 135.39350923788777. Distance: 10.37520332596792
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1010.4273538953704, distance: 1037.520301006202
Total norm for 4 adversaries is: 1010.4273538953704. distance: 1037.520301006202
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   1,  Average loss: 0.1246, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   2,  Average loss: 0.0980, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   3,  Average loss: 0.0758, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   4,  Average loss: 0.0666, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   5,  Average loss: 0.0638, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 77, internal_epoch   6,  Average loss: 0.0629, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Global model norm: 137.72540473483824.
Norm before scaling: 135.8994774410483. Distance: 8.516129393032212
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 828.8538019457955, distance: 851.6129916223683
Total norm for 4 adversaries is: 828.8538019457955. distance: 851.6129916223683
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   1,  Average loss: 0.1980, Accuracy: 93/546 (17.0330%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   2,  Average loss: 0.1677, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   3,  Average loss: 0.1408, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   4,  Average loss: 0.1244, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   5,  Average loss: 0.1111, Accuracy: 123/546 (22.5275%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 254, local model 11, internal_epoch   6,  Average loss: 0.1037, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Global model norm: 137.72540473483824.
Norm before scaling: 135.09957988230386. Distance: 11.718842447552014
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1143.2010977951343, distance: 1171.8841666308151
Total norm for 4 adversaries is: 1143.2010977951343. distance: 1171.8841666308151
___Test Local_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 254, local model 48, internal_epoch   1,  Average loss: 0.1546, Accuracy: 19/378 (5.0265%)
___Train Local_ResNet_18,  epoch 254, local model 48, internal_epoch   2,  Average loss: 0.0972, Accuracy: 36/378 (9.5238%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 64, internal_epoch   1,  Average loss: 0.0995, Accuracy: 119/686 (17.3469%)
___Train Local_ResNet_18,  epoch 254, local model 64, internal_epoch   2,  Average loss: 0.0517, Accuracy: 121/686 (17.6385%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 16, internal_epoch   1,  Average loss: 0.1035, Accuracy: 111/773 (14.3596%)
___Train Local_ResNet_18,  epoch 254, local model 16, internal_epoch   2,  Average loss: 0.0518, Accuracy: 178/773 (23.0272%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 97, internal_epoch   1,  Average loss: 0.1663, Accuracy: 50/418 (11.9617%)
___Train Local_ResNet_18,  epoch 254, local model 97, internal_epoch   2,  Average loss: 0.0840, Accuracy: 103/418 (24.6411%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 52, internal_epoch   1,  Average loss: 0.2573, Accuracy: 0/214 (0.0000%)
___Train Local_ResNet_18,  epoch 254, local model 52, internal_epoch   2,  Average loss: 0.1625, Accuracy: 29/214 (13.5514%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 254, local model 24, internal_epoch   1,  Average loss: 0.1820, Accuracy: 6/320 (1.8750%)
___Train Local_ResNet_18,  epoch 254, local model 24, internal_epoch   2,  Average loss: 0.1123, Accuracy: 12/320 (3.7500%)
___Test Local_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 187.0349748134613
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 254: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 254: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 235.69486713409424 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:255 choose agents : [17, 33, 77, 11, 10, 34, 27, 49, 56, 48]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 17, internal_epoch   1,  Average loss: 0.1107, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 17, internal_epoch   2,  Average loss: 0.1007, Accuracy: 151/526 (28.7072%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 17, internal_epoch   3,  Average loss: 0.0865, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 17, internal_epoch   4,  Average loss: 0.0755, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 17, internal_epoch   5,  Average loss: 0.0687, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 17, internal_epoch   6,  Average loss: 0.0647, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Global model norm: 132.4791330856486.
Norm before scaling: 130.51707563093038. Distance: 8.26650459786974
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 801.5402360455774, distance: 826.6504324682834
Total norm for 4 adversaries is: 801.5402360455774. distance: 826.6504324682834
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 33, internal_epoch   1,  Average loss: 0.1838, Accuracy: 75/527 (14.2315%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 33, internal_epoch   2,  Average loss: 0.1633, Accuracy: 86/527 (16.3188%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 33, internal_epoch   3,  Average loss: 0.1486, Accuracy: 90/527 (17.0778%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 33, internal_epoch   4,  Average loss: 0.1378, Accuracy: 81/527 (15.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 33, internal_epoch   5,  Average loss: 0.1145, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 33, internal_epoch   6,  Average loss: 0.1090, Accuracy: 124/527 (23.5294%), train_poison_data_count: 45
Global model norm: 132.4791330856486.
Norm before scaling: 129.95860218257965. Distance: 10.45458718694869
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1016.5905948315674, distance: 1045.4586911973136
Total norm for 4 adversaries is: 1016.5905948315674. distance: 1045.4586911973136
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   1,  Average loss: 0.1214, Accuracy: 35/496 (7.0565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   2,  Average loss: 0.1133, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   3,  Average loss: 0.1075, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   4,  Average loss: 0.0988, Accuracy: 121/496 (24.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   5,  Average loss: 0.0938, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 77, internal_epoch   6,  Average loss: 0.0867, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Global model norm: 132.4791330856486.
Norm before scaling: 130.52762518907636. Distance: 6.959104148825423
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 667.5876581019155, distance: 695.9104198817546
Total norm for 4 adversaries is: 667.5876581019155. distance: 695.9104198817546
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   1,  Average loss: 0.1089, Accuracy: 75/546 (13.7363%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   2,  Average loss: 0.0969, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   3,  Average loss: 0.0843, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   4,  Average loss: 0.0738, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   5,  Average loss: 0.0685, Accuracy: 145/546 (26.5568%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 255, local model 11, internal_epoch   6,  Average loss: 0.0640, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Global model norm: 132.4791330856486.
Norm before scaling: 130.50110751445752. Distance: 8.083517432983953
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 782.5795486722101, distance: 808.3517180039887
Total norm for 4 adversaries is: 782.5795486722101. distance: 808.3517180039887
___Test Local_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 255, local model 10, internal_epoch   1,  Average loss: 0.0362, Accuracy: 175/752 (23.2713%)
___Train Local_ResNet_18,  epoch 255, local model 10, internal_epoch   2,  Average loss: 0.0241, Accuracy: 414/752 (55.0532%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 34, internal_epoch   1,  Average loss: 0.2537, Accuracy: 4/349 (1.1461%)
___Train Local_ResNet_18,  epoch 255, local model 34, internal_epoch   2,  Average loss: 0.2317, Accuracy: 6/349 (1.7192%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 27, internal_epoch   1,  Average loss: 0.0728, Accuracy: 84/397 (21.1587%)
___Train Local_ResNet_18,  epoch 255, local model 27, internal_epoch   2,  Average loss: 0.0576, Accuracy: 90/397 (22.6700%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 49, internal_epoch   1,  Average loss: 0.0940, Accuracy: 13/426 (3.0516%)
___Train Local_ResNet_18,  epoch 255, local model 49, internal_epoch   2,  Average loss: 0.0724, Accuracy: 73/426 (17.1362%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 56, internal_epoch   1,  Average loss: 0.1256, Accuracy: 135/743 (18.1696%)
___Train Local_ResNet_18,  epoch 255, local model 56, internal_epoch   2,  Average loss: 0.1093, Accuracy: 99/743 (13.3244%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 255, local model 48, internal_epoch   1,  Average loss: 0.1017, Accuracy: 7/378 (1.8519%)
___Train Local_ResNet_18,  epoch 255, local model 48, internal_epoch   2,  Average loss: 0.0848, Accuracy: 36/378 (9.5238%)
___Test Local_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 183.5581648349762
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 255: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 255: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 225.5754051208496 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:256 choose agents : [17, 33, 77, 11, 14, 45, 65, 37, 38, 24]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 17, internal_epoch   1,  Average loss: 0.1397, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 17, internal_epoch   2,  Average loss: 0.1203, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 17, internal_epoch   3,  Average loss: 0.1011, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 17, internal_epoch   4,  Average loss: 0.0809, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 17, internal_epoch   5,  Average loss: 0.0634, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 17, internal_epoch   6,  Average loss: 0.0501, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Global model norm: 126.50932910881514.
Norm before scaling: 124.37445430156669. Distance: 11.853780640728747
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1163.406205931531, distance: 1185.3779987835105
Total norm for 4 adversaries is: 1163.406205931531. distance: 1185.3779987835105
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 33, internal_epoch   1,  Average loss: 0.1712, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 33, internal_epoch   2,  Average loss: 0.1300, Accuracy: 136/527 (25.8065%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 33, internal_epoch   3,  Average loss: 0.0798, Accuracy: 141/527 (26.7552%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 33, internal_epoch   4,  Average loss: 0.0465, Accuracy: 139/527 (26.3757%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 33, internal_epoch   5,  Average loss: 0.0354, Accuracy: 170/527 (32.2581%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 33, internal_epoch   6,  Average loss: 0.0309, Accuracy: 178/527 (33.7761%), train_poison_data_count: 45
Global model norm: 126.50932910881514.
Norm before scaling: 124.54317304904754. Distance: 9.778230926339802
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 955.6256785478297, distance: 977.8230923843024
Total norm for 4 adversaries is: 955.6256785478297. distance: 977.8230923843024
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   1,  Average loss: 0.1563, Accuracy: 59/496 (11.8952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   2,  Average loss: 0.1318, Accuracy: 56/496 (11.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   3,  Average loss: 0.0910, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   4,  Average loss: 0.0491, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   5,  Average loss: 0.0437, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 77, internal_epoch   6,  Average loss: 0.0347, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Global model norm: 126.50932910881514.
Norm before scaling: 124.74834041982282. Distance: 8.7359672282516
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 852.8176461002669, distance: 873.5966961361519
Total norm for 4 adversaries is: 852.8176461002669. distance: 873.5966961361519
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   1,  Average loss: 0.1134, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   2,  Average loss: 0.0999, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   3,  Average loss: 0.0858, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   4,  Average loss: 0.0595, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   5,  Average loss: 0.0384, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 256, local model 11, internal_epoch   6,  Average loss: 0.0345, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Global model norm: 126.50932910881514.
Norm before scaling: 124.55608676415618. Distance: 8.653046052902546
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 841.564020143447, distance: 865.3046428859607
Total norm for 4 adversaries is: 841.564020143447. distance: 865.3046428859607
___Test Local_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 256, local model 14, internal_epoch   1,  Average loss: 0.2564, Accuracy: 41/318 (12.8931%)
___Train Local_ResNet_18,  epoch 256, local model 14, internal_epoch   2,  Average loss: 0.1037, Accuracy: 34/318 (10.6918%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 45, internal_epoch   1,  Average loss: 0.2438, Accuracy: 78/529 (14.7448%)
___Train Local_ResNet_18,  epoch 256, local model 45, internal_epoch   2,  Average loss: 0.0615, Accuracy: 107/529 (20.2268%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 65, internal_epoch   1,  Average loss: 0.3461, Accuracy: 47/314 (14.9682%)
___Train Local_ResNet_18,  epoch 256, local model 65, internal_epoch   2,  Average loss: 0.1511, Accuracy: 43/314 (13.6943%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 37, internal_epoch   1,  Average loss: 0.1593, Accuracy: 185/725 (25.5172%)
___Train Local_ResNet_18,  epoch 256, local model 37, internal_epoch   2,  Average loss: 0.0368, Accuracy: 278/725 (38.3448%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 38, internal_epoch   1,  Average loss: 0.2102, Accuracy: 195/756 (25.7937%)
___Train Local_ResNet_18,  epoch 256, local model 38, internal_epoch   2,  Average loss: 0.0492, Accuracy: 172/756 (22.7513%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 256, local model 24, internal_epoch   1,  Average loss: 0.2928, Accuracy: 42/320 (13.1250%)
___Train Local_ResNet_18,  epoch 256, local model 24, internal_epoch   2,  Average loss: 0.1035, Accuracy: 37/320 (11.5625%)
___Test Local_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 170.9759225845337
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 256: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 256: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 220.14865946769714 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:257 choose agents : [17, 33, 77, 11, 99, 56, 20, 0, 86, 37]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 17, internal_epoch   1,  Average loss: 0.3226, Accuracy: 128/526 (24.3346%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 17, internal_epoch   2,  Average loss: 0.0938, Accuracy: 156/526 (29.6578%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 17, internal_epoch   3,  Average loss: 0.0867, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 17, internal_epoch   4,  Average loss: 0.0789, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 17, internal_epoch   5,  Average loss: 0.0719, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 17, internal_epoch   6,  Average loss: 0.0636, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Global model norm: 122.18210106358664.
Norm before scaling: 122.02966948400295. Distance: 27.896808663245874
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2777.7153381871226, distance: 2789.6809853458153
Total norm for 4 adversaries is: 2777.7153381871226. distance: 2789.6809853458153
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 33, internal_epoch   1,  Average loss: 0.2709, Accuracy: 112/527 (21.2524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 33, internal_epoch   2,  Average loss: 0.0895, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 33, internal_epoch   3,  Average loss: 0.0833, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 33, internal_epoch   4,  Average loss: 0.0770, Accuracy: 190/527 (36.0531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 33, internal_epoch   5,  Average loss: 0.0688, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 33, internal_epoch   6,  Average loss: 0.0649, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Global model norm: 122.18210106358664.
Norm before scaling: 121.1288940937504. Distance: 22.429143938249947
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2229.27353637906, distance: 2242.914398723233
Total norm for 4 adversaries is: 2229.27353637906. distance: 2242.914398723233
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   1,  Average loss: 0.2729, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   2,  Average loss: 0.0797, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   3,  Average loss: 0.0715, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   4,  Average loss: 0.0659, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   5,  Average loss: 0.0617, Accuracy: 127/496 (25.6048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 77, internal_epoch   6,  Average loss: 0.0558, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 122.18210106358664.
Norm before scaling: 122.02557205100494. Distance: 25.469527643419426
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2536.3763522001227, distance: 2546.952983468678
Total norm for 4 adversaries is: 2536.3763522001227. distance: 2546.952983468678
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   1,  Average loss: 0.3386, Accuracy: 92/546 (16.8498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   2,  Average loss: 0.1193, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   3,  Average loss: 0.1128, Accuracy: 94/546 (17.2161%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   4,  Average loss: 0.1027, Accuracy: 113/546 (20.6960%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   5,  Average loss: 0.0930, Accuracy: 118/546 (21.6117%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 257, local model 11, internal_epoch   6,  Average loss: 0.0859, Accuracy: 115/546 (21.0623%), train_poison_data_count: 45
Global model norm: 122.18210106358664.
Norm before scaling: 120.95887650225386. Distance: 24.692727146384243
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2453.878766361533, distance: 2469.272767435789
Total norm for 4 adversaries is: 2453.878766361533. distance: 2469.272767435789
___Test Local_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 257, local model 99, internal_epoch   1,  Average loss: 0.3547, Accuracy: 36/391 (9.2072%)
___Train Local_ResNet_18,  epoch 257, local model 99, internal_epoch   2,  Average loss: 0.1242, Accuracy: 141/391 (36.0614%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 56, internal_epoch   1,  Average loss: 0.1339, Accuracy: 109/743 (14.6703%)
___Train Local_ResNet_18,  epoch 257, local model 56, internal_epoch   2,  Average loss: 0.0405, Accuracy: 163/743 (21.9381%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 20, internal_epoch   1,  Average loss: 0.2648, Accuracy: 101/362 (27.9006%)
___Train Local_ResNet_18,  epoch 257, local model 20, internal_epoch   2,  Average loss: 0.0608, Accuracy: 165/362 (45.5801%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 0, internal_epoch   1,  Average loss: 0.3331, Accuracy: 63/367 (17.1662%)
___Train Local_ResNet_18,  epoch 257, local model 0, internal_epoch   2,  Average loss: 0.0996, Accuracy: 94/367 (25.6131%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 86, internal_epoch   1,  Average loss: 0.4516, Accuracy: 46/212 (21.6981%)
___Train Local_ResNet_18,  epoch 257, local model 86, internal_epoch   2,  Average loss: 0.1648, Accuracy: 20/212 (9.4340%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 257, local model 37, internal_epoch   1,  Average loss: 0.2081, Accuracy: 216/725 (29.7931%)
___Train Local_ResNet_18,  epoch 257, local model 37, internal_epoch   2,  Average loss: 0.1281, Accuracy: 218/725 (30.0690%)
___Test Local_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 183.32393288612366
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 257: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 257: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 231.82503080368042 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:258 choose agents : [17, 33, 77, 11, 20, 36, 50, 78, 63, 37]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 17, internal_epoch   1,  Average loss: 0.0916, Accuracy: 71/526 (13.4981%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 17, internal_epoch   2,  Average loss: 0.0631, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 17, internal_epoch   3,  Average loss: 0.0521, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 17, internal_epoch   4,  Average loss: 0.0472, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 17, internal_epoch   5,  Average loss: 0.0426, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 17, internal_epoch   6,  Average loss: 0.0391, Accuracy: 191/526 (36.3118%), train_poison_data_count: 45
Global model norm: 138.36211265642774.
Norm before scaling: 136.58482369026217. Distance: 6.842326534415355
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 658.612699163932, distance: 684.232690683513
Total norm for 4 adversaries is: 658.612699163932. distance: 684.232690683513
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 33, internal_epoch   1,  Average loss: 0.1152, Accuracy: 26/527 (4.9336%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 33, internal_epoch   2,  Average loss: 0.0822, Accuracy: 38/527 (7.2106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 33, internal_epoch   3,  Average loss: 0.0601, Accuracy: 73/527 (13.8520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 33, internal_epoch   4,  Average loss: 0.0454, Accuracy: 123/527 (23.3397%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 33, internal_epoch   5,  Average loss: 0.0401, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 33, internal_epoch   6,  Average loss: 0.0362, Accuracy: 181/527 (34.3454%), train_poison_data_count: 45
Global model norm: 138.36211265642774.
Norm before scaling: 136.57805975430315. Distance: 9.309962803882085
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 910.043920643394, distance: 930.9963077262981
Total norm for 4 adversaries is: 910.043920643394. distance: 930.9963077262981
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   1,  Average loss: 0.0814, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   2,  Average loss: 0.0626, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   3,  Average loss: 0.0545, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   4,  Average loss: 0.0461, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   5,  Average loss: 0.0414, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 77, internal_epoch   6,  Average loss: 0.0384, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Global model norm: 138.36211265642774.
Norm before scaling: 136.8122287571546. Distance: 7.1547900713840775
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 695.1880141371829, distance: 715.4790134937572
Total norm for 4 adversaries is: 695.1880141371829. distance: 715.4790134937572
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   1,  Average loss: 0.0938, Accuracy: 15/546 (2.7473%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   2,  Average loss: 0.0670, Accuracy: 42/546 (7.6923%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   3,  Average loss: 0.0498, Accuracy: 164/546 (30.0366%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   4,  Average loss: 0.0443, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   5,  Average loss: 0.0400, Accuracy: 170/546 (31.1355%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 258, local model 11, internal_epoch   6,  Average loss: 0.0367, Accuracy: 173/546 (31.6850%), train_poison_data_count: 45
Global model norm: 138.36211265642774.
Norm before scaling: 136.62638665810496. Distance: 8.04103436397197
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 782.0039162306031, distance: 804.103460383053
Total norm for 4 adversaries is: 782.0039162306031. distance: 804.103460383053
___Test Local_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 258, local model 20, internal_epoch   1,  Average loss: 0.1109, Accuracy: 8/362 (2.2099%)
___Train Local_ResNet_18,  epoch 258, local model 20, internal_epoch   2,  Average loss: 0.0665, Accuracy: 11/362 (3.0387%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 36, internal_epoch   1,  Average loss: 0.0873, Accuracy: 48/849 (5.6537%)
___Train Local_ResNet_18,  epoch 258, local model 36, internal_epoch   2,  Average loss: 0.0473, Accuracy: 200/849 (23.5571%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 50, internal_epoch   1,  Average loss: 0.0949, Accuracy: 88/401 (21.9451%)
___Train Local_ResNet_18,  epoch 258, local model 50, internal_epoch   2,  Average loss: 0.0647, Accuracy: 140/401 (34.9127%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 78, internal_epoch   1,  Average loss: 0.0649, Accuracy: 51/255 (20.0000%)
___Train Local_ResNet_18,  epoch 258, local model 78, internal_epoch   2,  Average loss: 0.0538, Accuracy: 89/255 (34.9020%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 63, internal_epoch   1,  Average loss: 0.0607, Accuracy: 49/752 (6.5160%)
___Train Local_ResNet_18,  epoch 258, local model 63, internal_epoch   2,  Average loss: 0.0400, Accuracy: 127/752 (16.8883%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 258, local model 37, internal_epoch   1,  Average loss: 0.0584, Accuracy: 211/725 (29.1034%)
___Train Local_ResNet_18,  epoch 258, local model 37, internal_epoch   2,  Average loss: 0.0371, Accuracy: 360/725 (49.6552%)
___Test Local_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 175.96998810768127
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 258: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 258: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 216.9246175289154 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:259 choose agents : [17, 33, 77, 11, 83, 4, 1, 0, 37, 91]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 17, internal_epoch   1,  Average loss: 0.1372, Accuracy: 94/526 (17.8707%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 17, internal_epoch   2,  Average loss: 0.0802, Accuracy: 39/526 (7.4144%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 17, internal_epoch   3,  Average loss: 0.0551, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 17, internal_epoch   4,  Average loss: 0.0423, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 17, internal_epoch   5,  Average loss: 0.0377, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 17, internal_epoch   6,  Average loss: 0.0353, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Global model norm: 133.75683393756.
Norm before scaling: 132.04765800412744. Distance: 10.707766585931404
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1052.4053995490522, distance: 1070.7765873421029
Total norm for 4 adversaries is: 1052.4053995490522. distance: 1070.7765873421029
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 33, internal_epoch   1,  Average loss: 0.1006, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 33, internal_epoch   2,  Average loss: 0.0595, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 33, internal_epoch   3,  Average loss: 0.0483, Accuracy: 183/527 (34.7249%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 33, internal_epoch   4,  Average loss: 0.0450, Accuracy: 149/527 (28.2732%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 33, internal_epoch   5,  Average loss: 0.0415, Accuracy: 187/527 (35.4839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 33, internal_epoch   6,  Average loss: 0.0402, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Global model norm: 133.75683393756.
Norm before scaling: 132.08329225814293. Distance: 9.38106777921483
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 919.0458367241538, distance: 938.1067703092223
Total norm for 4 adversaries is: 919.0458367241538. distance: 938.1067703092223
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   1,  Average loss: 0.1372, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   2,  Average loss: 0.0833, Accuracy: 112/496 (22.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   3,  Average loss: 0.0722, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   4,  Average loss: 0.0620, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   5,  Average loss: 0.0554, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 77, internal_epoch   6,  Average loss: 0.0479, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Global model norm: 133.75683393756.
Norm before scaling: 132.10490918678988. Distance: 10.87788756170865
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1070.244948598217, distance: 1087.7887547681305
Total norm for 4 adversaries is: 1070.244948598217. distance: 1087.7887547681305
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   1,  Average loss: 0.1092, Accuracy: 59/546 (10.8059%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   2,  Average loss: 0.0575, Accuracy: 81/546 (14.8352%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   3,  Average loss: 0.0466, Accuracy: 164/546 (30.0366%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   4,  Average loss: 0.0440, Accuracy: 167/546 (30.5861%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   5,  Average loss: 0.0394, Accuracy: 173/546 (31.6850%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 259, local model 11, internal_epoch   6,  Average loss: 0.0381, Accuracy: 165/546 (30.2198%), train_poison_data_count: 45
Global model norm: 133.75683393756.
Norm before scaling: 132.0975018688847. Distance: 9.946550961896172
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 976.3311425945604, distance: 994.6551223916761
Total norm for 4 adversaries is: 976.3311425945604. distance: 994.6551223916761
___Test Local_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 259, local model 83, internal_epoch   1,  Average loss: 0.1645, Accuracy: 32/366 (8.7432%)
___Train Local_ResNet_18,  epoch 259, local model 83, internal_epoch   2,  Average loss: 0.0911, Accuracy: 15/366 (4.0984%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 4, internal_epoch   1,  Average loss: 0.0861, Accuracy: 102/557 (18.3124%)
___Train Local_ResNet_18,  epoch 259, local model 4, internal_epoch   2,  Average loss: 0.0439, Accuracy: 217/557 (38.9587%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 1, internal_epoch   1,  Average loss: 0.1727, Accuracy: 14/641 (2.1841%)
___Train Local_ResNet_18,  epoch 259, local model 1, internal_epoch   2,  Average loss: 0.0718, Accuracy: 122/641 (19.0328%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 0, internal_epoch   1,  Average loss: 0.1066, Accuracy: 109/367 (29.7003%)
___Train Local_ResNet_18,  epoch 259, local model 0, internal_epoch   2,  Average loss: 0.0537, Accuracy: 97/367 (26.4305%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 37, internal_epoch   1,  Average loss: 0.1037, Accuracy: 119/725 (16.4138%)
___Train Local_ResNet_18,  epoch 259, local model 37, internal_epoch   2,  Average loss: 0.0419, Accuracy: 339/725 (46.7586%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 259, local model 91, internal_epoch   1,  Average loss: 0.1893, Accuracy: 22/234 (9.4017%)
___Train Local_ResNet_18,  epoch 259, local model 91, internal_epoch   2,  Average loss: 0.1173, Accuracy: 27/234 (11.5385%)
___Test Local_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 188.20241951942444
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 259: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 259: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.4831142425537 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:260 choose agents : [17, 33, 77, 11, 21, 13, 70, 54, 57, 41]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 17, internal_epoch   1,  Average loss: 0.0975, Accuracy: 111/526 (21.1027%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 17, internal_epoch   2,  Average loss: 0.0551, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 17, internal_epoch   3,  Average loss: 0.0486, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 17, internal_epoch   4,  Average loss: 0.0450, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 17, internal_epoch   5,  Average loss: 0.0430, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 17, internal_epoch   6,  Average loss: 0.0367, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Global model norm: 130.39546220056891.
Norm before scaling: 128.97257763280533. Distance: 11.468121337291297
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1132.3091450659576, distance: 1146.8121031799412
Total norm for 4 adversaries is: 1132.3091450659576. distance: 1146.8121031799412
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 33, internal_epoch   1,  Average loss: 0.1466, Accuracy: 47/527 (8.9184%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 33, internal_epoch   2,  Average loss: 0.0940, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 33, internal_epoch   3,  Average loss: 0.0623, Accuracy: 116/527 (22.0114%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 33, internal_epoch   4,  Average loss: 0.0383, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 33, internal_epoch   5,  Average loss: 0.0304, Accuracy: 180/527 (34.1556%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 33, internal_epoch   6,  Average loss: 0.0313, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Global model norm: 130.39546220056891.
Norm before scaling: 129.13797732464297. Distance: 14.6196519251352
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1449.2536009960438, distance: 1461.9652013642458
Total norm for 4 adversaries is: 1449.2536009960438. distance: 1461.9652013642458
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   1,  Average loss: 0.1054, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   2,  Average loss: 0.0784, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   3,  Average loss: 0.0654, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   4,  Average loss: 0.0504, Accuracy: 125/496 (25.2016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   5,  Average loss: 0.0409, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 77, internal_epoch   6,  Average loss: 0.0356, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Global model norm: 130.39546220056891.
Norm before scaling: 129.12149075579944. Distance: 11.36284684091439
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1123.4646189355497, distance: 1136.284735442662
Total norm for 4 adversaries is: 1123.4646189355497. distance: 1136.284735442662
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   1,  Average loss: 0.0856, Accuracy: 61/546 (11.1722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   2,  Average loss: 0.0628, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   3,  Average loss: 0.0556, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   4,  Average loss: 0.0488, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   5,  Average loss: 0.0383, Accuracy: 124/546 (22.7106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 260, local model 11, internal_epoch   6,  Average loss: 0.0324, Accuracy: 161/546 (29.4872%), train_poison_data_count: 45
Global model norm: 130.39546220056891.
Norm before scaling: 128.82052073524622. Distance: 9.13105426763932
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 895.3222185336406, distance: 913.1054840488036
Total norm for 4 adversaries is: 895.3222185336406. distance: 913.1054840488036
___Test Local_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 260, local model 21, internal_epoch   1,  Average loss: 0.1540, Accuracy: 10/262 (3.8168%)
___Train Local_ResNet_18,  epoch 260, local model 21, internal_epoch   2,  Average loss: 0.0464, Accuracy: 87/262 (33.2061%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 13, internal_epoch   1,  Average loss: 0.1116, Accuracy: 247/620 (39.8387%)
___Train Local_ResNet_18,  epoch 260, local model 13, internal_epoch   2,  Average loss: 0.0522, Accuracy: 330/620 (53.2258%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 70, internal_epoch   1,  Average loss: 0.1261, Accuracy: 46/610 (7.5410%)
___Train Local_ResNet_18,  epoch 260, local model 70, internal_epoch   2,  Average loss: 0.0423, Accuracy: 213/610 (34.9180%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 54, internal_epoch   1,  Average loss: 0.0931, Accuracy: 118/440 (26.8182%)
___Train Local_ResNet_18,  epoch 260, local model 54, internal_epoch   2,  Average loss: 0.0317, Accuracy: 178/440 (40.4545%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 57, internal_epoch   1,  Average loss: 0.1800, Accuracy: 94/290 (32.4138%)
___Train Local_ResNet_18,  epoch 260, local model 57, internal_epoch   2,  Average loss: 0.0855, Accuracy: 11/290 (3.7931%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 260, local model 41, internal_epoch   1,  Average loss: 0.2416, Accuracy: 67/513 (13.0604%)
___Train Local_ResNet_18,  epoch 260, local model 41, internal_epoch   2,  Average loss: 0.0527, Accuracy: 218/513 (42.4951%)
___Test Local_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 190.509752035141
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 260: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 260: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 237.95077109336853 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:261 choose agents : [17, 33, 77, 11, 28, 85, 59, 89, 31, 42]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 17, internal_epoch   1,  Average loss: 0.4049, Accuracy: 109/526 (20.7224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 17, internal_epoch   2,  Average loss: 0.0561, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 17, internal_epoch   3,  Average loss: 0.0447, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 17, internal_epoch   4,  Average loss: 0.0385, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 17, internal_epoch   5,  Average loss: 0.0330, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 17, internal_epoch   6,  Average loss: 0.0314, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Global model norm: 130.1823540749667.
Norm before scaling: 130.12597562074222. Distance: 30.083173277650165
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2995.822758442161, distance: 3008.3176361547994
Total norm for 4 adversaries is: 2995.822758442161. distance: 3008.3176361547994
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 33, internal_epoch   1,  Average loss: 0.3265, Accuracy: 125/527 (23.7192%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 33, internal_epoch   2,  Average loss: 0.0430, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 33, internal_epoch   3,  Average loss: 0.0350, Accuracy: 114/527 (21.6319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 33, internal_epoch   4,  Average loss: 0.0319, Accuracy: 170/527 (32.2581%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 33, internal_epoch   5,  Average loss: 0.0325, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 33, internal_epoch   6,  Average loss: 0.0327, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Global model norm: 130.1823540749667.
Norm before scaling: 129.407498937465. Distance: 24.35502486814836
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2422.640811181055, distance: 2435.5026175309276
Total norm for 4 adversaries is: 2422.640811181055. distance: 2435.5026175309276
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   1,  Average loss: 0.3984, Accuracy: 64/496 (12.9032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   2,  Average loss: 0.0538, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   3,  Average loss: 0.0418, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   4,  Average loss: 0.0363, Accuracy: 110/496 (22.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   5,  Average loss: 0.0329, Accuracy: 112/496 (22.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 77, internal_epoch   6,  Average loss: 0.0318, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 130.1823540749667.
Norm before scaling: 129.89624014237287. Distance: 27.040080521142013
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2692.220273306031, distance: 2704.0080436270896
Total norm for 4 adversaries is: 2692.220273306031. distance: 2704.0080436270896
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   1,  Average loss: 0.3813, Accuracy: 77/546 (14.1026%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   2,  Average loss: 0.0515, Accuracy: 93/546 (17.0330%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   3,  Average loss: 0.0405, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   4,  Average loss: 0.0392, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   5,  Average loss: 0.0335, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 261, local model 11, internal_epoch   6,  Average loss: 0.0322, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Global model norm: 130.1823540749667.
Norm before scaling: 129.94379794742034. Distance: 28.885806749041453
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2875.9699233476, distance: 2888.580966495487
Total norm for 4 adversaries is: 2875.9699233476. distance: 2888.580966495487
___Test Local_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 261, local model 28, internal_epoch   1,  Average loss: 0.3816, Accuracy: 41/423 (9.6927%)
___Train Local_ResNet_18,  epoch 261, local model 28, internal_epoch   2,  Average loss: 0.0673, Accuracy: 90/423 (21.2766%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 85, internal_epoch   1,  Average loss: 0.4064, Accuracy: 58/364 (15.9341%)
___Train Local_ResNet_18,  epoch 261, local model 85, internal_epoch   2,  Average loss: 0.0693, Accuracy: 80/364 (21.9780%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 59, internal_epoch   1,  Average loss: 0.2618, Accuracy: 72/642 (11.2150%)
___Train Local_ResNet_18,  epoch 261, local model 59, internal_epoch   2,  Average loss: 0.0444, Accuracy: 134/642 (20.8723%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 89, internal_epoch   1,  Average loss: 0.4089, Accuracy: 51/413 (12.3487%)
___Train Local_ResNet_18,  epoch 261, local model 89, internal_epoch   2,  Average loss: 0.0646, Accuracy: 101/413 (24.4552%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 31, internal_epoch   1,  Average loss: 0.2530, Accuracy: 138/706 (19.5467%)
___Train Local_ResNet_18,  epoch 261, local model 31, internal_epoch   2,  Average loss: 0.0442, Accuracy: 216/706 (30.5949%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 261, local model 42, internal_epoch   1,  Average loss: 0.8090, Accuracy: 3/198 (1.5152%)
___Train Local_ResNet_18,  epoch 261, local model 42, internal_epoch   2,  Average loss: 0.0748, Accuracy: 58/198 (29.2929%)
___Test Local_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.99985694885254
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 261: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 261: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 213.12461256980896 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:262 choose agents : [17, 33, 77, 11, 82, 68, 37, 47, 73, 15]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 17, internal_epoch   1,  Average loss: 0.0990, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 17, internal_epoch   2,  Average loss: 0.0743, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 17, internal_epoch   3,  Average loss: 0.0628, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 17, internal_epoch   4,  Average loss: 0.0511, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 17, internal_epoch   5,  Average loss: 0.0455, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 17, internal_epoch   6,  Average loss: 0.0380, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Global model norm: 160.12447550655708.
Norm before scaling: 158.07879759790686. Distance: 9.666112511196088
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 941.0310834398617, distance: 966.6112196741769
Total norm for 4 adversaries is: 941.0310834398617. distance: 966.6112196741769
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 33, internal_epoch   1,  Average loss: 0.1031, Accuracy: 43/527 (8.1594%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 33, internal_epoch   2,  Average loss: 0.0689, Accuracy: 44/527 (8.3491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 33, internal_epoch   3,  Average loss: 0.0532, Accuracy: 128/527 (24.2884%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 33, internal_epoch   4,  Average loss: 0.0478, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 33, internal_epoch   5,  Average loss: 0.0424, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 33, internal_epoch   6,  Average loss: 0.0397, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Global model norm: 160.12447550655708.
Norm before scaling: 158.1460151549036. Distance: 9.705990575503245
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 946.2098406273315, distance: 970.5990096327113
Total norm for 4 adversaries is: 946.2098406273315. distance: 970.5990096327113
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   1,  Average loss: 0.0900, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   2,  Average loss: 0.0668, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   3,  Average loss: 0.0529, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   4,  Average loss: 0.0435, Accuracy: 64/496 (12.9032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   5,  Average loss: 0.0382, Accuracy: 121/496 (24.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 77, internal_epoch   6,  Average loss: 0.0362, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Global model norm: 160.12447550655708.
Norm before scaling: 158.4149392221264. Distance: 8.715811066609241
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 850.4359911245525, distance: 871.5811063808118
Total norm for 4 adversaries is: 850.4359911245525. distance: 871.5811063808118
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   1,  Average loss: 0.0801, Accuracy: 84/546 (15.3846%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   2,  Average loss: 0.0599, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   3,  Average loss: 0.0495, Accuracy: 162/546 (29.6703%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   4,  Average loss: 0.0466, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   5,  Average loss: 0.0407, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 262, local model 11, internal_epoch   6,  Average loss: 0.0396, Accuracy: 176/546 (32.2344%), train_poison_data_count: 45
Global model norm: 160.12447550655708.
Norm before scaling: 158.126321634793. Distance: 7.729975271641903
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 744.0419595022851, distance: 772.9975743817052
Total norm for 4 adversaries is: 744.0419595022851. distance: 772.9975743817052
___Test Local_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 262, local model 82, internal_epoch   1,  Average loss: 0.1970, Accuracy: 71/601 (11.8136%)
___Train Local_ResNet_18,  epoch 262, local model 82, internal_epoch   2,  Average loss: 0.0700, Accuracy: 86/601 (14.3095%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 68, internal_epoch   1,  Average loss: 0.2083, Accuracy: 32/416 (7.6923%)
___Train Local_ResNet_18,  epoch 262, local model 68, internal_epoch   2,  Average loss: 0.0676, Accuracy: 34/416 (8.1731%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 37, internal_epoch   1,  Average loss: 0.1364, Accuracy: 52/725 (7.1724%)
___Train Local_ResNet_18,  epoch 262, local model 37, internal_epoch   2,  Average loss: 0.0380, Accuracy: 316/725 (43.5862%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 47, internal_epoch   1,  Average loss: 0.1414, Accuracy: 243/654 (37.1560%)
___Train Local_ResNet_18,  epoch 262, local model 47, internal_epoch   2,  Average loss: 0.0612, Accuracy: 261/654 (39.9083%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 73, internal_epoch   1,  Average loss: 0.1628, Accuracy: 29/500 (5.8000%)
___Train Local_ResNet_18,  epoch 262, local model 73, internal_epoch   2,  Average loss: 0.0383, Accuracy: 217/500 (43.4000%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 262, local model 15, internal_epoch   1,  Average loss: 0.3170, Accuracy: 8/341 (2.3460%)
___Train Local_ResNet_18,  epoch 262, local model 15, internal_epoch   2,  Average loss: 0.1548, Accuracy: 15/341 (4.3988%)
___Test Local_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 165.09641027450562
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 262: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 262: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 204.96683740615845 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:263 choose agents : [17, 33, 77, 11, 90, 9, 71, 78, 69, 28]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 17, internal_epoch   1,  Average loss: 0.1399, Accuracy: 93/526 (17.6806%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 17, internal_epoch   2,  Average loss: 0.1347, Accuracy: 189/526 (35.9316%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 17, internal_epoch   3,  Average loss: 0.1209, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 17, internal_epoch   4,  Average loss: 0.1077, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 17, internal_epoch   5,  Average loss: 0.1021, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 17, internal_epoch   6,  Average loss: 0.0883, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Global model norm: 154.89310830375896.
Norm before scaling: 152.388817051974. Distance: 9.345492707597279
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 900.937150971143, distance: 934.5492563262784
Total norm for 4 adversaries is: 900.937150971143. distance: 934.5492563262784
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 33, internal_epoch   1,  Average loss: 0.0712, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 33, internal_epoch   2,  Average loss: 0.0645, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 33, internal_epoch   3,  Average loss: 0.0581, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 33, internal_epoch   4,  Average loss: 0.0522, Accuracy: 204/527 (38.7097%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 33, internal_epoch   5,  Average loss: 0.0473, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 33, internal_epoch   6,  Average loss: 0.0406, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Global model norm: 154.89310830375896.
Norm before scaling: 152.88613384435817. Distance: 7.276844181558086
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 697.4602587244667, distance: 727.6844267950222
Total norm for 4 adversaries is: 697.4602587244667. distance: 727.6844267950222
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   1,  Average loss: 0.0896, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   2,  Average loss: 0.0836, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   3,  Average loss: 0.0751, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   4,  Average loss: 0.0683, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   5,  Average loss: 0.0630, Accuracy: 144/496 (29.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 77, internal_epoch   6,  Average loss: 0.0600, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Global model norm: 154.89310830375896.
Norm before scaling: 152.99503413101354. Distance: 6.5845457803515135
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 628.3145858166911, distance: 658.4545827162266
Total norm for 4 adversaries is: 628.3145858166911. distance: 658.4545827162266
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   1,  Average loss: 0.1300, Accuracy: 95/546 (17.3993%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   2,  Average loss: 0.1148, Accuracy: 98/546 (17.9487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   3,  Average loss: 0.1055, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   4,  Average loss: 0.0910, Accuracy: 98/546 (17.9487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   5,  Average loss: 0.0782, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 263, local model 11, internal_epoch   6,  Average loss: 0.0698, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Global model norm: 154.89310830375896.
Norm before scaling: 152.54657972034312. Distance: 10.15905835571411
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 986.7087652899411, distance: 1015.9058150242079
Total norm for 4 adversaries is: 986.7087652899411. distance: 1015.9058150242079
___Test Local_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 263, local model 90, internal_epoch   1,  Average loss: 0.1668, Accuracy: 17/578 (2.9412%)
___Train Local_ResNet_18,  epoch 263, local model 90, internal_epoch   2,  Average loss: 0.0760, Accuracy: 258/578 (44.6367%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 9, internal_epoch   1,  Average loss: 0.2568, Accuracy: 10/368 (2.7174%)
___Train Local_ResNet_18,  epoch 263, local model 9, internal_epoch   2,  Average loss: 0.1795, Accuracy: 44/368 (11.9565%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 71, internal_epoch   1,  Average loss: 0.1126, Accuracy: 226/1166 (19.3825%)
___Train Local_ResNet_18,  epoch 263, local model 71, internal_epoch   2,  Average loss: 0.0518, Accuracy: 399/1166 (34.2196%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 78, internal_epoch   1,  Average loss: 0.2806, Accuracy: 52/255 (20.3922%)
___Train Local_ResNet_18,  epoch 263, local model 78, internal_epoch   2,  Average loss: 0.1909, Accuracy: 55/255 (21.5686%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 69, internal_epoch   1,  Average loss: 0.2076, Accuracy: 6/216 (2.7778%)
___Train Local_ResNet_18,  epoch 263, local model 69, internal_epoch   2,  Average loss: 0.1529, Accuracy: 7/216 (3.2407%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 263, local model 28, internal_epoch   1,  Average loss: 0.1993, Accuracy: 69/423 (16.3121%)
___Train Local_ResNet_18,  epoch 263, local model 28, internal_epoch   2,  Average loss: 0.1305, Accuracy: 68/423 (16.0757%)
___Test Local_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 169.68516612052917
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 263: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 263: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 216.03163361549377 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:264 choose agents : [17, 33, 77, 11, 87, 46, 26, 67, 13, 69]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 17, internal_epoch   1,  Average loss: 0.1849, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 17, internal_epoch   2,  Average loss: 0.1445, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 17, internal_epoch   3,  Average loss: 0.1155, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 17, internal_epoch   4,  Average loss: 0.0947, Accuracy: 67/526 (12.7376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 17, internal_epoch   5,  Average loss: 0.0747, Accuracy: 84/526 (15.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 17, internal_epoch   6,  Average loss: 0.0589, Accuracy: 97/526 (18.4411%), train_poison_data_count: 45
Global model norm: 148.00301543591942.
Norm before scaling: 145.65017218063974. Distance: 12.954527333808162
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1270.522923838842, distance: 1295.4527200944078
Total norm for 4 adversaries is: 1270.522923838842. distance: 1295.4527200944078
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 33, internal_epoch   1,  Average loss: 0.1703, Accuracy: 118/527 (22.3909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 33, internal_epoch   2,  Average loss: 0.1390, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 33, internal_epoch   3,  Average loss: 0.1147, Accuracy: 111/527 (21.0626%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 33, internal_epoch   4,  Average loss: 0.0983, Accuracy: 66/527 (12.5237%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 33, internal_epoch   5,  Average loss: 0.0814, Accuracy: 87/527 (16.5085%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 33, internal_epoch   6,  Average loss: 0.0718, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Global model norm: 148.00301543591942.
Norm before scaling: 145.6045318233605. Distance: 11.547633495892946
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1127.664455855553, distance: 1154.763395678959
Total norm for 4 adversaries is: 1127.664455855553. distance: 1154.763395678959
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   1,  Average loss: 0.1520, Accuracy: 49/496 (9.8790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   2,  Average loss: 0.1236, Accuracy: 50/496 (10.0806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   3,  Average loss: 0.1026, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   4,  Average loss: 0.0909, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   5,  Average loss: 0.0823, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 77, internal_epoch   6,  Average loss: 0.0746, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Global model norm: 148.00301543591942.
Norm before scaling: 145.92532069092738. Distance: 9.569895159905464
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 931.4002563345149, distance: 956.9895179676735
Total norm for 4 adversaries is: 931.4002563345149. distance: 956.9895179676735
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   1,  Average loss: 0.1444, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   2,  Average loss: 0.1198, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   3,  Average loss: 0.1022, Accuracy: 176/546 (32.2344%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   4,  Average loss: 0.0879, Accuracy: 99/546 (18.1319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   5,  Average loss: 0.0780, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 264, local model 11, internal_epoch   6,  Average loss: 0.0686, Accuracy: 175/546 (32.0513%), train_poison_data_count: 45
Global model norm: 148.00301543591942.
Norm before scaling: 145.64923349866967. Distance: 9.975809593139507
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 968.5048399466056, distance: 997.580980422141
Total norm for 4 adversaries is: 968.5048399466056. distance: 997.580980422141
___Test Local_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 264, local model 87, internal_epoch   1,  Average loss: 0.1656, Accuracy: 27/397 (6.8010%)
___Train Local_ResNet_18,  epoch 264, local model 87, internal_epoch   2,  Average loss: 0.0954, Accuracy: 95/397 (23.9295%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 46, internal_epoch   1,  Average loss: 0.1742, Accuracy: 83/601 (13.8103%)
___Train Local_ResNet_18,  epoch 264, local model 46, internal_epoch   2,  Average loss: 0.1040, Accuracy: 103/601 (17.1381%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 26, internal_epoch   1,  Average loss: 0.1717, Accuracy: 38/468 (8.1197%)
___Train Local_ResNet_18,  epoch 264, local model 26, internal_epoch   2,  Average loss: 0.0995, Accuracy: 71/468 (15.1709%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 67, internal_epoch   1,  Average loss: 0.1493, Accuracy: 221/842 (26.2470%)
___Train Local_ResNet_18,  epoch 264, local model 67, internal_epoch   2,  Average loss: 0.0463, Accuracy: 155/842 (18.4086%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 13, internal_epoch   1,  Average loss: 0.1999, Accuracy: 10/620 (1.6129%)
___Train Local_ResNet_18,  epoch 264, local model 13, internal_epoch   2,  Average loss: 0.1001, Accuracy: 14/620 (2.2581%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 264, local model 69, internal_epoch   1,  Average loss: 0.1885, Accuracy: 11/216 (5.0926%)
___Train Local_ResNet_18,  epoch 264, local model 69, internal_epoch   2,  Average loss: 0.1288, Accuracy: 11/216 (5.0926%)
___Test Local_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.44127082824707
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 264: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 264: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 211.14787554740906 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:265 choose agents : [17, 33, 77, 11, 54, 34, 78, 91, 57, 30]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 17, internal_epoch   1,  Average loss: 0.0705, Accuracy: 86/526 (16.3498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 17, internal_epoch   2,  Average loss: 0.0607, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 17, internal_epoch   3,  Average loss: 0.0644, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 17, internal_epoch   4,  Average loss: 0.0616, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 17, internal_epoch   5,  Average loss: 0.0656, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 17, internal_epoch   6,  Average loss: 0.0632, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Global model norm: 142.9123898473292.
Norm before scaling: 140.95060221802885. Distance: 4.700342109079169
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 428.3210682420373, distance: 470.0342573951392
Total norm for 4 adversaries is: 428.3210682420373. distance: 470.0342573951392
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 33, internal_epoch   1,  Average loss: 0.1314, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 33, internal_epoch   2,  Average loss: 0.1254, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 33, internal_epoch   3,  Average loss: 0.1143, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 33, internal_epoch   4,  Average loss: 0.1108, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 33, internal_epoch   5,  Average loss: 0.1051, Accuracy: 203/527 (38.5199%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 33, internal_epoch   6,  Average loss: 0.1002, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 142.9123898473292.
Norm before scaling: 140.4905537860998. Distance: 7.194536297709707
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 681.341255355934, distance: 719.4536555609402
Total norm for 4 adversaries is: 681.341255355934. distance: 719.4536555609402
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   1,  Average loss: 0.1246, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   2,  Average loss: 0.1074, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   3,  Average loss: 0.0942, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   4,  Average loss: 0.0878, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   5,  Average loss: 0.0809, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 77, internal_epoch   6,  Average loss: 0.0754, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Global model norm: 142.9123898473292.
Norm before scaling: 141.8282274222942. Distance: 17.519791229258324
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1740.19833639732, distance: 1751.9790238470323
Total norm for 4 adversaries is: 1740.19833639732. distance: 1751.9790238470323
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   1,  Average loss: 0.1633, Accuracy: 80/546 (14.6520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   2,  Average loss: 0.1449, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   3,  Average loss: 0.1369, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   4,  Average loss: 0.1300, Accuracy: 118/546 (21.6117%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   5,  Average loss: 0.1177, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 265, local model 11, internal_epoch   6,  Average loss: 0.1122, Accuracy: 122/546 (22.3443%), train_poison_data_count: 45
Global model norm: 142.9123898473292.
Norm before scaling: 140.86356846919293. Distance: 15.27497394765577
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1507.3813386134248, distance: 1527.4975450062104
Total norm for 4 adversaries is: 1507.3813386134248. distance: 1527.4975450062104
___Test Local_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 265, local model 54, internal_epoch   1,  Average loss: 0.1813, Accuracy: 17/440 (3.8636%)
___Train Local_ResNet_18,  epoch 265, local model 54, internal_epoch   2,  Average loss: 0.1476, Accuracy: 180/440 (40.9091%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 34, internal_epoch   1,  Average loss: 0.0861, Accuracy: 150/349 (42.9799%)
___Train Local_ResNet_18,  epoch 265, local model 34, internal_epoch   2,  Average loss: 0.0620, Accuracy: 154/349 (44.1261%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 78, internal_epoch   1,  Average loss: 0.0858, Accuracy: 54/255 (21.1765%)
___Train Local_ResNet_18,  epoch 265, local model 78, internal_epoch   2,  Average loss: 0.0630, Accuracy: 57/255 (22.3529%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 91, internal_epoch   1,  Average loss: 0.1560, Accuracy: 20/234 (8.5470%)
___Train Local_ResNet_18,  epoch 265, local model 91, internal_epoch   2,  Average loss: 0.1276, Accuracy: 22/234 (9.4017%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 57, internal_epoch   1,  Average loss: 0.1468, Accuracy: 8/290 (2.7586%)
___Train Local_ResNet_18,  epoch 265, local model 57, internal_epoch   2,  Average loss: 0.1003, Accuracy: 18/290 (6.2069%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 265, local model 30, internal_epoch   1,  Average loss: 0.2879, Accuracy: 25/337 (7.4184%)
___Train Local_ResNet_18,  epoch 265, local model 30, internal_epoch   2,  Average loss: 0.2356, Accuracy: 22/337 (6.5282%)
___Test Local_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 159.3900110721588
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 265: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 265: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 201.90668177604675 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:266 choose agents : [17, 33, 77, 11, 75, 28, 31, 85, 45, 96]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 17, internal_epoch   1,  Average loss: 0.1382, Accuracy: 39/526 (7.4144%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 17, internal_epoch   2,  Average loss: 0.0977, Accuracy: 47/526 (8.9354%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 17, internal_epoch   3,  Average loss: 0.0714, Accuracy: 40/526 (7.6046%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 17, internal_epoch   4,  Average loss: 0.0585, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 17, internal_epoch   5,  Average loss: 0.0436, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 17, internal_epoch   6,  Average loss: 0.0409, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Global model norm: 137.39383685686195.
Norm before scaling: 135.48766808505118. Distance: 11.474581283210295
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1127.1002062815887, distance: 1147.4581691721926
Total norm for 4 adversaries is: 1127.1002062815887. distance: 1147.4581691721926
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 33, internal_epoch   1,  Average loss: 0.1366, Accuracy: 83/527 (15.7495%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 33, internal_epoch   2,  Average loss: 0.1144, Accuracy: 81/527 (15.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 33, internal_epoch   3,  Average loss: 0.0910, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 33, internal_epoch   4,  Average loss: 0.0709, Accuracy: 76/527 (14.4213%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 33, internal_epoch   5,  Average loss: 0.0550, Accuracy: 79/527 (14.9905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 33, internal_epoch   6,  Average loss: 0.0476, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Global model norm: 137.39383685686195.
Norm before scaling: 135.38565430142515. Distance: 12.051016762285364
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1183.9954075079852, distance: 1205.1016554631397
Total norm for 4 adversaries is: 1183.9954075079852. distance: 1205.1016554631397
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   1,  Average loss: 0.0933, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   2,  Average loss: 0.0736, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   3,  Average loss: 0.0626, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   4,  Average loss: 0.0538, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   5,  Average loss: 0.0481, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 77, internal_epoch   6,  Average loss: 0.0460, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Global model norm: 137.39383685686195.
Norm before scaling: 135.81301052596177. Distance: 9.364656158831702
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 918.6326795841742, distance: 936.4655960044662
Total norm for 4 adversaries is: 918.6326795841742. distance: 936.4655960044662
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   1,  Average loss: 0.1294, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   2,  Average loss: 0.1056, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   3,  Average loss: 0.0881, Accuracy: 79/546 (14.4689%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   4,  Average loss: 0.0742, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   5,  Average loss: 0.0616, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 266, local model 11, internal_epoch   6,  Average loss: 0.0497, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Global model norm: 137.39383685686195.
Norm before scaling: 135.31135969496427. Distance: 10.58956781616715
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1035.5010864311055, distance: 1058.9567979856402
Total norm for 4 adversaries is: 1035.5010864311055. distance: 1058.9567979856402
___Test Local_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 266, local model 75, internal_epoch   1,  Average loss: 0.1242, Accuracy: 41/578 (7.0934%)
___Train Local_ResNet_18,  epoch 266, local model 75, internal_epoch   2,  Average loss: 0.0645, Accuracy: 53/578 (9.1696%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 28, internal_epoch   1,  Average loss: 0.1597, Accuracy: 15/423 (3.5461%)
___Train Local_ResNet_18,  epoch 266, local model 28, internal_epoch   2,  Average loss: 0.1062, Accuracy: 27/423 (6.3830%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 31, internal_epoch   1,  Average loss: 0.1053, Accuracy: 57/706 (8.0737%)
___Train Local_ResNet_18,  epoch 266, local model 31, internal_epoch   2,  Average loss: 0.0533, Accuracy: 210/706 (29.7450%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 85, internal_epoch   1,  Average loss: 0.1841, Accuracy: 39/364 (10.7143%)
___Train Local_ResNet_18,  epoch 266, local model 85, internal_epoch   2,  Average loss: 0.1320, Accuracy: 40/364 (10.9890%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 45, internal_epoch   1,  Average loss: 0.1083, Accuracy: 151/529 (28.5444%)
___Train Local_ResNet_18,  epoch 266, local model 45, internal_epoch   2,  Average loss: 0.0635, Accuracy: 168/529 (31.7580%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 266, local model 96, internal_epoch   1,  Average loss: 0.1205, Accuracy: 11/708 (1.5537%)
___Train Local_ResNet_18,  epoch 266, local model 96, internal_epoch   2,  Average loss: 0.0677, Accuracy: 158/708 (22.3164%)
___Test Local_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 164.96343874931335
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 266: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 266: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 211.26174306869507 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:267 choose agents : [17, 33, 77, 11, 51, 32, 66, 85, 8, 2]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 17, internal_epoch   1,  Average loss: 0.0950, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 17, internal_epoch   2,  Average loss: 0.0761, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 17, internal_epoch   3,  Average loss: 0.0605, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 17, internal_epoch   4,  Average loss: 0.0584, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 17, internal_epoch   5,  Average loss: 0.0512, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 17, internal_epoch   6,  Average loss: 0.0474, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Global model norm: 133.79583764779457.
Norm before scaling: 131.93852143138486. Distance: 7.6991553301548326
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 745.2437520704216, distance: 769.9155391989435
Total norm for 4 adversaries is: 745.2437520704216. distance: 769.9155391989435
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 33, internal_epoch   1,  Average loss: 0.1285, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 33, internal_epoch   2,  Average loss: 0.1142, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 33, internal_epoch   3,  Average loss: 0.1009, Accuracy: 172/527 (32.6376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 33, internal_epoch   4,  Average loss: 0.0954, Accuracy: 185/527 (35.1044%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 33, internal_epoch   5,  Average loss: 0.0876, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 33, internal_epoch   6,  Average loss: 0.0869, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Global model norm: 133.79583764779457.
Norm before scaling: 131.58393530841826. Distance: 8.243483310460679
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 794.9569563819164, distance: 824.3483032068423
Total norm for 4 adversaries is: 794.9569563819164. distance: 824.3483032068423
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   1,  Average loss: 0.1772, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   2,  Average loss: 0.1554, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   3,  Average loss: 0.1397, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   4,  Average loss: 0.1245, Accuracy: 77/496 (15.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   5,  Average loss: 0.1124, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 77, internal_epoch   6,  Average loss: 0.1058, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Global model norm: 133.79583764779457.
Norm before scaling: 131.54472860970142. Distance: 9.743115072747564
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 947.6077115557894, distance: 974.3115197409912
Total norm for 4 adversaries is: 947.6077115557894. distance: 974.3115197409912
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   1,  Average loss: 0.1328, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   2,  Average loss: 0.1162, Accuracy: 68/546 (12.4542%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   3,  Average loss: 0.0959, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   4,  Average loss: 0.0878, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   5,  Average loss: 0.0777, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 267, local model 11, internal_epoch   6,  Average loss: 0.0740, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Global model norm: 133.79583764779457.
Norm before scaling: 131.61269084182194. Distance: 8.826551124915223
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 855.1302897804521, distance: 882.6550855232184
Total norm for 4 adversaries is: 855.1302897804521. distance: 882.6550855232184
___Test Local_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 267, local model 51, internal_epoch   1,  Average loss: 0.1702, Accuracy: 7/479 (1.4614%)
___Train Local_ResNet_18,  epoch 267, local model 51, internal_epoch   2,  Average loss: 0.1124, Accuracy: 16/479 (3.3403%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 32, internal_epoch   1,  Average loss: 0.1225, Accuracy: 13/824 (1.5777%)
___Train Local_ResNet_18,  epoch 267, local model 32, internal_epoch   2,  Average loss: 0.0786, Accuracy: 242/824 (29.3689%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 66, internal_epoch   1,  Average loss: 0.0645, Accuracy: 112/555 (20.1802%)
___Train Local_ResNet_18,  epoch 267, local model 66, internal_epoch   2,  Average loss: 0.0500, Accuracy: 230/555 (41.4414%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 85, internal_epoch   1,  Average loss: 0.1173, Accuracy: 92/364 (25.2747%)
___Train Local_ResNet_18,  epoch 267, local model 85, internal_epoch   2,  Average loss: 0.1121, Accuracy: 94/364 (25.8242%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 8, internal_epoch   1,  Average loss: 0.1933, Accuracy: 33/534 (6.1798%)
___Train Local_ResNet_18,  epoch 267, local model 8, internal_epoch   2,  Average loss: 0.1486, Accuracy: 20/534 (3.7453%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 267, local model 2, internal_epoch   1,  Average loss: 0.1994, Accuracy: 61/461 (13.2321%)
___Train Local_ResNet_18,  epoch 267, local model 2, internal_epoch   2,  Average loss: 0.1537, Accuracy: 50/461 (10.8460%)
___Test Local_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.73019361495972
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 267: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 267: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 205.92928504943848 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:268 choose agents : [17, 33, 77, 11, 40, 10, 91, 59, 80, 32]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 17, internal_epoch   1,  Average loss: 0.1285, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 17, internal_epoch   2,  Average loss: 0.1143, Accuracy: 68/526 (12.9278%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 17, internal_epoch   3,  Average loss: 0.0930, Accuracy: 73/526 (13.8783%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 17, internal_epoch   4,  Average loss: 0.0803, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 17, internal_epoch   5,  Average loss: 0.0734, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 17, internal_epoch   6,  Average loss: 0.0639, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Global model norm: 127.85084999228593.
Norm before scaling: 125.76864455469416. Distance: 9.50195854476978
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 925.9483314418791, distance: 950.1959008541344
Total norm for 4 adversaries is: 925.9483314418791. distance: 950.1959008541344
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 33, internal_epoch   1,  Average loss: 0.1761, Accuracy: 66/527 (12.5237%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 33, internal_epoch   2,  Average loss: 0.1522, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 33, internal_epoch   3,  Average loss: 0.1298, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 33, internal_epoch   4,  Average loss: 0.1165, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 33, internal_epoch   5,  Average loss: 0.0998, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 33, internal_epoch   6,  Average loss: 0.0800, Accuracy: 138/527 (26.1860%), train_poison_data_count: 45
Global model norm: 127.85084999228593.
Norm before scaling: 125.9043031619154. Distance: 16.497851607588657
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1631.4178649260894, distance: 1649.78513752549
Total norm for 4 adversaries is: 1631.4178649260894. distance: 1649.78513752549
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   1,  Average loss: 0.1149, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   2,  Average loss: 0.1075, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   3,  Average loss: 0.0997, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   4,  Average loss: 0.0898, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   5,  Average loss: 0.0810, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 77, internal_epoch   6,  Average loss: 0.0725, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Global model norm: 127.85084999228593.
Norm before scaling: 125.95757439263032. Distance: 8.011994430136303
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 777.0418666326802, distance: 801.1994913877567
Total norm for 4 adversaries is: 777.0418666326802. distance: 801.1994913877567
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   1,  Average loss: 0.1101, Accuracy: 101/546 (18.4982%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   2,  Average loss: 0.0985, Accuracy: 157/546 (28.7546%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   3,  Average loss: 0.0892, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   4,  Average loss: 0.0818, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   5,  Average loss: 0.0765, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 268, local model 11, internal_epoch   6,  Average loss: 0.0713, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Global model norm: 127.85084999228593.
Norm before scaling: 125.7625529581938. Distance: 8.369581604849454
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 810.4799503997616, distance: 836.9581456082497
Total norm for 4 adversaries is: 810.4799503997616. distance: 836.9581456082497
___Test Local_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 268, local model 40, internal_epoch   1,  Average loss: 0.2066, Accuracy: 57/652 (8.7423%)
___Train Local_ResNet_18,  epoch 268, local model 40, internal_epoch   2,  Average loss: 0.0758, Accuracy: 273/652 (41.8712%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 10, internal_epoch   1,  Average loss: 0.1265, Accuracy: 328/752 (43.6170%)
___Train Local_ResNet_18,  epoch 268, local model 10, internal_epoch   2,  Average loss: 0.0541, Accuracy: 414/752 (55.0532%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 91, internal_epoch   1,  Average loss: 0.3257, Accuracy: 4/234 (1.7094%)
___Train Local_ResNet_18,  epoch 268, local model 91, internal_epoch   2,  Average loss: 0.1785, Accuracy: 15/234 (6.4103%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 59, internal_epoch   1,  Average loss: 0.2179, Accuracy: 39/642 (6.0748%)
___Train Local_ResNet_18,  epoch 268, local model 59, internal_epoch   2,  Average loss: 0.0953, Accuracy: 107/642 (16.6667%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 80, internal_epoch   1,  Average loss: 0.2624, Accuracy: 11/363 (3.0303%)
___Train Local_ResNet_18,  epoch 268, local model 80, internal_epoch   2,  Average loss: 0.0802, Accuracy: 4/363 (1.1019%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 268, local model 32, internal_epoch   1,  Average loss: 0.1271, Accuracy: 105/824 (12.7427%)
___Train Local_ResNet_18,  epoch 268, local model 32, internal_epoch   2,  Average loss: 0.0575, Accuracy: 236/824 (28.6408%)
___Test Local_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 158.7024631500244
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 268: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 268: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 201.01268649101257 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:269 choose agents : [17, 33, 77, 11, 16, 83, 57, 96, 3, 10]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 17, internal_epoch   1,  Average loss: 0.0684, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 17, internal_epoch   2,  Average loss: 0.0636, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 17, internal_epoch   3,  Average loss: 0.0594, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 17, internal_epoch   4,  Average loss: 0.0540, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 17, internal_epoch   5,  Average loss: 0.0565, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 17, internal_epoch   6,  Average loss: 0.0538, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Global model norm: 123.04257234540816.
Norm before scaling: 121.261633623593. Distance: 4.479806945932731
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 412.68662445007834, distance: 447.9806775967017
Total norm for 4 adversaries is: 412.68662445007834. distance: 447.9806775967017
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 33, internal_epoch   1,  Average loss: 0.0914, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 33, internal_epoch   2,  Average loss: 0.0815, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 33, internal_epoch   3,  Average loss: 0.0754, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 33, internal_epoch   4,  Average loss: 0.0660, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 33, internal_epoch   5,  Average loss: 0.0624, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 33, internal_epoch   6,  Average loss: 0.0597, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Global model norm: 123.04257234540816.
Norm before scaling: 121.13658516577475. Distance: 6.6319546453676
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 635.6327801883726, distance: 663.1954368811655
Total norm for 4 adversaries is: 635.6327801883726. distance: 663.1954368811655
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   1,  Average loss: 0.1088, Accuracy: 50/496 (10.0806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   2,  Average loss: 0.0955, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   3,  Average loss: 0.0867, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   4,  Average loss: 0.0792, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   5,  Average loss: 0.0748, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 77, internal_epoch   6,  Average loss: 0.0681, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Global model norm: 123.04257234540816.
Norm before scaling: 121.57824046550229. Distance: 11.302349447231922
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1115.3363842357157, distance: 1130.2348207341695
Total norm for 4 adversaries is: 1115.3363842357157. distance: 1130.2348207341695
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   1,  Average loss: 0.1276, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   2,  Average loss: 0.1071, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   3,  Average loss: 0.0960, Accuracy: 107/546 (19.5971%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   4,  Average loss: 0.0848, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   5,  Average loss: 0.0741, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 269, local model 11, internal_epoch   6,  Average loss: 0.0630, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Global model norm: 123.04257234540816.
Norm before scaling: 121.3056372028419. Distance: 13.512377680702146
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1334.2723204053962, distance: 1351.2377659020635
Total norm for 4 adversaries is: 1334.2723204053962. distance: 1351.2377659020635
___Test Local_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 269, local model 16, internal_epoch   1,  Average loss: 0.1383, Accuracy: 38/773 (4.9159%)
___Train Local_ResNet_18,  epoch 269, local model 16, internal_epoch   2,  Average loss: 0.0697, Accuracy: 189/773 (24.4502%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 83, internal_epoch   1,  Average loss: 0.1826, Accuracy: 15/366 (4.0984%)
___Train Local_ResNet_18,  epoch 269, local model 83, internal_epoch   2,  Average loss: 0.1343, Accuracy: 58/366 (15.8470%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 57, internal_epoch   1,  Average loss: 0.1673, Accuracy: 30/290 (10.3448%)
___Train Local_ResNet_18,  epoch 269, local model 57, internal_epoch   2,  Average loss: 0.1196, Accuracy: 29/290 (10.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 96, internal_epoch   1,  Average loss: 0.1541, Accuracy: 99/708 (13.9831%)
___Train Local_ResNet_18,  epoch 269, local model 96, internal_epoch   2,  Average loss: 0.0834, Accuracy: 145/708 (20.4802%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 3, internal_epoch   1,  Average loss: 0.1362, Accuracy: 218/780 (27.9487%)
___Train Local_ResNet_18,  epoch 269, local model 3, internal_epoch   2,  Average loss: 0.0706, Accuracy: 377/780 (48.3333%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 269, local model 10, internal_epoch   1,  Average loss: 0.2036, Accuracy: 7/752 (0.9309%)
___Train Local_ResNet_18,  epoch 269, local model 10, internal_epoch   2,  Average loss: 0.0907, Accuracy: 222/752 (29.5213%)
___Test Local_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 160.10277700424194
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 269: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 269: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 201.224848985672 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:270 choose agents : [17, 33, 77, 11, 15, 14, 29, 50, 36, 2]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 17, internal_epoch   1,  Average loss: 0.1388, Accuracy: 50/526 (9.5057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 17, internal_epoch   2,  Average loss: 0.1084, Accuracy: 57/526 (10.8365%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 17, internal_epoch   3,  Average loss: 0.0859, Accuracy: 84/526 (15.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 17, internal_epoch   4,  Average loss: 0.0655, Accuracy: 83/526 (15.7795%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 17, internal_epoch   5,  Average loss: 0.0482, Accuracy: 81/526 (15.3992%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 17, internal_epoch   6,  Average loss: 0.0365, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Global model norm: 118.38083241967426.
Norm before scaling: 116.53976403598259. Distance: 11.780628299246182
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1159.6193879890075, distance: 1178.0628697145157
Total norm for 4 adversaries is: 1159.6193879890075. distance: 1178.0628697145157
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 33, internal_epoch   1,  Average loss: 0.1097, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 33, internal_epoch   2,  Average loss: 0.0879, Accuracy: 129/527 (24.4782%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 33, internal_epoch   3,  Average loss: 0.0678, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 33, internal_epoch   4,  Average loss: 0.0560, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 33, internal_epoch   5,  Average loss: 0.0447, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 33, internal_epoch   6,  Average loss: 0.0387, Accuracy: 183/527 (34.7249%), train_poison_data_count: 45
Global model norm: 118.38083241967426.
Norm before scaling: 116.65337861454121. Distance: 9.746641705538005
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 955.9722799328441, distance: 974.6641088087731
Total norm for 4 adversaries is: 955.9722799328441. distance: 974.6641088087731
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   1,  Average loss: 0.0983, Accuracy: 55/496 (11.0887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   2,  Average loss: 0.0744, Accuracy: 58/496 (11.6935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   3,  Average loss: 0.0606, Accuracy: 81/496 (16.3306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   4,  Average loss: 0.0540, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   5,  Average loss: 0.0474, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 77, internal_epoch   6,  Average loss: 0.0443, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Global model norm: 118.38083241967426.
Norm before scaling: 116.86854928722269. Distance: 7.941897878520083
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 776.4454262857114, distance: 794.1897600699722
Total norm for 4 adversaries is: 776.4454262857114. distance: 794.1897600699722
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   1,  Average loss: 0.0892, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   2,  Average loss: 0.0782, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   3,  Average loss: 0.0638, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   4,  Average loss: 0.0566, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   5,  Average loss: 0.0497, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 270, local model 11, internal_epoch   6,  Average loss: 0.0446, Accuracy: 184/546 (33.6996%), train_poison_data_count: 45
Global model norm: 118.38083241967426.
Norm before scaling: 116.61569245415687. Distance: 7.888870134764156
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 767.2373329029291, distance: 788.8869928576589
Total norm for 4 adversaries is: 767.2373329029291. distance: 788.8869928576589
___Test Local_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 270, local model 15, internal_epoch   1,  Average loss: 0.2092, Accuracy: 3/341 (0.8798%)
___Train Local_ResNet_18,  epoch 270, local model 15, internal_epoch   2,  Average loss: 0.1271, Accuracy: 4/341 (1.1730%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 14, internal_epoch   1,  Average loss: 0.1064, Accuracy: 35/318 (11.0063%)
___Train Local_ResNet_18,  epoch 270, local model 14, internal_epoch   2,  Average loss: 0.0612, Accuracy: 62/318 (19.4969%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 29, internal_epoch   1,  Average loss: 0.1144, Accuracy: 70/848 (8.2547%)
___Train Local_ResNet_18,  epoch 270, local model 29, internal_epoch   2,  Average loss: 0.0479, Accuracy: 386/848 (45.5189%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 50, internal_epoch   1,  Average loss: 0.1762, Accuracy: 17/401 (4.2394%)
___Train Local_ResNet_18,  epoch 270, local model 50, internal_epoch   2,  Average loss: 0.1081, Accuracy: 12/401 (2.9925%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 36, internal_epoch   1,  Average loss: 0.0971, Accuracy: 121/849 (14.2521%)
___Train Local_ResNet_18,  epoch 270, local model 36, internal_epoch   2,  Average loss: 0.0532, Accuracy: 268/849 (31.5665%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 270, local model 2, internal_epoch   1,  Average loss: 0.1199, Accuracy: 27/461 (5.8568%)
___Train Local_ResNet_18,  epoch 270, local model 2, internal_epoch   2,  Average loss: 0.0637, Accuracy: 216/461 (46.8547%)
___Test Local_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 180.6818618774414
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 270: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 270: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 220.6307716369629 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:271 choose agents : [17, 33, 77, 11, 0, 94, 1, 38, 41, 82]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 17, internal_epoch   1,  Average loss: 0.0908, Accuracy: 78/526 (14.8289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 17, internal_epoch   2,  Average loss: 0.0747, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 17, internal_epoch   3,  Average loss: 0.0628, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 17, internal_epoch   4,  Average loss: 0.0564, Accuracy: 183/526 (34.7909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 17, internal_epoch   5,  Average loss: 0.0594, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 17, internal_epoch   6,  Average loss: 0.0551, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Global model norm: 115.13256625516519.
Norm before scaling: 113.36652824605021. Distance: 6.047860314184084
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 578.8004567638143, distance: 604.7860417122737
Total norm for 4 adversaries is: 578.8004567638143. distance: 604.7860417122737
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 33, internal_epoch   1,  Average loss: 0.1365, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 33, internal_epoch   2,  Average loss: 0.1228, Accuracy: 189/527 (35.8634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 33, internal_epoch   3,  Average loss: 0.1069, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 33, internal_epoch   4,  Average loss: 0.1108, Accuracy: 187/527 (35.4839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 33, internal_epoch   5,  Average loss: 0.0936, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 33, internal_epoch   6,  Average loss: 0.0876, Accuracy: 197/527 (37.3814%), train_poison_data_count: 45
Global model norm: 115.13256625516519.
Norm before scaling: 112.84620341420441. Distance: 8.063544627093286
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 777.7124709685451, distance: 806.3544893531629
Total norm for 4 adversaries is: 777.7124709685451. distance: 806.3544893531629
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   1,  Average loss: 0.1241, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   2,  Average loss: 0.1051, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   3,  Average loss: 0.0910, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   4,  Average loss: 0.0805, Accuracy: 112/496 (22.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   5,  Average loss: 0.0743, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 77, internal_epoch   6,  Average loss: 0.0689, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Global model norm: 115.13256625516519.
Norm before scaling: 113.3486695927107. Distance: 8.165937845315423
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 795.3952633753862, distance: 816.5938020215436
Total norm for 4 adversaries is: 795.3952633753862. distance: 816.5938020215436
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   1,  Average loss: 0.1664, Accuracy: 89/546 (16.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   2,  Average loss: 0.1463, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   3,  Average loss: 0.1299, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   4,  Average loss: 0.1208, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   5,  Average loss: 0.1103, Accuracy: 123/546 (22.5275%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 271, local model 11, internal_epoch   6,  Average loss: 0.1003, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Global model norm: 115.13256625516519.
Norm before scaling: 112.63874690659294. Distance: 9.551546892240438
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 927.1733589248561, distance: 955.15466679486
Total norm for 4 adversaries is: 927.1733589248561. distance: 955.15466679486
___Test Local_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 271, local model 0, internal_epoch   1,  Average loss: 0.1900, Accuracy: 108/367 (29.4278%)
___Train Local_ResNet_18,  epoch 271, local model 0, internal_epoch   2,  Average loss: 0.1561, Accuracy: 109/367 (29.7003%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 94, internal_epoch   1,  Average loss: 0.1330, Accuracy: 76/203 (37.4384%)
___Train Local_ResNet_18,  epoch 271, local model 94, internal_epoch   2,  Average loss: 0.1127, Accuracy: 76/203 (37.4384%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 1, internal_epoch   1,  Average loss: 0.1762, Accuracy: 19/641 (2.9641%)
___Train Local_ResNet_18,  epoch 271, local model 1, internal_epoch   2,  Average loss: 0.1146, Accuracy: 164/641 (25.5850%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 38, internal_epoch   1,  Average loss: 0.1661, Accuracy: 132/756 (17.4603%)
___Train Local_ResNet_18,  epoch 271, local model 38, internal_epoch   2,  Average loss: 0.1273, Accuracy: 284/756 (37.5661%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 41, internal_epoch   1,  Average loss: 0.0988, Accuracy: 307/513 (59.8441%)
___Train Local_ResNet_18,  epoch 271, local model 41, internal_epoch   2,  Average loss: 0.0822, Accuracy: 318/513 (61.9883%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 271, local model 82, internal_epoch   1,  Average loss: 0.1157, Accuracy: 74/601 (12.3128%)
___Train Local_ResNet_18,  epoch 271, local model 82, internal_epoch   2,  Average loss: 0.0812, Accuracy: 230/601 (38.2696%)
___Test Local_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 177.1879425048828
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 271: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 271: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 222.5793972015381 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:272 choose agents : [17, 33, 77, 11, 49, 74, 23, 97, 83, 22]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 17, internal_epoch   1,  Average loss: 0.1843, Accuracy: 55/526 (10.4563%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 17, internal_epoch   2,  Average loss: 0.1203, Accuracy: 57/526 (10.8365%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 17, internal_epoch   3,  Average loss: 0.0944, Accuracy: 99/526 (18.8213%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 17, internal_epoch   4,  Average loss: 0.0811, Accuracy: 182/526 (34.6008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 17, internal_epoch   5,  Average loss: 0.0726, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 17, internal_epoch   6,  Average loss: 0.0609, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Global model norm: 109.36878553773924.
Norm before scaling: 107.38977361258613. Distance: 12.948828708303783
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1276.3304822811372, distance: 1294.8830062982524
Total norm for 4 adversaries is: 1276.3304822811372. distance: 1294.8830062982524
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 33, internal_epoch   1,  Average loss: 0.2060, Accuracy: 97/527 (18.4061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 33, internal_epoch   2,  Average loss: 0.1548, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 33, internal_epoch   3,  Average loss: 0.1251, Accuracy: 82/527 (15.5598%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 33, internal_epoch   4,  Average loss: 0.1045, Accuracy: 72/527 (13.6622%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 33, internal_epoch   5,  Average loss: 0.0859, Accuracy: 75/527 (14.2315%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 33, internal_epoch   6,  Average loss: 0.0721, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Global model norm: 109.36878553773924.
Norm before scaling: 107.13182318556191. Distance: 14.226912685318064
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1402.6195136244185, distance: 1422.6913315965623
Total norm for 4 adversaries is: 1402.6195136244185. distance: 1422.6913315965623
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   1,  Average loss: 0.1311, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   2,  Average loss: 0.0966, Accuracy: 144/496 (29.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   3,  Average loss: 0.0838, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   4,  Average loss: 0.0775, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   5,  Average loss: 0.0715, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 77, internal_epoch   6,  Average loss: 0.0651, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 109.36878553773924.
Norm before scaling: 107.64331834524148. Distance: 9.49062969470167
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 930.7148798101382, distance: 949.0628930687366
Total norm for 4 adversaries is: 930.7148798101382. distance: 949.0628930687366
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   1,  Average loss: 0.1543, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   2,  Average loss: 0.1156, Accuracy: 105/546 (19.2308%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   3,  Average loss: 0.0917, Accuracy: 118/546 (21.6117%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   4,  Average loss: 0.0806, Accuracy: 124/546 (22.7106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   5,  Average loss: 0.0682, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 272, local model 11, internal_epoch   6,  Average loss: 0.0592, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Global model norm: 109.36878553773924.
Norm before scaling: 107.31803731345677. Distance: 11.557936309031678
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1135.7926747430624, distance: 1155.7936126315979
Total norm for 4 adversaries is: 1135.7926747430624. distance: 1155.7936126315979
___Test Local_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 272, local model 49, internal_epoch   1,  Average loss: 0.2105, Accuracy: 10/426 (2.3474%)
___Train Local_ResNet_18,  epoch 272, local model 49, internal_epoch   2,  Average loss: 0.0956, Accuracy: 38/426 (8.9202%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 74, internal_epoch   1,  Average loss: 0.1570, Accuracy: 155/469 (33.0490%)
___Train Local_ResNet_18,  epoch 272, local model 74, internal_epoch   2,  Average loss: 0.0721, Accuracy: 183/469 (39.0192%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 23, internal_epoch   1,  Average loss: 0.2586, Accuracy: 3/248 (1.2097%)
___Train Local_ResNet_18,  epoch 272, local model 23, internal_epoch   2,  Average loss: 0.1786, Accuracy: 6/248 (2.4194%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 97, internal_epoch   1,  Average loss: 0.2229, Accuracy: 5/418 (1.1962%)
___Train Local_ResNet_18,  epoch 272, local model 97, internal_epoch   2,  Average loss: 0.1119, Accuracy: 27/418 (6.4593%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 83, internal_epoch   1,  Average loss: 0.2048, Accuracy: 15/366 (4.0984%)
___Train Local_ResNet_18,  epoch 272, local model 83, internal_epoch   2,  Average loss: 0.1170, Accuracy: 18/366 (4.9180%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 272, local model 22, internal_epoch   1,  Average loss: 0.2127, Accuracy: 29/494 (5.8704%)
___Train Local_ResNet_18,  epoch 272, local model 22, internal_epoch   2,  Average loss: 0.0992, Accuracy: 29/494 (5.8704%)
___Test Local_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 165.88965892791748
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 272: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 272: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 213.00825786590576 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:273 choose agents : [17, 33, 77, 11, 4, 43, 92, 62, 59, 26]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 17, internal_epoch   1,  Average loss: 0.1020, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 17, internal_epoch   2,  Average loss: 0.0842, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 17, internal_epoch   3,  Average loss: 0.0651, Accuracy: 159/526 (30.2281%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 17, internal_epoch   4,  Average loss: 0.0556, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 17, internal_epoch   5,  Average loss: 0.0551, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 17, internal_epoch   6,  Average loss: 0.0498, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Global model norm: 108.12089497265318.
Norm before scaling: 106.44455991706434. Distance: 8.20227813708994
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 801.1040818770056, distance: 820.2278265823466
Total norm for 4 adversaries is: 801.1040818770056. distance: 820.2278265823466
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 33, internal_epoch   1,  Average loss: 0.1080, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 33, internal_epoch   2,  Average loss: 0.0931, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 33, internal_epoch   3,  Average loss: 0.0791, Accuracy: 184/527 (34.9146%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 33, internal_epoch   4,  Average loss: 0.0729, Accuracy: 197/527 (37.3814%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 33, internal_epoch   5,  Average loss: 0.0743, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 33, internal_epoch   6,  Average loss: 0.0701, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Global model norm: 108.12089497265318.
Norm before scaling: 106.23501272973755. Distance: 7.335121572536253
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 709.8766398114534, distance: 733.5121846295398
Total norm for 4 adversaries is: 709.8766398114534. distance: 733.5121846295398
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   1,  Average loss: 0.1836, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   2,  Average loss: 0.1664, Accuracy: 27/496 (5.4435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   3,  Average loss: 0.1415, Accuracy: 56/496 (11.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   4,  Average loss: 0.1229, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   5,  Average loss: 0.1089, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 77, internal_epoch   6,  Average loss: 0.0993, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Global model norm: 108.12089497265318.
Norm before scaling: 105.87967171658826. Distance: 10.730450974912472
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1050.5424194196064, distance: 1073.0450829298832
Total norm for 4 adversaries is: 1050.5424194196064. distance: 1073.0450829298832
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   1,  Average loss: 0.1177, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   2,  Average loss: 0.1073, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   3,  Average loss: 0.0966, Accuracy: 132/546 (24.1758%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   4,  Average loss: 0.0867, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   5,  Average loss: 0.0773, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 273, local model 11, internal_epoch   6,  Average loss: 0.0707, Accuracy: 156/546 (28.5714%), train_poison_data_count: 45
Global model norm: 108.12089497265318.
Norm before scaling: 106.03988875801643. Distance: 8.208127195090318
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 796.3160883091588, distance: 820.8127070166495
Total norm for 4 adversaries is: 796.3160883091588. distance: 820.8127070166495
___Test Local_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 273, local model 4, internal_epoch   1,  Average loss: 0.1686, Accuracy: 216/557 (38.7792%)
___Train Local_ResNet_18,  epoch 273, local model 4, internal_epoch   2,  Average loss: 0.1514, Accuracy: 216/557 (38.7792%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 43, internal_epoch   1,  Average loss: 0.2641, Accuracy: 8/345 (2.3188%)
___Train Local_ResNet_18,  epoch 273, local model 43, internal_epoch   2,  Average loss: 0.2349, Accuracy: 16/345 (4.6377%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 92, internal_epoch   1,  Average loss: 0.1136, Accuracy: 112/796 (14.0704%)
___Train Local_ResNet_18,  epoch 273, local model 92, internal_epoch   2,  Average loss: 0.0590, Accuracy: 180/796 (22.6131%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 62, internal_epoch   1,  Average loss: 0.1362, Accuracy: 34/358 (9.4972%)
___Train Local_ResNet_18,  epoch 273, local model 62, internal_epoch   2,  Average loss: 0.1164, Accuracy: 33/358 (9.2179%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 59, internal_epoch   1,  Average loss: 0.0948, Accuracy: 8/642 (1.2461%)
___Train Local_ResNet_18,  epoch 273, local model 59, internal_epoch   2,  Average loss: 0.0531, Accuracy: 152/642 (23.6760%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 273, local model 26, internal_epoch   1,  Average loss: 0.1077, Accuracy: 40/468 (8.5470%)
___Train Local_ResNet_18,  epoch 273, local model 26, internal_epoch   2,  Average loss: 0.0792, Accuracy: 78/468 (16.6667%)
___Test Local_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 168.91160464286804
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 273: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 273: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.3523302078247 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:274 choose agents : [17, 33, 77, 11, 93, 86, 90, 80, 12, 53]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 17, internal_epoch   1,  Average loss: 0.1305, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 17, internal_epoch   2,  Average loss: 0.1151, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 17, internal_epoch   3,  Average loss: 0.1024, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 17, internal_epoch   4,  Average loss: 0.0894, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 17, internal_epoch   5,  Average loss: 0.0821, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 17, internal_epoch   6,  Average loss: 0.0743, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Global model norm: 103.55828484179814.
Norm before scaling: 101.500615761679. Distance: 9.082528968216732
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 886.1174442476573, distance: 908.2529245755281
Total norm for 4 adversaries is: 886.1174442476573. distance: 908.2529245755281
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 33, internal_epoch   1,  Average loss: 0.1812, Accuracy: 45/527 (8.5389%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 33, internal_epoch   2,  Average loss: 0.1502, Accuracy: 44/527 (8.3491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 33, internal_epoch   3,  Average loss: 0.1298, Accuracy: 40/527 (7.5901%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 33, internal_epoch   4,  Average loss: 0.1147, Accuracy: 63/527 (11.9545%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 33, internal_epoch   5,  Average loss: 0.1007, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 33, internal_epoch   6,  Average loss: 0.0888, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Global model norm: 103.55828484179814.
Norm before scaling: 101.23300397474137. Distance: 11.459422296739046
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1123.9022421901293, distance: 1145.9421887687006
Total norm for 4 adversaries is: 1123.9022421901293. distance: 1145.9421887687006
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   1,  Average loss: 0.1276, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   2,  Average loss: 0.1067, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   3,  Average loss: 0.0926, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   4,  Average loss: 0.0857, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   5,  Average loss: 0.0791, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 77, internal_epoch   6,  Average loss: 0.0753, Accuracy: 115/496 (23.1855%), train_poison_data_count: 40
Global model norm: 103.55828484179814.
Norm before scaling: 101.81350233545892. Distance: 8.588696578837784
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 839.7451250230632, distance: 858.8696787056812
Total norm for 4 adversaries is: 839.7451250230632. distance: 858.8696787056812
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   1,  Average loss: 0.1715, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   2,  Average loss: 0.1482, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   3,  Average loss: 0.1313, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   4,  Average loss: 0.1214, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   5,  Average loss: 0.1099, Accuracy: 118/546 (21.6117%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 274, local model 11, internal_epoch   6,  Average loss: 0.0965, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Global model norm: 103.55828484179814.
Norm before scaling: 101.11597031688417. Distance: 10.892789825302913
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1065.5513830876482, distance: 1089.2789472857721
Total norm for 4 adversaries is: 1065.5513830876482. distance: 1089.2789472857721
___Test Local_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 274, local model 93, internal_epoch   1,  Average loss: 0.1592, Accuracy: 7/584 (1.1986%)
___Train Local_ResNet_18,  epoch 274, local model 93, internal_epoch   2,  Average loss: 0.1027, Accuracy: 156/584 (26.7123%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 86, internal_epoch   1,  Average loss: 0.2877, Accuracy: 8/212 (3.7736%)
___Train Local_ResNet_18,  epoch 274, local model 86, internal_epoch   2,  Average loss: 0.2380, Accuracy: 7/212 (3.3019%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 90, internal_epoch   1,  Average loss: 0.1019, Accuracy: 19/578 (3.2872%)
___Train Local_ResNet_18,  epoch 274, local model 90, internal_epoch   2,  Average loss: 0.0388, Accuracy: 296/578 (51.2111%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 80, internal_epoch   1,  Average loss: 0.1384, Accuracy: 40/363 (11.0193%)
___Train Local_ResNet_18,  epoch 274, local model 80, internal_epoch   2,  Average loss: 0.0879, Accuracy: 180/363 (49.5868%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 12, internal_epoch   1,  Average loss: 0.0956, Accuracy: 139/977 (14.2272%)
___Train Local_ResNet_18,  epoch 274, local model 12, internal_epoch   2,  Average loss: 0.0413, Accuracy: 305/977 (31.2180%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 274, local model 53, internal_epoch   1,  Average loss: 0.0844, Accuracy: 99/625 (15.8400%)
___Train Local_ResNet_18,  epoch 274, local model 53, internal_epoch   2,  Average loss: 0.0542, Accuracy: 227/625 (36.3200%)
___Test Local_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 165.83240580558777
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 274: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 274: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 205.7434365749359 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:275 choose agents : [17, 33, 77, 11, 55, 18, 42, 52, 31, 29]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 17, internal_epoch   1,  Average loss: 0.1944, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 17, internal_epoch   2,  Average loss: 0.1539, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 17, internal_epoch   3,  Average loss: 0.1159, Accuracy: 113/526 (21.4829%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 17, internal_epoch   4,  Average loss: 0.1008, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 17, internal_epoch   5,  Average loss: 0.0886, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 17, internal_epoch   6,  Average loss: 0.0770, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Global model norm: 99.46906907740215.
Norm before scaling: 97.16539640125234. Distance: 11.655237394228413
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1144.3151336061235, distance: 1165.523809280617
Total norm for 4 adversaries is: 1144.3151336061235. distance: 1165.523809280617
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 33, internal_epoch   1,  Average loss: 0.1258, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 33, internal_epoch   2,  Average loss: 0.1008, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 33, internal_epoch   3,  Average loss: 0.0731, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 33, internal_epoch   4,  Average loss: 0.0612, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 33, internal_epoch   5,  Average loss: 0.0563, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 33, internal_epoch   6,  Average loss: 0.0474, Accuracy: 105/527 (19.9241%), train_poison_data_count: 45
Global model norm: 99.46906907740215.
Norm before scaling: 97.69397271422378. Distance: 8.830112901875223
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 864.1801389178069, distance: 883.0112895654279
Total norm for 4 adversaries is: 864.1801389178069. distance: 883.0112895654279
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   1,  Average loss: 0.1716, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   2,  Average loss: 0.1392, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   3,  Average loss: 0.1001, Accuracy: 71/496 (14.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   4,  Average loss: 0.0793, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   5,  Average loss: 0.0717, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 77, internal_epoch   6,  Average loss: 0.0658, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Global model norm: 99.46906907740215.
Norm before scaling: 97.62852606468306. Distance: 10.725933014805095
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1054.7838641162464, distance: 1072.5932943105695
Total norm for 4 adversaries is: 1054.7838641162464. distance: 1072.5932943105695
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   1,  Average loss: 0.1630, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   2,  Average loss: 0.1182, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   3,  Average loss: 0.0752, Accuracy: 71/546 (13.0037%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   4,  Average loss: 0.0602, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   5,  Average loss: 0.0555, Accuracy: 176/546 (32.2344%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 275, local model 11, internal_epoch   6,  Average loss: 0.0495, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Global model norm: 99.46906907740215.
Norm before scaling: 97.66314975625401. Distance: 11.42631409013963
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1125.5416473858263, distance: 1142.6313928822365
Total norm for 4 adversaries is: 1125.5416473858263. distance: 1142.6313928822365
___Test Local_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 275, local model 55, internal_epoch   1,  Average loss: 0.1909, Accuracy: 2/299 (0.6689%)
___Train Local_ResNet_18,  epoch 275, local model 55, internal_epoch   2,  Average loss: 0.1485, Accuracy: 4/299 (1.3378%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 18, internal_epoch   1,  Average loss: 0.1959, Accuracy: 43/386 (11.1399%)
___Train Local_ResNet_18,  epoch 275, local model 18, internal_epoch   2,  Average loss: 0.1469, Accuracy: 45/386 (11.6580%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 42, internal_epoch   1,  Average loss: 0.2512, Accuracy: 4/198 (2.0202%)
___Train Local_ResNet_18,  epoch 275, local model 42, internal_epoch   2,  Average loss: 0.2108, Accuracy: 4/198 (2.0202%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 52, internal_epoch   1,  Average loss: 0.2110, Accuracy: 2/214 (0.9346%)
___Train Local_ResNet_18,  epoch 275, local model 52, internal_epoch   2,  Average loss: 0.1793, Accuracy: 1/214 (0.4673%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 31, internal_epoch   1,  Average loss: 0.1605, Accuracy: 53/706 (7.5071%)
___Train Local_ResNet_18,  epoch 275, local model 31, internal_epoch   2,  Average loss: 0.0682, Accuracy: 86/706 (12.1813%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 275, local model 29, internal_epoch   1,  Average loss: 0.1123, Accuracy: 27/848 (3.1840%)
___Train Local_ResNet_18,  epoch 275, local model 29, internal_epoch   2,  Average loss: 0.0394, Accuracy: 352/848 (41.5094%)
___Test Local_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 173.2234799861908
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 275: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 275: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 218.9263505935669 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:276 choose agents : [17, 33, 77, 11, 13, 28, 59, 20, 4, 19]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 17, internal_epoch   1,  Average loss: 0.1300, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 17, internal_epoch   2,  Average loss: 0.1066, Accuracy: 56/526 (10.6464%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 17, internal_epoch   3,  Average loss: 0.0814, Accuracy: 90/526 (17.1103%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 17, internal_epoch   4,  Average loss: 0.0774, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 17, internal_epoch   5,  Average loss: 0.0681, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 17, internal_epoch   6,  Average loss: 0.0720, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Global model norm: 97.50907910452493.
Norm before scaling: 95.8819006235666. Distance: 11.370707949269391
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1121.62410147072, distance: 1137.0708531133844
Total norm for 4 adversaries is: 1121.62410147072. distance: 1137.0708531133844
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 33, internal_epoch   1,  Average loss: 0.2122, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 33, internal_epoch   2,  Average loss: 0.1800, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 33, internal_epoch   3,  Average loss: 0.1528, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 33, internal_epoch   4,  Average loss: 0.0948, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 33, internal_epoch   5,  Average loss: 0.0515, Accuracy: 129/527 (24.4782%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 33, internal_epoch   6,  Average loss: 0.0352, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Global model norm: 97.50907910452493.
Norm before scaling: 95.50954018120389. Distance: 12.591187777312937
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1241.144330849559, distance: 1259.118739436436
Total norm for 4 adversaries is: 1241.144330849559. distance: 1259.118739436436
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   1,  Average loss: 0.1158, Accuracy: 59/496 (11.8952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   2,  Average loss: 0.1064, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   3,  Average loss: 0.0920, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   4,  Average loss: 0.0769, Accuracy: 110/496 (22.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   5,  Average loss: 0.0609, Accuracy: 145/496 (29.2339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 77, internal_epoch   6,  Average loss: 0.0410, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Global model norm: 97.50907910452493.
Norm before scaling: 95.91414618032107. Distance: 6.99358455404314
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 680.3452248674932, distance: 699.3584783571298
Total norm for 4 adversaries is: 680.3452248674932. distance: 699.3584783571298
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   1,  Average loss: 0.0876, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   2,  Average loss: 0.0791, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   3,  Average loss: 0.0780, Accuracy: 195/546 (35.7143%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   4,  Average loss: 0.0742, Accuracy: 198/546 (36.2637%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   5,  Average loss: 0.0734, Accuracy: 197/546 (36.0806%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 276, local model 11, internal_epoch   6,  Average loss: 0.0712, Accuracy: 197/546 (36.0806%), train_poison_data_count: 45
Global model norm: 97.50907910452493.
Norm before scaling: 95.68459131764634. Distance: 5.440143162021659
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 516.964275845053, distance: 544.0143323020084
Total norm for 4 adversaries is: 516.964275845053. distance: 544.0143323020084
___Test Local_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 276, local model 13, internal_epoch   1,  Average loss: 0.1875, Accuracy: 12/620 (1.9355%)
___Train Local_ResNet_18,  epoch 276, local model 13, internal_epoch   2,  Average loss: 0.1027, Accuracy: 294/620 (47.4194%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 28, internal_epoch   1,  Average loss: 0.2077, Accuracy: 105/423 (24.8227%)
___Train Local_ResNet_18,  epoch 276, local model 28, internal_epoch   2,  Average loss: 0.1187, Accuracy: 113/423 (26.7139%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 59, internal_epoch   1,  Average loss: 0.2273, Accuracy: 14/642 (2.1807%)
___Train Local_ResNet_18,  epoch 276, local model 59, internal_epoch   2,  Average loss: 0.1224, Accuracy: 83/642 (12.9283%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 20, internal_epoch   1,  Average loss: 0.4039, Accuracy: 7/362 (1.9337%)
___Train Local_ResNet_18,  epoch 276, local model 20, internal_epoch   2,  Average loss: 0.2727, Accuracy: 16/362 (4.4199%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 4, internal_epoch   1,  Average loss: 0.1058, Accuracy: 198/557 (35.5476%)
___Train Local_ResNet_18,  epoch 276, local model 4, internal_epoch   2,  Average loss: 0.0313, Accuracy: 198/557 (35.5476%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 276, local model 19, internal_epoch   1,  Average loss: 0.4033, Accuracy: 13/173 (7.5145%)
___Train Local_ResNet_18,  epoch 276, local model 19, internal_epoch   2,  Average loss: 0.3254, Accuracy: 13/173 (7.5145%)
___Test Local_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.93329310417175
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 276: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 276: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 205.25092554092407 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:277 choose agents : [17, 33, 77, 11, 50, 93, 13, 55, 16, 5]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 17, internal_epoch   1,  Average loss: 0.2528, Accuracy: 128/526 (24.3346%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 17, internal_epoch   2,  Average loss: 0.0846, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 17, internal_epoch   3,  Average loss: 0.0717, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 17, internal_epoch   4,  Average loss: 0.0667, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 17, internal_epoch   5,  Average loss: 0.0571, Accuracy: 168/526 (31.9392%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 17, internal_epoch   6,  Average loss: 0.0528, Accuracy: 190/526 (36.1217%), train_poison_data_count: 45
Global model norm: 93.52277672110148.
Norm before scaling: 92.80825432208333. Distance: 22.154986906433024
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2203.3572111666326, distance: 2215.4987023241515
Total norm for 4 adversaries is: 2203.3572111666326. distance: 2215.4987023241515
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 33, internal_epoch   1,  Average loss: 0.2985, Accuracy: 124/527 (23.5294%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 33, internal_epoch   2,  Average loss: 0.1697, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 33, internal_epoch   3,  Average loss: 0.1420, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 33, internal_epoch   4,  Average loss: 0.1162, Accuracy: 36/527 (6.8311%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 33, internal_epoch   5,  Average loss: 0.1004, Accuracy: 60/527 (11.3852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 33, internal_epoch   6,  Average loss: 0.0799, Accuracy: 76/527 (14.4213%), train_poison_data_count: 45
Global model norm: 93.52277672110148.
Norm before scaling: 91.50940226624256. Distance: 20.417241966809573
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2024.461286367314, distance: 2041.7240876279047
Total norm for 4 adversaries is: 2024.461286367314. distance: 2041.7240876279047
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   1,  Average loss: 0.3109, Accuracy: 52/496 (10.4839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   2,  Average loss: 0.1297, Accuracy: 32/496 (6.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   3,  Average loss: 0.1046, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   4,  Average loss: 0.0886, Accuracy: 80/496 (16.1290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   5,  Average loss: 0.0745, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 77, internal_epoch   6,  Average loss: 0.0684, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Global model norm: 93.52277672110148.
Norm before scaling: 92.59414550202405. Distance: 22.766190688750775
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2263.3222262859526, distance: 2276.6190941833024
Total norm for 4 adversaries is: 2263.3222262859526. distance: 2276.6190941833024
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   1,  Average loss: 0.3162, Accuracy: 83/546 (15.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   2,  Average loss: 0.1374, Accuracy: 84/546 (15.3846%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   3,  Average loss: 0.1096, Accuracy: 74/546 (13.5531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   4,  Average loss: 0.0892, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   5,  Average loss: 0.0724, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 277, local model 11, internal_epoch   6,  Average loss: 0.0607, Accuracy: 119/546 (21.7949%), train_poison_data_count: 45
Global model norm: 93.52277672110148.
Norm before scaling: 92.57740637906745. Distance: 24.92712033358446
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2478.432972666398, distance: 2492.7120772363583
Total norm for 4 adversaries is: 2478.432972666398. distance: 2492.7120772363583
___Test Local_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 277, local model 50, internal_epoch   1,  Average loss: 0.2718, Accuracy: 113/401 (28.1796%)
___Train Local_ResNet_18,  epoch 277, local model 50, internal_epoch   2,  Average loss: 0.0890, Accuracy: 146/401 (36.4090%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 93, internal_epoch   1,  Average loss: 0.2402, Accuracy: 106/584 (18.1507%)
___Train Local_ResNet_18,  epoch 277, local model 93, internal_epoch   2,  Average loss: 0.0823, Accuracy: 90/584 (15.4110%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 13, internal_epoch   1,  Average loss: 0.1985, Accuracy: 81/620 (13.0645%)
___Train Local_ResNet_18,  epoch 277, local model 13, internal_epoch   2,  Average loss: 0.0839, Accuracy: 332/620 (53.5484%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 55, internal_epoch   1,  Average loss: 0.3700, Accuracy: 35/299 (11.7057%)
___Train Local_ResNet_18,  epoch 277, local model 55, internal_epoch   2,  Average loss: 0.0988, Accuracy: 50/299 (16.7224%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 16, internal_epoch   1,  Average loss: 0.2345, Accuracy: 33/773 (4.2691%)
___Train Local_ResNet_18,  epoch 277, local model 16, internal_epoch   2,  Average loss: 0.0647, Accuracy: 195/773 (25.2264%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 277, local model 5, internal_epoch   1,  Average loss: 0.3301, Accuracy: 55/365 (15.0685%)
___Train Local_ResNet_18,  epoch 277, local model 5, internal_epoch   2,  Average loss: 0.1596, Accuracy: 32/365 (8.7671%)
___Test Local_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 161.53989052772522
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 277: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 277: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 204.20621299743652 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:278 choose agents : [17, 33, 77, 11, 8, 3, 39, 27, 19, 93]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 17, internal_epoch   1,  Average loss: 0.2144, Accuracy: 51/526 (9.6958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 17, internal_epoch   2,  Average loss: 0.1934, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 17, internal_epoch   3,  Average loss: 0.1725, Accuracy: 61/526 (11.5970%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 17, internal_epoch   4,  Average loss: 0.1489, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 17, internal_epoch   5,  Average loss: 0.1148, Accuracy: 72/526 (13.6882%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 17, internal_epoch   6,  Average loss: 0.0578, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Global model norm: 117.3685351654139.
Norm before scaling: 114.8059121340774. Distance: 12.731532466490926
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1248.5943596701052, distance: 1273.1532704274061
Total norm for 4 adversaries is: 1248.5943596701052. distance: 1273.1532704274061
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 33, internal_epoch   1,  Average loss: 0.1213, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 33, internal_epoch   2,  Average loss: 0.1162, Accuracy: 127/527 (24.0987%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 33, internal_epoch   3,  Average loss: 0.0993, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 33, internal_epoch   4,  Average loss: 0.0840, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 33, internal_epoch   5,  Average loss: 0.0712, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 33, internal_epoch   6,  Average loss: 0.0643, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 117.3685351654139.
Norm before scaling: 115.36318753858399. Distance: 8.734105087231587
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 849.8953244370745, distance: 873.410520602998
Total norm for 4 adversaries is: 849.8953244370745. distance: 873.410520602998
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   1,  Average loss: 0.0918, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   2,  Average loss: 0.0854, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   3,  Average loss: 0.0767, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   4,  Average loss: 0.0681, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   5,  Average loss: 0.0604, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 77, internal_epoch   6,  Average loss: 0.0577, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Global model norm: 117.3685351654139.
Norm before scaling: 115.76244786603944. Distance: 6.89132333966606
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 668.196757138195, distance: 689.1323802434479
Total norm for 4 adversaries is: 668.196757138195. distance: 689.1323802434479
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   1,  Average loss: 0.1067, Accuracy: 99/546 (18.1319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   2,  Average loss: 0.0993, Accuracy: 174/546 (31.8681%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   3,  Average loss: 0.0978, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   4,  Average loss: 0.0907, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   5,  Average loss: 0.0870, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 278, local model 11, internal_epoch   6,  Average loss: 0.0806, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Global model norm: 117.3685351654139.
Norm before scaling: 115.24292023401047. Distance: 6.5168192475676925
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 620.3012624926698, distance: 651.6819344971901
Total norm for 4 adversaries is: 620.3012624926698. distance: 651.6819344971901
___Test Local_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 278, local model 8, internal_epoch   1,  Average loss: 0.0895, Accuracy: 96/534 (17.9775%)
___Train Local_ResNet_18,  epoch 278, local model 8, internal_epoch   2,  Average loss: 0.0541, Accuracy: 80/534 (14.9813%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 3, internal_epoch   1,  Average loss: 0.1395, Accuracy: 75/780 (9.6154%)
___Train Local_ResNet_18,  epoch 278, local model 3, internal_epoch   2,  Average loss: 0.0482, Accuracy: 228/780 (29.2308%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 39, internal_epoch   1,  Average loss: 0.1420, Accuracy: 9/217 (4.1475%)
___Train Local_ResNet_18,  epoch 278, local model 39, internal_epoch   2,  Average loss: 0.1148, Accuracy: 9/217 (4.1475%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 27, internal_epoch   1,  Average loss: 0.2246, Accuracy: 1/397 (0.2519%)
___Train Local_ResNet_18,  epoch 278, local model 27, internal_epoch   2,  Average loss: 0.1674, Accuracy: 89/397 (22.4181%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 19, internal_epoch   1,  Average loss: 0.1664, Accuracy: 16/173 (9.2486%)
___Train Local_ResNet_18,  epoch 278, local model 19, internal_epoch   2,  Average loss: 0.1272, Accuracy: 15/173 (8.6705%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 278, local model 93, internal_epoch   1,  Average loss: 0.1738, Accuracy: 35/584 (5.9932%)
___Train Local_ResNet_18,  epoch 278, local model 93, internal_epoch   2,  Average loss: 0.1229, Accuracy: 147/584 (25.1712%)
___Test Local_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 178.2125961780548
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 278: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 278: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 219.86866879463196 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:279 choose agents : [17, 33, 77, 11, 92, 14, 74, 41, 87, 44]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 17, internal_epoch   1,  Average loss: 0.2527, Accuracy: 92/526 (17.4905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 17, internal_epoch   2,  Average loss: 0.0850, Accuracy: 69/526 (13.1179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 17, internal_epoch   3,  Average loss: 0.0541, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 17, internal_epoch   4,  Average loss: 0.0432, Accuracy: 159/526 (30.2281%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 17, internal_epoch   5,  Average loss: 0.0409, Accuracy: 151/526 (28.7072%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 17, internal_epoch   6,  Average loss: 0.0369, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Global model norm: 111.99962070945821.
Norm before scaling: 110.54557088453386. Distance: 16.465594863502027
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1632.247300503205, distance: 1646.5594432027044
Total norm for 4 adversaries is: 1632.247300503205. distance: 1646.5594432027044
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 33, internal_epoch   1,  Average loss: 0.3314, Accuracy: 169/527 (32.0683%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 33, internal_epoch   2,  Average loss: 0.1251, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 33, internal_epoch   3,  Average loss: 0.0942, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 33, internal_epoch   4,  Average loss: 0.0798, Accuracy: 122/527 (23.1499%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 33, internal_epoch   5,  Average loss: 0.0687, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 33, internal_epoch   6,  Average loss: 0.0592, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Global model norm: 111.99962070945821.
Norm before scaling: 110.08264384798586. Distance: 20.41558428120461
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2023.9199588916554, distance: 2041.5583508682773
Total norm for 4 adversaries is: 2023.9199588916554. distance: 2041.5583508682773
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   1,  Average loss: 0.3666, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   2,  Average loss: 0.1214, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   3,  Average loss: 0.0927, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   4,  Average loss: 0.0794, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   5,  Average loss: 0.0669, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 77, internal_epoch   6,  Average loss: 0.0573, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Global model norm: 111.99962070945821.
Norm before scaling: 110.504772238578. Distance: 21.641060041881683
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2148.442109995054, distance: 2164.105819963525
Total norm for 4 adversaries is: 2148.442109995054. distance: 2164.105819963525
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   1,  Average loss: 0.3970, Accuracy: 78/546 (14.2857%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   2,  Average loss: 0.1512, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   3,  Average loss: 0.1126, Accuracy: 75/546 (13.7363%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   4,  Average loss: 0.0865, Accuracy: 51/546 (9.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   5,  Average loss: 0.0662, Accuracy: 55/546 (10.0733%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 279, local model 11, internal_epoch   6,  Average loss: 0.0534, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Global model norm: 111.99962070945821.
Norm before scaling: 110.21833799894644. Distance: 24.008821773448584
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2383.1812772007083, distance: 2400.8822336799444
Total norm for 4 adversaries is: 2383.1812772007083. distance: 2400.8822336799444
___Test Local_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 279, local model 92, internal_epoch   1,  Average loss: 0.2090, Accuracy: 59/796 (7.4121%)
___Train Local_ResNet_18,  epoch 279, local model 92, internal_epoch   2,  Average loss: 0.0498, Accuracy: 233/796 (29.2714%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 14, internal_epoch   1,  Average loss: 0.4317, Accuracy: 2/318 (0.6289%)
___Train Local_ResNet_18,  epoch 279, local model 14, internal_epoch   2,  Average loss: 0.1046, Accuracy: 43/318 (13.5220%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 74, internal_epoch   1,  Average loss: 0.4056, Accuracy: 21/469 (4.4776%)
___Train Local_ResNet_18,  epoch 279, local model 74, internal_epoch   2,  Average loss: 0.1342, Accuracy: 37/469 (7.8891%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 41, internal_epoch   1,  Average loss: 0.1762, Accuracy: 277/513 (53.9961%)
___Train Local_ResNet_18,  epoch 279, local model 41, internal_epoch   2,  Average loss: 0.0705, Accuracy: 288/513 (56.1404%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 87, internal_epoch   1,  Average loss: 0.3852, Accuracy: 47/397 (11.8388%)
___Train Local_ResNet_18,  epoch 279, local model 87, internal_epoch   2,  Average loss: 0.1193, Accuracy: 105/397 (26.4484%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 279, local model 44, internal_epoch   1,  Average loss: 0.3180, Accuracy: 33/436 (7.5688%)
___Train Local_ResNet_18,  epoch 279, local model 44, internal_epoch   2,  Average loss: 0.0887, Accuracy: 114/436 (26.1468%)
___Test Local_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.9577910900116
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 279: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 279: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 211.503169298172 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:280 choose agents : [17, 33, 77, 11, 60, 14, 80, 2, 45, 67]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 17, internal_epoch   1,  Average loss: 0.0933, Accuracy: 63/526 (11.9772%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 17, internal_epoch   2,  Average loss: 0.0871, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 17, internal_epoch   3,  Average loss: 0.0736, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 17, internal_epoch   4,  Average loss: 0.0707, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 17, internal_epoch   5,  Average loss: 0.0705, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 17, internal_epoch   6,  Average loss: 0.0686, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Global model norm: 124.47139402162853.
Norm before scaling: 122.61186298769178. Distance: 7.076128747625958
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 682.096721513892, distance: 707.612910601552
Total norm for 4 adversaries is: 682.096721513892. distance: 707.612910601552
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 33, internal_epoch   1,  Average loss: 0.1721, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 33, internal_epoch   2,  Average loss: 0.1622, Accuracy: 122/527 (23.1499%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 33, internal_epoch   3,  Average loss: 0.1409, Accuracy: 126/527 (23.9089%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 33, internal_epoch   4,  Average loss: 0.1289, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 33, internal_epoch   5,  Average loss: 0.1171, Accuracy: 95/527 (18.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 33, internal_epoch   6,  Average loss: 0.1060, Accuracy: 102/527 (19.3548%), train_poison_data_count: 45
Global model norm: 124.47139402162853.
Norm before scaling: 121.99386030913605. Distance: 10.212806022849527
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 993.4859712144907, distance: 1021.280568697946
Total norm for 4 adversaries is: 993.4859712144907. distance: 1021.280568697946
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   1,  Average loss: 0.1385, Accuracy: 58/496 (11.6935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   2,  Average loss: 0.1157, Accuracy: 59/496 (11.8952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   3,  Average loss: 0.0999, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   4,  Average loss: 0.0965, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   5,  Average loss: 0.0923, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 77, internal_epoch   6,  Average loss: 0.0873, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Global model norm: 124.47139402162853.
Norm before scaling: 122.60784873046464. Distance: 9.106540350124053
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 889.0706524230794, distance: 910.6540918482715
Total norm for 4 adversaries is: 889.0706524230794. distance: 910.6540918482715
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   1,  Average loss: 0.0826, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   2,  Average loss: 0.0716, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   3,  Average loss: 0.0653, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   4,  Average loss: 0.0665, Accuracy: 173/546 (31.6850%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   5,  Average loss: 0.0637, Accuracy: 186/546 (34.0659%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 280, local model 11, internal_epoch   6,  Average loss: 0.0645, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Global model norm: 124.47139402162853.
Norm before scaling: 122.65398883266089. Distance: 6.3045332084977375
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 603.3878831232857, distance: 630.4533091355775
Total norm for 4 adversaries is: 603.3878831232857. distance: 630.4533091355775
___Test Local_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 280, local model 60, internal_epoch   1,  Average loss: 0.2721, Accuracy: 20/284 (7.0423%)
___Train Local_ResNet_18,  epoch 280, local model 60, internal_epoch   2,  Average loss: 0.1271, Accuracy: 24/284 (8.4507%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 14, internal_epoch   1,  Average loss: 0.1759, Accuracy: 30/318 (9.4340%)
___Train Local_ResNet_18,  epoch 280, local model 14, internal_epoch   2,  Average loss: 0.0759, Accuracy: 88/318 (27.6730%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 80, internal_epoch   1,  Average loss: 0.2291, Accuracy: 45/363 (12.3967%)
___Train Local_ResNet_18,  epoch 280, local model 80, internal_epoch   2,  Average loss: 0.0799, Accuracy: 168/363 (46.2810%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 2, internal_epoch   1,  Average loss: 0.2045, Accuracy: 46/461 (9.9783%)
___Train Local_ResNet_18,  epoch 280, local model 2, internal_epoch   2,  Average loss: 0.1037, Accuracy: 244/461 (52.9284%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 45, internal_epoch   1,  Average loss: 0.1830, Accuracy: 76/529 (14.3667%)
___Train Local_ResNet_18,  epoch 280, local model 45, internal_epoch   2,  Average loss: 0.0549, Accuracy: 144/529 (27.2212%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 280, local model 67, internal_epoch   1,  Average loss: 0.1455, Accuracy: 213/842 (25.2969%)
___Train Local_ResNet_18,  epoch 280, local model 67, internal_epoch   2,  Average loss: 0.0473, Accuracy: 217/842 (25.7720%)
___Test Local_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 157.5206069946289
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 280: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 280: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 196.66683053970337 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:281 choose agents : [17, 33, 77, 11, 9, 92, 47, 24, 79, 63]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 17, internal_epoch   1,  Average loss: 0.0495, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 17, internal_epoch   2,  Average loss: 0.0467, Accuracy: 164/526 (31.1787%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 17, internal_epoch   3,  Average loss: 0.0404, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 17, internal_epoch   4,  Average loss: 0.0400, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 17, internal_epoch   5,  Average loss: 0.0362, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 17, internal_epoch   6,  Average loss: 0.0363, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Global model norm: 118.81059309358741.
Norm before scaling: 117.48666397058646. Distance: 7.353978861571166
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 719.8845393533604, distance: 735.3979364942494
Total norm for 4 adversaries is: 719.8845393533604. distance: 735.3979364942494
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 33, internal_epoch   1,  Average loss: 0.0863, Accuracy: 105/527 (19.9241%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 33, internal_epoch   2,  Average loss: 0.0761, Accuracy: 104/527 (19.7343%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 33, internal_epoch   3,  Average loss: 0.0651, Accuracy: 108/527 (20.4934%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 33, internal_epoch   4,  Average loss: 0.0546, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 33, internal_epoch   5,  Average loss: 0.0474, Accuracy: 189/527 (35.8634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 33, internal_epoch   6,  Average loss: 0.0421, Accuracy: 201/527 (38.1404%), train_poison_data_count: 45
Global model norm: 118.81059309358741.
Norm before scaling: 117.27403055317703. Distance: 9.273655928214199
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 910.6300017021183, distance: 927.3656236889526
Total norm for 4 adversaries is: 910.6300017021183. distance: 927.3656236889526
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   1,  Average loss: 0.0605, Accuracy: 51/496 (10.2823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   2,  Average loss: 0.0538, Accuracy: 50/496 (10.0806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   3,  Average loss: 0.0472, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   4,  Average loss: 0.0420, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   5,  Average loss: 0.0393, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 77, internal_epoch   6,  Average loss: 0.0379, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Global model norm: 118.81059309358741.
Norm before scaling: 117.50973613253286. Distance: 5.838855345912269
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 566.4690801358888, distance: 583.8855303053845
Total norm for 4 adversaries is: 566.4690801358888. distance: 583.8855303053845
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   1,  Average loss: 0.0843, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   2,  Average loss: 0.0775, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   3,  Average loss: 0.0657, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   4,  Average loss: 0.0573, Accuracy: 101/546 (18.4982%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   5,  Average loss: 0.0518, Accuracy: 132/546 (24.1758%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 281, local model 11, internal_epoch   6,  Average loss: 0.0445, Accuracy: 122/546 (22.3443%), train_poison_data_count: 45
Global model norm: 118.81059309358741.
Norm before scaling: 117.15304076692803. Distance: 8.275381175133264
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 808.0687625443766, distance: 827.538141114958
Total norm for 4 adversaries is: 808.0687625443766. distance: 827.538141114958
___Test Local_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 281, local model 9, internal_epoch   1,  Average loss: 0.1271, Accuracy: 1/368 (0.2717%)
___Train Local_ResNet_18,  epoch 281, local model 9, internal_epoch   2,  Average loss: 0.0615, Accuracy: 27/368 (7.3370%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 92, internal_epoch   1,  Average loss: 0.0975, Accuracy: 159/796 (19.9749%)
___Train Local_ResNet_18,  epoch 281, local model 92, internal_epoch   2,  Average loss: 0.0475, Accuracy: 273/796 (34.2965%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 47, internal_epoch   1,  Average loss: 0.1083, Accuracy: 143/654 (21.8654%)
___Train Local_ResNet_18,  epoch 281, local model 47, internal_epoch   2,  Average loss: 0.0469, Accuracy: 258/654 (39.4495%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 24, internal_epoch   1,  Average loss: 0.1299, Accuracy: 24/320 (7.5000%)
___Train Local_ResNet_18,  epoch 281, local model 24, internal_epoch   2,  Average loss: 0.0759, Accuracy: 105/320 (32.8125%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 79, internal_epoch   1,  Average loss: 0.1735, Accuracy: 5/154 (3.2468%)
___Train Local_ResNet_18,  epoch 281, local model 79, internal_epoch   2,  Average loss: 0.1337, Accuracy: 5/154 (3.2468%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 281, local model 63, internal_epoch   1,  Average loss: 0.0859, Accuracy: 61/752 (8.1117%)
___Train Local_ResNet_18,  epoch 281, local model 63, internal_epoch   2,  Average loss: 0.0391, Accuracy: 192/752 (25.5319%)
___Test Local_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.37793588638306
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 281: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 281: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 213.2975697517395 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:282 choose agents : [17, 33, 77, 11, 79, 14, 87, 2, 64, 12]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 17, internal_epoch   1,  Average loss: 0.1491, Accuracy: 88/526 (16.7300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 17, internal_epoch   2,  Average loss: 0.1144, Accuracy: 86/526 (16.3498%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 17, internal_epoch   3,  Average loss: 0.0828, Accuracy: 64/526 (12.1673%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 17, internal_epoch   4,  Average loss: 0.0651, Accuracy: 71/526 (13.4981%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 17, internal_epoch   5,  Average loss: 0.0537, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 17, internal_epoch   6,  Average loss: 0.0473, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Global model norm: 114.76059064009081.
Norm before scaling: 112.8544027095864. Distance: 11.022486158341948
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1082.859524592179, distance: 1102.2485540929506
Total norm for 4 adversaries is: 1082.859524592179. distance: 1102.2485540929506
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 33, internal_epoch   1,  Average loss: 0.0927, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 33, internal_epoch   2,  Average loss: 0.0776, Accuracy: 193/527 (36.6224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 33, internal_epoch   3,  Average loss: 0.0624, Accuracy: 182/527 (34.5351%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 33, internal_epoch   4,  Average loss: 0.0585, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 33, internal_epoch   5,  Average loss: 0.0533, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 33, internal_epoch   6,  Average loss: 0.0481, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Global model norm: 114.76059064009081.
Norm before scaling: 112.96443629385091. Distance: 7.327941501817051
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 709.8481351669525, distance: 732.7941815407653
Total norm for 4 adversaries is: 709.8481351669525. distance: 732.7941815407653
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   1,  Average loss: 0.1072, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   2,  Average loss: 0.0834, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   3,  Average loss: 0.0602, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   4,  Average loss: 0.0508, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   5,  Average loss: 0.0455, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 77, internal_epoch   6,  Average loss: 0.0427, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Global model norm: 114.76059064009081.
Norm before scaling: 113.26237773831829. Distance: 8.651276740077064
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 848.509722984952, distance: 865.1276278677037
Total norm for 4 adversaries is: 848.509722984952. distance: 865.1276278677037
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   1,  Average loss: 0.1049, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   2,  Average loss: 0.0767, Accuracy: 95/546 (17.3993%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   3,  Average loss: 0.0611, Accuracy: 174/546 (31.8681%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   4,  Average loss: 0.0526, Accuracy: 202/546 (36.9963%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   5,  Average loss: 0.0472, Accuracy: 207/546 (37.9121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 282, local model 11, internal_epoch   6,  Average loss: 0.0441, Accuracy: 196/546 (35.8974%), train_poison_data_count: 45
Global model norm: 114.76059064009081.
Norm before scaling: 113.00468826695864. Distance: 8.218361965055559
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 801.1473803239951, distance: 821.836168284166
Total norm for 4 adversaries is: 801.1473803239951. distance: 821.836168284166
___Test Local_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 282, local model 79, internal_epoch   1,  Average loss: 0.2339, Accuracy: 6/154 (3.8961%)
___Train Local_ResNet_18,  epoch 282, local model 79, internal_epoch   2,  Average loss: 0.1939, Accuracy: 6/154 (3.8961%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 14, internal_epoch   1,  Average loss: 0.1694, Accuracy: 14/318 (4.4025%)
___Train Local_ResNet_18,  epoch 282, local model 14, internal_epoch   2,  Average loss: 0.1248, Accuracy: 5/318 (1.5723%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 87, internal_epoch   1,  Average loss: 0.1507, Accuracy: 53/397 (13.3501%)
___Train Local_ResNet_18,  epoch 282, local model 87, internal_epoch   2,  Average loss: 0.0817, Accuracy: 51/397 (12.8463%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 2, internal_epoch   1,  Average loss: 0.1429, Accuracy: 86/461 (18.6551%)
___Train Local_ResNet_18,  epoch 282, local model 2, internal_epoch   2,  Average loss: 0.0639, Accuracy: 72/461 (15.6182%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 64, internal_epoch   1,  Average loss: 0.1594, Accuracy: 15/686 (2.1866%)
___Train Local_ResNet_18,  epoch 282, local model 64, internal_epoch   2,  Average loss: 0.0786, Accuracy: 201/686 (29.3003%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 282, local model 12, internal_epoch   1,  Average loss: 0.1163, Accuracy: 388/977 (39.7134%)
___Train Local_ResNet_18,  epoch 282, local model 12, internal_epoch   2,  Average loss: 0.0468, Accuracy: 273/977 (27.9427%)
___Test Local_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.84100556373596
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 282: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 282: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 218.5077736377716 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:283 choose agents : [17, 33, 77, 11, 61, 1, 84, 9, 0, 14]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 17, internal_epoch   1,  Average loss: 0.0969, Accuracy: 105/526 (19.9620%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 17, internal_epoch   2,  Average loss: 0.0823, Accuracy: 190/526 (36.1217%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 17, internal_epoch   3,  Average loss: 0.0749, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 17, internal_epoch   4,  Average loss: 0.0648, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 17, internal_epoch   5,  Average loss: 0.0519, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 17, internal_epoch   6,  Average loss: 0.0388, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Global model norm: 111.21284930961215.
Norm before scaling: 109.49928206813732. Distance: 6.910041700311861
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 668.7746257148218, distance: 691.0041832362522
Total norm for 4 adversaries is: 668.7746257148218. distance: 691.0041832362522
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 33, internal_epoch   1,  Average loss: 0.2111, Accuracy: 90/527 (17.0778%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 33, internal_epoch   2,  Average loss: 0.1796, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 33, internal_epoch   3,  Average loss: 0.1589, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 33, internal_epoch   4,  Average loss: 0.0948, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 33, internal_epoch   5,  Average loss: 0.0396, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 33, internal_epoch   6,  Average loss: 0.0322, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Global model norm: 111.21284930961215.
Norm before scaling: 108.98741595219835. Distance: 10.61085735858688
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1038.2716407568878, distance: 1061.0857057749859
Total norm for 4 adversaries is: 1038.2716407568878. distance: 1061.0857057749859
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   1,  Average loss: 0.1191, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   2,  Average loss: 0.1089, Accuracy: 144/496 (29.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   3,  Average loss: 0.0902, Accuracy: 112/496 (22.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   4,  Average loss: 0.0764, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   5,  Average loss: 0.0574, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 77, internal_epoch   6,  Average loss: 0.0363, Accuracy: 121/496 (24.3952%), train_poison_data_count: 40
Global model norm: 111.21284930961215.
Norm before scaling: 109.55655467325997. Distance: 7.103471321091563
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 689.4558542793004, distance: 710.3470982554937
Total norm for 4 adversaries is: 689.4558542793004. distance: 710.3470982554937
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   1,  Average loss: 0.1309, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   2,  Average loss: 0.1193, Accuracy: 96/546 (17.5824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   3,  Average loss: 0.1048, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   4,  Average loss: 0.0796, Accuracy: 105/546 (19.2308%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   5,  Average loss: 0.0622, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 283, local model 11, internal_epoch   6,  Average loss: 0.0532, Accuracy: 170/546 (31.1355%), train_poison_data_count: 45
Global model norm: 111.21284930961215.
Norm before scaling: 109.19204788038596. Distance: 8.386766054244795
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 814.9684042955286, distance: 838.6765988746795
Total norm for 4 adversaries is: 814.9684042955286. distance: 838.6765988746795
___Test Local_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 283, local model 61, internal_epoch   1,  Average loss: 0.1526, Accuracy: 30/590 (5.0847%)
___Train Local_ResNet_18,  epoch 283, local model 61, internal_epoch   2,  Average loss: 0.0781, Accuracy: 189/590 (32.0339%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 1, internal_epoch   1,  Average loss: 0.1496, Accuracy: 12/641 (1.8721%)
___Train Local_ResNet_18,  epoch 283, local model 1, internal_epoch   2,  Average loss: 0.0655, Accuracy: 177/641 (27.6131%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 84, internal_epoch   1,  Average loss: 0.1112, Accuracy: 237/1053 (22.5071%)
___Train Local_ResNet_18,  epoch 283, local model 84, internal_epoch   2,  Average loss: 0.0498, Accuracy: 180/1053 (17.0940%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 9, internal_epoch   1,  Average loss: 0.1312, Accuracy: 50/368 (13.5870%)
___Train Local_ResNet_18,  epoch 283, local model 9, internal_epoch   2,  Average loss: 0.0718, Accuracy: 109/368 (29.6196%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 0, internal_epoch   1,  Average loss: 0.2496, Accuracy: 59/367 (16.0763%)
___Train Local_ResNet_18,  epoch 283, local model 0, internal_epoch   2,  Average loss: 0.1961, Accuracy: 56/367 (15.2589%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 283, local model 14, internal_epoch   1,  Average loss: 0.1401, Accuracy: 12/318 (3.7736%)
___Train Local_ResNet_18,  epoch 283, local model 14, internal_epoch   2,  Average loss: 0.0908, Accuracy: 75/318 (23.5849%)
___Test Local_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 160.70149779319763
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 283: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 283: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 198.49965476989746 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:284 choose agents : [17, 33, 77, 11, 88, 16, 48, 44, 4, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 17, internal_epoch   1,  Average loss: 0.6729, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 17, internal_epoch   2,  Average loss: 0.0849, Accuracy: 66/526 (12.5475%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 17, internal_epoch   3,  Average loss: 0.0680, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 17, internal_epoch   4,  Average loss: 0.0507, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 17, internal_epoch   5,  Average loss: 0.0420, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 17, internal_epoch   6,  Average loss: 0.0399, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Global model norm: 106.45264682301234.
Norm before scaling: 106.42585171875534. Distance: 34.595426082928576
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3443.764219571369, distance: 3459.5425998244336
Total norm for 4 adversaries is: 3443.764219571369. distance: 3459.5425998244336
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 33, internal_epoch   1,  Average loss: 0.4969, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 33, internal_epoch   2,  Average loss: 0.0969, Accuracy: 139/527 (26.3757%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 33, internal_epoch   3,  Average loss: 0.0864, Accuracy: 135/527 (25.6167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 33, internal_epoch   4,  Average loss: 0.0720, Accuracy: 140/527 (26.5655%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 33, internal_epoch   5,  Average loss: 0.0585, Accuracy: 128/527 (24.2884%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 33, internal_epoch   6,  Average loss: 0.0444, Accuracy: 136/527 (25.8065%), train_poison_data_count: 45
Global model norm: 106.45264682301234.
Norm before scaling: 104.98528077634265. Distance: 26.678095212367698
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2650.7249951664166, distance: 2667.809682117523
Total norm for 4 adversaries is: 2650.7249951664166. distance: 2667.809682117523
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   1,  Average loss: 0.6462, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   2,  Average loss: 0.0774, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   3,  Average loss: 0.0712, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   4,  Average loss: 0.0613, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   5,  Average loss: 0.0538, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 77, internal_epoch   6,  Average loss: 0.0469, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Global model norm: 106.45264682301234.
Norm before scaling: 106.33387314550806. Distance: 32.82159286213594
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3267.054942911123, distance: 3282.159045506479
Total norm for 4 adversaries is: 3267.054942911123. distance: 3282.159045506479
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   1,  Average loss: 0.5453, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   2,  Average loss: 0.0682, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   3,  Average loss: 0.0629, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   4,  Average loss: 0.0556, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   5,  Average loss: 0.0493, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 284, local model 11, internal_epoch   6,  Average loss: 0.0443, Accuracy: 181/546 (33.1502%), train_poison_data_count: 45
Global model norm: 106.45264682301234.
Norm before scaling: 105.84000399335073. Distance: 30.746744619349542
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3058.9887217837204, distance: 3074.6742916933495
Total norm for 4 adversaries is: 3058.9887217837204. distance: 3074.6742916933495
___Test Local_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 284, local model 88, internal_epoch   1,  Average loss: 0.4118, Accuracy: 140/447 (31.3199%)
___Train Local_ResNet_18,  epoch 284, local model 88, internal_epoch   2,  Average loss: 0.0568, Accuracy: 244/447 (54.5861%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 16, internal_epoch   1,  Average loss: 0.3760, Accuracy: 41/773 (5.3040%)
___Train Local_ResNet_18,  epoch 284, local model 16, internal_epoch   2,  Average loss: 0.0535, Accuracy: 180/773 (23.2859%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 48, internal_epoch   1,  Average loss: 0.6094, Accuracy: 34/378 (8.9947%)
___Train Local_ResNet_18,  epoch 284, local model 48, internal_epoch   2,  Average loss: 0.0819, Accuracy: 52/378 (13.7566%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 44, internal_epoch   1,  Average loss: 0.5372, Accuracy: 43/436 (9.8624%)
___Train Local_ResNet_18,  epoch 284, local model 44, internal_epoch   2,  Average loss: 0.0695, Accuracy: 71/436 (16.2844%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 4, internal_epoch   1,  Average loss: 0.4542, Accuracy: 136/557 (24.4165%)
___Train Local_ResNet_18,  epoch 284, local model 4, internal_epoch   2,  Average loss: 0.0604, Accuracy: 208/557 (37.3429%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 284, local model 45, internal_epoch   1,  Average loss: 0.4920, Accuracy: 48/529 (9.0737%)
___Train Local_ResNet_18,  epoch 284, local model 45, internal_epoch   2,  Average loss: 0.0691, Accuracy: 80/529 (15.1229%)
___Test Local_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 173.63474822044373
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 284: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 284: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 222.8530240058899 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:285 choose agents : [17, 33, 77, 11, 1, 58, 22, 13, 52, 20]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 17, internal_epoch   1,  Average loss: 0.0914, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 17, internal_epoch   2,  Average loss: 0.0779, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 17, internal_epoch   3,  Average loss: 0.0691, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 17, internal_epoch   4,  Average loss: 0.0582, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 17, internal_epoch   5,  Average loss: 0.0562, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 17, internal_epoch   6,  Average loss: 0.0521, Accuracy: 197/526 (37.4525%), train_poison_data_count: 45
Global model norm: 150.39063717532417.
Norm before scaling: 148.30558612203384. Distance: 7.1163751701792775
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 679.4860649785248, distance: 711.6375042814987
Total norm for 4 adversaries is: 679.4860649785248. distance: 711.6375042814987
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 33, internal_epoch   1,  Average loss: 0.1554, Accuracy: 100/527 (18.9753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 33, internal_epoch   2,  Average loss: 0.1207, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 33, internal_epoch   3,  Average loss: 0.1002, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 33, internal_epoch   4,  Average loss: 0.0770, Accuracy: 97/527 (18.4061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 33, internal_epoch   5,  Average loss: 0.0697, Accuracy: 183/527 (34.7249%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 33, internal_epoch   6,  Average loss: 0.0654, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Global model norm: 150.39063717532417.
Norm before scaling: 148.4174591734409. Distance: 14.405161123437235
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1420.5608487495354, distance: 1440.5161401386656
Total norm for 4 adversaries is: 1420.5608487495354. distance: 1440.5161401386656
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   1,  Average loss: 0.1234, Accuracy: 52/496 (10.4839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   2,  Average loss: 0.1096, Accuracy: 96/496 (19.3548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   3,  Average loss: 0.0998, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   4,  Average loss: 0.0874, Accuracy: 142/496 (28.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   5,  Average loss: 0.0761, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 77, internal_epoch   6,  Average loss: 0.0682, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Global model norm: 150.39063717532417.
Norm before scaling: 148.37378237705946. Distance: 9.076765106298712
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 882.0425159820812, distance: 907.6764979881324
Total norm for 4 adversaries is: 882.0425159820812. distance: 907.6764979881324
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 11, internal_epoch   1,  Average loss: 0.1514, Accuracy: 101/546 (18.4982%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 11, internal_epoch   2,  Average loss: 0.1309, Accuracy: 112/546 (20.5128%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 11, internal_epoch   3,  Average loss: 0.1156, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 11, internal_epoch   4,  Average loss: 0.1010, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 11, internal_epoch   5,  Average loss: 0.0871, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 285, local model 11, internal_epoch   6,  Average loss: 0.0737, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Global model norm: 150.39063717532417.
Norm before scaling: 147.97309589710895. Distance: 11.483319333921036
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1120.699000624164, distance: 1148.3318880010256
Total norm for 4 adversaries is: 1120.699000624164. distance: 1148.3318880010256
___Test Local_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 285, local model 1, internal_epoch   1,  Average loss: 0.2141, Accuracy: 30/641 (4.6802%)
___Train Local_ResNet_18,  epoch 285, local model 1, internal_epoch   2,  Average loss: 0.1584, Accuracy: 34/641 (5.3042%)
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 285, local model 58, internal_epoch   1,  Average loss: 0.2237, Accuracy: 6/234 (2.5641%)
___Train Local_ResNet_18,  epoch 285, local model 58, internal_epoch   2,  Average loss: 0.1620, Accuracy: 12/234 (5.1282%)
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 285, local model 22, internal_epoch   1,  Average loss: 0.1973, Accuracy: 10/494 (2.0243%)
___Train Local_ResNet_18,  epoch 285, local model 22, internal_epoch   2,  Average loss: 0.1275, Accuracy: 40/494 (8.0972%)
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 285, local model 13, internal_epoch   1,  Average loss: 0.1075, Accuracy: 105/620 (16.9355%)
___Train Local_ResNet_18,  epoch 285, local model 13, internal_epoch   2,  Average loss: 0.0713, Accuracy: 328/620 (52.9032%)
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 285, local model 52, internal_epoch   1,  Average loss: 0.1273, Accuracy: 40/214 (18.6916%)
___Train Local_ResNet_18,  epoch 285, local model 52, internal_epoch   2,  Average loss: 0.1044, Accuracy: 40/214 (18.6916%)
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 285, local model 20, internal_epoch   1,  Average loss: 0.3019, Accuracy: 1/362 (0.2762%)
___Train Local_ResNet_18,  epoch 285, local model 20, internal_epoch   2,  Average loss: 0.0990, Accuracy: 20/362 (5.5249%)
___Test Local_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 170.0843677520752
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 285: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 285: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 216.53832411766052 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:286 choose agents : [17, 33, 77, 11, 95, 47, 93, 56, 5, 31]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 17, internal_epoch   1,  Average loss: 0.2089, Accuracy: 92/526 (17.4905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 17, internal_epoch   2,  Average loss: 0.1637, Accuracy: 91/526 (17.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 17, internal_epoch   3,  Average loss: 0.1268, Accuracy: 84/526 (15.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 17, internal_epoch   4,  Average loss: 0.0903, Accuracy: 90/526 (17.1103%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 17, internal_epoch   5,  Average loss: 0.0702, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 17, internal_epoch   6,  Average loss: 0.0602, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Global model norm: 144.88239438636083.
Norm before scaling: 142.55651976716112. Distance: 13.439691409246763
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1319.9721587972983, distance: 1343.9691216690956
Total norm for 4 adversaries is: 1319.9721587972983. distance: 1343.9691216690956
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 33, internal_epoch   1,  Average loss: 0.1362, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 33, internal_epoch   2,  Average loss: 0.1079, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 33, internal_epoch   3,  Average loss: 0.0862, Accuracy: 171/527 (32.4478%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 33, internal_epoch   4,  Average loss: 0.0823, Accuracy: 171/527 (32.4478%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 33, internal_epoch   5,  Average loss: 0.0722, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 33, internal_epoch   6,  Average loss: 0.0667, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Global model norm: 144.88239438636083.
Norm before scaling: 142.62901916992558. Distance: 8.877896118436286
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 858.1913393876682, distance: 887.7896006374483
Total norm for 4 adversaries is: 858.1913393876682. distance: 887.7896006374483
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 77, internal_epoch   1,  Average loss: 0.1651, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 77, internal_epoch   2,  Average loss: 0.1160, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 77, internal_epoch   3,  Average loss: 0.0921, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 77, internal_epoch   4,  Average loss: 0.0758, Accuracy: 120/496 (24.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 77, internal_epoch   5,  Average loss: 0.0675, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 77, internal_epoch   6,  Average loss: 0.0604, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Global model norm: 144.88239438636083.
Norm before scaling: 143.03435311796605. Distance: 11.783687268615509
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1158.6414458321435, distance: 1178.3686816951645
Total norm for 4 adversaries is: 1158.6414458321435. distance: 1178.3686816951645
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 11, internal_epoch   1,  Average loss: 0.1637, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 11, internal_epoch   2,  Average loss: 0.1138, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 11, internal_epoch   3,  Average loss: 0.0937, Accuracy: 157/546 (28.7546%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 11, internal_epoch   4,  Average loss: 0.0839, Accuracy: 171/546 (31.3187%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 11, internal_epoch   5,  Average loss: 0.0747, Accuracy: 171/546 (31.3187%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 286, local model 11, internal_epoch   6,  Average loss: 0.0691, Accuracy: 175/546 (32.0513%), train_poison_data_count: 45
Global model norm: 144.88239438636083.
Norm before scaling: 142.6188580513636. Distance: 10.615332300318789
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1035.1319964139839, distance: 1061.5332072055023
Total norm for 4 adversaries is: 1035.1319964139839. distance: 1061.5332072055023
___Test Local_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 286, local model 95, internal_epoch   1,  Average loss: 0.2885, Accuracy: 67/569 (11.7750%)
___Train Local_ResNet_18,  epoch 286, local model 95, internal_epoch   2,  Average loss: 0.1416, Accuracy: 68/569 (11.9508%)
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 286, local model 47, internal_epoch   1,  Average loss: 0.2757, Accuracy: 18/654 (2.7523%)
___Train Local_ResNet_18,  epoch 286, local model 47, internal_epoch   2,  Average loss: 0.1053, Accuracy: 118/654 (18.0428%)
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 286, local model 93, internal_epoch   1,  Average loss: 0.2294, Accuracy: 64/584 (10.9589%)
___Train Local_ResNet_18,  epoch 286, local model 93, internal_epoch   2,  Average loss: 0.1107, Accuracy: 173/584 (29.6233%)
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 286, local model 56, internal_epoch   1,  Average loss: 0.2000, Accuracy: 158/743 (21.2651%)
___Train Local_ResNet_18,  epoch 286, local model 56, internal_epoch   2,  Average loss: 0.0920, Accuracy: 166/743 (22.3419%)
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 286, local model 5, internal_epoch   1,  Average loss: 0.2233, Accuracy: 82/365 (22.4658%)
___Train Local_ResNet_18,  epoch 286, local model 5, internal_epoch   2,  Average loss: 0.1003, Accuracy: 101/365 (27.6712%)
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 286, local model 31, internal_epoch   1,  Average loss: 0.1742, Accuracy: 120/706 (16.9972%)
___Train Local_ResNet_18,  epoch 286, local model 31, internal_epoch   2,  Average loss: 0.0757, Accuracy: 240/706 (33.9943%)
___Test Local_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.3490617275238
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 286: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 286: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 222.24483585357666 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:287 choose agents : [17, 33, 77, 11, 75, 13, 4, 65, 22, 0]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 17, internal_epoch   1,  Average loss: 0.1507, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 17, internal_epoch   2,  Average loss: 0.0727, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 17, internal_epoch   3,  Average loss: 0.0634, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 17, internal_epoch   4,  Average loss: 0.0572, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 17, internal_epoch   5,  Average loss: 0.0541, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 17, internal_epoch   6,  Average loss: 0.0511, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Global model norm: 140.09465271290694.
Norm before scaling: 138.20852254157484. Distance: 12.114572977120108
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1191.6740326112674, distance: 1211.4573351959202
Total norm for 4 adversaries is: 1191.6740326112674. distance: 1211.4573351959202
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 33, internal_epoch   1,  Average loss: 0.2724, Accuracy: 80/527 (15.1803%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 33, internal_epoch   2,  Average loss: 0.1164, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 33, internal_epoch   3,  Average loss: 0.1087, Accuracy: 129/527 (24.4782%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 33, internal_epoch   4,  Average loss: 0.0977, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 33, internal_epoch   5,  Average loss: 0.0872, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 33, internal_epoch   6,  Average loss: 0.0796, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Global model norm: 140.09465271290694.
Norm before scaling: 138.068377817388. Distance: 18.13756636036275
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1794.4577175291704, distance: 1813.7567367207764
Total norm for 4 adversaries is: 1794.4577175291704. distance: 1813.7567367207764
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 77, internal_epoch   1,  Average loss: 0.1496, Accuracy: 51/496 (10.2823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 77, internal_epoch   2,  Average loss: 0.0773, Accuracy: 121/496 (24.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 77, internal_epoch   3,  Average loss: 0.0683, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 77, internal_epoch   4,  Average loss: 0.0654, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 77, internal_epoch   5,  Average loss: 0.0634, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 77, internal_epoch   6,  Average loss: 0.0601, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 140.09465271290694.
Norm before scaling: 138.55440182695386. Distance: 13.331383435403762
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1317.6465288536224, distance: 1333.1382617718239
Total norm for 4 adversaries is: 1317.6465288536224. distance: 1333.1382617718239
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 11, internal_epoch   1,  Average loss: 0.1367, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 11, internal_epoch   2,  Average loss: 0.0633, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 11, internal_epoch   3,  Average loss: 0.0576, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 11, internal_epoch   4,  Average loss: 0.0565, Accuracy: 173/546 (31.6850%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 11, internal_epoch   5,  Average loss: 0.0526, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 287, local model 11, internal_epoch   6,  Average loss: 0.0516, Accuracy: 182/546 (33.3333%), train_poison_data_count: 45
Global model norm: 140.09465271290694.
Norm before scaling: 138.3887682287656. Distance: 13.220248234390542
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1304.7575924285707, distance: 1322.0247255630281
Total norm for 4 adversaries is: 1304.7575924285707. distance: 1322.0247255630281
___Test Local_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 287, local model 75, internal_epoch   1,  Average loss: 0.1141, Accuracy: 132/578 (22.8374%)
___Train Local_ResNet_18,  epoch 287, local model 75, internal_epoch   2,  Average loss: 0.1159, Accuracy: 91/578 (15.7439%)
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 287, local model 13, internal_epoch   1,  Average loss: 0.1467, Accuracy: 230/620 (37.0968%)
___Train Local_ResNet_18,  epoch 287, local model 13, internal_epoch   2,  Average loss: 0.0730, Accuracy: 322/620 (51.9355%)
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 287, local model 4, internal_epoch   1,  Average loss: 0.1221, Accuracy: 67/557 (12.0287%)
___Train Local_ResNet_18,  epoch 287, local model 4, internal_epoch   2,  Average loss: 0.0315, Accuracy: 215/557 (38.5996%)
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 287, local model 65, internal_epoch   1,  Average loss: 0.2676, Accuracy: 17/314 (5.4140%)
___Train Local_ResNet_18,  epoch 287, local model 65, internal_epoch   2,  Average loss: 0.0657, Accuracy: 62/314 (19.7452%)
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 287, local model 22, internal_epoch   1,  Average loss: 0.1903, Accuracy: 59/494 (11.9433%)
___Train Local_ResNet_18,  epoch 287, local model 22, internal_epoch   2,  Average loss: 0.0417, Accuracy: 135/494 (27.3279%)
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 287, local model 0, internal_epoch   1,  Average loss: 0.3156, Accuracy: 37/367 (10.0817%)
___Train Local_ResNet_18,  epoch 287, local model 0, internal_epoch   2,  Average loss: 0.1181, Accuracy: 36/367 (9.8093%)
___Test Local_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.82229113578796
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 287: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 287: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.71344184875488 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:288 choose agents : [17, 33, 77, 11, 49, 14, 0, 87, 55, 30]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 17, internal_epoch   1,  Average loss: 0.0700, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 17, internal_epoch   2,  Average loss: 0.0595, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 17, internal_epoch   3,  Average loss: 0.0512, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 17, internal_epoch   4,  Average loss: 0.0448, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 17, internal_epoch   5,  Average loss: 0.0394, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 17, internal_epoch   6,  Average loss: 0.0350, Accuracy: 181/526 (34.4106%), train_poison_data_count: 45
Global model norm: 140.15541039324881.
Norm before scaling: 138.4402087771107. Distance: 8.010133524149708
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 779.143439939014, distance: 801.0133425855028
Total norm for 4 adversaries is: 779.143439939014. distance: 801.0133425855028
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 33, internal_epoch   1,  Average loss: 0.0761, Accuracy: 105/527 (19.9241%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 33, internal_epoch   2,  Average loss: 0.0579, Accuracy: 106/527 (20.1139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 33, internal_epoch   3,  Average loss: 0.0477, Accuracy: 137/527 (25.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 33, internal_epoch   4,  Average loss: 0.0433, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 33, internal_epoch   5,  Average loss: 0.0397, Accuracy: 194/527 (36.8121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 33, internal_epoch   6,  Average loss: 0.0349, Accuracy: 195/527 (37.0019%), train_poison_data_count: 45
Global model norm: 140.15541039324881.
Norm before scaling: 138.45569152485209. Distance: 7.99797223141298
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 778.1814136176731, distance: 799.7972399302213
Total norm for 4 adversaries is: 778.1814136176731. distance: 799.7972399302213
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 77, internal_epoch   1,  Average loss: 0.0761, Accuracy: 56/496 (11.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 77, internal_epoch   2,  Average loss: 0.0665, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 77, internal_epoch   3,  Average loss: 0.0577, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 77, internal_epoch   4,  Average loss: 0.0489, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 77, internal_epoch   5,  Average loss: 0.0438, Accuracy: 117/496 (23.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 77, internal_epoch   6,  Average loss: 0.0403, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Global model norm: 140.15541039324881.
Norm before scaling: 138.5921046971111. Distance: 7.236952518186663
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 703.2523773511185, distance: 723.6952699513795
Total norm for 4 adversaries is: 703.2523773511185. distance: 723.6952699513795
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 11, internal_epoch   1,  Average loss: 0.0737, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 11, internal_epoch   2,  Average loss: 0.0632, Accuracy: 107/546 (19.5971%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 11, internal_epoch   3,  Average loss: 0.0537, Accuracy: 126/546 (23.0769%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 11, internal_epoch   4,  Average loss: 0.0443, Accuracy: 124/546 (22.7106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 11, internal_epoch   5,  Average loss: 0.0367, Accuracy: 126/546 (23.0769%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 288, local model 11, internal_epoch   6,  Average loss: 0.0336, Accuracy: 170/546 (31.1355%), train_poison_data_count: 45
Global model norm: 140.15541039324881.
Norm before scaling: 138.39883771639848. Distance: 7.897494689031531
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 766.9292258742003, distance: 789.7494460270295
Total norm for 4 adversaries is: 766.9292258742003. distance: 789.7494460270295
___Test Local_ResNet_18 poisoned: True, epoch: 288: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 288, local model 49, internal_epoch   1,  Average loss: 0.1305, Accuracy: 7/426 (1.6432%)
___Train Local_ResNet_18,  epoch 288, local model 49, internal_epoch   2,  Average loss: 0.0565, Accuracy: 140/426 (32.8638%)
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 288, local model 14, internal_epoch   1,  Average loss: 0.1029, Accuracy: 42/318 (13.2075%)
___Train Local_ResNet_18,  epoch 288, local model 14, internal_epoch   2,  Average loss: 0.0632, Accuracy: 164/318 (51.5723%)
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 288, local model 0, internal_epoch   1,  Average loss: 0.1887, Accuracy: 4/367 (1.0899%)
___Train Local_ResNet_18,  epoch 288, local model 0, internal_epoch   2,  Average loss: 0.0850, Accuracy: 83/367 (22.6158%)
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 288, local model 87, internal_epoch   1,  Average loss: 0.1238, Accuracy: 127/397 (31.9899%)
___Train Local_ResNet_18,  epoch 288, local model 87, internal_epoch   2,  Average loss: 0.0556, Accuracy: 227/397 (57.1788%)
___Test Local_ResNet_18 poisoned: False, epoch: 288: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 288, local model 55, internal_epoch   1,  Average loss: 0.1008, Accuracy: 52/299 (17.3913%)
