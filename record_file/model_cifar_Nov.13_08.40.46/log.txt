current path: saved_models/model_cifar_Nov.13_08.40.46
Loading data
build_classes_dict done
train loaders done
get poison test loader
load data done
Loaded parameters from saved model: LR is 0.1 and current epoch is 201
create model done
Poisoned following participants: [17, 33, 77, 11]
We use following environment for graphs:  cifar
----------------------------------Start one training epoch------------------------------------------
Server Epoch:201 choose agents : [17, 33, 77, 11, 37, 53, 39, 57, 63, 48]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   1,  Average loss: 0.0143, Accuracy: 447/526 (84.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   2,  Average loss: 0.0141, Accuracy: 422/526 (80.2281%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   3,  Average loss: 0.0082, Accuracy: 464/526 (88.2129%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   4,  Average loss: 0.0048, Accuracy: 502/526 (95.4373%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   5,  Average loss: 0.0033, Accuracy: 503/526 (95.6274%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   6,  Average loss: 0.0022, Accuracy: 511/526 (97.1483%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 39.021085858822055. Distance: 11.471008244760666
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.0392, Accuracy: 4354/10000 (43.5400%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.4972, Accuracy: 7359/9000 (81.7667%)
Scaling by  100
Scaled Norm after poisoning: 1146.5227865158197, distance: 1147.1008565073953
Total norm for 4 adversaries is: 1146.5227865158197. distance: 1147.1008565073953
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   1,  Average loss: 0.0138, Accuracy: 440/527 (83.4915%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   2,  Average loss: 0.0154, Accuracy: 427/527 (81.0247%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   3,  Average loss: 0.0093, Accuracy: 474/527 (89.9431%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   4,  Average loss: 0.0055, Accuracy: 487/527 (92.4099%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   5,  Average loss: 0.0041, Accuracy: 501/527 (95.0664%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   6,  Average loss: 0.0037, Accuracy: 506/527 (96.0152%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 38.90684456122004. Distance: 11.050398765031556
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.8158, Accuracy: 4590/10000 (45.9000%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.0186, Accuracy: 8959/9000 (99.5444%)
Scaling by  100
Scaled Norm after poisoning: 1104.465707933026, distance: 1105.0398748461523
Total norm for 4 adversaries is: 1104.465707933026. distance: 1105.0398748461523
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   1,  Average loss: 0.0096, Accuracy: 429/496 (86.4919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   2,  Average loss: 0.0050, Accuracy: 464/496 (93.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   3,  Average loss: 0.0027, Accuracy: 478/496 (96.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   4,  Average loss: 0.0016, Accuracy: 486/496 (97.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   5,  Average loss: 0.0006, Accuracy: 491/496 (98.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   6,  Average loss: 0.0007, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 37.66304237236004.
Norm before scaling: 37.91946389636198. Distance: 6.578473804495656
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.0877, Accuracy: 6535/10000 (65.3500%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.0880, Accuracy: 8799/9000 (97.7667%)
Scaling by  100
Scaled Norm after poisoning: 657.1089616646542, distance: 657.8473654655767
Total norm for 4 adversaries is: 657.1089616646542. distance: 657.8473654655767
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   1,  Average loss: 0.0076, Accuracy: 487/546 (89.1941%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   2,  Average loss: 0.0052, Accuracy: 510/546 (93.4066%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   3,  Average loss: 0.0022, Accuracy: 528/546 (96.7033%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   4,  Average loss: 0.0011, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   5,  Average loss: 0.0006, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   6,  Average loss: 0.0005, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 37.90912241796162. Distance: 6.743877318473483
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.3315, Accuracy: 6071/10000 (60.7100%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.0954, Accuracy: 8807/9000 (97.8556%)
Scaling by  100
Scaled Norm after poisoning: 673.4456641036454, distance: 674.3877779141612
Total norm for 4 adversaries is: 673.4456641036454. distance: 674.3877779141612
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   1,  Average loss: 0.0111, Accuracy: 583/725 (80.4138%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   2,  Average loss: 0.0175, Accuracy: 513/725 (70.7586%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 40.3549, Accuracy: 1443/10000 (14.4300%)
___Train Local_ResNet_18,  epoch 201, local model 53, internal_epoch   1,  Average loss: 0.0049, Accuracy: 558/625 (89.2800%)
___Train Local_ResNet_18,  epoch 201, local model 53, internal_epoch   2,  Average loss: 0.0041, Accuracy: 570/625 (91.2000%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.6057, Accuracy: 4386/10000 (43.8600%)
___Train Local_ResNet_18,  epoch 201, local model 39, internal_epoch   1,  Average loss: 0.0074, Accuracy: 186/217 (85.7143%)
___Train Local_ResNet_18,  epoch 201, local model 39, internal_epoch   2,  Average loss: 0.0012, Accuracy: 215/217 (99.0783%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 4.1493, Accuracy: 3161/10000 (31.6100%)
___Train Local_ResNet_18,  epoch 201, local model 57, internal_epoch   1,  Average loss: 0.0074, Accuracy: 245/290 (84.4828%)
___Train Local_ResNet_18,  epoch 201, local model 57, internal_epoch   2,  Average loss: 0.0019, Accuracy: 280/290 (96.5517%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 4.7169, Accuracy: 3023/10000 (30.2300%)
___Train Local_ResNet_18,  epoch 201, local model 63, internal_epoch   1,  Average loss: 0.0032, Accuracy: 704/752 (93.6170%)
___Train Local_ResNet_18,  epoch 201, local model 63, internal_epoch   2,  Average loss: 0.0029, Accuracy: 707/752 (94.0160%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.7734, Accuracy: 5644/10000 (56.4400%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   1,  Average loss: 0.0059, Accuracy: 332/378 (87.8307%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   2,  Average loss: 0.0019, Accuracy: 363/378 (96.0317%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.8755, Accuracy: 3143/10000 (31.4300%)
time spent on training: 236.22652173042297
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 201: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 305.4136083126068 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:202 choose agents : [17, 33, 77, 11, 63, 50, 39, 72, 88, 71]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   1,  Average loss: 0.0399, Accuracy: 226/526 (42.9658%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   2,  Average loss: 0.0157, Accuracy: 394/526 (74.9049%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   3,  Average loss: 0.0088, Accuracy: 451/526 (85.7414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   4,  Average loss: 0.0049, Accuracy: 496/526 (94.2966%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   5,  Average loss: 0.0036, Accuracy: 503/526 (95.6274%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   6,  Average loss: 0.0028, Accuracy: 508/526 (96.5779%), train_poison_data_count: 45
Global model norm: 41.21113225664881.
Norm before scaling: 41.70581347881477. Distance: 8.620237943193079
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.5784, Accuracy: 3884/10000 (38.8400%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.7791, Accuracy: 6667/9000 (74.0778%)
Scaling by  100
Scaled Norm after poisoning: 861.0774137671943, distance: 862.0238178263986
Total norm for 4 adversaries is: 861.0774137671943. distance: 862.0238178263986
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   1,  Average loss: 0.0355, Accuracy: 237/527 (44.9715%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   2,  Average loss: 0.0120, Accuracy: 424/527 (80.4554%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   3,  Average loss: 0.0070, Accuracy: 478/527 (90.7021%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   4,  Average loss: 0.0046, Accuracy: 497/527 (94.3074%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   5,  Average loss: 0.0031, Accuracy: 510/527 (96.7742%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   6,  Average loss: 0.0030, Accuracy: 512/527 (97.1537%), train_poison_data_count: 45
Global model norm: 41.21113225664881.
Norm before scaling: 41.85248928528625. Distance: 9.30415902610792
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.3677, Accuracy: 4126/10000 (41.2600%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.5268, Accuracy: 7587/9000 (84.3000%)
Scaling by  100
Scaled Norm after poisoning: 929.5388641686801, distance: 930.4158008653981
Total norm for 4 adversaries is: 929.5388641686801. distance: 930.4158008653981
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   1,  Average loss: 0.0337, Accuracy: 213/496 (42.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   2,  Average loss: 0.0180, Accuracy: 317/496 (63.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   3,  Average loss: 0.0109, Accuracy: 383/496 (77.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   4,  Average loss: 0.0066, Accuracy: 436/496 (87.9032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   5,  Average loss: 0.0036, Accuracy: 473/496 (95.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   6,  Average loss: 0.0021, Accuracy: 484/496 (97.5806%), train_poison_data_count: 40
Global model norm: 41.21113225664881.
Norm before scaling: 41.574026244797665. Distance: 7.687046688949906
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.2519, Accuracy: 4114/10000 (41.1400%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.1631, Accuracy: 8508/9000 (94.5333%)
Scaling by  100
Scaled Norm after poisoning: 767.9195514505409, distance: 768.7047547660935
Total norm for 4 adversaries is: 767.9195514505409. distance: 768.7047547660935
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   1,  Average loss: 0.0427, Accuracy: 179/546 (32.7839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   2,  Average loss: 0.0195, Accuracy: 329/546 (60.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   3,  Average loss: 0.0115, Accuracy: 432/546 (79.1209%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   4,  Average loss: 0.0059, Accuracy: 494/546 (90.4762%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   5,  Average loss: 0.0026, Accuracy: 532/546 (97.4359%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   6,  Average loss: 0.0014, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Global model norm: 41.21113225664881.
Norm before scaling: 41.70419192387544. Distance: 8.9597007476697
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.0540, Accuracy: 4450/10000 (44.5000%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.0650, Accuracy: 8846/9000 (98.2889%)
Scaling by  100
Scaled Norm after poisoning: 894.7185660865656, distance: 895.9700748350919
Total norm for 4 adversaries is: 894.7185660865656. distance: 895.9700748350919
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 202, local model 63, internal_epoch   1,  Average loss: 0.0438, Accuracy: 266/752 (35.3723%)
___Train Local_ResNet_18,  epoch 202, local model 63, internal_epoch   2,  Average loss: 0.0200, Accuracy: 431/752 (57.3138%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 9.4659, Accuracy: 1143/10000 (11.4300%)
___Train Local_ResNet_18,  epoch 202, local model 50, internal_epoch   1,  Average loss: 0.0485, Accuracy: 169/401 (42.1446%)
___Train Local_ResNet_18,  epoch 202, local model 50, internal_epoch   2,  Average loss: 0.0207, Accuracy: 276/401 (68.8279%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 6.0115, Accuracy: 1916/10000 (19.1600%)
___Train Local_ResNet_18,  epoch 202, local model 39, internal_epoch   1,  Average loss: 0.0858, Accuracy: 44/217 (20.2765%)
___Train Local_ResNet_18,  epoch 202, local model 39, internal_epoch   2,  Average loss: 0.0198, Accuracy: 147/217 (67.7419%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 202, local model 72, internal_epoch   1,  Average loss: 0.0373, Accuracy: 299/618 (48.3819%)
___Train Local_ResNet_18,  epoch 202, local model 72, internal_epoch   2,  Average loss: 0.0145, Accuracy: 425/618 (68.7702%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 4.6133, Accuracy: 2061/10000 (20.6100%)
___Train Local_ResNet_18,  epoch 202, local model 88, internal_epoch   1,  Average loss: 0.0496, Accuracy: 175/447 (39.1499%)
___Train Local_ResNet_18,  epoch 202, local model 88, internal_epoch   2,  Average loss: 0.0202, Accuracy: 295/447 (65.9955%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 8.8338, Accuracy: 1682/10000 (16.8200%)
___Train Local_ResNet_18,  epoch 202, local model 71, internal_epoch   1,  Average loss: 0.0313, Accuracy: 612/1166 (52.4871%)
___Train Local_ResNet_18,  epoch 202, local model 71, internal_epoch   2,  Average loss: 0.0157, Accuracy: 820/1166 (70.3259%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.0026, Accuracy: 3466/10000 (34.6600%)
time spent on training: 262.5937955379486
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 326.48893904685974 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:203 choose agents : [17, 33, 77, 11, 92, 23, 26, 50, 14, 76]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   1,  Average loss: 0.0626, Accuracy: 255/526 (48.4791%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   2,  Average loss: 0.0279, Accuracy: 351/526 (66.7300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   3,  Average loss: 0.0177, Accuracy: 390/526 (74.1445%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   4,  Average loss: 0.0123, Accuracy: 442/526 (84.0304%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   5,  Average loss: 0.0086, Accuracy: 454/526 (86.3118%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   6,  Average loss: 0.0057, Accuracy: 487/526 (92.5856%), train_poison_data_count: 45
Global model norm: 46.392095905444926.
Norm before scaling: 46.87385415266169. Distance: 11.532797443383682
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.2067, Accuracy: 3890/10000 (38.9000%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.4015, Accuracy: 7803/9000 (86.7000%)
Scaling by  100
Scaled Norm after poisoning: 1150.3907488327607, distance: 1153.2796711986214
Total norm for 4 adversaries is: 1150.3907488327607. distance: 1153.2796711986214
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   1,  Average loss: 0.0699, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   2,  Average loss: 0.0316, Accuracy: 336/527 (63.7571%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   3,  Average loss: 0.0182, Accuracy: 376/527 (71.3472%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   4,  Average loss: 0.0105, Accuracy: 466/527 (88.4250%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   5,  Average loss: 0.0062, Accuracy: 481/527 (91.2713%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   6,  Average loss: 0.0048, Accuracy: 487/527 (92.4099%), train_poison_data_count: 45
Global model norm: 46.392095905444926.
Norm before scaling: 46.9780923634557. Distance: 11.96422840096547
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.4207, Accuracy: 3759/10000 (37.5900%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.1310, Accuracy: 8594/9000 (95.4889%)
Scaling by  100
Scaled Norm after poisoning: 1193.6235273317966, distance: 1196.422897641131
Total norm for 4 adversaries is: 1193.6235273317966. distance: 1196.422897641131
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   1,  Average loss: 0.0779, Accuracy: 157/496 (31.6532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   2,  Average loss: 0.0323, Accuracy: 277/496 (55.8468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   3,  Average loss: 0.0192, Accuracy: 325/496 (65.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   4,  Average loss: 0.0127, Accuracy: 391/496 (78.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   5,  Average loss: 0.0081, Accuracy: 427/496 (86.0887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   6,  Average loss: 0.0051, Accuracy: 459/496 (92.5403%), train_poison_data_count: 40
Global model norm: 46.392095905444926.
Norm before scaling: 46.697954715483796. Distance: 10.982448446915658
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 1.9981, Accuracy: 3641/10000 (36.4100%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.1741, Accuracy: 8634/9000 (95.9333%)
Scaling by  100
Scaled Norm after poisoning: 1095.0249997146184, distance: 1098.2447928399206
Total norm for 4 adversaries is: 1095.0249997146184. distance: 1098.2447928399206
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   1,  Average loss: 0.0488, Accuracy: 279/546 (51.0989%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   2,  Average loss: 0.0257, Accuracy: 368/546 (67.3993%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   3,  Average loss: 0.0147, Accuracy: 417/546 (76.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   4,  Average loss: 0.0061, Accuracy: 500/546 (91.5751%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   5,  Average loss: 0.0047, Accuracy: 522/546 (95.6044%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   6,  Average loss: 0.0018, Accuracy: 536/546 (98.1685%), train_poison_data_count: 45
Global model norm: 46.392095905444926.
Norm before scaling: 46.730859112147456. Distance: 10.060429899157361
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.0983, Accuracy: 4185/10000 (41.8500%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.0969, Accuracy: 8742/9000 (97.1333%)
Scaling by  100
Scaled Norm after poisoning: 1003.6474418340337, distance: 1006.0429911291068
Total norm for 4 adversaries is: 1003.6474418340337. distance: 1006.0429911291068
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   1,  Average loss: 0.0353, Accuracy: 397/796 (49.8744%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   2,  Average loss: 0.0154, Accuracy: 562/796 (70.6030%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 23, internal_epoch   1,  Average loss: 0.0715, Accuracy: 91/248 (36.6935%)
___Train Local_ResNet_18,  epoch 203, local model 23, internal_epoch   2,  Average loss: 0.0222, Accuracy: 167/248 (67.3387%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 26, internal_epoch   1,  Average loss: 0.0887, Accuracy: 118/468 (25.2137%)
___Train Local_ResNet_18,  epoch 203, local model 26, internal_epoch   2,  Average loss: 0.0320, Accuracy: 175/468 (37.3932%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 50, internal_epoch   1,  Average loss: 0.0418, Accuracy: 231/401 (57.6060%)
___Train Local_ResNet_18,  epoch 203, local model 50, internal_epoch   2,  Average loss: 0.0222, Accuracy: 270/401 (67.3317%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 14, internal_epoch   1,  Average loss: 0.1163, Accuracy: 69/318 (21.6981%)
___Train Local_ResNet_18,  epoch 203, local model 14, internal_epoch   2,  Average loss: 0.0376, Accuracy: 118/318 (37.1069%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 76, internal_epoch   1,  Average loss: 0.2078, Accuracy: 8/65 (12.3077%)
___Train Local_ResNet_18,  epoch 203, local model 76, internal_epoch   2,  Average loss: 0.1013, Accuracy: 29/65 (44.6154%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 240.12220978736877
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 310.9592833518982 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:204 choose agents : [17, 33, 77, 11, 49, 86, 26, 58, 6, 94]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   1,  Average loss: 0.1273, Accuracy: 57/526 (10.8365%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   2,  Average loss: 0.0305, Accuracy: 199/526 (37.8327%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   3,  Average loss: 0.0265, Accuracy: 276/526 (52.4715%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   4,  Average loss: 0.0219, Accuracy: 301/526 (57.2243%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   5,  Average loss: 0.0208, Accuracy: 309/526 (58.7452%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   6,  Average loss: 0.0206, Accuracy: 337/526 (64.0684%), train_poison_data_count: 45
Global model norm: 53.64465284906665.
Norm before scaling: 54.5858228897108. Distance: 16.762153429606123
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.8753, Accuracy: 2076/10000 (20.7600%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 1.3166, Accuracy: 5837/9000 (64.8556%)
Scaling by  100
Scaled Norm after poisoning: 1671.725231609549, distance: 1676.2153799556907
Total norm for 4 adversaries is: 1671.725231609549. distance: 1676.2153799556907
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   1,  Average loss: 0.1136, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   2,  Average loss: 0.0315, Accuracy: 199/527 (37.7609%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   3,  Average loss: 0.0255, Accuracy: 240/527 (45.5408%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   4,  Average loss: 0.0227, Accuracy: 294/527 (55.7875%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   5,  Average loss: 0.0199, Accuracy: 339/527 (64.3264%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   6,  Average loss: 0.0162, Accuracy: 349/527 (66.2239%), train_poison_data_count: 45
Global model norm: 53.64465284906665.
Norm before scaling: 54.74415592026125. Distance: 16.71738184384417
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 3.0335, Accuracy: 2187/10000 (21.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 1.1167, Accuracy: 6242/9000 (69.3556%)
Scaling by  100
Scaled Norm after poisoning: 1667.8000479673815, distance: 1671.738242070211
Total norm for 4 adversaries is: 1667.8000479673815. distance: 1671.738242070211
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   1,  Average loss: 0.0983, Accuracy: 111/496 (22.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   2,  Average loss: 0.0336, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   3,  Average loss: 0.0302, Accuracy: 172/496 (34.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   4,  Average loss: 0.0287, Accuracy: 219/496 (44.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   5,  Average loss: 0.0259, Accuracy: 245/496 (49.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   6,  Average loss: 0.0232, Accuracy: 268/496 (54.0323%), train_poison_data_count: 40
Global model norm: 53.64465284906665.
Norm before scaling: 54.21234202046384. Distance: 14.16274114337814
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.5220, Accuracy: 2259/10000 (22.5900%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.1997, Accuracy: 8318/9000 (92.4222%)
Scaling by  100
Scaled Norm after poisoning: 1412.3648607919981, distance: 1416.2741613119967
Total norm for 4 adversaries is: 1412.3648607919981. distance: 1416.2741613119967
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   1,  Average loss: 0.1141, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   2,  Average loss: 0.0354, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   3,  Average loss: 0.0306, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   4,  Average loss: 0.0284, Accuracy: 218/546 (39.9267%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   5,  Average loss: 0.0267, Accuracy: 229/546 (41.9414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   6,  Average loss: 0.0247, Accuracy: 269/546 (49.2674%), train_poison_data_count: 45
Global model norm: 53.64465284906665.
Norm before scaling: 54.366706443661364. Distance: 15.837131780786324
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.7613, Accuracy: 1966/10000 (19.6600%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.3325, Accuracy: 8374/9000 (93.0444%)
Scaling by  100
Scaled Norm after poisoning: 1579.1589533672663, distance: 1583.7132000460185
Total norm for 4 adversaries is: 1579.1589533672663. distance: 1583.7132000460185
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 204, local model 49, internal_epoch   1,  Average loss: 0.2056, Accuracy: 13/426 (3.0516%)
___Train Local_ResNet_18,  epoch 204, local model 49, internal_epoch   2,  Average loss: 0.0309, Accuracy: 137/426 (32.1596%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 86, internal_epoch   1,  Average loss: 0.2967, Accuracy: 15/212 (7.0755%)
___Train Local_ResNet_18,  epoch 204, local model 86, internal_epoch   2,  Average loss: 0.0487, Accuracy: 65/212 (30.6604%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 26, internal_epoch   1,  Average loss: 0.1271, Accuracy: 167/468 (35.6838%)
___Train Local_ResNet_18,  epoch 204, local model 26, internal_epoch   2,  Average loss: 0.0375, Accuracy: 132/468 (28.2051%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 58, internal_epoch   1,  Average loss: 0.2596, Accuracy: 45/234 (19.2308%)
___Train Local_ResNet_18,  epoch 204, local model 58, internal_epoch   2,  Average loss: 0.0557, Accuracy: 43/234 (18.3761%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 6, internal_epoch   1,  Average loss: 0.1313, Accuracy: 153/520 (29.4231%)
___Train Local_ResNet_18,  epoch 204, local model 6, internal_epoch   2,  Average loss: 0.0386, Accuracy: 99/520 (19.0385%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 94, internal_epoch   1,  Average loss: 0.2941, Accuracy: 24/203 (11.8227%)
___Train Local_ResNet_18,  epoch 204, local model 94, internal_epoch   2,  Average loss: 0.0776, Accuracy: 61/203 (30.0493%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 258.94235920906067
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 318.5137014389038 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:205 choose agents : [17, 33, 77, 11, 61, 71, 8, 69, 89, 64]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   1,  Average loss: 0.0950, Accuracy: 131/526 (24.9049%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   2,  Average loss: 0.0609, Accuracy: 193/526 (36.6920%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   3,  Average loss: 0.0519, Accuracy: 203/526 (38.5932%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   4,  Average loss: 0.0449, Accuracy: 180/526 (34.2205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   5,  Average loss: 0.0421, Accuracy: 199/526 (37.8327%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   6,  Average loss: 0.0377, Accuracy: 233/526 (44.2966%), train_poison_data_count: 45
Global model norm: 71.69009503803507.
Norm before scaling: 70.94273452603339. Distance: 11.802992774196483
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.1004, Accuracy: 1587/10000 (15.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 6.2680, Accuracy: 402/9000 (4.4667%)
Scaling by  100
Scaled Norm after poisoning: 1172.0303963635072, distance: 1180.2993793949058
Total norm for 4 adversaries is: 1172.0303963635072. distance: 1180.2993793949058
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   1,  Average loss: 0.1137, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   2,  Average loss: 0.0626, Accuracy: 113/527 (21.4421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   3,  Average loss: 0.0506, Accuracy: 171/527 (32.4478%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   4,  Average loss: 0.0458, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   5,  Average loss: 0.0394, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   6,  Average loss: 0.0335, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Global model norm: 71.69009503803507.
Norm before scaling: 70.70740491189731. Distance: 10.608881313877236
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 4.4533, Accuracy: 1265/10000 (12.6500%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 5.9526, Accuracy: 3627/9000 (40.3000%)
Scaling by  100
Scaled Norm after poisoning: 1051.3681562611644, distance: 1060.8881892075149
Total norm for 4 adversaries is: 1051.3681562611644. distance: 1060.8881892075149
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   1,  Average loss: 0.1208, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   2,  Average loss: 0.0738, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   3,  Average loss: 0.0623, Accuracy: 153/496 (30.8468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   4,  Average loss: 0.0537, Accuracy: 163/496 (32.8629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   5,  Average loss: 0.0467, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   6,  Average loss: 0.0359, Accuracy: 161/496 (32.4597%), train_poison_data_count: 40
Global model norm: 71.69009503803507.
Norm before scaling: 70.89120185185183. Distance: 12.29056977803511
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 2.6897, Accuracy: 1556/10000 (15.5600%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 1.9939, Accuracy: 3531/9000 (39.2333%)
Scaling by  100
Scaled Norm after poisoning: 1220.3375557607, distance: 1229.0569047037652
Total norm for 4 adversaries is: 1220.3375557607. distance: 1229.0569047037652
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   1,  Average loss: 0.0920, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   2,  Average loss: 0.0566, Accuracy: 145/546 (26.5568%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   3,  Average loss: 0.0505, Accuracy: 156/546 (28.5714%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   4,  Average loss: 0.0465, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   5,  Average loss: 0.0442, Accuracy: 159/546 (29.1209%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   6,  Average loss: 0.0425, Accuracy: 155/546 (28.3883%), train_poison_data_count: 45
Global model norm: 71.69009503803507.
Norm before scaling: 70.68429825308624. Distance: 9.71856708906454
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.2001, Accuracy: 1341/10000 (13.4100%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 9.4607, Accuracy: 55/9000 (0.6111%)
Scaling by  100
Scaled Norm after poisoning: 962.2265195888128, distance: 971.8566959691125
Total norm for 4 adversaries is: 962.2265195888128. distance: 971.8566959691125
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 205, local model 61, internal_epoch   1,  Average loss: 0.0847, Accuracy: 210/590 (35.5932%)
___Train Local_ResNet_18,  epoch 205, local model 61, internal_epoch   2,  Average loss: 0.0570, Accuracy: 214/590 (36.2712%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 71, internal_epoch   1,  Average loss: 0.0463, Accuracy: 384/1166 (32.9331%)
___Train Local_ResNet_18,  epoch 205, local model 71, internal_epoch   2,  Average loss: 0.0345, Accuracy: 421/1166 (36.1063%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 7.1807, Accuracy: 1375/10000 (13.7500%)
___Train Local_ResNet_18,  epoch 205, local model 8, internal_epoch   1,  Average loss: 0.1323, Accuracy: 64/534 (11.9850%)
___Train Local_ResNet_18,  epoch 205, local model 8, internal_epoch   2,  Average loss: 0.0820, Accuracy: 81/534 (15.1685%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 69, internal_epoch   1,  Average loss: 0.0633, Accuracy: 58/216 (26.8519%)
___Train Local_ResNet_18,  epoch 205, local model 69, internal_epoch   2,  Average loss: 0.0500, Accuracy: 118/216 (54.6296%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 89, internal_epoch   1,  Average loss: 0.1252, Accuracy: 106/413 (25.6659%)
___Train Local_ResNet_18,  epoch 205, local model 89, internal_epoch   2,  Average loss: 0.0733, Accuracy: 160/413 (38.7409%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 64, internal_epoch   1,  Average loss: 0.0763, Accuracy: 181/686 (26.3848%)
___Train Local_ResNet_18,  epoch 205, local model 64, internal_epoch   2,  Average loss: 0.0466, Accuracy: 308/686 (44.8980%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 259.31938886642456
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 323.16160440444946 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:206 choose agents : [17, 33, 77, 11, 38, 64, 29, 23, 83, 43]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   1,  Average loss: 0.0962, Accuracy: 59/526 (11.2167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   2,  Average loss: 0.0485, Accuracy: 58/526 (11.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   3,  Average loss: 0.0376, Accuracy: 150/526 (28.5171%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   4,  Average loss: 0.0358, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   5,  Average loss: 0.0337, Accuracy: 190/526 (36.1217%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   6,  Average loss: 0.0329, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Global model norm: 75.35876107722147.
Norm before scaling: 74.77844880879785. Distance: 11.588958325842967
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1151.7705934777116, distance: 1158.8959185362592
Total norm for 4 adversaries is: 1151.7705934777116. distance: 1158.8959185362592
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   1,  Average loss: 0.0744, Accuracy: 126/527 (23.9089%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   2,  Average loss: 0.0440, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   3,  Average loss: 0.0355, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   4,  Average loss: 0.0355, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   5,  Average loss: 0.0341, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   6,  Average loss: 0.0332, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 75.35876107722147.
Norm before scaling: 74.75197596155067. Distance: 10.539942383002467
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1047.0746749874147, distance: 1053.994188788534
Total norm for 4 adversaries is: 1047.0746749874147. distance: 1053.994188788534
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   1,  Average loss: 0.0775, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   2,  Average loss: 0.0447, Accuracy: 71/496 (14.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   3,  Average loss: 0.0354, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   4,  Average loss: 0.0345, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   5,  Average loss: 0.0336, Accuracy: 162/496 (32.6613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   6,  Average loss: 0.0328, Accuracy: 158/496 (31.8548%), train_poison_data_count: 40
Global model norm: 75.35876107722147.
Norm before scaling: 74.79208811975035. Distance: 10.008110190854474
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 994.3725094249137, distance: 1000.8109524280796
Total norm for 4 adversaries is: 994.3725094249137. distance: 1000.8109524280796
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   1,  Average loss: 0.0900, Accuracy: 54/546 (9.8901%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   2,  Average loss: 0.0516, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   3,  Average loss: 0.0395, Accuracy: 93/546 (17.0330%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   4,  Average loss: 0.0355, Accuracy: 138/546 (25.2747%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   5,  Average loss: 0.0355, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   6,  Average loss: 0.0345, Accuracy: 145/546 (26.5568%), train_poison_data_count: 45
Global model norm: 75.35876107722147.
Norm before scaling: 74.72373271236354. Distance: 11.510239396377212
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1143.5714888016403, distance: 1151.0239463191024
Total norm for 4 adversaries is: 1143.5714888016403. distance: 1151.0239463191024
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 206, local model 38, internal_epoch   1,  Average loss: 0.0687, Accuracy: 68/756 (8.9947%)
___Train Local_ResNet_18,  epoch 206, local model 38, internal_epoch   2,  Average loss: 0.0322, Accuracy: 295/756 (39.0212%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 64, internal_epoch   1,  Average loss: 0.0661, Accuracy: 79/686 (11.5160%)
___Train Local_ResNet_18,  epoch 206, local model 64, internal_epoch   2,  Average loss: 0.0348, Accuracy: 239/686 (34.8397%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 29, internal_epoch   1,  Average loss: 0.0568, Accuracy: 151/848 (17.8066%)
___Train Local_ResNet_18,  epoch 206, local model 29, internal_epoch   2,  Average loss: 0.0232, Accuracy: 460/848 (54.2453%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 23, internal_epoch   1,  Average loss: 0.1068, Accuracy: 35/248 (14.1129%)
___Train Local_ResNet_18,  epoch 206, local model 23, internal_epoch   2,  Average loss: 0.0555, Accuracy: 42/248 (16.9355%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 83, internal_epoch   1,  Average loss: 0.0964, Accuracy: 39/366 (10.6557%)
___Train Local_ResNet_18,  epoch 206, local model 83, internal_epoch   2,  Average loss: 0.0494, Accuracy: 33/366 (9.0164%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 43, internal_epoch   1,  Average loss: 0.1023, Accuracy: 9/345 (2.6087%)
___Train Local_ResNet_18,  epoch 206, local model 43, internal_epoch   2,  Average loss: 0.0478, Accuracy: 50/345 (14.4928%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 244.6321325302124
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 318.7197308540344 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:207 choose agents : [17, 33, 77, 11, 56, 45, 1, 50, 16, 12]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   1,  Average loss: 0.0706, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   2,  Average loss: 0.0622, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   3,  Average loss: 0.0521, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   4,  Average loss: 0.0491, Accuracy: 152/526 (28.8973%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   5,  Average loss: 0.0447, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   6,  Average loss: 0.0434, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Global model norm: 80.13924649087362.
Norm before scaling: 78.8902799432937. Distance: 6.1850991263190425
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 604.3914811610105, distance: 618.5099281741564
Total norm for 4 adversaries is: 604.3914811610105. distance: 618.5099281741564
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   1,  Average loss: 0.1150, Accuracy: 34/527 (6.4516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   2,  Average loss: 0.0994, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   3,  Average loss: 0.0773, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   4,  Average loss: 0.0704, Accuracy: 84/527 (15.9393%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   5,  Average loss: 0.0623, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   6,  Average loss: 0.0508, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Global model norm: 80.13924649087362.
Norm before scaling: 78.55437010440603. Distance: 9.550061881778609
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 940.3125477733454, distance: 955.0062172572491
Total norm for 4 adversaries is: 940.3125477733454. distance: 955.0062172572491
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   1,  Average loss: 0.0885, Accuracy: 39/496 (7.8629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   2,  Average loss: 0.0769, Accuracy: 42/496 (8.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   3,  Average loss: 0.0615, Accuracy: 41/496 (8.2661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   4,  Average loss: 0.0540, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   5,  Average loss: 0.0501, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   6,  Average loss: 0.0472, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Global model norm: 80.13924649087362.
Norm before scaling: 78.93821444154123. Distance: 7.411553781466232
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 728.7899217195584, distance: 741.1553902522736
Total norm for 4 adversaries is: 728.7899217195584. distance: 741.1553902522736
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   1,  Average loss: 0.0680, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   2,  Average loss: 0.0579, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   3,  Average loss: 0.0506, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   4,  Average loss: 0.0475, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   5,  Average loss: 0.0460, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   6,  Average loss: 0.0406, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Global model norm: 80.13924649087362.
Norm before scaling: 78.8807601155456. Distance: 5.744956416802222
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 559.602202461713, distance: 574.4956211756535
Total norm for 4 adversaries is: 559.602202461713. distance: 574.4956211756535
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 207, local model 56, internal_epoch   1,  Average loss: 0.0912, Accuracy: 7/743 (0.9421%)
___Train Local_ResNet_18,  epoch 207, local model 56, internal_epoch   2,  Average loss: 0.0572, Accuracy: 128/743 (17.2275%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 45, internal_epoch   1,  Average loss: 0.0523, Accuracy: 91/529 (17.2023%)
___Train Local_ResNet_18,  epoch 207, local model 45, internal_epoch   2,  Average loss: 0.0326, Accuracy: 167/529 (31.5690%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 1, internal_epoch   1,  Average loss: 0.0572, Accuracy: 111/641 (17.3167%)
___Train Local_ResNet_18,  epoch 207, local model 1, internal_epoch   2,  Average loss: 0.0406, Accuracy: 196/641 (30.5772%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 50, internal_epoch   1,  Average loss: 0.0735, Accuracy: 10/401 (2.4938%)
___Train Local_ResNet_18,  epoch 207, local model 50, internal_epoch   2,  Average loss: 0.0530, Accuracy: 90/401 (22.4439%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 16, internal_epoch   1,  Average loss: 0.0602, Accuracy: 106/773 (13.7128%)
___Train Local_ResNet_18,  epoch 207, local model 16, internal_epoch   2,  Average loss: 0.0369, Accuracy: 236/773 (30.5304%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 12, internal_epoch   1,  Average loss: 0.1076, Accuracy: 196/977 (20.0614%)
___Train Local_ResNet_18,  epoch 207, local model 12, internal_epoch   2,  Average loss: 0.0463, Accuracy: 265/977 (27.1238%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 252.4422845840454
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 326.99012565612793 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:208 choose agents : [17, 33, 77, 11, 44, 86, 20, 50, 49, 43]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   1,  Average loss: 0.1665, Accuracy: 56/526 (10.6464%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   2,  Average loss: 0.1115, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   3,  Average loss: 0.0868, Accuracy: 75/526 (14.2586%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   4,  Average loss: 0.0767, Accuracy: 151/526 (28.7072%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   5,  Average loss: 0.0614, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   6,  Average loss: 0.0482, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Global model norm: 77.88987744124714.
Norm before scaling: 76.21309942153974. Distance: 12.445786978949569
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1230.3306466149659, distance: 1244.5786435577304
Total norm for 4 adversaries is: 1230.3306466149659. distance: 1244.5786435577304
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   1,  Average loss: 0.1202, Accuracy: 134/527 (25.4269%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   2,  Average loss: 0.0812, Accuracy: 48/527 (9.1082%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   3,  Average loss: 0.0686, Accuracy: 128/527 (24.2884%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   4,  Average loss: 0.0606, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   5,  Average loss: 0.0542, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   6,  Average loss: 0.0485, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Global model norm: 77.88987744124714.
Norm before scaling: 76.3668162554915. Distance: 9.384445924900565
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 924.3614011846232, distance: 938.4445907990519
Total norm for 4 adversaries is: 924.3614011846232. distance: 938.4445907990519
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   1,  Average loss: 0.1150, Accuracy: 72/496 (14.5161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   2,  Average loss: 0.0673, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   3,  Average loss: 0.0562, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   4,  Average loss: 0.0554, Accuracy: 151/496 (30.4435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   5,  Average loss: 0.0514, Accuracy: 158/496 (31.8548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   6,  Average loss: 0.0477, Accuracy: 169/496 (34.0726%), train_poison_data_count: 40
Global model norm: 77.88987744124714.
Norm before scaling: 76.61504255754055. Distance: 8.785354686648391
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 866.300395359485, distance: 878.5354645658877
Total norm for 4 adversaries is: 866.300395359485. distance: 878.5354645658877
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   1,  Average loss: 0.1771, Accuracy: 48/546 (8.7912%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   2,  Average loss: 0.1169, Accuracy: 42/546 (7.6923%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   3,  Average loss: 0.0962, Accuracy: 48/546 (8.7912%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   4,  Average loss: 0.0777, Accuracy: 63/546 (11.5385%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   5,  Average loss: 0.0555, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   6,  Average loss: 0.0438, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Global model norm: 77.88987744124714.
Norm before scaling: 76.14049513892066. Distance: 12.81824078229652
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1267.1870915535717, distance: 1281.823993378186
Total norm for 4 adversaries is: 1267.1870915535717. distance: 1281.823993378186
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 208, local model 44, internal_epoch   1,  Average loss: 0.1583, Accuracy: 14/436 (3.2110%)
___Train Local_ResNet_18,  epoch 208, local model 44, internal_epoch   2,  Average loss: 0.0888, Accuracy: 35/436 (8.0275%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 86, internal_epoch   1,  Average loss: 0.1874, Accuracy: 30/212 (14.1509%)
___Train Local_ResNet_18,  epoch 208, local model 86, internal_epoch   2,  Average loss: 0.1237, Accuracy: 10/212 (4.7170%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 20, internal_epoch   1,  Average loss: 0.0965, Accuracy: 144/362 (39.7790%)
___Train Local_ResNet_18,  epoch 208, local model 20, internal_epoch   2,  Average loss: 0.0696, Accuracy: 70/362 (19.3370%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   1,  Average loss: 0.1315, Accuracy: 21/401 (5.2369%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   2,  Average loss: 0.0629, Accuracy: 70/401 (17.4564%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 49, internal_epoch   1,  Average loss: 0.1626, Accuracy: 18/426 (4.2254%)
___Train Local_ResNet_18,  epoch 208, local model 49, internal_epoch   2,  Average loss: 0.0853, Accuracy: 67/426 (15.7277%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 43, internal_epoch   1,  Average loss: 0.1558, Accuracy: 6/345 (1.7391%)
___Train Local_ResNet_18,  epoch 208, local model 43, internal_epoch   2,  Average loss: 0.0905, Accuracy: 48/345 (13.9130%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 258.5961558818817
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 331.9708044528961 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:209 choose agents : [17, 33, 77, 11, 28, 51, 4, 97, 85, 59]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   1,  Average loss: 0.2502, Accuracy: 100/526 (19.0114%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   2,  Average loss: 0.1016, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   3,  Average loss: 0.0784, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   4,  Average loss: 0.0648, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   5,  Average loss: 0.0572, Accuracy: 134/526 (25.4753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   6,  Average loss: 0.0551, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Global model norm: 78.92784667320369.
Norm before scaling: 78.650659689104. Distance: 22.677449672148157
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2256.7903092666807, distance: 2267.7450253500724
Total norm for 4 adversaries is: 2256.7903092666807. distance: 2267.7450253500724
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   1,  Average loss: 0.3213, Accuracy: 50/527 (9.4877%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   2,  Average loss: 0.1112, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   3,  Average loss: 0.0844, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   4,  Average loss: 0.0704, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   5,  Average loss: 0.0607, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   6,  Average loss: 0.0520, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Global model norm: 78.92784667320369.
Norm before scaling: 77.97450504812454. Distance: 22.19686889562425
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2206.5836716517233, distance: 2219.686914859841
Total norm for 4 adversaries is: 2206.5836716517233. distance: 2219.686914859841
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   1,  Average loss: 0.3512, Accuracy: 33/496 (6.6532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   2,  Average loss: 0.1256, Accuracy: 20/496 (4.0323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   3,  Average loss: 0.0953, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   4,  Average loss: 0.0782, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   5,  Average loss: 0.0663, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   6,  Average loss: 0.0615, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Global model norm: 78.92784667320369.
Norm before scaling: 77.64286227658019. Distance: 21.019507657136916
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2088.0914730921154, distance: 2101.9507606031116
Total norm for 4 adversaries is: 2088.0914730921154. distance: 2101.9507606031116
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   1,  Average loss: 0.2248, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   2,  Average loss: 0.0835, Accuracy: 73/546 (13.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   3,  Average loss: 0.0674, Accuracy: 68/546 (12.4542%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   4,  Average loss: 0.0592, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   5,  Average loss: 0.0540, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   6,  Average loss: 0.0521, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Global model norm: 78.92784667320369.
Norm before scaling: 77.48499728778145. Distance: 16.341580132011025
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1620.9346069474857, distance: 1634.158040092818
Total norm for 4 adversaries is: 1620.9346069474857. distance: 1634.158040092818
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 209, local model 28, internal_epoch   1,  Average loss: 0.2138, Accuracy: 70/423 (16.5485%)
___Train Local_ResNet_18,  epoch 209, local model 28, internal_epoch   2,  Average loss: 0.0839, Accuracy: 13/423 (3.0733%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 51, internal_epoch   1,  Average loss: 0.1819, Accuracy: 177/479 (36.9520%)
___Train Local_ResNet_18,  epoch 209, local model 51, internal_epoch   2,  Average loss: 0.0727, Accuracy: 63/479 (13.1524%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 4, internal_epoch   1,  Average loss: 0.1657, Accuracy: 101/557 (18.1329%)
___Train Local_ResNet_18,  epoch 209, local model 4, internal_epoch   2,  Average loss: 0.0465, Accuracy: 86/557 (15.4399%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 97, internal_epoch   1,  Average loss: 0.1928, Accuracy: 74/418 (17.7033%)
___Train Local_ResNet_18,  epoch 209, local model 97, internal_epoch   2,  Average loss: 0.0646, Accuracy: 157/418 (37.5598%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 85, internal_epoch   1,  Average loss: 0.2907, Accuracy: 95/364 (26.0989%)
___Train Local_ResNet_18,  epoch 209, local model 85, internal_epoch   2,  Average loss: 0.1148, Accuracy: 22/364 (6.0440%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 59, internal_epoch   1,  Average loss: 0.1787, Accuracy: 54/642 (8.4112%)
___Train Local_ResNet_18,  epoch 209, local model 59, internal_epoch   2,  Average loss: 0.0663, Accuracy: 69/642 (10.7477%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 251.60208082199097
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 316.68673729896545 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:210 choose agents : [17, 33, 77, 11, 51, 13, 57, 76, 80, 85]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   1,  Average loss: 0.1934, Accuracy: 46/526 (8.7452%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   2,  Average loss: 0.1400, Accuracy: 56/526 (10.6464%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   3,  Average loss: 0.1118, Accuracy: 38/526 (7.2243%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   4,  Average loss: 0.1007, Accuracy: 98/526 (18.6312%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   5,  Average loss: 0.0904, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   6,  Average loss: 0.0802, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Global model norm: 95.44343465503533.
Norm before scaling: 93.22951350028595. Distance: 12.042228782407829
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1184.478788328436, distance: 1204.222934094846
Total norm for 4 adversaries is: 1184.478788328436. distance: 1204.222934094846
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   1,  Average loss: 0.1604, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   2,  Average loss: 0.1045, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   3,  Average loss: 0.0876, Accuracy: 137/527 (25.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   4,  Average loss: 0.0784, Accuracy: 52/527 (9.8672%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   5,  Average loss: 0.0683, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   6,  Average loss: 0.0601, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Global model norm: 95.44343465503533.
Norm before scaling: 94.02597920588224. Distance: 14.590532948915829
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1445.614488720973, distance: 1459.0531176074435
Total norm for 4 adversaries is: 1445.614488720973. distance: 1459.0531176074435
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   1,  Average loss: 0.1200, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   2,  Average loss: 0.0779, Accuracy: 73/496 (14.7177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   3,  Average loss: 0.0574, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   4,  Average loss: 0.0549, Accuracy: 117/496 (23.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   5,  Average loss: 0.0494, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   6,  Average loss: 0.0482, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Global model norm: 95.44343465503533.
Norm before scaling: 94.38393480056604. Distance: 12.151525682646424
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1204.5028019892688, distance: 1215.1524595704032
Total norm for 4 adversaries is: 1204.5028019892688. distance: 1215.1524595704032
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   1,  Average loss: 0.1820, Accuracy: 54/546 (9.8901%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   2,  Average loss: 0.1263, Accuracy: 51/546 (9.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   3,  Average loss: 0.0937, Accuracy: 79/546 (14.4689%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   4,  Average loss: 0.0752, Accuracy: 78/546 (14.2857%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   5,  Average loss: 0.0639, Accuracy: 96/546 (17.5824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   6,  Average loss: 0.0568, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Global model norm: 95.44343465503533.
Norm before scaling: 97.60788302245368. Distance: 30.688993646822105
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 3061.839153188815, distance: 3068.899477011262
Total norm for 4 adversaries is: 3061.839153188815. distance: 3068.899477011262
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 210, local model 51, internal_epoch   1,  Average loss: 0.1783, Accuracy: 9/479 (1.8789%)
___Train Local_ResNet_18,  epoch 210, local model 51, internal_epoch   2,  Average loss: 0.0892, Accuracy: 26/479 (5.4280%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 13, internal_epoch   1,  Average loss: 0.1376, Accuracy: 104/620 (16.7742%)
___Train Local_ResNet_18,  epoch 210, local model 13, internal_epoch   2,  Average loss: 0.0625, Accuracy: 263/620 (42.4194%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 57, internal_epoch   1,  Average loss: 0.1348, Accuracy: 7/290 (2.4138%)
___Train Local_ResNet_18,  epoch 210, local model 57, internal_epoch   2,  Average loss: 0.1008, Accuracy: 10/290 (3.4483%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 76, internal_epoch   1,  Average loss: 0.2594, Accuracy: 1/65 (1.5385%)
___Train Local_ResNet_18,  epoch 210, local model 76, internal_epoch   2,  Average loss: 0.2227, Accuracy: 1/65 (1.5385%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 80, internal_epoch   1,  Average loss: 0.2225, Accuracy: 4/363 (1.1019%)
___Train Local_ResNet_18,  epoch 210, local model 80, internal_epoch   2,  Average loss: 0.1209, Accuracy: 11/363 (3.0303%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 85, internal_epoch   1,  Average loss: 0.1515, Accuracy: 92/364 (25.2747%)
___Train Local_ResNet_18,  epoch 210, local model 85, internal_epoch   2,  Average loss: 0.0938, Accuracy: 94/364 (25.8242%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 252.41625452041626
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 317.48582315444946 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:211 choose agents : [17, 33, 77, 11, 90, 24, 63, 1, 52, 31]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   1,  Average loss: 0.1319, Accuracy: 20/526 (3.8023%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   2,  Average loss: 0.0905, Accuracy: 79/526 (15.0190%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   3,  Average loss: 0.0766, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   4,  Average loss: 0.0703, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   5,  Average loss: 0.0663, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   6,  Average loss: 0.0642, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Global model norm: 97.94492832390557.
Norm before scaling: 96.23581470144055. Distance: 9.49332675454987
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 932.0008717807082, distance: 949.3326932640632
Total norm for 4 adversaries is: 932.0008717807082. distance: 949.3326932640632
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   1,  Average loss: 0.2111, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   2,  Average loss: 0.1625, Accuracy: 74/527 (14.0417%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   3,  Average loss: 0.1488, Accuracy: 40/527 (7.5901%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   4,  Average loss: 0.1312, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   5,  Average loss: 0.1132, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   6,  Average loss: 0.1005, Accuracy: 106/527 (20.1139%), train_poison_data_count: 45
Global model norm: 97.94492832390557.
Norm before scaling: 95.47784326579387. Distance: 13.122364179155776
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1290.975890557217, distance: 1312.2363544727757
Total norm for 4 adversaries is: 1290.975890557217. distance: 1312.2363544727757
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   1,  Average loss: 0.1786, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   2,  Average loss: 0.1227, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   3,  Average loss: 0.1099, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   4,  Average loss: 0.0959, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   5,  Average loss: 0.0844, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   6,  Average loss: 0.0781, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Global model norm: 97.94492832390557.
Norm before scaling: 96.19213459432378. Distance: 12.620007424813338
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1245.906998936919, distance: 1262.000792392778
Total norm for 4 adversaries is: 1245.906998936919. distance: 1262.000792392778
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   1,  Average loss: 0.1193, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   2,  Average loss: 0.0921, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   3,  Average loss: 0.0844, Accuracy: 53/546 (9.7070%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   4,  Average loss: 0.0729, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   5,  Average loss: 0.0718, Accuracy: 158/546 (28.9377%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   6,  Average loss: 0.0673, Accuracy: 162/546 (29.6703%), train_poison_data_count: 45
Global model norm: 97.94492832390557.
Norm before scaling: 96.10193562696851. Distance: 8.865628734825835
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 867.1587224954841, distance: 886.5628150334301
Total norm for 4 adversaries is: 867.1587224954841. distance: 886.5628150334301
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 211, local model 90, internal_epoch   1,  Average loss: 0.1321, Accuracy: 29/578 (5.0173%)
___Train Local_ResNet_18,  epoch 211, local model 90, internal_epoch   2,  Average loss: 0.0573, Accuracy: 54/578 (9.3426%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   1,  Average loss: 0.1053, Accuracy: 45/320 (14.0625%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   2,  Average loss: 0.0623, Accuracy: 31/320 (9.6875%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 63, internal_epoch   1,  Average loss: 0.0972, Accuracy: 46/752 (6.1170%)
___Train Local_ResNet_18,  epoch 211, local model 63, internal_epoch   2,  Average loss: 0.0598, Accuracy: 112/752 (14.8936%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 1, internal_epoch   1,  Average loss: 0.1082, Accuracy: 108/641 (16.8487%)
___Train Local_ResNet_18,  epoch 211, local model 1, internal_epoch   2,  Average loss: 0.0539, Accuracy: 81/641 (12.6365%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 52, internal_epoch   1,  Average loss: 0.1768, Accuracy: 10/214 (4.6729%)
___Train Local_ResNet_18,  epoch 211, local model 52, internal_epoch   2,  Average loss: 0.1075, Accuracy: 23/214 (10.7477%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 31, internal_epoch   1,  Average loss: 0.0983, Accuracy: 82/706 (11.6147%)
___Train Local_ResNet_18,  epoch 211, local model 31, internal_epoch   2,  Average loss: 0.0652, Accuracy: 221/706 (31.3031%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 262.33314514160156
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 332.5571632385254 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:212 choose agents : [17, 33, 77, 11, 59, 67, 71, 66, 76, 96]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   1,  Average loss: 0.1446, Accuracy: 152/526 (28.8973%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   2,  Average loss: 0.1131, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   3,  Average loss: 0.0914, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   4,  Average loss: 0.0806, Accuracy: 153/526 (29.0875%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   5,  Average loss: 0.0685, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   6,  Average loss: 0.0562, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Global model norm: 96.78554337425605.
Norm before scaling: 94.82206815596778. Distance: 10.760430532017526
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1057.3720962839902, distance: 1076.0430985792343
Total norm for 4 adversaries is: 1057.3720962839902. distance: 1076.0430985792343
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   1,  Average loss: 0.1645, Accuracy: 72/527 (13.6622%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   2,  Average loss: 0.1337, Accuracy: 75/527 (14.2315%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   3,  Average loss: 0.1092, Accuracy: 57/527 (10.8159%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   4,  Average loss: 0.0884, Accuracy: 63/527 (11.9545%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   5,  Average loss: 0.0763, Accuracy: 32/527 (6.0721%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   6,  Average loss: 0.0690, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Global model norm: 96.78554337425605.
Norm before scaling: 94.66630332053217. Distance: 11.41986892972377
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1122.4467693391969, distance: 1141.9868650733247
Total norm for 4 adversaries is: 1122.4467693391969. distance: 1141.9868650733247
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   1,  Average loss: 0.1286, Accuracy: 40/496 (8.0645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   2,  Average loss: 0.1044, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   3,  Average loss: 0.0903, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   4,  Average loss: 0.0828, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   5,  Average loss: 0.0732, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   6,  Average loss: 0.0651, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Global model norm: 96.78554337425605.
Norm before scaling: 95.00319690344637. Distance: 8.814371978839313
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 862.755034757839, distance: 881.4371787030542
Total norm for 4 adversaries is: 862.755034757839. distance: 881.4371787030542
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   1,  Average loss: 0.1741, Accuracy: 70/546 (12.8205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   2,  Average loss: 0.1381, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   3,  Average loss: 0.1194, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   4,  Average loss: 0.1019, Accuracy: 76/546 (13.9194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   5,  Average loss: 0.0902, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   6,  Average loss: 0.0790, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Global model norm: 96.78554337425605.
Norm before scaling: 94.45084390338977. Distance: 11.611999461511383
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1140.009100840866, distance: 1161.1999181880783
Total norm for 4 adversaries is: 1140.009100840866. distance: 1161.1999181880783
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 212, local model 59, internal_epoch   1,  Average loss: 0.1438, Accuracy: 0/642 (0.0000%)
___Train Local_ResNet_18,  epoch 212, local model 59, internal_epoch   2,  Average loss: 0.0766, Accuracy: 47/642 (7.3209%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 67, internal_epoch   1,  Average loss: 0.1191, Accuracy: 235/842 (27.9097%)
___Train Local_ResNet_18,  epoch 212, local model 67, internal_epoch   2,  Average loss: 0.0852, Accuracy: 136/842 (16.1520%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 71, internal_epoch   1,  Average loss: 0.0736, Accuracy: 290/1166 (24.8714%)
___Train Local_ResNet_18,  epoch 212, local model 71, internal_epoch   2,  Average loss: 0.0481, Accuracy: 395/1166 (33.8765%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 66, internal_epoch   1,  Average loss: 0.0641, Accuracy: 265/555 (47.7477%)
___Train Local_ResNet_18,  epoch 212, local model 66, internal_epoch   2,  Average loss: 0.0504, Accuracy: 275/555 (49.5495%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 76, internal_epoch   1,  Average loss: 0.4915, Accuracy: 1/65 (1.5385%)
___Train Local_ResNet_18,  epoch 212, local model 76, internal_epoch   2,  Average loss: 0.3750, Accuracy: 0/65 (0.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 96, internal_epoch   1,  Average loss: 0.1352, Accuracy: 66/708 (9.3220%)
___Train Local_ResNet_18,  epoch 212, local model 96, internal_epoch   2,  Average loss: 0.0860, Accuracy: 132/708 (18.6441%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 262.15615034103394
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 332.35260462760925 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:213 choose agents : [17, 33, 77, 11, 80, 81, 22, 72, 64, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   1,  Average loss: 0.1858, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   2,  Average loss: 0.1516, Accuracy: 57/526 (10.8365%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   3,  Average loss: 0.1278, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   4,  Average loss: 0.1124, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   5,  Average loss: 0.1039, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   6,  Average loss: 0.1002, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Global model norm: 94.60385125286919.
Norm before scaling: 92.1337714192657. Distance: 10.213961257887986
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 997.8184642007784, distance: 1021.3961033800746
Total norm for 4 adversaries is: 997.8184642007784. distance: 1021.3961033800746
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   1,  Average loss: 0.1563, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   2,  Average loss: 0.1268, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   3,  Average loss: 0.1090, Accuracy: 154/527 (29.2220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   4,  Average loss: 0.1032, Accuracy: 83/527 (15.7495%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   5,  Average loss: 0.0927, Accuracy: 112/527 (21.2524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   6,  Average loss: 0.0885, Accuracy: 152/527 (28.8425%), train_poison_data_count: 45
Global model norm: 94.60385125286919.
Norm before scaling: 92.34158732662115. Distance: 8.915401428393144
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 868.0744855713708, distance: 891.5401701549964
Total norm for 4 adversaries is: 868.0744855713708. distance: 891.5401701549964
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   1,  Average loss: 0.1706, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   2,  Average loss: 0.1380, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   3,  Average loss: 0.1149, Accuracy: 62/496 (12.5000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   4,  Average loss: 0.1016, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   5,  Average loss: 0.0869, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   6,  Average loss: 0.0761, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Global model norm: 94.60385125286919.
Norm before scaling: 92.62241688368427. Distance: 10.555549095107216
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1036.7767961330924, distance: 1055.5548304091076
Total norm for 4 adversaries is: 1036.7767961330924. distance: 1055.5548304091076
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   1,  Average loss: 0.1664, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   2,  Average loss: 0.1272, Accuracy: 61/546 (11.1722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   3,  Average loss: 0.1018, Accuracy: 62/546 (11.3553%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   4,  Average loss: 0.0913, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   5,  Average loss: 0.0859, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   6,  Average loss: 0.0829, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Global model norm: 94.60385125286919.
Norm before scaling: 92.40763970040572. Distance: 9.798055136630392
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 958.2780455066264, distance: 979.8054972799448
Total norm for 4 adversaries is: 958.2780455066264. distance: 979.8054972799448
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 213, local model 80, internal_epoch   1,  Average loss: 0.1796, Accuracy: 3/363 (0.8264%)
___Train Local_ResNet_18,  epoch 213, local model 80, internal_epoch   2,  Average loss: 0.1311, Accuracy: 65/363 (17.9063%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 81, internal_epoch   1,  Average loss: 0.0893, Accuracy: 511/1034 (49.4197%)
___Train Local_ResNet_18,  epoch 213, local model 81, internal_epoch   2,  Average loss: 0.0608, Accuracy: 495/1034 (47.8723%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 22, internal_epoch   1,  Average loss: 0.1301, Accuracy: 15/494 (3.0364%)
___Train Local_ResNet_18,  epoch 213, local model 22, internal_epoch   2,  Average loss: 0.0725, Accuracy: 57/494 (11.5385%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 72, internal_epoch   1,  Average loss: 0.2980, Accuracy: 23/618 (3.7217%)
___Train Local_ResNet_18,  epoch 213, local model 72, internal_epoch   2,  Average loss: 0.2069, Accuracy: 12/618 (1.9417%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 64, internal_epoch   1,  Average loss: 0.1809, Accuracy: 7/686 (1.0204%)
___Train Local_ResNet_18,  epoch 213, local model 64, internal_epoch   2,  Average loss: 0.1085, Accuracy: 67/686 (9.7668%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 45, internal_epoch   1,  Average loss: 0.1788, Accuracy: 11/529 (2.0794%)
___Train Local_ResNet_18,  epoch 213, local model 45, internal_epoch   2,  Average loss: 0.1145, Accuracy: 69/529 (13.0435%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 251.36061835289001
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 320.7175407409668 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:214 choose agents : [17, 33, 77, 11, 80, 54, 44, 35, 68, 25]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   1,  Average loss: 0.1547, Accuracy: 33/526 (6.2738%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   2,  Average loss: 0.1291, Accuracy: 35/526 (6.6540%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   3,  Average loss: 0.1079, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   4,  Average loss: 0.0800, Accuracy: 47/526 (8.9354%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   5,  Average loss: 0.0707, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   6,  Average loss: 0.0595, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Global model norm: 91.07781271390964.
Norm before scaling: 89.11666938187686. Distance: 11.287901716381633
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1111.0275086603392, distance: 1128.7901709352363
Total norm for 4 adversaries is: 1111.0275086603392. distance: 1128.7901709352363
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   1,  Average loss: 0.1879, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   2,  Average loss: 0.1621, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   3,  Average loss: 0.1431, Accuracy: 112/527 (21.2524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   4,  Average loss: 0.1251, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   5,  Average loss: 0.1165, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   6,  Average loss: 0.1002, Accuracy: 109/527 (20.6831%), train_poison_data_count: 45
Global model norm: 91.07781271390964.
Norm before scaling: 88.49774063588431. Distance: 10.914121219419707
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1068.2846062730662, distance: 1091.4121586275278
Total norm for 4 adversaries is: 1068.2846062730662. distance: 1091.4121586275278
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   1,  Average loss: 0.1336, Accuracy: 39/496 (7.8629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   2,  Average loss: 0.1178, Accuracy: 53/496 (10.6855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   3,  Average loss: 0.0991, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   4,  Average loss: 0.0861, Accuracy: 79/496 (15.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   5,  Average loss: 0.0798, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   6,  Average loss: 0.0750, Accuracy: 152/496 (30.6452%), train_poison_data_count: 40
Global model norm: 91.07781271390964.
Norm before scaling: 89.28075778653259. Distance: 8.881171860911536
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 869.912818907734, distance: 888.1171797685258
Total norm for 4 adversaries is: 869.912818907734. distance: 888.1171797685258
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   1,  Average loss: 0.1041, Accuracy: 164/546 (30.0366%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   2,  Average loss: 0.0975, Accuracy: 163/546 (29.8535%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   3,  Average loss: 0.0871, Accuracy: 167/546 (30.5861%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   4,  Average loss: 0.0763, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   5,  Average loss: 0.0720, Accuracy: 157/546 (28.7546%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   6,  Average loss: 0.0677, Accuracy: 157/546 (28.7546%), train_poison_data_count: 45
Global model norm: 91.07781271390964.
Norm before scaling: 89.16474394344438. Distance: 7.7231294509172255
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 751.2098158969969, distance: 772.3129223313566
Total norm for 4 adversaries is: 751.2098158969969. distance: 772.3129223313566
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 214, local model 80, internal_epoch   1,  Average loss: 0.1470, Accuracy: 6/363 (1.6529%)
___Train Local_ResNet_18,  epoch 214, local model 80, internal_epoch   2,  Average loss: 0.1091, Accuracy: 6/363 (1.6529%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 54, internal_epoch   1,  Average loss: 0.1052, Accuracy: 128/440 (29.0909%)
___Train Local_ResNet_18,  epoch 214, local model 54, internal_epoch   2,  Average loss: 0.0816, Accuracy: 125/440 (28.4091%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 44, internal_epoch   1,  Average loss: 0.0818, Accuracy: 66/436 (15.1376%)
___Train Local_ResNet_18,  epoch 214, local model 44, internal_epoch   2,  Average loss: 0.0605, Accuracy: 128/436 (29.3578%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 35, internal_epoch   1,  Average loss: 0.0835, Accuracy: 10/419 (2.3866%)
___Train Local_ResNet_18,  epoch 214, local model 35, internal_epoch   2,  Average loss: 0.0528, Accuracy: 131/419 (31.2649%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 68, internal_epoch   1,  Average loss: 0.1356, Accuracy: 80/416 (19.2308%)
___Train Local_ResNet_18,  epoch 214, local model 68, internal_epoch   2,  Average loss: 0.1141, Accuracy: 87/416 (20.9135%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 25, internal_epoch   1,  Average loss: 0.0703, Accuracy: 86/545 (15.7798%)
___Train Local_ResNet_18,  epoch 214, local model 25, internal_epoch   2,  Average loss: 0.0430, Accuracy: 150/545 (27.5229%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 254.6533465385437
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 326.9145565032959 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:215 choose agents : [17, 33, 77, 11, 4, 79, 43, 63, 35, 49]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   1,  Average loss: 0.0971, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   2,  Average loss: 0.0850, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   3,  Average loss: 0.0845, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   4,  Average loss: 0.0766, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   5,  Average loss: 0.0743, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   6,  Average loss: 0.0671, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Global model norm: 88.14714648582647.
Norm before scaling: 86.31389447189977. Distance: 6.310580424411747
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 608.3081044996852, distance: 631.0580401199243
Total norm for 4 adversaries is: 608.3081044996852. distance: 631.0580401199243
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   1,  Average loss: 0.1758, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   2,  Average loss: 0.1581, Accuracy: 80/527 (15.1803%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   3,  Average loss: 0.1409, Accuracy: 48/527 (9.1082%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   4,  Average loss: 0.1209, Accuracy: 62/527 (11.7647%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   5,  Average loss: 0.1092, Accuracy: 60/527 (11.3852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   6,  Average loss: 0.0901, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Global model norm: 88.14714648582647.
Norm before scaling: 85.63505301386517. Distance: 11.414909357487183
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1119.8598126551376, distance: 1141.4909657986786
Total norm for 4 adversaries is: 1119.8598126551376. distance: 1141.4909657986786
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   1,  Average loss: 0.1156, Accuracy: 24/496 (4.8387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   2,  Average loss: 0.1018, Accuracy: 60/496 (12.0968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   3,  Average loss: 0.0868, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   4,  Average loss: 0.0794, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   5,  Average loss: 0.0765, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   6,  Average loss: 0.0693, Accuracy: 145/496 (29.2339%), train_poison_data_count: 40
Global model norm: 88.14714648582647.
Norm before scaling: 86.4506864715732. Distance: 7.502006770912721
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 731.6578776996801, distance: 750.2007231401474
Total norm for 4 adversaries is: 731.6578776996801. distance: 750.2007231401474
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   1,  Average loss: 0.2011, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   2,  Average loss: 0.1846, Accuracy: 65/546 (11.9048%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   3,  Average loss: 0.1642, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   4,  Average loss: 0.1482, Accuracy: 62/546 (11.3553%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   5,  Average loss: 0.1351, Accuracy: 59/546 (10.8059%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   6,  Average loss: 0.1222, Accuracy: 66/546 (12.0879%), train_poison_data_count: 45
Global model norm: 88.14714648582647.
Norm before scaling: 85.09887688833649. Distance: 10.96596254757085
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1070.260774297554, distance: 1096.5962680038629
Total norm for 4 adversaries is: 1070.260774297554. distance: 1096.5962680038629
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 215, local model 4, internal_epoch   1,  Average loss: 0.1888, Accuracy: 52/557 (9.3357%)
___Train Local_ResNet_18,  epoch 215, local model 4, internal_epoch   2,  Average loss: 0.1568, Accuracy: 161/557 (28.9048%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 79, internal_epoch   1,  Average loss: 0.1950, Accuracy: 5/154 (3.2468%)
___Train Local_ResNet_18,  epoch 215, local model 79, internal_epoch   2,  Average loss: 0.1865, Accuracy: 5/154 (3.2468%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 43, internal_epoch   1,  Average loss: 0.0983, Accuracy: 22/345 (6.3768%)
___Train Local_ResNet_18,  epoch 215, local model 43, internal_epoch   2,  Average loss: 0.0774, Accuracy: 84/345 (24.3478%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   1,  Average loss: 0.1289, Accuracy: 76/752 (10.1064%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   2,  Average loss: 0.1057, Accuracy: 167/752 (22.2074%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 35, internal_epoch   1,  Average loss: 0.1345, Accuracy: 27/419 (6.4439%)
___Train Local_ResNet_18,  epoch 215, local model 35, internal_epoch   2,  Average loss: 0.0946, Accuracy: 44/419 (10.5012%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 49, internal_epoch   1,  Average loss: 0.1768, Accuracy: 15/426 (3.5211%)
___Train Local_ResNet_18,  epoch 215, local model 49, internal_epoch   2,  Average loss: 0.1359, Accuracy: 74/426 (17.3709%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 240.31734538078308
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 307.24712443351746 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:216 choose agents : [17, 33, 77, 11, 8, 12, 18, 94, 57, 83]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   1,  Average loss: 0.1993, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   2,  Average loss: 0.1604, Accuracy: 54/526 (10.2662%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   3,  Average loss: 0.1211, Accuracy: 39/526 (7.4144%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   4,  Average loss: 0.0902, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   5,  Average loss: 0.0810, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   6,  Average loss: 0.0702, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Global model norm: 83.4050996314449.
Norm before scaling: 81.07149562172731. Distance: 12.389971067627261
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1219.9741800546435, distance: 1238.9971246940001
Total norm for 4 adversaries is: 1219.9741800546435. distance: 1238.9971246940001
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   1,  Average loss: 0.1537, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   2,  Average loss: 0.1283, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   3,  Average loss: 0.1001, Accuracy: 139/527 (26.3757%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   4,  Average loss: 0.0815, Accuracy: 29/527 (5.5028%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   5,  Average loss: 0.0673, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   6,  Average loss: 0.0604, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Global model norm: 83.4050996314449.
Norm before scaling: 81.29313458385492. Distance: 10.68838622227982
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1050.3164404121264, distance: 1068.8386805313512
Total norm for 4 adversaries is: 1050.3164404121264. distance: 1068.8386805313512
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   1,  Average loss: 0.1505, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   2,  Average loss: 0.1224, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   3,  Average loss: 0.0982, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   4,  Average loss: 0.0825, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   5,  Average loss: 0.0642, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   6,  Average loss: 0.0544, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Global model norm: 83.4050996314449.
Norm before scaling: 81.56808529726868. Distance: 10.56311213959837
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1039.8490876083895, distance: 1056.3112704122777
Total norm for 4 adversaries is: 1039.8490876083895. distance: 1056.3112704122777
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   1,  Average loss: 0.1868, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   2,  Average loss: 0.1478, Accuracy: 58/546 (10.6227%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   3,  Average loss: 0.1099, Accuracy: 24/546 (4.3956%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   4,  Average loss: 0.0829, Accuracy: 11/546 (2.0147%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   5,  Average loss: 0.0676, Accuracy: 145/546 (26.5568%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   6,  Average loss: 0.0612, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Global model norm: 83.4050996314449.
Norm before scaling: 81.20081143279143. Distance: 12.464264715476038
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1228.2978567920732, distance: 1246.4265421596251
Total norm for 4 adversaries is: 1228.2978567920732. distance: 1246.4265421596251
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 216, local model 8, internal_epoch   1,  Average loss: 0.1662, Accuracy: 38/534 (7.1161%)
___Train Local_ResNet_18,  epoch 216, local model 8, internal_epoch   2,  Average loss: 0.1087, Accuracy: 90/534 (16.8539%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 12, internal_epoch   1,  Average loss: 0.0856, Accuracy: 398/977 (40.7369%)
___Train Local_ResNet_18,  epoch 216, local model 12, internal_epoch   2,  Average loss: 0.0511, Accuracy: 216/977 (22.1085%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 18, internal_epoch   1,  Average loss: 0.1687, Accuracy: 43/386 (11.1399%)
___Train Local_ResNet_18,  epoch 216, local model 18, internal_epoch   2,  Average loss: 0.1100, Accuracy: 45/386 (11.6580%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 94, internal_epoch   1,  Average loss: 0.1079, Accuracy: 76/203 (37.4384%)
___Train Local_ResNet_18,  epoch 216, local model 94, internal_epoch   2,  Average loss: 0.0921, Accuracy: 76/203 (37.4384%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 57, internal_epoch   1,  Average loss: 0.2249, Accuracy: 6/290 (2.0690%)
___Train Local_ResNet_18,  epoch 216, local model 57, internal_epoch   2,  Average loss: 0.1858, Accuracy: 6/290 (2.0690%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 83, internal_epoch   1,  Average loss: 0.1707, Accuracy: 32/366 (8.7432%)
___Train Local_ResNet_18,  epoch 216, local model 83, internal_epoch   2,  Average loss: 0.1313, Accuracy: 32/366 (8.7432%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 251.90442562103271
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 317.87946033477783 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:217 choose agents : [17, 33, 77, 11, 37, 22, 38, 65, 29, 18]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   1,  Average loss: 0.1311, Accuracy: 17/526 (3.2319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   2,  Average loss: 0.1049, Accuracy: 21/526 (3.9924%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   3,  Average loss: 0.1043, Accuracy: 130/526 (24.7148%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   4,  Average loss: 0.0894, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   5,  Average loss: 0.0825, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   6,  Average loss: 0.0815, Accuracy: 170/526 (32.3194%), train_poison_data_count: 45
Global model norm: 83.85161745607535.
Norm before scaling: 81.85740507507552. Distance: 7.268219777758029
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 704.9629422884582, distance: 726.8219778597783
Total norm for 4 adversaries is: 704.9629422884582. distance: 726.8219778597783
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   1,  Average loss: 0.2165, Accuracy: 59/527 (11.1954%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   2,  Average loss: 0.2048, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   3,  Average loss: 0.1814, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   4,  Average loss: 0.1757, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   5,  Average loss: 0.1653, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   6,  Average loss: 0.1551, Accuracy: 120/527 (22.7704%), train_poison_data_count: 45
Global model norm: 83.85161745607535.
Norm before scaling: 80.52184534724101. Distance: 9.331200174248462
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 902.388116333543, distance: 933.120035150891
Total norm for 4 adversaries is: 902.388116333543. distance: 933.120035150891
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   1,  Average loss: 0.1625, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   2,  Average loss: 0.1547, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   3,  Average loss: 0.1438, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   4,  Average loss: 0.1349, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   5,  Average loss: 0.1229, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   6,  Average loss: 0.1043, Accuracy: 110/496 (22.1774%), train_poison_data_count: 40
Global model norm: 83.85161745607535.
Norm before scaling: 81.50700638499582. Distance: 8.144924675749483
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 790.5851867446038, distance: 814.4924800143953
Total norm for 4 adversaries is: 790.5851867446038. distance: 814.4924800143953
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   1,  Average loss: 0.0970, Accuracy: 59/546 (10.8059%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   2,  Average loss: 0.0930, Accuracy: 132/546 (24.1758%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   3,  Average loss: 0.0852, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   4,  Average loss: 0.0837, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   5,  Average loss: 0.0795, Accuracy: 165/546 (30.2198%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   6,  Average loss: 0.0780, Accuracy: 167/546 (30.5861%), train_poison_data_count: 45
Global model norm: 83.85161745607535.
Norm before scaling: 81.97151992079323. Distance: 5.531909967910397
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 528.0291776975965, distance: 553.191027132581
Total norm for 4 adversaries is: 528.0291776975965. distance: 553.191027132581
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 217, local model 37, internal_epoch   1,  Average loss: 0.1408, Accuracy: 78/725 (10.7586%)
___Train Local_ResNet_18,  epoch 217, local model 37, internal_epoch   2,  Average loss: 0.1095, Accuracy: 374/725 (51.5862%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 22, internal_epoch   1,  Average loss: 0.0859, Accuracy: 53/494 (10.7287%)
___Train Local_ResNet_18,  epoch 217, local model 22, internal_epoch   2,  Average loss: 0.0634, Accuracy: 166/494 (33.6032%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 38, internal_epoch   1,  Average loss: 0.0557, Accuracy: 112/756 (14.8148%)
___Train Local_ResNet_18,  epoch 217, local model 38, internal_epoch   2,  Average loss: 0.0387, Accuracy: 262/756 (34.6561%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 65, internal_epoch   1,  Average loss: 0.1412, Accuracy: 0/314 (0.0000%)
___Train Local_ResNet_18,  epoch 217, local model 65, internal_epoch   2,  Average loss: 0.1226, Accuracy: 30/314 (9.5541%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 29, internal_epoch   1,  Average loss: 0.0923, Accuracy: 21/848 (2.4764%)
___Train Local_ResNet_18,  epoch 217, local model 29, internal_epoch   2,  Average loss: 0.0560, Accuracy: 392/848 (46.2264%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 18, internal_epoch   1,  Average loss: 0.1666, Accuracy: 1/386 (0.2591%)
___Train Local_ResNet_18,  epoch 217, local model 18, internal_epoch   2,  Average loss: 0.1522, Accuracy: 99/386 (25.6477%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 255.95394587516785
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 327.3357434272766 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:218 choose agents : [17, 33, 77, 11, 53, 15, 7, 29, 86, 60]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   1,  Average loss: 0.1346, Accuracy: 33/526 (6.2738%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   2,  Average loss: 0.0693, Accuracy: 127/526 (24.1445%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   3,  Average loss: 0.0689, Accuracy: 152/526 (28.8973%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   4,  Average loss: 0.0649, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   5,  Average loss: 0.0618, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   6,  Average loss: 0.0625, Accuracy: 153/526 (29.0875%), train_poison_data_count: 45
Global model norm: 77.45892623775681.
Norm before scaling: 75.89410732951373. Distance: 10.316490926976416
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1017.673695248138, distance: 1031.649165171959
Total norm for 4 adversaries is: 1017.673695248138. distance: 1031.649165171959
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   1,  Average loss: 0.2074, Accuracy: 29/527 (5.5028%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   2,  Average loss: 0.1464, Accuracy: 50/527 (9.4877%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   3,  Average loss: 0.1322, Accuracy: 73/527 (13.8520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   4,  Average loss: 0.1146, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   5,  Average loss: 0.1007, Accuracy: 42/527 (7.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   6,  Average loss: 0.0841, Accuracy: 78/527 (14.8008%), train_poison_data_count: 45
Global model norm: 77.45892623775681.
Norm before scaling: 74.9750316511687. Distance: 13.53792754367279
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1335.1269602550913, distance: 1353.792727857555
Total norm for 4 adversaries is: 1335.1269602550913. distance: 1353.792727857555
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   1,  Average loss: 0.1578, Accuracy: 77/496 (15.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   2,  Average loss: 0.1183, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   3,  Average loss: 0.1097, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   4,  Average loss: 0.0988, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   5,  Average loss: 0.0879, Accuracy: 127/496 (25.6048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   6,  Average loss: 0.0808, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Global model norm: 77.45892623775681.
Norm before scaling: 75.4755334684277. Distance: 9.4565407374857
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 927.8932117975645, distance: 945.6540395408883
Total norm for 4 adversaries is: 927.8932117975645. distance: 945.6540395408883
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   1,  Average loss: 0.1753, Accuracy: 61/546 (11.1722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   2,  Average loss: 0.1083, Accuracy: 95/546 (17.3993%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   3,  Average loss: 0.1005, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   4,  Average loss: 0.0893, Accuracy: 83/546 (15.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   5,  Average loss: 0.0776, Accuracy: 97/546 (17.7656%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   6,  Average loss: 0.0691, Accuracy: 78/546 (14.2857%), train_poison_data_count: 45
Global model norm: 77.45892623775681.
Norm before scaling: 75.47427516006695. Distance: 13.251247131387649
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1309.2149842558326, distance: 1325.1247111121277
Total norm for 4 adversaries is: 1309.2149842558326. distance: 1325.1247111121277
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 218, local model 53, internal_epoch   1,  Average loss: 0.0685, Accuracy: 177/625 (28.3200%)
___Train Local_ResNet_18,  epoch 218, local model 53, internal_epoch   2,  Average loss: 0.0413, Accuracy: 223/625 (35.6800%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 15, internal_epoch   1,  Average loss: 0.1038, Accuracy: 53/341 (15.5425%)
___Train Local_ResNet_18,  epoch 218, local model 15, internal_epoch   2,  Average loss: 0.0645, Accuracy: 210/341 (61.5836%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 7, internal_epoch   1,  Average loss: 0.1205, Accuracy: 74/352 (21.0227%)
___Train Local_ResNet_18,  epoch 218, local model 7, internal_epoch   2,  Average loss: 0.1052, Accuracy: 69/352 (19.6023%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 29, internal_epoch   1,  Average loss: 0.0654, Accuracy: 199/848 (23.4670%)
___Train Local_ResNet_18,  epoch 218, local model 29, internal_epoch   2,  Average loss: 0.0430, Accuracy: 384/848 (45.2830%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 86, internal_epoch   1,  Average loss: 0.2675, Accuracy: 1/212 (0.4717%)
___Train Local_ResNet_18,  epoch 218, local model 86, internal_epoch   2,  Average loss: 0.1642, Accuracy: 9/212 (4.2453%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   1,  Average loss: 0.1460, Accuracy: 7/284 (2.4648%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   2,  Average loss: 0.0706, Accuracy: 16/284 (5.6338%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 248.98958468437195
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 311.11653900146484 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:219 choose agents : [17, 33, 77, 11, 81, 8, 28, 1, 93, 53]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   1,  Average loss: 0.1394, Accuracy: 19/526 (3.6122%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   2,  Average loss: 0.0962, Accuracy: 20/526 (3.8023%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   3,  Average loss: 0.0787, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   4,  Average loss: 0.0670, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   5,  Average loss: 0.0556, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   6,  Average loss: 0.0473, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Global model norm: 77.3838563943976.
Norm before scaling: 75.75349685101177. Distance: 11.181950220877729
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1104.0279661312932, distance: 1118.1950299478174
Total norm for 4 adversaries is: 1104.0279661312932. distance: 1118.1950299478174
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   1,  Average loss: 0.1037, Accuracy: 97/527 (18.4061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   2,  Average loss: 0.0727, Accuracy: 123/527 (23.3397%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   3,  Average loss: 0.0633, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   4,  Average loss: 0.0577, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   5,  Average loss: 0.0506, Accuracy: 154/527 (29.2220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   6,  Average loss: 0.0461, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Global model norm: 77.3838563943976.
Norm before scaling: 75.87577867186933. Distance: 8.599065295146637
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 845.529678663026, distance: 859.9065719600007
Total norm for 4 adversaries is: 845.529678663026. distance: 859.9065719600007
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   1,  Average loss: 0.1281, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   2,  Average loss: 0.0870, Accuracy: 24/496 (4.8387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   3,  Average loss: 0.0710, Accuracy: 71/496 (14.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   4,  Average loss: 0.0615, Accuracy: 79/496 (15.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   5,  Average loss: 0.0536, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   6,  Average loss: 0.0484, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Global model norm: 77.3838563943976.
Norm before scaling: 76.01635566195607. Distance: 10.347885549790474
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1022.296495641064, distance: 1034.7885653600933
Total norm for 4 adversaries is: 1022.296495641064. distance: 1034.7885653600933
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   1,  Average loss: 0.1197, Accuracy: 137/546 (25.0916%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   2,  Average loss: 0.0868, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   3,  Average loss: 0.0796, Accuracy: 93/546 (17.0330%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   4,  Average loss: 0.0725, Accuracy: 75/546 (13.7363%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   5,  Average loss: 0.0631, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   6,  Average loss: 0.0579, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Global model norm: 77.3838563943976.
Norm before scaling: 75.59251303762662. Distance: 9.098755602587916
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 893.4090608450308, distance: 909.8755409395287
Total norm for 4 adversaries is: 893.4090608450308. distance: 909.8755409395287
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 219, local model 81, internal_epoch   1,  Average loss: 0.0650, Accuracy: 270/1034 (26.1122%)
___Train Local_ResNet_18,  epoch 219, local model 81, internal_epoch   2,  Average loss: 0.0385, Accuracy: 509/1034 (49.2263%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 8, internal_epoch   1,  Average loss: 0.1206, Accuracy: 67/534 (12.5468%)
___Train Local_ResNet_18,  epoch 219, local model 8, internal_epoch   2,  Average loss: 0.0724, Accuracy: 49/534 (9.1760%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 28, internal_epoch   1,  Average loss: 0.1045, Accuracy: 106/423 (25.0591%)
___Train Local_ResNet_18,  epoch 219, local model 28, internal_epoch   2,  Average loss: 0.0781, Accuracy: 100/423 (23.6407%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 1, internal_epoch   1,  Average loss: 0.1336, Accuracy: 121/641 (18.8768%)
___Train Local_ResNet_18,  epoch 219, local model 1, internal_epoch   2,  Average loss: 0.0719, Accuracy: 62/641 (9.6724%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 93, internal_epoch   1,  Average loss: 0.1251, Accuracy: 32/584 (5.4795%)
___Train Local_ResNet_18,  epoch 219, local model 93, internal_epoch   2,  Average loss: 0.0726, Accuracy: 64/584 (10.9589%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   1,  Average loss: 0.1593, Accuracy: 40/625 (6.4000%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   2,  Average loss: 0.0996, Accuracy: 20/625 (3.2000%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 244.43490886688232
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 316.00267362594604 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:220 choose agents : [17, 33, 77, 11, 12, 50, 10, 18, 39, 62]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   1,  Average loss: 0.1270, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   2,  Average loss: 0.1096, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   3,  Average loss: 0.0940, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   4,  Average loss: 0.0792, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   5,  Average loss: 0.0647, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   6,  Average loss: 0.0555, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Global model norm: 77.72924135058504.
Norm before scaling: 75.76656429867333. Distance: 10.111236636694949
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 994.013549957947, distance: 1011.1236324011026
Total norm for 4 adversaries is: 994.013549957947. distance: 1011.1236324011026
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   1,  Average loss: 0.1899, Accuracy: 74/527 (14.0417%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   2,  Average loss: 0.1718, Accuracy: 64/527 (12.1442%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   3,  Average loss: 0.1439, Accuracy: 45/527 (8.5389%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   4,  Average loss: 0.1177, Accuracy: 54/527 (10.2467%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   5,  Average loss: 0.1033, Accuracy: 31/527 (5.8824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   6,  Average loss: 0.0876, Accuracy: 40/527 (7.5901%), train_poison_data_count: 45
Global model norm: 77.72924135058504.
Norm before scaling: 75.04011622438195. Distance: 12.359304628039228
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1215.40487081466, distance: 1235.9304187534183
Total norm for 4 adversaries is: 1215.40487081466. distance: 1235.9304187534183
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   1,  Average loss: 0.1255, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   2,  Average loss: 0.1135, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   3,  Average loss: 0.0948, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   4,  Average loss: 0.0776, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   5,  Average loss: 0.0718, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   6,  Average loss: 0.0665, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Global model norm: 77.72924135058504.
Norm before scaling: 75.92960992960849. Distance: 8.91018236583744
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 874.2786312154724, distance: 891.0182026760172
Total norm for 4 adversaries is: 874.2786312154724. distance: 891.0182026760172
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   1,  Average loss: 0.2002, Accuracy: 66/546 (12.0879%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   2,  Average loss: 0.1813, Accuracy: 61/546 (11.1722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   3,  Average loss: 0.1545, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   4,  Average loss: 0.1314, Accuracy: 48/546 (8.7912%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   5,  Average loss: 0.1082, Accuracy: 42/546 (7.6923%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   6,  Average loss: 0.0984, Accuracy: 59/546 (10.8059%), train_poison_data_count: 45
Global model norm: 77.72924135058504.
Norm before scaling: 74.78666272722029. Distance: 12.364876970480426
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1214.403402910252, distance: 1236.4876667399478
Total norm for 4 adversaries is: 1214.403402910252. distance: 1236.4876667399478
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 220, local model 12, internal_epoch   1,  Average loss: 0.1437, Accuracy: 71/977 (7.2671%)
___Train Local_ResNet_18,  epoch 220, local model 12, internal_epoch   2,  Average loss: 0.0570, Accuracy: 107/977 (10.9519%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   1,  Average loss: 0.1057, Accuracy: 148/401 (36.9077%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   2,  Average loss: 0.0847, Accuracy: 146/401 (36.4090%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 10, internal_epoch   1,  Average loss: 0.1242, Accuracy: 9/752 (1.1968%)
___Train Local_ResNet_18,  epoch 220, local model 10, internal_epoch   2,  Average loss: 0.0424, Accuracy: 162/752 (21.5426%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 18, internal_epoch   1,  Average loss: 0.2374, Accuracy: 1/386 (0.2591%)
___Train Local_ResNet_18,  epoch 220, local model 18, internal_epoch   2,  Average loss: 0.1939, Accuracy: 9/386 (2.3316%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 39, internal_epoch   1,  Average loss: 0.2050, Accuracy: 0/217 (0.0000%)
___Train Local_ResNet_18,  epoch 220, local model 39, internal_epoch   2,  Average loss: 0.1783, Accuracy: 4/217 (1.8433%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 62, internal_epoch   1,  Average loss: 0.1389, Accuracy: 33/358 (9.2179%)
___Train Local_ResNet_18,  epoch 220, local model 62, internal_epoch   2,  Average loss: 0.1219, Accuracy: 59/358 (16.4804%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 261.69888401031494
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 320.5666489601135 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:221 choose agents : [17, 33, 77, 11, 65, 87, 12, 74, 4, 7]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   1,  Average loss: 0.1904, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   2,  Average loss: 0.1820, Accuracy: 118/526 (22.4335%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   3,  Average loss: 0.1696, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   4,  Average loss: 0.1493, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   5,  Average loss: 0.1366, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   6,  Average loss: 0.1254, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Global model norm: 76.23058474642085.
Norm before scaling: 73.10943343927991. Distance: 9.51713582589916
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 925.1491096034196, distance: 951.7135532816584
Total norm for 4 adversaries is: 925.1491096034196. distance: 951.7135532816584
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   1,  Average loss: 0.1569, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   2,  Average loss: 0.1490, Accuracy: 143/527 (27.1347%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   3,  Average loss: 0.1342, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   4,  Average loss: 0.1246, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   5,  Average loss: 0.1170, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   6,  Average loss: 0.1043, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Global model norm: 76.23058474642085.
Norm before scaling: 73.57216376626421. Distance: 8.78159491788125
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 854.0723403201862, distance: 878.1594744122505
Total norm for 4 adversaries is: 854.0723403201862. distance: 878.1594744122505
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   1,  Average loss: 0.1364, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   2,  Average loss: 0.1278, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   3,  Average loss: 0.1188, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   4,  Average loss: 0.1079, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   5,  Average loss: 0.0972, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   6,  Average loss: 0.0921, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Global model norm: 76.23058474642085.
Norm before scaling: 74.10025079558605. Distance: 7.799114998715149
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 758.9235386387749, distance: 779.9114533073611
Total norm for 4 adversaries is: 758.9235386387749. distance: 779.9114533073611
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   1,  Average loss: 0.1535, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   2,  Average loss: 0.1442, Accuracy: 50/546 (9.1575%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   3,  Average loss: 0.1281, Accuracy: 64/546 (11.7216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   4,  Average loss: 0.1185, Accuracy: 70/546 (12.8205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   5,  Average loss: 0.1053, Accuracy: 94/546 (17.2161%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   6,  Average loss: 0.0936, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Global model norm: 76.23058474642085.
Norm before scaling: 73.66708129950243. Distance: 9.507919223158218
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 928.6279529499421, distance: 950.7919067808687
Total norm for 4 adversaries is: 928.6279529499421. distance: 950.7919067808687
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 221, local model 65, internal_epoch   1,  Average loss: 0.1156, Accuracy: 16/314 (5.0955%)
___Train Local_ResNet_18,  epoch 221, local model 65, internal_epoch   2,  Average loss: 0.0973, Accuracy: 18/314 (5.7325%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 87, internal_epoch   1,  Average loss: 0.2657, Accuracy: 41/397 (10.3275%)
___Train Local_ResNet_18,  epoch 221, local model 87, internal_epoch   2,  Average loss: 0.2199, Accuracy: 36/397 (9.0680%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 12, internal_epoch   1,  Average loss: 0.0802, Accuracy: 391/977 (40.0205%)
___Train Local_ResNet_18,  epoch 221, local model 12, internal_epoch   2,  Average loss: 0.0693, Accuracy: 397/977 (40.6346%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 74, internal_epoch   1,  Average loss: 0.1049, Accuracy: 51/469 (10.8742%)
___Train Local_ResNet_18,  epoch 221, local model 74, internal_epoch   2,  Average loss: 0.0874, Accuracy: 154/469 (32.8358%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 4, internal_epoch   1,  Average loss: 0.1295, Accuracy: 48/557 (8.6176%)
___Train Local_ResNet_18,  epoch 221, local model 4, internal_epoch   2,  Average loss: 0.1000, Accuracy: 186/557 (33.3932%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 7, internal_epoch   1,  Average loss: 0.1795, Accuracy: 27/352 (7.6705%)
___Train Local_ResNet_18,  epoch 221, local model 7, internal_epoch   2,  Average loss: 0.1598, Accuracy: 24/352 (6.8182%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 244.62046146392822
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 313.8897285461426 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:222 choose agents : [17, 33, 77, 11, 35, 30, 72, 51, 63, 46]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   1,  Average loss: 0.1805, Accuracy: 18/526 (3.4221%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   2,  Average loss: 0.1418, Accuracy: 22/526 (4.1825%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   3,  Average loss: 0.1168, Accuracy: 36/526 (6.8441%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   4,  Average loss: 0.0920, Accuracy: 47/526 (8.9354%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   5,  Average loss: 0.0576, Accuracy: 110/526 (20.9125%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   6,  Average loss: 0.0453, Accuracy: 134/526 (25.4753%), train_poison_data_count: 45
Global model norm: 70.84890530426352.
Norm before scaling: 68.82314645728754. Distance: 12.000734942500657
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1184.2718226826137, distance: 1200.0734352530264
Total norm for 4 adversaries is: 1184.2718226826137. distance: 1200.0734352530264
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   1,  Average loss: 0.1694, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   2,  Average loss: 0.1449, Accuracy: 87/527 (16.5085%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   3,  Average loss: 0.1152, Accuracy: 31/527 (5.8824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   4,  Average loss: 0.0975, Accuracy: 60/527 (11.3852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   5,  Average loss: 0.0559, Accuracy: 122/527 (23.1499%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   6,  Average loss: 0.0443, Accuracy: 106/527 (20.1139%), train_poison_data_count: 45
Global model norm: 70.84890530426352.
Norm before scaling: 68.77576576841038. Distance: 10.983631439871496
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1081.8554085458925, distance: 1098.3631571570488
Total norm for 4 adversaries is: 1081.8554085458925. distance: 1098.3631571570488
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   1,  Average loss: 0.1595, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   2,  Average loss: 0.1333, Accuracy: 42/496 (8.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   3,  Average loss: 0.1125, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   4,  Average loss: 0.0934, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   5,  Average loss: 0.0590, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   6,  Average loss: 0.0412, Accuracy: 125/496 (25.2016%), train_poison_data_count: 40
Global model norm: 70.84890530426352.
Norm before scaling: 69.0065985579006. Distance: 10.02208788044679
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 986.7279893668772, distance: 1002.2088105779154
Total norm for 4 adversaries is: 986.7279893668772. distance: 1002.2088105779154
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   1,  Average loss: 0.1382, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   2,  Average loss: 0.1145, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   3,  Average loss: 0.0977, Accuracy: 123/546 (22.5275%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   4,  Average loss: 0.0868, Accuracy: 126/546 (23.0769%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   5,  Average loss: 0.0770, Accuracy: 131/546 (23.9927%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   6,  Average loss: 0.0665, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Global model norm: 70.84890530426352.
Norm before scaling: 68.7383299754402. Distance: 9.629109483783202
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 945.2428920653147, distance: 962.9110161380438
Total norm for 4 adversaries is: 945.2428920653147. distance: 962.9110161380438
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 222, local model 35, internal_epoch   1,  Average loss: 0.0944, Accuracy: 1/419 (0.2387%)
___Train Local_ResNet_18,  epoch 222, local model 35, internal_epoch   2,  Average loss: 0.0589, Accuracy: 104/419 (24.8210%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 30, internal_epoch   1,  Average loss: 0.1050, Accuracy: 113/337 (33.5312%)
___Train Local_ResNet_18,  epoch 222, local model 30, internal_epoch   2,  Average loss: 0.0871, Accuracy: 110/337 (32.6409%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   1,  Average loss: 0.1619, Accuracy: 52/618 (8.4142%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   2,  Average loss: 0.0931, Accuracy: 28/618 (4.5307%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 51, internal_epoch   1,  Average loss: 0.1109, Accuracy: 16/479 (3.3403%)
___Train Local_ResNet_18,  epoch 222, local model 51, internal_epoch   2,  Average loss: 0.0554, Accuracy: 141/479 (29.4363%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 63, internal_epoch   1,  Average loss: 0.1327, Accuracy: 19/752 (2.5266%)
___Train Local_ResNet_18,  epoch 222, local model 63, internal_epoch   2,  Average loss: 0.0868, Accuracy: 62/752 (8.2447%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 46, internal_epoch   1,  Average loss: 0.1271, Accuracy: 83/601 (13.8103%)
___Train Local_ResNet_18,  epoch 222, local model 46, internal_epoch   2,  Average loss: 0.0885, Accuracy: 85/601 (14.1431%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 256.13015627861023
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 321.9605321884155 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:223 choose agents : [17, 33, 77, 11, 54, 95, 26, 2, 82, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   1,  Average loss: 0.3683, Accuracy: 87/526 (16.5399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   2,  Average loss: 0.0693, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   3,  Average loss: 0.0659, Accuracy: 155/526 (29.4677%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   4,  Average loss: 0.0606, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   5,  Average loss: 0.0618, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   6,  Average loss: 0.0560, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Global model norm: 71.25708229603391.
Norm before scaling: 70.83034652097398. Distance: 23.823732945633097
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2370.2237236176675, distance: 2382.3735013637133
Total norm for 4 adversaries is: 2370.2237236176675. distance: 2382.3735013637133
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   1,  Average loss: 0.4224, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   2,  Average loss: 0.1228, Accuracy: 69/527 (13.0930%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   3,  Average loss: 0.1084, Accuracy: 129/527 (24.4782%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   4,  Average loss: 0.1038, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   5,  Average loss: 0.0974, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   6,  Average loss: 0.0896, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Global model norm: 71.25708229603391.
Norm before scaling: 69.5050020681965. Distance: 22.65317597680152
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2249.6136334935386, distance: 2265.317637771798
Total norm for 4 adversaries is: 2249.6136334935386. distance: 2265.317637771798
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   1,  Average loss: 0.4486, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   2,  Average loss: 0.1063, Accuracy: 19/496 (3.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   3,  Average loss: 0.0904, Accuracy: 60/496 (12.0968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   4,  Average loss: 0.0819, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   5,  Average loss: 0.0757, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   6,  Average loss: 0.0714, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Global model norm: 71.25708229603391.
Norm before scaling: 70.53971620654566. Distance: 25.08080568811225
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2494.487522518403, distance: 2508.0805409715217
Total norm for 4 adversaries is: 2494.487522518403. distance: 2508.0805409715217
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   1,  Average loss: 0.4564, Accuracy: 61/546 (11.1722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   2,  Average loss: 0.1334, Accuracy: 70/546 (12.8205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   3,  Average loss: 0.1167, Accuracy: 58/546 (10.6227%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   4,  Average loss: 0.1112, Accuracy: 74/546 (13.5531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   5,  Average loss: 0.1041, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   6,  Average loss: 0.0939, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Global model norm: 71.25708229603391.
Norm before scaling: 69.9837557881738. Distance: 25.930459558406525
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2577.545731893035, distance: 2593.0461816172883
Total norm for 4 adversaries is: 2577.545731893035. distance: 2593.0461816172883
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 223, local model 54, internal_epoch   1,  Average loss: 0.3973, Accuracy: 77/440 (17.5000%)
___Train Local_ResNet_18,  epoch 223, local model 54, internal_epoch   2,  Average loss: 0.1299, Accuracy: 3/440 (0.6818%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   1,  Average loss: 0.1891, Accuracy: 162/569 (28.4710%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   2,  Average loss: 0.0422, Accuracy: 111/569 (19.5079%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 26, internal_epoch   1,  Average loss: 0.3506, Accuracy: 57/468 (12.1795%)
___Train Local_ResNet_18,  epoch 223, local model 26, internal_epoch   2,  Average loss: 0.0841, Accuracy: 141/468 (30.1282%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 2, internal_epoch   1,  Average loss: 0.2926, Accuracy: 109/461 (23.6443%)
___Train Local_ResNet_18,  epoch 223, local model 2, internal_epoch   2,  Average loss: 0.0512, Accuracy: 125/461 (27.1150%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 82, internal_epoch   1,  Average loss: 0.3289, Accuracy: 157/601 (26.1231%)
___Train Local_ResNet_18,  epoch 223, local model 82, internal_epoch   2,  Average loss: 0.1046, Accuracy: 210/601 (34.9418%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 45, internal_epoch   1,  Average loss: 0.4210, Accuracy: 39/529 (7.3724%)
___Train Local_ResNet_18,  epoch 223, local model 45, internal_epoch   2,  Average loss: 0.1270, Accuracy: 8/529 (1.5123%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 253.2815911769867
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 321.4872806072235 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:224 choose agents : [17, 33, 77, 11, 0, 34, 62, 66, 95, 10]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   1,  Average loss: 0.0959, Accuracy: 18/526 (3.4221%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   2,  Average loss: 0.0874, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   3,  Average loss: 0.0793, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   4,  Average loss: 0.0707, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   5,  Average loss: 0.0632, Accuracy: 155/526 (29.4677%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   6,  Average loss: 0.0571, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Global model norm: 106.48495620714459.
Norm before scaling: 104.78815590126348. Distance: 8.021905947879288
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 782.6652780723059, distance: 802.1906335155005
Total norm for 4 adversaries is: 782.6652780723059. distance: 802.1906335155005
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   1,  Average loss: 0.0921, Accuracy: 60/527 (11.3852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   2,  Average loss: 0.0811, Accuracy: 58/527 (11.0057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   3,  Average loss: 0.0696, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   4,  Average loss: 0.0607, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   5,  Average loss: 0.0546, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   6,  Average loss: 0.0509, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 106.48495620714459.
Norm before scaling: 104.88361295085615. Distance: 7.561274657799675
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 737.2266018667531, distance: 756.1274694124
Total norm for 4 adversaries is: 737.2266018667531. distance: 756.1274694124
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   1,  Average loss: 0.0621, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   2,  Average loss: 0.0550, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   3,  Average loss: 0.0479, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   4,  Average loss: 0.0420, Accuracy: 108/496 (21.7742%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   5,  Average loss: 0.0406, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   6,  Average loss: 0.0402, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Global model norm: 106.48495620714459.
Norm before scaling: 105.26926041110006. Distance: 5.393597211917053
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 523.0638106388168, distance: 539.3597477565414
Total norm for 4 adversaries is: 523.0638106388168. distance: 539.3597477565414
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   1,  Average loss: 0.0868, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   2,  Average loss: 0.0764, Accuracy: 75/546 (13.7363%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   3,  Average loss: 0.0654, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   4,  Average loss: 0.0576, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   5,  Average loss: 0.0518, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   6,  Average loss: 0.0477, Accuracy: 151/546 (27.6557%), train_poison_data_count: 45
Global model norm: 106.48495620714459.
Norm before scaling: 104.90502121711096. Distance: 7.5116908191433405
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 732.497909553331, distance: 751.1690888208859
Total norm for 4 adversaries is: 732.497909553331. distance: 751.1690888208859
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 224, local model 0, internal_epoch   1,  Average loss: 0.0657, Accuracy: 51/367 (13.8965%)
___Train Local_ResNet_18,  epoch 224, local model 0, internal_epoch   2,  Average loss: 0.0528, Accuracy: 51/367 (13.8965%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 34, internal_epoch   1,  Average loss: 0.0544, Accuracy: 0/349 (0.0000%)
___Train Local_ResNet_18,  epoch 224, local model 34, internal_epoch   2,  Average loss: 0.0396, Accuracy: 93/349 (26.6476%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 62, internal_epoch   1,  Average loss: 0.0757, Accuracy: 21/358 (5.8659%)
___Train Local_ResNet_18,  epoch 224, local model 62, internal_epoch   2,  Average loss: 0.0646, Accuracy: 46/358 (12.8492%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 66, internal_epoch   1,  Average loss: 0.1229, Accuracy: 0/555 (0.0000%)
___Train Local_ResNet_18,  epoch 224, local model 66, internal_epoch   2,  Average loss: 0.0864, Accuracy: 88/555 (15.8559%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 95, internal_epoch   1,  Average loss: 0.0587, Accuracy: 302/569 (53.0756%)
___Train Local_ResNet_18,  epoch 224, local model 95, internal_epoch   2,  Average loss: 0.0513, Accuracy: 300/569 (52.7241%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 10, internal_epoch   1,  Average loss: 0.0309, Accuracy: 254/752 (33.7766%)
___Train Local_ResNet_18,  epoch 224, local model 10, internal_epoch   2,  Average loss: 0.0250, Accuracy: 414/752 (55.0532%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 254.2397689819336
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 325.5176532268524 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:225 choose agents : [17, 33, 77, 11, 12, 38, 41, 4, 68, 55]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   1,  Average loss: 0.1246, Accuracy: 20/526 (3.8023%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   2,  Average loss: 0.1013, Accuracy: 34/526 (6.4639%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   3,  Average loss: 0.0879, Accuracy: 117/526 (22.2433%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   4,  Average loss: 0.0757, Accuracy: 151/526 (28.7072%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   5,  Average loss: 0.0677, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   6,  Average loss: 0.0608, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Global model norm: 102.55128290275066.
Norm before scaling: 100.71008630904355. Distance: 9.292626803161312
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 909.9374635105426, distance: 929.2626445198365
Total norm for 4 adversaries is: 909.9374635105426. distance: 929.2626445198365
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   1,  Average loss: 0.0829, Accuracy: 102/527 (19.3548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   2,  Average loss: 0.0707, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   3,  Average loss: 0.0623, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   4,  Average loss: 0.0637, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   5,  Average loss: 0.0568, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   6,  Average loss: 0.0520, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Global model norm: 102.55128290275066.
Norm before scaling: 100.92123030642512. Distance: 5.785962302999262
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 555.6757710211954, distance: 578.596226871555
Total norm for 4 adversaries is: 555.6757710211954. distance: 578.596226871555
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   1,  Average loss: 0.1160, Accuracy: 30/496 (6.0484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   2,  Average loss: 0.0995, Accuracy: 64/496 (12.9032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   3,  Average loss: 0.0874, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   4,  Average loss: 0.0845, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   5,  Average loss: 0.0767, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   6,  Average loss: 0.0713, Accuracy: 112/496 (22.5806%), train_poison_data_count: 40
Global model norm: 102.55128290275066.
Norm before scaling: 100.83172670035458. Distance: 7.506477102231654
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 730.3295061135076, distance: 750.6476786748894
Total norm for 4 adversaries is: 730.3295061135076. distance: 750.6476786748894
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   1,  Average loss: 0.1096, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   2,  Average loss: 0.0950, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   3,  Average loss: 0.0884, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   4,  Average loss: 0.0812, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   5,  Average loss: 0.0745, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   6,  Average loss: 0.0682, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Global model norm: 102.55128290275066.
Norm before scaling: 100.60807311046166. Distance: 7.507992872280504
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 727.3934200279791, distance: 750.7992824317296
Total norm for 4 adversaries is: 727.3934200279791. distance: 750.7992824317296
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 225, local model 12, internal_epoch   1,  Average loss: 0.0863, Accuracy: 155/977 (15.8649%)
___Train Local_ResNet_18,  epoch 225, local model 12, internal_epoch   2,  Average loss: 0.0569, Accuracy: 438/977 (44.8311%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 38, internal_epoch   1,  Average loss: 0.0782, Accuracy: 199/756 (26.3228%)
___Train Local_ResNet_18,  epoch 225, local model 38, internal_epoch   2,  Average loss: 0.0604, Accuracy: 287/756 (37.9630%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 41, internal_epoch   1,  Average loss: 0.0611, Accuracy: 16/513 (3.1189%)
___Train Local_ResNet_18,  epoch 225, local model 41, internal_epoch   2,  Average loss: 0.0310, Accuracy: 322/513 (62.7680%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 4, internal_epoch   1,  Average loss: 0.1118, Accuracy: 219/557 (39.3178%)
___Train Local_ResNet_18,  epoch 225, local model 4, internal_epoch   2,  Average loss: 0.0920, Accuracy: 228/557 (40.9336%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 68, internal_epoch   1,  Average loss: 0.1377, Accuracy: 78/416 (18.7500%)
___Train Local_ResNet_18,  epoch 225, local model 68, internal_epoch   2,  Average loss: 0.1120, Accuracy: 81/416 (19.4712%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 55, internal_epoch   1,  Average loss: 0.1489, Accuracy: 6/299 (2.0067%)
___Train Local_ResNet_18,  epoch 225, local model 55, internal_epoch   2,  Average loss: 0.1192, Accuracy: 13/299 (4.3478%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 264.59563541412354
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 332.86717438697815 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:226 choose agents : [17, 33, 77, 11, 30, 39, 10, 64, 23, 60]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   1,  Average loss: 0.0513, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   2,  Average loss: 0.0501, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   3,  Average loss: 0.0483, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   4,  Average loss: 0.0459, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   5,  Average loss: 0.0438, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   6,  Average loss: 0.0413, Accuracy: 179/526 (34.0304%), train_poison_data_count: 45
Global model norm: 97.87555375801202.
Norm before scaling: 96.5889021348985. Distance: 3.768678432310147
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 353.7908545313177, distance: 376.86784819084795
Total norm for 4 adversaries is: 353.7908545313177. distance: 376.86784819084795
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   1,  Average loss: 0.0861, Accuracy: 3/527 (0.5693%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   2,  Average loss: 0.0803, Accuracy: 154/527 (29.2220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   3,  Average loss: 0.0724, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   4,  Average loss: 0.0732, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   5,  Average loss: 0.0690, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   6,  Average loss: 0.0623, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Global model norm: 97.87555375801202.
Norm before scaling: 96.24492681435214. Distance: 6.125660763346078
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 591.1097349477507, distance: 612.5660678653364
Total norm for 4 adversaries is: 591.1097349477507. distance: 612.5660678653364
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   1,  Average loss: 0.0663, Accuracy: 40/496 (8.0645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   2,  Average loss: 0.0605, Accuracy: 42/496 (8.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   3,  Average loss: 0.0562, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   4,  Average loss: 0.0519, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   5,  Average loss: 0.0492, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   6,  Average loss: 0.0470, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Global model norm: 97.87555375801202.
Norm before scaling: 96.66166530255155. Distance: 5.135174583728492
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 497.01919291411673, distance: 513.5174656231276
Total norm for 4 adversaries is: 497.01919291411673. distance: 513.5174656231276
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   1,  Average loss: 0.0990, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   2,  Average loss: 0.0915, Accuracy: 48/546 (8.7912%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   3,  Average loss: 0.0842, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   4,  Average loss: 0.0782, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   5,  Average loss: 0.0707, Accuracy: 83/546 (15.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   6,  Average loss: 0.0610, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Global model norm: 97.87555375801202.
Norm before scaling: 96.1438944369324. Distance: 7.468604433564452
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 726.776917286178, distance: 746.8604287281527
Total norm for 4 adversaries is: 726.776917286178. distance: 746.8604287281527
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 226, local model 30, internal_epoch   1,  Average loss: 0.1459, Accuracy: 2/337 (0.5935%)
___Train Local_ResNet_18,  epoch 226, local model 30, internal_epoch   2,  Average loss: 0.1278, Accuracy: 5/337 (1.4837%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 39, internal_epoch   1,  Average loss: 0.0806, Accuracy: 11/217 (5.0691%)
___Train Local_ResNet_18,  epoch 226, local model 39, internal_epoch   2,  Average loss: 0.0696, Accuracy: 12/217 (5.5300%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 10, internal_epoch   1,  Average loss: 0.0323, Accuracy: 211/752 (28.0585%)
___Train Local_ResNet_18,  epoch 226, local model 10, internal_epoch   2,  Average loss: 0.0222, Accuracy: 413/752 (54.9202%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 64, internal_epoch   1,  Average loss: 0.0550, Accuracy: 29/686 (4.2274%)
___Train Local_ResNet_18,  epoch 226, local model 64, internal_epoch   2,  Average loss: 0.0406, Accuracy: 239/686 (34.8397%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 23, internal_epoch   1,  Average loss: 0.1098, Accuracy: 0/248 (0.0000%)
___Train Local_ResNet_18,  epoch 226, local model 23, internal_epoch   2,  Average loss: 0.1034, Accuracy: 5/248 (2.0161%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 60, internal_epoch   1,  Average loss: 0.0752, Accuracy: 40/284 (14.0845%)
___Train Local_ResNet_18,  epoch 226, local model 60, internal_epoch   2,  Average loss: 0.0673, Accuracy: 40/284 (14.0845%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 250.99677753448486
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 307.87398290634155 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:227 choose agents : [17, 33, 77, 11, 23, 34, 52, 92, 57, 74]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   1,  Average loss: 0.1153, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   2,  Average loss: 0.0812, Accuracy: 58/526 (11.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   3,  Average loss: 0.0585, Accuracy: 59/526 (11.2167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   4,  Average loss: 0.0482, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   5,  Average loss: 0.0405, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   6,  Average loss: 0.0349, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Global model norm: 93.28087311481653.
Norm before scaling: 91.87092359153957. Distance: 10.01814607262351
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 988.0242911993612, distance: 1001.8146036068749
Total norm for 4 adversaries is: 988.0242911993612. distance: 1001.8146036068749
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   1,  Average loss: 0.0919, Accuracy: 42/527 (7.9696%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   2,  Average loss: 0.0588, Accuracy: 43/527 (8.1594%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   3,  Average loss: 0.0417, Accuracy: 59/527 (11.1954%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   4,  Average loss: 0.0354, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   5,  Average loss: 0.0351, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   6,  Average loss: 0.0339, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Global model norm: 93.28087311481653.
Norm before scaling: 92.0323376421299. Distance: 8.253136703211363
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 812.3395226135436, distance: 825.3137282270301
Total norm for 4 adversaries is: 812.3395226135436. distance: 825.3137282270301
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   1,  Average loss: 0.0800, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   2,  Average loss: 0.0594, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   3,  Average loss: 0.0461, Accuracy: 127/496 (25.6048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   4,  Average loss: 0.0402, Accuracy: 116/496 (23.3871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   5,  Average loss: 0.0381, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   6,  Average loss: 0.0361, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Global model norm: 93.28087311481653.
Norm before scaling: 92.09692054264085. Distance: 7.207607901642428
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 707.8521208557618, distance: 720.7607959649304
Total norm for 4 adversaries is: 707.8521208557618. distance: 720.7607959649304
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   1,  Average loss: 0.0935, Accuracy: 52/546 (9.5238%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   2,  Average loss: 0.0629, Accuracy: 118/546 (21.6117%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   3,  Average loss: 0.0477, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   4,  Average loss: 0.0417, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   5,  Average loss: 0.0391, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   6,  Average loss: 0.0374, Accuracy: 149/546 (27.2894%), train_poison_data_count: 45
Global model norm: 93.28087311481653.
Norm before scaling: 91.94581135953122. Distance: 8.42144513846732
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 828.3041410013594, distance: 842.1445095706556
Total norm for 4 adversaries is: 828.3041410013594. distance: 842.1445095706556
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 227, local model 23, internal_epoch   1,  Average loss: 0.0934, Accuracy: 16/248 (6.4516%)
___Train Local_ResNet_18,  epoch 227, local model 23, internal_epoch   2,  Average loss: 0.0662, Accuracy: 62/248 (25.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 34, internal_epoch   1,  Average loss: 0.1257, Accuracy: 41/349 (11.7479%)
___Train Local_ResNet_18,  epoch 227, local model 34, internal_epoch   2,  Average loss: 0.0797, Accuracy: 41/349 (11.7479%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 52, internal_epoch   1,  Average loss: 0.1572, Accuracy: 0/214 (0.0000%)
___Train Local_ResNet_18,  epoch 227, local model 52, internal_epoch   2,  Average loss: 0.1146, Accuracy: 0/214 (0.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 92, internal_epoch   1,  Average loss: 0.0538, Accuracy: 159/796 (19.9749%)
___Train Local_ResNet_18,  epoch 227, local model 92, internal_epoch   2,  Average loss: 0.0269, Accuracy: 245/796 (30.7789%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 57, internal_epoch   1,  Average loss: 0.0754, Accuracy: 96/290 (33.1034%)
___Train Local_ResNet_18,  epoch 227, local model 57, internal_epoch   2,  Average loss: 0.0541, Accuracy: 96/290 (33.1034%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 74, internal_epoch   1,  Average loss: 0.0980, Accuracy: 52/469 (11.0874%)
___Train Local_ResNet_18,  epoch 227, local model 74, internal_epoch   2,  Average loss: 0.0504, Accuracy: 80/469 (17.0576%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 247.95727396011353
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 317.66569662094116 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:228 choose agents : [17, 33, 77, 11, 67, 16, 64, 30, 35, 81]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   1,  Average loss: 0.0904, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   2,  Average loss: 0.0810, Accuracy: 80/526 (15.2091%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   3,  Average loss: 0.0749, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   4,  Average loss: 0.0748, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   5,  Average loss: 0.0690, Accuracy: 151/526 (28.7072%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   6,  Average loss: 0.0658, Accuracy: 164/526 (31.1787%), train_poison_data_count: 45
Global model norm: 92.04221602748382.
Norm before scaling: 90.33813433774797. Distance: 5.479808503863404
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 524.0923701982314, distance: 547.9808105673045
Total norm for 4 adversaries is: 524.0923701982314. distance: 547.9808105673045
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   1,  Average loss: 0.0980, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   2,  Average loss: 0.0920, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   3,  Average loss: 0.0842, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   4,  Average loss: 0.0800, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   5,  Average loss: 0.0734, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   6,  Average loss: 0.0666, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 92.04221602748382.
Norm before scaling: 90.25394674109133. Distance: 6.8199511734901055
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 660.559256425947, distance: 681.9951200338606
Total norm for 4 adversaries is: 660.559256425947. distance: 681.9951200338606
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   1,  Average loss: 0.1330, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   2,  Average loss: 0.1200, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   3,  Average loss: 0.1108, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   4,  Average loss: 0.1035, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   5,  Average loss: 0.0952, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   6,  Average loss: 0.0875, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Global model norm: 92.04221602748382.
Norm before scaling: 90.1054314097172. Distance: 7.528764116608725
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 730.9913645180769, distance: 752.8763593711785
Total norm for 4 adversaries is: 730.9913645180769. distance: 752.8763593711785
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   1,  Average loss: 0.1003, Accuracy: 53/546 (9.7070%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   2,  Average loss: 0.0844, Accuracy: 51/546 (9.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   3,  Average loss: 0.0750, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   4,  Average loss: 0.0680, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   5,  Average loss: 0.0613, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   6,  Average loss: 0.0562, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Global model norm: 92.04221602748382.
Norm before scaling: 90.37775810538923. Distance: 7.640908078057491
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 745.7246056688756, distance: 764.0908813747224
Total norm for 4 adversaries is: 745.7246056688756. distance: 764.0908813747224
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 228, local model 67, internal_epoch   1,  Average loss: 0.1043, Accuracy: 76/842 (9.0261%)
___Train Local_ResNet_18,  epoch 228, local model 67, internal_epoch   2,  Average loss: 0.0712, Accuracy: 164/842 (19.4774%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 16, internal_epoch   1,  Average loss: 0.0953, Accuracy: 43/773 (5.5627%)
___Train Local_ResNet_18,  epoch 228, local model 16, internal_epoch   2,  Average loss: 0.0659, Accuracy: 235/773 (30.4010%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 64, internal_epoch   1,  Average loss: 0.1397, Accuracy: 6/686 (0.8746%)
___Train Local_ResNet_18,  epoch 228, local model 64, internal_epoch   2,  Average loss: 0.1016, Accuracy: 114/686 (16.6181%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 30, internal_epoch   1,  Average loss: 0.1954, Accuracy: 20/337 (5.9347%)
___Train Local_ResNet_18,  epoch 228, local model 30, internal_epoch   2,  Average loss: 0.1716, Accuracy: 23/337 (6.8249%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 35, internal_epoch   1,  Average loss: 0.1313, Accuracy: 12/419 (2.8640%)
___Train Local_ResNet_18,  epoch 228, local model 35, internal_epoch   2,  Average loss: 0.1001, Accuracy: 24/419 (5.7279%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 81, internal_epoch   1,  Average loss: 0.0455, Accuracy: 510/1034 (49.3230%)
___Train Local_ResNet_18,  epoch 228, local model 81, internal_epoch   2,  Average loss: 0.0384, Accuracy: 510/1034 (49.3230%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 251.91286730766296
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 324.8533136844635 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:229 choose agents : [17, 33, 77, 11, 62, 68, 2, 74, 39, 1]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   1,  Average loss: 0.1677, Accuracy: 36/526 (6.8441%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   2,  Average loss: 0.1244, Accuracy: 38/526 (7.2243%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   3,  Average loss: 0.0836, Accuracy: 49/526 (9.3156%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   4,  Average loss: 0.0574, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   5,  Average loss: 0.0453, Accuracy: 130/526 (24.7148%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   6,  Average loss: 0.0434, Accuracy: 129/526 (24.5247%), train_poison_data_count: 45
Global model norm: 87.30232973606002.
Norm before scaling: 85.58103912557091. Distance: 11.423317709842443
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1126.825629811463, distance: 1142.3317709842443
Total norm for 4 adversaries is: 1126.825629811463. distance: 1142.3317709842443
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   1,  Average loss: 0.1624, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   2,  Average loss: 0.1257, Accuracy: 100/527 (18.9753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   3,  Average loss: 0.0922, Accuracy: 49/527 (9.2979%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   4,  Average loss: 0.0579, Accuracy: 46/527 (8.7287%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   5,  Average loss: 0.0395, Accuracy: 119/527 (22.5806%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   6,  Average loss: 0.0371, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Global model norm: 87.30232973606002.
Norm before scaling: 85.59467129387349. Distance: 10.545278018562124
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1038.7518351367664, distance: 1054.5278564362347
Total norm for 4 adversaries is: 1038.7518351367664. distance: 1054.5278564362347
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   1,  Average loss: 0.1448, Accuracy: 46/496 (9.2742%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   2,  Average loss: 0.1151, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   3,  Average loss: 0.0821, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   4,  Average loss: 0.0631, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   5,  Average loss: 0.0540, Accuracy: 117/496 (23.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   6,  Average loss: 0.0478, Accuracy: 115/496 (23.1855%), train_poison_data_count: 40
Global model norm: 87.30232973606002.
Norm before scaling: 85.72371419730511. Distance: 10.113485688596068
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 996.4461852001843, distance: 1011.3485427882912
Total norm for 4 adversaries is: 996.4461852001843. distance: 1011.3485427882912
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   1,  Average loss: 0.1257, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   2,  Average loss: 0.0986, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   3,  Average loss: 0.0710, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   4,  Average loss: 0.0605, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   5,  Average loss: 0.0523, Accuracy: 137/546 (25.0916%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   6,  Average loss: 0.0475, Accuracy: 81/546 (14.8352%), train_poison_data_count: 45
Global model norm: 87.30232973606002.
Norm before scaling: 85.59698161570155. Distance: 9.187491280687826
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 902.1060774653943, distance: 918.749081632194
Total norm for 4 adversaries is: 902.1060774653943. distance: 918.749081632194
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 229, local model 62, internal_epoch   1,  Average loss: 0.1262, Accuracy: 47/358 (13.1285%)
___Train Local_ResNet_18,  epoch 229, local model 62, internal_epoch   2,  Average loss: 0.0835, Accuracy: 49/358 (13.6872%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 68, internal_epoch   1,  Average loss: 0.1303, Accuracy: 78/416 (18.7500%)
___Train Local_ResNet_18,  epoch 229, local model 68, internal_epoch   2,  Average loss: 0.0905, Accuracy: 104/416 (25.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 2, internal_epoch   1,  Average loss: 0.1728, Accuracy: 15/461 (3.2538%)
___Train Local_ResNet_18,  epoch 229, local model 2, internal_epoch   2,  Average loss: 0.0693, Accuracy: 196/461 (42.5163%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 74, internal_epoch   1,  Average loss: 0.1225, Accuracy: 40/469 (8.5288%)
___Train Local_ResNet_18,  epoch 229, local model 74, internal_epoch   2,  Average loss: 0.0608, Accuracy: 113/469 (24.0938%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 39, internal_epoch   1,  Average loss: 0.1604, Accuracy: 24/217 (11.0599%)
___Train Local_ResNet_18,  epoch 229, local model 39, internal_epoch   2,  Average loss: 0.1197, Accuracy: 25/217 (11.5207%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 1, internal_epoch   1,  Average loss: 0.0919, Accuracy: 178/641 (27.7691%)
___Train Local_ResNet_18,  epoch 229, local model 1, internal_epoch   2,  Average loss: 0.0438, Accuracy: 185/641 (28.8612%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 244.91466164588928
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 314.617995262146 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:230 choose agents : [17, 33, 77, 11, 64, 29, 21, 39, 95, 90]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   1,  Average loss: 0.1086, Accuracy: 87/526 (16.5399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   2,  Average loss: 0.0659, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   3,  Average loss: 0.0616, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   4,  Average loss: 0.0585, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   5,  Average loss: 0.0562, Accuracy: 137/526 (26.0456%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   6,  Average loss: 0.0511, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Global model norm: 87.14748465693803.
Norm before scaling: 85.86111946589969. Distance: 10.897553307546621
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1077.5112528414727, distance: 1089.7553624552622
Total norm for 4 adversaries is: 1077.5112528414727. distance: 1089.7553624552622
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   1,  Average loss: 0.1756, Accuracy: 97/527 (18.4061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   2,  Average loss: 0.1143, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   3,  Average loss: 0.1086, Accuracy: 111/527 (21.0626%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   4,  Average loss: 0.0997, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   5,  Average loss: 0.0966, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   6,  Average loss: 0.0951, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Global model norm: 87.14748465693803.
Norm before scaling: 85.18535913028865. Distance: 12.092497058400381
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1192.2428443903532, distance: 1209.2497674177987
Total norm for 4 adversaries is: 1192.2428443903532. distance: 1209.2497674177987
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   1,  Average loss: 0.1433, Accuracy: 32/496 (6.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   2,  Average loss: 0.0792, Accuracy: 19/496 (3.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   3,  Average loss: 0.0706, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   4,  Average loss: 0.0628, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   5,  Average loss: 0.0617, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   6,  Average loss: 0.0558, Accuracy: 108/496 (21.7742%), train_poison_data_count: 40
Global model norm: 87.14748465693803.
Norm before scaling: 85.99747906915644. Distance: 12.67886795526135
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1256.6401632925792, distance: 1267.8868738968788
Total norm for 4 adversaries is: 1256.6401632925792. distance: 1267.8868738968788
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   1,  Average loss: 0.2114, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   2,  Average loss: 0.1369, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   3,  Average loss: 0.1283, Accuracy: 52/546 (9.5238%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   4,  Average loss: 0.1206, Accuracy: 58/546 (10.6227%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   5,  Average loss: 0.1104, Accuracy: 61/546 (11.1722%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   6,  Average loss: 0.1047, Accuracy: 94/546 (17.2161%), train_poison_data_count: 45
Global model norm: 87.14748465693803.
Norm before scaling: 85.07463405372367. Distance: 14.903154159648555
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1473.3383012736756, distance: 1490.315402859408
Total norm for 4 adversaries is: 1473.3383012736756. distance: 1490.315402859408
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 230, local model 64, internal_epoch   1,  Average loss: 0.1324, Accuracy: 29/686 (4.2274%)
___Train Local_ResNet_18,  epoch 230, local model 64, internal_epoch   2,  Average loss: 0.0677, Accuracy: 117/686 (17.0554%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 29, internal_epoch   1,  Average loss: 0.1304, Accuracy: 228/848 (26.8868%)
___Train Local_ResNet_18,  epoch 230, local model 29, internal_epoch   2,  Average loss: 0.0549, Accuracy: 282/848 (33.2547%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 21, internal_epoch   1,  Average loss: 0.1995, Accuracy: 25/262 (9.5420%)
___Train Local_ResNet_18,  epoch 230, local model 21, internal_epoch   2,  Average loss: 0.0988, Accuracy: 50/262 (19.0840%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 39, internal_epoch   1,  Average loss: 0.2558, Accuracy: 27/217 (12.4424%)
___Train Local_ResNet_18,  epoch 230, local model 39, internal_epoch   2,  Average loss: 0.1533, Accuracy: 0/217 (0.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 95, internal_epoch   1,  Average loss: 0.0690, Accuracy: 83/569 (14.5870%)
___Train Local_ResNet_18,  epoch 230, local model 95, internal_epoch   2,  Average loss: 0.0317, Accuracy: 301/569 (52.8998%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 90, internal_epoch   1,  Average loss: 0.1879, Accuracy: 5/578 (0.8651%)
___Train Local_ResNet_18,  epoch 230, local model 90, internal_epoch   2,  Average loss: 0.0803, Accuracy: 71/578 (12.2837%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 258.6088807582855
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 329.3011178970337 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:231 choose agents : [17, 33, 77, 11, 68, 38, 97, 3, 98, 90]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   1,  Average loss: 0.1285, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   2,  Average loss: 0.0980, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   3,  Average loss: 0.0747, Accuracy: 50/526 (9.5057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   4,  Average loss: 0.0650, Accuracy: 94/526 (17.8707%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   5,  Average loss: 0.0596, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   6,  Average loss: 0.0494, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Global model norm: 91.17048654683981.
Norm before scaling: 89.50211131413326. Distance: 9.759741977970652
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 959.775657380411, distance: 975.9741607747615
Total norm for 4 adversaries is: 959.775657380411. distance: 975.9741607747615
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   1,  Average loss: 0.1217, Accuracy: 24/527 (4.5541%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   2,  Average loss: 0.0937, Accuracy: 30/527 (5.6926%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   3,  Average loss: 0.0760, Accuracy: 152/527 (28.8425%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   4,  Average loss: 0.0682, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   5,  Average loss: 0.0577, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   6,  Average loss: 0.0508, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Global model norm: 91.17048654683981.
Norm before scaling: 89.49198528185359. Distance: 9.207841218482493
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 904.0756328980447, distance: 920.7841087898944
Total norm for 4 adversaries is: 904.0756328980447. distance: 920.7841087898944
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   1,  Average loss: 0.0866, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   2,  Average loss: 0.0693, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   3,  Average loss: 0.0549, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   4,  Average loss: 0.0455, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   5,  Average loss: 0.0428, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   6,  Average loss: 0.0387, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Global model norm: 91.17048654683981.
Norm before scaling: 89.918835472087. Distance: 7.36805061470399
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 723.2557250032661, distance: 736.8050539321782
Total norm for 4 adversaries is: 723.2557250032661. distance: 736.8050539321782
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   1,  Average loss: 0.1233, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   2,  Average loss: 0.1039, Accuracy: 81/546 (14.8352%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   3,  Average loss: 0.0801, Accuracy: 64/546 (11.7216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   4,  Average loss: 0.0621, Accuracy: 49/546 (8.9744%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   5,  Average loss: 0.0482, Accuracy: 130/546 (23.8095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   6,  Average loss: 0.0418, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Global model norm: 91.17048654683981.
Norm before scaling: 89.51044151731685. Distance: 9.34225074196691
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 917.8054668610337, distance: 934.225079945941
Total norm for 4 adversaries is: 917.8054668610337. distance: 934.225079945941
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 231, local model 68, internal_epoch   1,  Average loss: 0.1108, Accuracy: 35/416 (8.4135%)
___Train Local_ResNet_18,  epoch 231, local model 68, internal_epoch   2,  Average loss: 0.0759, Accuracy: 50/416 (12.0192%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 38, internal_epoch   1,  Average loss: 0.1415, Accuracy: 62/756 (8.2011%)
___Train Local_ResNet_18,  epoch 231, local model 38, internal_epoch   2,  Average loss: 0.0687, Accuracy: 64/756 (8.4656%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 97, internal_epoch   1,  Average loss: 0.1266, Accuracy: 89/418 (21.2919%)
___Train Local_ResNet_18,  epoch 231, local model 97, internal_epoch   2,  Average loss: 0.1009, Accuracy: 94/418 (22.4880%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 3, internal_epoch   1,  Average loss: 0.0809, Accuracy: 111/780 (14.2308%)
___Train Local_ResNet_18,  epoch 231, local model 3, internal_epoch   2,  Average loss: 0.0399, Accuracy: 333/780 (42.6923%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 98, internal_epoch   1,  Average loss: 0.0876, Accuracy: 87/802 (10.8479%)
___Train Local_ResNet_18,  epoch 231, local model 98, internal_epoch   2,  Average loss: 0.0450, Accuracy: 180/802 (22.4439%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 90, internal_epoch   1,  Average loss: 0.0504, Accuracy: 231/578 (39.9654%)
___Train Local_ResNet_18,  epoch 231, local model 90, internal_epoch   2,  Average loss: 0.0346, Accuracy: 322/578 (55.7093%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 248.2788450717926
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 317.9920563697815 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:232 choose agents : [17, 33, 77, 11, 88, 25, 27, 56, 93, 42]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   1,  Average loss: 0.0943, Accuracy: 16/526 (3.0418%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   2,  Average loss: 0.0761, Accuracy: 88/526 (16.7300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   3,  Average loss: 0.0708, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   4,  Average loss: 0.0701, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   5,  Average loss: 0.0625, Accuracy: 119/526 (22.6236%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   6,  Average loss: 0.0638, Accuracy: 118/526 (22.4335%), train_poison_data_count: 45
Global model norm: 89.30751385661792.
Norm before scaling: 87.67665482202916. Distance: 6.829872030061873
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 664.0173661132667, distance: 682.9871887524685
Total norm for 4 adversaries is: 664.0173661132667. distance: 682.9871887524685
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   1,  Average loss: 0.0970, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   2,  Average loss: 0.0767, Accuracy: 54/527 (10.2467%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   3,  Average loss: 0.0627, Accuracy: 80/527 (15.1803%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   4,  Average loss: 0.0570, Accuracy: 103/527 (19.5446%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   5,  Average loss: 0.0564, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   6,  Average loss: 0.0523, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 89.30751385661792.
Norm before scaling: 87.821382446667. Distance: 7.4405078095263795
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 727.8238969695898, distance: 744.0507375172745
Total norm for 4 adversaries is: 727.8238969695898. distance: 744.0507375172745
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   1,  Average loss: 0.1249, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   2,  Average loss: 0.1057, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   3,  Average loss: 0.0968, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   4,  Average loss: 0.0893, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   5,  Average loss: 0.0812, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   6,  Average loss: 0.0757, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Global model norm: 89.30751385661792.
Norm before scaling: 87.58232455363782. Distance: 8.043084475855155
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 786.0673873784614, distance: 804.3084762701435
Total norm for 4 adversaries is: 786.0673873784614. distance: 804.3084762701435
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   1,  Average loss: 0.1061, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   2,  Average loss: 0.0909, Accuracy: 63/546 (11.5385%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   3,  Average loss: 0.0861, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   4,  Average loss: 0.0803, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   5,  Average loss: 0.0768, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   6,  Average loss: 0.0714, Accuracy: 138/546 (25.2747%), train_poison_data_count: 45
Global model norm: 89.30751385661792.
Norm before scaling: 87.44936313822559. Distance: 7.011335731182152
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 679.5617153724892, distance: 701.1335464802694
Total norm for 4 adversaries is: 679.5617153724892. distance: 701.1335464802694
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 232, local model 88, internal_epoch   1,  Average loss: 0.0615, Accuracy: 155/447 (34.6756%)
___Train Local_ResNet_18,  epoch 232, local model 88, internal_epoch   2,  Average loss: 0.0472, Accuracy: 242/447 (54.1387%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 25, internal_epoch   1,  Average loss: 0.1854, Accuracy: 33/545 (6.0550%)
___Train Local_ResNet_18,  epoch 232, local model 25, internal_epoch   2,  Average loss: 0.1429, Accuracy: 183/545 (33.5780%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 27, internal_epoch   1,  Average loss: 0.1604, Accuracy: 3/397 (0.7557%)
___Train Local_ResNet_18,  epoch 232, local model 27, internal_epoch   2,  Average loss: 0.1363, Accuracy: 97/397 (24.4332%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 56, internal_epoch   1,  Average loss: 0.1360, Accuracy: 58/743 (7.8062%)
___Train Local_ResNet_18,  epoch 232, local model 56, internal_epoch   2,  Average loss: 0.1025, Accuracy: 128/743 (17.2275%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 93, internal_epoch   1,  Average loss: 0.0818, Accuracy: 41/584 (7.0205%)
___Train Local_ResNet_18,  epoch 232, local model 93, internal_epoch   2,  Average loss: 0.0603, Accuracy: 121/584 (20.7192%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 42, internal_epoch   1,  Average loss: 0.2780, Accuracy: 1/198 (0.5051%)
___Train Local_ResNet_18,  epoch 232, local model 42, internal_epoch   2,  Average loss: 0.2383, Accuracy: 2/198 (1.0101%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 269.1266350746155
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 322.80310893058777 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:233 choose agents : [17, 33, 77, 11, 18, 66, 27, 82, 86, 67]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   1,  Average loss: 0.1666, Accuracy: 68/526 (12.9278%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   2,  Average loss: 0.1229, Accuracy: 74/526 (14.0684%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   3,  Average loss: 0.0889, Accuracy: 67/526 (12.7376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   4,  Average loss: 0.0621, Accuracy: 65/526 (12.3574%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   5,  Average loss: 0.0486, Accuracy: 103/526 (19.5817%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   6,  Average loss: 0.0416, Accuracy: 150/526 (28.5171%), train_poison_data_count: 45
Global model norm: 85.72053862515972.
Norm before scaling: 83.9015914675118. Distance: 11.743070466427943
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1158.318555061603, distance: 1174.3071361445438
Total norm for 4 adversaries is: 1158.318555061603. distance: 1174.3071361445438
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   1,  Average loss: 0.1401, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   2,  Average loss: 0.1061, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   3,  Average loss: 0.0850, Accuracy: 143/527 (27.1347%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   4,  Average loss: 0.0681, Accuracy: 124/527 (23.5294%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   5,  Average loss: 0.0574, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   6,  Average loss: 0.0498, Accuracy: 140/527 (26.5655%), train_poison_data_count: 45
Global model norm: 85.72053862515972.
Norm before scaling: 83.84787016991696. Distance: 10.122763681102954
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 995.0124999214834, distance: 1012.2763950621392
Total norm for 4 adversaries is: 995.0124999214834. distance: 1012.2763950621392
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   1,  Average loss: 0.1656, Accuracy: 72/496 (14.5161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   2,  Average loss: 0.1272, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   3,  Average loss: 0.0886, Accuracy: 138/496 (27.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   4,  Average loss: 0.0773, Accuracy: 127/496 (25.6048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   5,  Average loss: 0.0662, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   6,  Average loss: 0.0517, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Global model norm: 85.72053862515972.
Norm before scaling: 83.94021368007262. Distance: 10.56249458267705
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1040.023677615082, distance: 1056.2494970413004
Total norm for 4 adversaries is: 1040.023677615082. distance: 1056.2494970413004
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   1,  Average loss: 0.1805, Accuracy: 58/546 (10.6227%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   2,  Average loss: 0.1375, Accuracy: 51/546 (9.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   3,  Average loss: 0.0954, Accuracy: 53/546 (9.7070%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   4,  Average loss: 0.0699, Accuracy: 105/546 (19.2308%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   5,  Average loss: 0.0489, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   6,  Average loss: 0.0397, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Global model norm: 85.72053862515972.
Norm before scaling: 83.81632460046939. Distance: 11.780239719613625
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1161.4334892709096, distance: 1178.0239810801816
Total norm for 4 adversaries is: 1161.4334892709096. distance: 1178.0239810801816
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 233, local model 18, internal_epoch   1,  Average loss: 0.1832, Accuracy: 49/386 (12.6943%)
___Train Local_ResNet_18,  epoch 233, local model 18, internal_epoch   2,  Average loss: 0.1182, Accuracy: 53/386 (13.7306%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 66, internal_epoch   1,  Average loss: 0.1541, Accuracy: 71/555 (12.7928%)
___Train Local_ResNet_18,  epoch 233, local model 66, internal_epoch   2,  Average loss: 0.0711, Accuracy: 176/555 (31.7117%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   1,  Average loss: 0.2173, Accuracy: 6/397 (1.5113%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   2,  Average loss: 0.1234, Accuracy: 10/397 (2.5189%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 82, internal_epoch   1,  Average loss: 0.1847, Accuracy: 15/601 (2.4958%)
___Train Local_ResNet_18,  epoch 233, local model 82, internal_epoch   2,  Average loss: 0.0765, Accuracy: 91/601 (15.1414%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 86, internal_epoch   1,  Average loss: 0.1965, Accuracy: 31/212 (14.6226%)
___Train Local_ResNet_18,  epoch 233, local model 86, internal_epoch   2,  Average loss: 0.1757, Accuracy: 32/212 (15.0943%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 67, internal_epoch   1,  Average loss: 0.1592, Accuracy: 10/842 (1.1876%)
___Train Local_ResNet_18,  epoch 233, local model 67, internal_epoch   2,  Average loss: 0.0612, Accuracy: 183/842 (21.7340%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 237.22730445861816
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 292.12973642349243 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:234 choose agents : [17, 33, 77, 11, 38, 29, 30, 96, 0, 3]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   1,  Average loss: 0.2092, Accuracy: 109/526 (20.7224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   2,  Average loss: 0.1032, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   3,  Average loss: 0.0698, Accuracy: 112/526 (21.2928%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   4,  Average loss: 0.0616, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   5,  Average loss: 0.0512, Accuracy: 119/526 (22.6236%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   6,  Average loss: 0.0410, Accuracy: 159/526 (30.2281%), train_poison_data_count: 45
Global model norm: 86.04857310608787.
Norm before scaling: 84.51724988038684. Distance: 14.418602139128618
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1428.0953224487503, distance: 1441.8602134048917
Total norm for 4 adversaries is: 1428.0953224487503. distance: 1441.8602134048917
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   1,  Average loss: 0.3158, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   2,  Average loss: 0.1189, Accuracy: 34/527 (6.4516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   3,  Average loss: 0.0536, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   4,  Average loss: 0.0416, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   5,  Average loss: 0.0379, Accuracy: 117/527 (22.2011%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 33, internal_epoch   6,  Average loss: 0.0354, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Global model norm: 86.04857310608787.
Norm before scaling: 84.73945592594397. Distance: 17.211038569267473
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1708.1048709022523, distance: 1721.1038608985805
Total norm for 4 adversaries is: 1708.1048709022523. distance: 1721.1038608985805
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   1,  Average loss: 0.2598, Accuracy: 28/496 (5.6452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   2,  Average loss: 0.1291, Accuracy: 34/496 (6.8548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   3,  Average loss: 0.0772, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   4,  Average loss: 0.0657, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   5,  Average loss: 0.0584, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 77, internal_epoch   6,  Average loss: 0.0467, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Global model norm: 86.04857310608787.
Norm before scaling: 84.59495635453098. Distance: 15.028514462455767
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1489.4885867303583, distance: 1502.851456398802
Total norm for 4 adversaries is: 1489.4885867303583. distance: 1502.851456398802
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   1,  Average loss: 0.1874, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   2,  Average loss: 0.1090, Accuracy: 77/546 (14.1026%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   3,  Average loss: 0.0712, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   4,  Average loss: 0.0561, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   5,  Average loss: 0.0493, Accuracy: 111/546 (20.3297%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 11, internal_epoch   6,  Average loss: 0.0426, Accuracy: 117/546 (21.4286%), train_poison_data_count: 45
Global model norm: 86.04857310608787.
Norm before scaling: 84.4763164850066. Distance: 12.908803470161361
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1276.8327024320768, distance: 1290.8803681983857
Total norm for 4 adversaries is: 1276.8327024320768. distance: 1290.8803681983857
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 234, local model 38, internal_epoch   1,  Average loss: 0.0958, Accuracy: 217/756 (28.7037%)
___Train Local_ResNet_18,  epoch 234, local model 38, internal_epoch   2,  Average loss: 0.0450, Accuracy: 246/756 (32.5397%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 29, internal_epoch   1,  Average loss: 0.1316, Accuracy: 226/848 (26.6509%)
___Train Local_ResNet_18,  epoch 234, local model 29, internal_epoch   2,  Average loss: 0.0355, Accuracy: 441/848 (52.0047%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 30, internal_epoch   1,  Average loss: 0.2707, Accuracy: 57/337 (16.9139%)
___Train Local_ResNet_18,  epoch 234, local model 30, internal_epoch   2,  Average loss: 0.0889, Accuracy: 98/337 (29.0801%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 96, internal_epoch   1,  Average loss: 0.2249, Accuracy: 84/708 (11.8644%)
___Train Local_ResNet_18,  epoch 234, local model 96, internal_epoch   2,  Average loss: 0.0623, Accuracy: 108/708 (15.2542%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 0, internal_epoch   1,  Average loss: 0.3327, Accuracy: 16/367 (4.3597%)
___Train Local_ResNet_18,  epoch 234, local model 0, internal_epoch   2,  Average loss: 0.1013, Accuracy: 71/367 (19.3460%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 234, local model 3, internal_epoch   1,  Average loss: 0.1012, Accuracy: 251/780 (32.1795%)
___Train Local_ResNet_18,  epoch 234, local model 3, internal_epoch   2,  Average loss: 0.0410, Accuracy: 361/780 (46.2821%)
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 249.64784789085388
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 320.14187932014465 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:235 choose agents : [17, 33, 77, 11, 8, 68, 79, 90, 21, 25]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   1,  Average loss: 0.2952, Accuracy: 37/526 (7.0342%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   2,  Average loss: 0.0564, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   3,  Average loss: 0.0538, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   4,  Average loss: 0.0495, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   5,  Average loss: 0.0473, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 17, internal_epoch   6,  Average loss: 0.0436, Accuracy: 162/526 (30.7985%), train_poison_data_count: 45
Global model norm: 94.63852384368904.
Norm before scaling: 95.32685342743146. Distance: 26.23992319607543
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2615.0552575423717, distance: 2623.992282763042
Total norm for 4 adversaries is: 2615.0552575423717. distance: 2623.992282763042
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   1,  Average loss: 0.2736, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   2,  Average loss: 0.0849, Accuracy: 61/527 (11.5750%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   3,  Average loss: 0.0747, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   4,  Average loss: 0.0495, Accuracy: 87/527 (16.5085%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   5,  Average loss: 0.0359, Accuracy: 125/527 (23.7192%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 33, internal_epoch   6,  Average loss: 0.0339, Accuracy: 148/527 (28.0835%), train_poison_data_count: 45
Global model norm: 94.63852384368904.
Norm before scaling: 96.14017679279563. Distance: 29.573727304479014
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2948.93184051446, distance: 2957.3726515270273
Total norm for 4 adversaries is: 2948.93184051446. distance: 2957.3726515270273
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   1,  Average loss: 0.2615, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   2,  Average loss: 0.0635, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   3,  Average loss: 0.0589, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   4,  Average loss: 0.0544, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   5,  Average loss: 0.0504, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 77, internal_epoch   6,  Average loss: 0.0460, Accuracy: 143/496 (28.8306%), train_poison_data_count: 40
Global model norm: 94.63852384368904.
Norm before scaling: 94.95040337756602. Distance: 23.552181666046753
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2346.583047752625, distance: 2355.218142763001
Total norm for 4 adversaries is: 2346.583047752625. distance: 2355.218142763001
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   1,  Average loss: 0.2868, Accuracy: 46/546 (8.4249%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   2,  Average loss: 0.0592, Accuracy: 62/546 (11.3553%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   3,  Average loss: 0.0516, Accuracy: 138/546 (25.2747%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   4,  Average loss: 0.0483, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   5,  Average loss: 0.0457, Accuracy: 94/546 (17.2161%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 235, local model 11, internal_epoch   6,  Average loss: 0.0413, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Global model norm: 94.63852384368904.
Norm before scaling: 95.54340370840626. Distance: 26.871640869284715
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2678.5832075931485, distance: 2687.16402551091
Total norm for 4 adversaries is: 2678.5832075931485. distance: 2687.16402551091
___Test Local_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 235, local model 8, internal_epoch   1,  Average loss: 0.2091, Accuracy: 59/534 (11.0487%)
___Train Local_ResNet_18,  epoch 235, local model 8, internal_epoch   2,  Average loss: 0.0516, Accuracy: 96/534 (17.9775%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 68, internal_epoch   1,  Average loss: 0.2854, Accuracy: 72/416 (17.3077%)
___Train Local_ResNet_18,  epoch 235, local model 68, internal_epoch   2,  Average loss: 0.0655, Accuracy: 58/416 (13.9423%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 79, internal_epoch   1,  Average loss: 0.6082, Accuracy: 17/154 (11.0390%)
___Train Local_ResNet_18,  epoch 235, local model 79, internal_epoch   2,  Average loss: 0.0822, Accuracy: 44/154 (28.5714%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 90, internal_epoch   1,  Average loss: 0.1691, Accuracy: 235/578 (40.6574%)
___Train Local_ResNet_18,  epoch 235, local model 90, internal_epoch   2,  Average loss: 0.0292, Accuracy: 321/578 (55.5363%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 21, internal_epoch   1,  Average loss: 0.3690, Accuracy: 16/262 (6.1069%)
___Train Local_ResNet_18,  epoch 235, local model 21, internal_epoch   2,  Average loss: 0.1103, Accuracy: 82/262 (31.2977%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 235, local model 25, internal_epoch   1,  Average loss: 0.2083, Accuracy: 20/545 (3.6697%)
___Train Local_ResNet_18,  epoch 235, local model 25, internal_epoch   2,  Average loss: 0.0343, Accuracy: 139/545 (25.5046%)
___Test Local_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 230.66599464416504
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 235: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 235: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 290.76823568344116 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:236 choose agents : [17, 33, 77, 11, 53, 14, 6, 12, 7, 58]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   1,  Average loss: 0.3076, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   2,  Average loss: 0.0555, Accuracy: 36/526 (6.8441%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   3,  Average loss: 0.0437, Accuracy: 124/526 (23.5741%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   4,  Average loss: 0.0434, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   5,  Average loss: 0.0414, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 17, internal_epoch   6,  Average loss: 0.0398, Accuracy: 132/526 (25.0951%), train_poison_data_count: 45
Global model norm: 131.77568090556392.
Norm before scaling: 131.33050358494404. Distance: 25.873072750539073
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2575.4356912957464, distance: 2587.307287509545
Total norm for 4 adversaries is: 2575.4356912957464. distance: 2587.307287509545
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   1,  Average loss: 0.2596, Accuracy: 123/527 (23.3397%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   2,  Average loss: 0.0679, Accuracy: 22/527 (4.1746%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   3,  Average loss: 0.0617, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   4,  Average loss: 0.0487, Accuracy: 100/527 (18.9753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   5,  Average loss: 0.0383, Accuracy: 115/527 (21.8216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 33, internal_epoch   6,  Average loss: 0.0350, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Global model norm: 131.77568090556392.
Norm before scaling: 130.81732999922068. Distance: 22.022672587816317
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2189.44764723891, distance: 2202.2673543418837
Total norm for 4 adversaries is: 2189.44764723891. distance: 2202.2673543418837
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   1,  Average loss: 0.3067, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   2,  Average loss: 0.0682, Accuracy: 36/496 (7.2581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   3,  Average loss: 0.0554, Accuracy: 57/496 (11.4919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   4,  Average loss: 0.0471, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   5,  Average loss: 0.0404, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 77, internal_epoch   6,  Average loss: 0.0370, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Global model norm: 131.77568090556392.
Norm before scaling: 131.07401892633033. Distance: 23.166958082090616
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2304.8493443173243, distance: 2316.6958151643476
Total norm for 4 adversaries is: 2304.8493443173243. distance: 2316.6958151643476
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   1,  Average loss: 0.2897, Accuracy: 49/546 (8.9744%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   2,  Average loss: 0.0531, Accuracy: 102/546 (18.6813%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   3,  Average loss: 0.0481, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   4,  Average loss: 0.0422, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   5,  Average loss: 0.0398, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 236, local model 11, internal_epoch   6,  Average loss: 0.0366, Accuracy: 130/546 (23.8095%), train_poison_data_count: 45
Global model norm: 131.77568090556392.
Norm before scaling: 131.09484132442054. Distance: 24.53906125636737
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2441.4965697293123, distance: 2453.905866165204
Total norm for 4 adversaries is: 2441.4965697293123. distance: 2453.905866165204
___Test Local_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 236, local model 53, internal_epoch   1,  Average loss: 0.1699, Accuracy: 113/625 (18.0800%)
___Train Local_ResNet_18,  epoch 236, local model 53, internal_epoch   2,  Average loss: 0.0296, Accuracy: 213/625 (34.0800%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 14, internal_epoch   1,  Average loss: 0.2921, Accuracy: 94/318 (29.5597%)
___Train Local_ResNet_18,  epoch 236, local model 14, internal_epoch   2,  Average loss: 0.0331, Accuracy: 162/318 (50.9434%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 6, internal_epoch   1,  Average loss: 0.2279, Accuracy: 97/520 (18.6538%)
___Train Local_ResNet_18,  epoch 236, local model 6, internal_epoch   2,  Average loss: 0.0438, Accuracy: 114/520 (21.9231%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 12, internal_epoch   1,  Average loss: 0.1368, Accuracy: 158/977 (16.1720%)
___Train Local_ResNet_18,  epoch 236, local model 12, internal_epoch   2,  Average loss: 0.0358, Accuracy: 359/977 (36.7451%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 7, internal_epoch   1,  Average loss: 0.3458, Accuracy: 43/352 (12.2159%)
___Train Local_ResNet_18,  epoch 236, local model 7, internal_epoch   2,  Average loss: 0.0663, Accuracy: 44/352 (12.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 236, local model 58, internal_epoch   1,  Average loss: 0.4177, Accuracy: 12/234 (5.1282%)
___Train Local_ResNet_18,  epoch 236, local model 58, internal_epoch   2,  Average loss: 0.0542, Accuracy: 45/234 (19.2308%)
___Test Local_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 232.07879400253296
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 236: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 236: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 292.01572608947754 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:237 choose agents : [17, 33, 77, 11, 65, 0, 98, 20, 45, 82]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   1,  Average loss: 0.0652, Accuracy: 26/526 (4.9430%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   2,  Average loss: 0.0567, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   3,  Average loss: 0.0505, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   4,  Average loss: 0.0460, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   5,  Average loss: 0.0439, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 17, internal_epoch   6,  Average loss: 0.0405, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Global model norm: 151.66106331224242.
Norm before scaling: 149.7801709485438. Distance: 6.233072780664646
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 592.3935294633121, distance: 623.3072576988014
Total norm for 4 adversaries is: 592.3935294633121. distance: 623.3072576988014
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   1,  Average loss: 0.0762, Accuracy: 57/527 (10.8159%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   2,  Average loss: 0.0595, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   3,  Average loss: 0.0488, Accuracy: 108/527 (20.4934%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   4,  Average loss: 0.0430, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   5,  Average loss: 0.0417, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 33, internal_epoch   6,  Average loss: 0.0389, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 151.66106331224242.
Norm before scaling: 149.80969047219543. Distance: 7.0978422082821675
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 682.6005191545052, distance: 709.784210165315
Total norm for 4 adversaries is: 682.6005191545052. distance: 709.784210165315
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   1,  Average loss: 0.0751, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   2,  Average loss: 0.0604, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   3,  Average loss: 0.0534, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   4,  Average loss: 0.0478, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   5,  Average loss: 0.0444, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 77, internal_epoch   6,  Average loss: 0.0411, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Global model norm: 151.66106331224242.
Norm before scaling: 150.01557861810554. Distance: 7.002266108329179
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 677.3294988408522, distance: 700.2266151039962
Total norm for 4 adversaries is: 677.3294988408522. distance: 700.2266151039962
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   1,  Average loss: 0.0825, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   2,  Average loss: 0.0648, Accuracy: 65/546 (11.9048%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   3,  Average loss: 0.0540, Accuracy: 73/546 (13.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   4,  Average loss: 0.0469, Accuracy: 112/546 (20.5128%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   5,  Average loss: 0.0433, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 237, local model 11, internal_epoch   6,  Average loss: 0.0407, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Global model norm: 151.66106331224242.
Norm before scaling: 149.76999292665403. Distance: 7.787959748683806
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 752.6328786334012, distance: 778.7959456751171
Total norm for 4 adversaries is: 752.6328786334012. distance: 778.7959456751171
___Test Local_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 237, local model 65, internal_epoch   1,  Average loss: 0.0901, Accuracy: 0/314 (0.0000%)
___Train Local_ResNet_18,  epoch 237, local model 65, internal_epoch   2,  Average loss: 0.0693, Accuracy: 6/314 (1.9108%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 0, internal_epoch   1,  Average loss: 0.0833, Accuracy: 51/367 (13.8965%)
___Train Local_ResNet_18,  epoch 237, local model 0, internal_epoch   2,  Average loss: 0.0623, Accuracy: 51/367 (13.8965%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 98, internal_epoch   1,  Average loss: 0.0429, Accuracy: 208/802 (25.9352%)
___Train Local_ResNet_18,  epoch 237, local model 98, internal_epoch   2,  Average loss: 0.0357, Accuracy: 251/802 (31.2968%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 20, internal_epoch   1,  Average loss: 0.0661, Accuracy: 31/362 (8.5635%)
___Train Local_ResNet_18,  epoch 237, local model 20, internal_epoch   2,  Average loss: 0.0457, Accuracy: 109/362 (30.1105%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 45, internal_epoch   1,  Average loss: 0.0664, Accuracy: 160/529 (30.2457%)
___Train Local_ResNet_18,  epoch 237, local model 45, internal_epoch   2,  Average loss: 0.0457, Accuracy: 160/529 (30.2457%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 237, local model 82, internal_epoch   1,  Average loss: 0.0589, Accuracy: 101/601 (16.8053%)
___Train Local_ResNet_18,  epoch 237, local model 82, internal_epoch   2,  Average loss: 0.0430, Accuracy: 218/601 (36.2729%)
___Test Local_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 266.87537002563477
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 237: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 237: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 336.29753828048706 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:238 choose agents : [17, 33, 77, 11, 88, 46, 85, 42, 29, 8]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   1,  Average loss: 0.1332, Accuracy: 29/526 (5.5133%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   2,  Average loss: 0.1130, Accuracy: 37/526 (7.0342%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   3,  Average loss: 0.0856, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   4,  Average loss: 0.0612, Accuracy: 73/526 (13.8783%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   5,  Average loss: 0.0427, Accuracy: 130/526 (24.7148%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 17, internal_epoch   6,  Average loss: 0.0387, Accuracy: 107/526 (20.3422%), train_poison_data_count: 45
Global model norm: 145.9688336276789.
Norm before scaling: 143.95453519471. Distance: 9.540284124657882
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 929.5034628768201, distance: 954.028432490353
Total norm for 4 adversaries is: 929.5034628768201. distance: 954.028432490353
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   1,  Average loss: 0.0929, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   2,  Average loss: 0.0759, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   3,  Average loss: 0.0669, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   4,  Average loss: 0.0629, Accuracy: 146/527 (27.7040%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   5,  Average loss: 0.0570, Accuracy: 152/527 (28.8425%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 33, internal_epoch   6,  Average loss: 0.0486, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Global model norm: 145.9688336276789.
Norm before scaling: 143.98467936077435. Distance: 6.957899738744017
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 665.6263028156264, distance: 695.7899961554492
Total norm for 4 adversaries is: 665.6263028156264. distance: 695.7899961554492
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   1,  Average loss: 0.1119, Accuracy: 51/496 (10.2823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   2,  Average loss: 0.0962, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   3,  Average loss: 0.0818, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   4,  Average loss: 0.0705, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   5,  Average loss: 0.0584, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 77, internal_epoch   6,  Average loss: 0.0414, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Global model norm: 145.9688336276789.
Norm before scaling: 144.17314758433693. Distance: 8.390965516978895
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 816.2409264426772, distance: 839.0965007077554
Total norm for 4 adversaries is: 816.2409264426772. distance: 839.0965007077554
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   1,  Average loss: 0.0933, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   2,  Average loss: 0.0786, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   3,  Average loss: 0.0731, Accuracy: 137/546 (25.0916%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   4,  Average loss: 0.0625, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   5,  Average loss: 0.0568, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 238, local model 11, internal_epoch   6,  Average loss: 0.0489, Accuracy: 135/546 (24.7253%), train_poison_data_count: 45
Global model norm: 145.9688336276789.
Norm before scaling: 143.9563871672598. Distance: 7.214318967362186
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 691.5349774234128, distance: 721.4319311272548
Total norm for 4 adversaries is: 691.5349774234128. distance: 721.4319311272548
___Test Local_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 238, local model 88, internal_epoch   1,  Average loss: 0.0318, Accuracy: 252/447 (56.3758%)
___Train Local_ResNet_18,  epoch 238, local model 88, internal_epoch   2,  Average loss: 0.0287, Accuracy: 252/447 (56.3758%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 46, internal_epoch   1,  Average loss: 0.1153, Accuracy: 72/601 (11.9800%)
___Train Local_ResNet_18,  epoch 238, local model 46, internal_epoch   2,  Average loss: 0.0849, Accuracy: 139/601 (23.1281%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 85, internal_epoch   1,  Average loss: 0.0771, Accuracy: 122/364 (33.5165%)
___Train Local_ResNet_18,  epoch 238, local model 85, internal_epoch   2,  Average loss: 0.0695, Accuracy: 122/364 (33.5165%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 42, internal_epoch   1,  Average loss: 0.1206, Accuracy: 16/198 (8.0808%)
___Train Local_ResNet_18,  epoch 238, local model 42, internal_epoch   2,  Average loss: 0.0971, Accuracy: 35/198 (17.6768%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 29, internal_epoch   1,  Average loss: 0.1007, Accuracy: 50/848 (5.8962%)
___Train Local_ResNet_18,  epoch 238, local model 29, internal_epoch   2,  Average loss: 0.0443, Accuracy: 368/848 (43.3962%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 238, local model 8, internal_epoch   1,  Average loss: 0.0764, Accuracy: 130/534 (24.3446%)
___Train Local_ResNet_18,  epoch 238, local model 8, internal_epoch   2,  Average loss: 0.0564, Accuracy: 152/534 (28.4644%)
___Test Local_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 237.94196772575378
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 238: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 238: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 299.64824891090393 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:239 choose agents : [17, 33, 77, 11, 63, 48, 69, 96, 88, 20]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   1,  Average loss: 0.2531, Accuracy: 116/526 (22.0532%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   2,  Average loss: 0.0585, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   3,  Average loss: 0.0517, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   4,  Average loss: 0.0496, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   5,  Average loss: 0.0481, Accuracy: 125/526 (23.7643%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 17, internal_epoch   6,  Average loss: 0.0464, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Global model norm: 140.25434485248576.
Norm before scaling: 138.58847580156151. Distance: 17.795025522589434
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1763.0038286969204, distance: 1779.5024585540757
Total norm for 4 adversaries is: 1763.0038286969204. distance: 1779.5024585540757
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   1,  Average loss: 0.3462, Accuracy: 66/527 (12.5237%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   2,  Average loss: 0.0903, Accuracy: 73/527 (13.8520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   3,  Average loss: 0.0716, Accuracy: 128/527 (24.2884%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   4,  Average loss: 0.0677, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   5,  Average loss: 0.0631, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 33, internal_epoch   6,  Average loss: 0.0579, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Global model norm: 140.25434485248576.
Norm before scaling: 138.72828518141137. Distance: 22.517966324094342
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2235.392471133425, distance: 2251.7966160379583
Total norm for 4 adversaries is: 2235.392471133425. distance: 2251.7966160379583
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   1,  Average loss: 0.3171, Accuracy: 43/496 (8.6694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   2,  Average loss: 0.0809, Accuracy: 18/496 (3.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   3,  Average loss: 0.0625, Accuracy: 42/496 (8.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   4,  Average loss: 0.0582, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   5,  Average loss: 0.0540, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 77, internal_epoch   6,  Average loss: 0.0513, Accuracy: 109/496 (21.9758%), train_poison_data_count: 40
Global model norm: 140.25434485248576.
Norm before scaling: 138.72661683595547. Distance: 19.273571296910944
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1911.7032327220666, distance: 1927.3571931533604
Total norm for 4 adversaries is: 1911.7032327220666. distance: 1927.3571931533604
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   1,  Average loss: 0.3380, Accuracy: 65/546 (11.9048%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   2,  Average loss: 0.0957, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   3,  Average loss: 0.0779, Accuracy: 50/546 (9.1575%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   4,  Average loss: 0.0698, Accuracy: 70/546 (12.8205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   5,  Average loss: 0.0624, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 239, local model 11, internal_epoch   6,  Average loss: 0.0569, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Global model norm: 140.25434485248576.
Norm before scaling: 138.63605259139845. Distance: 22.366039335925613
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2219.6649521943623, distance: 2236.6041223247353
Total norm for 4 adversaries is: 2219.6649521943623. distance: 2236.6041223247353
___Test Local_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 239, local model 63, internal_epoch   1,  Average loss: 0.1627, Accuracy: 87/752 (11.5691%)
___Train Local_ResNet_18,  epoch 239, local model 63, internal_epoch   2,  Average loss: 0.0472, Accuracy: 120/752 (15.9574%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 48, internal_epoch   1,  Average loss: 0.3429, Accuracy: 12/378 (3.1746%)
___Train Local_ResNet_18,  epoch 239, local model 48, internal_epoch   2,  Average loss: 0.0790, Accuracy: 9/378 (2.3810%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 69, internal_epoch   1,  Average loss: 0.4318, Accuracy: 23/216 (10.6481%)
___Train Local_ResNet_18,  epoch 239, local model 69, internal_epoch   2,  Average loss: 0.0890, Accuracy: 33/216 (15.2778%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 96, internal_epoch   1,  Average loss: 0.2126, Accuracy: 35/708 (4.9435%)
___Train Local_ResNet_18,  epoch 239, local model 96, internal_epoch   2,  Average loss: 0.0536, Accuracy: 164/708 (23.1638%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 88, internal_epoch   1,  Average loss: 0.4023, Accuracy: 3/447 (0.6711%)
___Train Local_ResNet_18,  epoch 239, local model 88, internal_epoch   2,  Average loss: 0.1187, Accuracy: 8/447 (1.7897%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 239, local model 20, internal_epoch   1,  Average loss: 0.3057, Accuracy: 19/362 (5.2486%)
___Train Local_ResNet_18,  epoch 239, local model 20, internal_epoch   2,  Average loss: 0.0478, Accuracy: 33/362 (9.1160%)
___Test Local_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 226.12961506843567
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 239: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 239: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 293.70092964172363 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:240 choose agents : [17, 33, 77, 11, 71, 51, 95, 80, 24, 55]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   1,  Average loss: 0.1666, Accuracy: 19/526 (3.6122%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   2,  Average loss: 0.1254, Accuracy: 57/526 (10.8365%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   3,  Average loss: 0.1025, Accuracy: 78/526 (14.8289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   4,  Average loss: 0.0776, Accuracy: 76/526 (14.4487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   5,  Average loss: 0.0649, Accuracy: 72/526 (13.6882%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 17, internal_epoch   6,  Average loss: 0.0567, Accuracy: 94/526 (17.8707%), train_poison_data_count: 45
Global model norm: 149.66373115045275.
Norm before scaling: 147.41560747805843. Distance: 12.730445377203154
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1249.0189149888804, distance: 1273.0445789523633
Total norm for 4 adversaries is: 1249.0189149888804. distance: 1273.0445789523633
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   1,  Average loss: 0.1182, Accuracy: 92/527 (17.4573%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   2,  Average loss: 0.0848, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   3,  Average loss: 0.0644, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   4,  Average loss: 0.0554, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   5,  Average loss: 0.0546, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 33, internal_epoch   6,  Average loss: 0.0489, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Global model norm: 149.66373115045275.
Norm before scaling: 147.52649391295787. Distance: 9.303075745298106
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 903.1612535976064, distance: 930.3075432350315
Total norm for 4 adversaries is: 903.1612535976064. distance: 930.3075432350315
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   1,  Average loss: 0.1007, Accuracy: 38/496 (7.6613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   2,  Average loss: 0.0784, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   3,  Average loss: 0.0621, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   4,  Average loss: 0.0515, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   5,  Average loss: 0.0467, Accuracy: 113/496 (22.7823%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 77, internal_epoch   6,  Average loss: 0.0450, Accuracy: 127/496 (25.6048%), train_poison_data_count: 40
Global model norm: 149.66373115045275.
Norm before scaling: 147.8540375040533. Distance: 9.190389788541726
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 897.0752128444972, distance: 919.0390021647612
Total norm for 4 adversaries is: 897.0752128444972. distance: 919.0390021647612
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   1,  Average loss: 0.1182, Accuracy: 119/546 (21.7949%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   2,  Average loss: 0.0787, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   3,  Average loss: 0.0678, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   4,  Average loss: 0.0597, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   5,  Average loss: 0.0569, Accuracy: 119/546 (21.7949%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 240, local model 11, internal_epoch   6,  Average loss: 0.0546, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Global model norm: 149.66373115045275.
Norm before scaling: 147.6038630613203. Distance: 9.956580312341847
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 970.8696166324291, distance: 995.6580738386045
Total norm for 4 adversaries is: 970.8696166324291. distance: 995.6580738386045
___Test Local_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 240, local model 71, internal_epoch   1,  Average loss: 0.1067, Accuracy: 107/1166 (9.1767%)
___Train Local_ResNet_18,  epoch 240, local model 71, internal_epoch   2,  Average loss: 0.0567, Accuracy: 452/1166 (38.7650%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 51, internal_epoch   1,  Average loss: 0.1000, Accuracy: 23/479 (4.8017%)
___Train Local_ResNet_18,  epoch 240, local model 51, internal_epoch   2,  Average loss: 0.0397, Accuracy: 267/479 (55.7411%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 95, internal_epoch   1,  Average loss: 0.0892, Accuracy: 74/569 (13.0053%)
___Train Local_ResNet_18,  epoch 240, local model 95, internal_epoch   2,  Average loss: 0.0535, Accuracy: 216/569 (37.9613%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 80, internal_epoch   1,  Average loss: 0.1864, Accuracy: 4/363 (1.1019%)
___Train Local_ResNet_18,  epoch 240, local model 80, internal_epoch   2,  Average loss: 0.1412, Accuracy: 16/363 (4.4077%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 24, internal_epoch   1,  Average loss: 0.1129, Accuracy: 35/320 (10.9375%)
___Train Local_ResNet_18,  epoch 240, local model 24, internal_epoch   2,  Average loss: 0.0805, Accuracy: 36/320 (11.2500%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 240, local model 55, internal_epoch   1,  Average loss: 0.1346, Accuracy: 4/299 (1.3378%)
___Train Local_ResNet_18,  epoch 240, local model 55, internal_epoch   2,  Average loss: 0.0807, Accuracy: 33/299 (11.0368%)
___Test Local_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 230.63341116905212
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 240: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 240: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 294.4391224384308 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:241 choose agents : [17, 33, 77, 11, 13, 63, 61, 41, 90, 74]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   1,  Average loss: 0.0548, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   2,  Average loss: 0.0529, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   3,  Average loss: 0.0490, Accuracy: 153/526 (29.0875%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   4,  Average loss: 0.0464, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   5,  Average loss: 0.0426, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 17, internal_epoch   6,  Average loss: 0.0371, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Global model norm: 144.58664141268378.
Norm before scaling: 142.83294437908924. Distance: 4.924729455013557
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 458.917220885205, distance: 492.4729529375192
Total norm for 4 adversaries is: 458.917220885205. distance: 492.4729529375192
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   1,  Average loss: 0.0944, Accuracy: 2/527 (0.3795%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   2,  Average loss: 0.0837, Accuracy: 35/527 (6.6414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   3,  Average loss: 0.0700, Accuracy: 64/527 (12.1442%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   4,  Average loss: 0.0552, Accuracy: 67/527 (12.7135%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   5,  Average loss: 0.0409, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 33, internal_epoch   6,  Average loss: 0.0351, Accuracy: 118/527 (22.3909%), train_poison_data_count: 45
Global model norm: 144.58664141268378.
Norm before scaling: 142.7449238370668. Distance: 8.065156720714576
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 782.272331097042, distance: 806.5156926557598
Total norm for 4 adversaries is: 782.272331097042. distance: 806.5156926557598
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   1,  Average loss: 0.0634, Accuracy: 37/496 (7.4597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   2,  Average loss: 0.0599, Accuracy: 72/496 (14.5161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   3,  Average loss: 0.0545, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   4,  Average loss: 0.0507, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   5,  Average loss: 0.0460, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 77, internal_epoch   6,  Average loss: 0.0388, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Global model norm: 144.58664141268378.
Norm before scaling: 143.01754973166754. Distance: 5.750936680670213
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 550.6389470424336, distance: 575.0936608501262
Total norm for 4 adversaries is: 550.6389470424336. distance: 575.0936608501262
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   1,  Average loss: 0.0826, Accuracy: 46/546 (8.4249%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   2,  Average loss: 0.0752, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   3,  Average loss: 0.0671, Accuracy: 65/546 (11.9048%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   4,  Average loss: 0.0581, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   5,  Average loss: 0.0457, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 241, local model 11, internal_epoch   6,  Average loss: 0.0363, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Global model norm: 144.58664141268378.
Norm before scaling: 142.73475044422435. Distance: 7.772953865686822
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 752.2253651665835, distance: 777.2953910837243
Total norm for 4 adversaries is: 752.2253651665835. distance: 777.2953910837243
___Test Local_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 241, local model 13, internal_epoch   1,  Average loss: 0.0448, Accuracy: 332/620 (53.5484%)
___Train Local_ResNet_18,  epoch 241, local model 13, internal_epoch   2,  Average loss: 0.0382, Accuracy: 332/620 (53.5484%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 63, internal_epoch   1,  Average loss: 0.0450, Accuracy: 106/752 (14.0957%)
___Train Local_ResNet_18,  epoch 241, local model 63, internal_epoch   2,  Average loss: 0.0407, Accuracy: 159/752 (21.1436%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 61, internal_epoch   1,  Average loss: 0.0856, Accuracy: 7/590 (1.1864%)
___Train Local_ResNet_18,  epoch 241, local model 61, internal_epoch   2,  Average loss: 0.0621, Accuracy: 234/590 (39.6610%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 41, internal_epoch   1,  Average loss: 0.1030, Accuracy: 6/513 (1.1696%)
___Train Local_ResNet_18,  epoch 241, local model 41, internal_epoch   2,  Average loss: 0.0564, Accuracy: 127/513 (24.7563%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 90, internal_epoch   1,  Average loss: 0.0413, Accuracy: 177/578 (30.6228%)
___Train Local_ResNet_18,  epoch 241, local model 90, internal_epoch   2,  Average loss: 0.0324, Accuracy: 322/578 (55.7093%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 241, local model 74, internal_epoch   1,  Average loss: 0.0591, Accuracy: 47/469 (10.0213%)
___Train Local_ResNet_18,  epoch 241, local model 74, internal_epoch   2,  Average loss: 0.0514, Accuracy: 156/469 (33.2623%)
___Test Local_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 241.66484141349792
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 241: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 241: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 306.1761770248413 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:242 choose agents : [17, 33, 77, 11, 85, 14, 21, 78, 1, 2]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   1,  Average loss: 0.3194, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   2,  Average loss: 0.1159, Accuracy: 63/526 (11.9772%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   3,  Average loss: 0.0793, Accuracy: 122/526 (23.1939%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   4,  Average loss: 0.0628, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   5,  Average loss: 0.0522, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 17, internal_epoch   6,  Average loss: 0.0436, Accuracy: 120/526 (22.8137%), train_poison_data_count: 45
Global model norm: 138.98669282075173.
Norm before scaling: 137.19607034733176. Distance: 19.923697833272882
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1974.7671381709795, distance: 1992.36982008863
Total norm for 4 adversaries is: 1974.7671381709795. distance: 1992.36982008863
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   1,  Average loss: 0.2159, Accuracy: 124/527 (23.5294%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   2,  Average loss: 0.0762, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   3,  Average loss: 0.0614, Accuracy: 148/527 (28.0835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   4,  Average loss: 0.0539, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   5,  Average loss: 0.0480, Accuracy: 152/527 (28.8425%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 33, internal_epoch   6,  Average loss: 0.0455, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Global model norm: 138.98669282075173.
Norm before scaling: 137.07091429940562. Distance: 14.726343354636033
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1453.7525580373024, distance: 1472.6343741743908
Total norm for 4 adversaries is: 1453.7525580373024. distance: 1472.6343741743908
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   1,  Average loss: 0.3064, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   2,  Average loss: 0.1078, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   3,  Average loss: 0.0834, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   4,  Average loss: 0.0713, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   5,  Average loss: 0.0589, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 77, internal_epoch   6,  Average loss: 0.0518, Accuracy: 108/496 (21.7742%), train_poison_data_count: 40
Global model norm: 138.98669282075173.
Norm before scaling: 137.26428659706065. Distance: 18.193623459066984
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1802.4189995669708, distance: 1819.362388310806
Total norm for 4 adversaries is: 1802.4189995669708. distance: 1819.362388310806
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   1,  Average loss: 0.2467, Accuracy: 83/546 (15.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   2,  Average loss: 0.0899, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   3,  Average loss: 0.0694, Accuracy: 95/546 (17.3993%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   4,  Average loss: 0.0585, Accuracy: 109/546 (19.9634%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   5,  Average loss: 0.0507, Accuracy: 135/546 (24.7253%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 242, local model 11, internal_epoch   6,  Average loss: 0.0465, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Global model norm: 138.98669282075173.
Norm before scaling: 137.07587286563233. Distance: 16.79276657603933
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1660.824268247547, distance: 1679.2766299808975
Total norm for 4 adversaries is: 1660.824268247547. distance: 1679.2766299808975
___Test Local_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 242, local model 85, internal_epoch   1,  Average loss: 0.1902, Accuracy: 86/364 (23.6264%)
___Train Local_ResNet_18,  epoch 242, local model 85, internal_epoch   2,  Average loss: 0.0707, Accuracy: 94/364 (25.8242%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 14, internal_epoch   1,  Average loss: 0.2101, Accuracy: 130/318 (40.8805%)
___Train Local_ResNet_18,  epoch 242, local model 14, internal_epoch   2,  Average loss: 0.0717, Accuracy: 115/318 (36.1635%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 21, internal_epoch   1,  Average loss: 0.4043, Accuracy: 12/262 (4.5802%)
___Train Local_ResNet_18,  epoch 242, local model 21, internal_epoch   2,  Average loss: 0.1210, Accuracy: 4/262 (1.5267%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 78, internal_epoch   1,  Average loss: 0.4021, Accuracy: 39/255 (15.2941%)
___Train Local_ResNet_18,  epoch 242, local model 78, internal_epoch   2,  Average loss: 0.1335, Accuracy: 56/255 (21.9608%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 1, internal_epoch   1,  Average loss: 0.2216, Accuracy: 62/641 (9.6724%)
___Train Local_ResNet_18,  epoch 242, local model 1, internal_epoch   2,  Average loss: 0.0834, Accuracy: 63/641 (9.8284%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 242, local model 2, internal_epoch   1,  Average loss: 0.1448, Accuracy: 186/461 (40.3471%)
___Train Local_ResNet_18,  epoch 242, local model 2, internal_epoch   2,  Average loss: 0.0534, Accuracy: 102/461 (22.1258%)
___Test Local_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 237.57007431983948
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 242: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 242: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 299.4303300380707 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:243 choose agents : [17, 33, 77, 11, 9, 5, 16, 36, 94, 57]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   1,  Average loss: 0.0863, Accuracy: 18/526 (3.4221%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   2,  Average loss: 0.0778, Accuracy: 120/526 (22.8137%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   3,  Average loss: 0.0748, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   4,  Average loss: 0.0694, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   5,  Average loss: 0.0658, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 17, internal_epoch   6,  Average loss: 0.0622, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Global model norm: 143.58972042768244.
Norm before scaling: 141.58679427298296. Distance: 6.098124494053127
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 575.8922967882103, distance: 609.8124711745406
Total norm for 4 adversaries is: 575.8922967882103. distance: 609.8124711745406
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   1,  Average loss: 0.1491, Accuracy: 55/527 (10.4364%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   2,  Average loss: 0.1384, Accuracy: 63/527 (11.9545%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   3,  Average loss: 0.1214, Accuracy: 68/527 (12.9032%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   4,  Average loss: 0.1074, Accuracy: 69/527 (13.0930%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   5,  Average loss: 0.0899, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 33, internal_epoch   6,  Average loss: 0.0763, Accuracy: 67/527 (12.7135%), train_poison_data_count: 45
Global model norm: 143.58972042768244.
Norm before scaling: 141.2689354011525. Distance: 10.84360189639044
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1057.63279308085, distance: 1084.3601800140025
Total norm for 4 adversaries is: 1057.63279308085. distance: 1084.3601800140025
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   1,  Average loss: 0.1026, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   2,  Average loss: 0.0976, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   3,  Average loss: 0.0916, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   4,  Average loss: 0.0837, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   5,  Average loss: 0.0784, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 77, internal_epoch   6,  Average loss: 0.0711, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Global model norm: 143.58972042768244.
Norm before scaling: 141.71284786496955. Distance: 7.011455426810359
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 673.6166148114222, distance: 701.1455358910873
Total norm for 4 adversaries is: 673.6166148114222. distance: 701.1455358910873
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   1,  Average loss: 0.1040, Accuracy: 62/546 (11.3553%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   2,  Average loss: 0.0948, Accuracy: 75/546 (13.7363%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   3,  Average loss: 0.0841, Accuracy: 89/546 (16.3004%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   4,  Average loss: 0.0778, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   5,  Average loss: 0.0677, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 243, local model 11, internal_epoch   6,  Average loss: 0.0608, Accuracy: 84/546 (15.3846%), train_poison_data_count: 45
Global model norm: 143.58972042768244.
Norm before scaling: 141.5182946985124. Distance: 8.688627540363107
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 841.9817397069844, distance: 868.862762465972
Total norm for 4 adversaries is: 841.9817397069844. distance: 868.862762465972
___Test Local_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 243, local model 9, internal_epoch   1,  Average loss: 0.0453, Accuracy: 65/368 (17.6630%)
___Train Local_ResNet_18,  epoch 243, local model 9, internal_epoch   2,  Average loss: 0.0402, Accuracy: 192/368 (52.1739%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 5, internal_epoch   1,  Average loss: 0.1214, Accuracy: 7/365 (1.9178%)
___Train Local_ResNet_18,  epoch 243, local model 5, internal_epoch   2,  Average loss: 0.1102, Accuracy: 108/365 (29.5890%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 16, internal_epoch   1,  Average loss: 0.0784, Accuracy: 173/773 (22.3803%)
___Train Local_ResNet_18,  epoch 243, local model 16, internal_epoch   2,  Average loss: 0.0523, Accuracy: 209/773 (27.0375%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 36, internal_epoch   1,  Average loss: 0.1111, Accuracy: 267/849 (31.4488%)
___Train Local_ResNet_18,  epoch 243, local model 36, internal_epoch   2,  Average loss: 0.0863, Accuracy: 267/849 (31.4488%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 94, internal_epoch   1,  Average loss: 0.1894, Accuracy: 0/203 (0.0000%)
___Train Local_ResNet_18,  epoch 243, local model 94, internal_epoch   2,  Average loss: 0.1534, Accuracy: 0/203 (0.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 243, local model 57, internal_epoch   1,  Average loss: 0.0975, Accuracy: 88/290 (30.3448%)
___Train Local_ResNet_18,  epoch 243, local model 57, internal_epoch   2,  Average loss: 0.0918, Accuracy: 88/290 (30.3448%)
___Test Local_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 248.89998054504395
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 243: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 243: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 316.3698925971985 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:244 choose agents : [17, 33, 77, 11, 63, 92, 28, 56, 44, 40]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   1,  Average loss: 0.1408, Accuracy: 18/526 (3.4221%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   2,  Average loss: 0.1074, Accuracy: 23/526 (4.3726%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   3,  Average loss: 0.0834, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   4,  Average loss: 0.0668, Accuracy: 44/526 (8.3650%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   5,  Average loss: 0.0537, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 17, internal_epoch   6,  Average loss: 0.0443, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Global model norm: 137.50798982468254.
Norm before scaling: 135.51680592273416. Distance: 11.116214669421428
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1089.903378745107, distance: 1111.621394630384
Total norm for 4 adversaries is: 1089.903378745107. distance: 1111.621394630384
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   1,  Average loss: 0.1030, Accuracy: 100/527 (18.9753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   2,  Average loss: 0.0764, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   3,  Average loss: 0.0696, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   4,  Average loss: 0.0651, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   5,  Average loss: 0.0587, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 33, internal_epoch   6,  Average loss: 0.0561, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 137.50798982468254.
Norm before scaling: 135.53122478095224. Distance: 6.954859553659787
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 666.1823136349389, distance: 695.4859362345151
Total norm for 4 adversaries is: 666.1823136349389. distance: 695.4859362345151
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   1,  Average loss: 0.1285, Accuracy: 22/496 (4.4355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   2,  Average loss: 0.1030, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   3,  Average loss: 0.0858, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   4,  Average loss: 0.0758, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   5,  Average loss: 0.0680, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 77, internal_epoch   6,  Average loss: 0.0618, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Global model norm: 137.50798982468254.
Norm before scaling: 135.66273236642775. Distance: 9.01761387088161
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 879.5129689208682, distance: 901.761401369564
Total norm for 4 adversaries is: 879.5129689208682. distance: 901.761401369564
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   1,  Average loss: 0.1159, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   2,  Average loss: 0.0988, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   3,  Average loss: 0.0890, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   4,  Average loss: 0.0767, Accuracy: 53/546 (9.7070%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   5,  Average loss: 0.0703, Accuracy: 111/546 (20.3297%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 244, local model 11, internal_epoch   6,  Average loss: 0.0630, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Global model norm: 137.50798982468254.
Norm before scaling: 135.37867175306826. Distance: 8.60894297988766
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 833.3846275880063, distance: 860.8942661558386
Total norm for 4 adversaries is: 833.3846275880063. distance: 860.8942661558386
___Test Local_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 244, local model 63, internal_epoch   1,  Average loss: 0.1344, Accuracy: 25/752 (3.3245%)
___Train Local_ResNet_18,  epoch 244, local model 63, internal_epoch   2,  Average loss: 0.0899, Accuracy: 68/752 (9.0426%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 92, internal_epoch   1,  Average loss: 0.0770, Accuracy: 121/796 (15.2010%)
___Train Local_ResNet_18,  epoch 244, local model 92, internal_epoch   2,  Average loss: 0.0408, Accuracy: 252/796 (31.6583%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 28, internal_epoch   1,  Average loss: 0.0914, Accuracy: 110/423 (26.0047%)
___Train Local_ResNet_18,  epoch 244, local model 28, internal_epoch   2,  Average loss: 0.0715, Accuracy: 106/423 (25.0591%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 56, internal_epoch   1,  Average loss: 0.1133, Accuracy: 36/743 (4.8452%)
___Train Local_ResNet_18,  epoch 244, local model 56, internal_epoch   2,  Average loss: 0.0749, Accuracy: 169/743 (22.7456%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 44, internal_epoch   1,  Average loss: 0.0997, Accuracy: 58/436 (13.3028%)
___Train Local_ResNet_18,  epoch 244, local model 44, internal_epoch   2,  Average loss: 0.0658, Accuracy: 99/436 (22.7064%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 244, local model 40, internal_epoch   1,  Average loss: 0.0644, Accuracy: 84/652 (12.8834%)
___Train Local_ResNet_18,  epoch 244, local model 40, internal_epoch   2,  Average loss: 0.0423, Accuracy: 338/652 (51.8405%)
___Test Local_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 243.1642677783966
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 244: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 244: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 299.2824401855469 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:245 choose agents : [17, 33, 77, 11, 74, 85, 2, 99, 35, 70]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   1,  Average loss: 0.0951, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   2,  Average loss: 0.0810, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   3,  Average loss: 0.0791, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   4,  Average loss: 0.0673, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   5,  Average loss: 0.0650, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 17, internal_epoch   6,  Average loss: 0.0587, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Global model norm: 132.4566777643732.
Norm before scaling: 130.458214394974. Distance: 6.910316892387979
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 661.6280110454817, distance: 691.0316789048097
Total norm for 4 adversaries is: 661.6280110454817. distance: 691.0316789048097
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   1,  Average loss: 0.1832, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   2,  Average loss: 0.1537, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   3,  Average loss: 0.1326, Accuracy: 9/527 (1.7078%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   4,  Average loss: 0.1134, Accuracy: 29/527 (5.5028%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   5,  Average loss: 0.0936, Accuracy: 51/527 (9.6774%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 33, internal_epoch   6,  Average loss: 0.0864, Accuracy: 132/527 (25.0474%), train_poison_data_count: 45
Global model norm: 132.4566777643732.
Norm before scaling: 130.0418352156336. Distance: 11.496713583358222
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1123.6913499711563, distance: 1149.6714204502084
Total norm for 4 adversaries is: 1123.6913499711563. distance: 1149.6714204502084
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   1,  Average loss: 0.1290, Accuracy: 18/496 (3.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   2,  Average loss: 0.1054, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   3,  Average loss: 0.0904, Accuracy: 73/496 (14.7177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   4,  Average loss: 0.0791, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   5,  Average loss: 0.0713, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 77, internal_epoch   6,  Average loss: 0.0647, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Global model norm: 132.4566777643732.
Norm before scaling: 130.60052850917182. Distance: 8.715116885567374
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 848.9137544533013, distance: 871.5116895372087
Total norm for 4 adversaries is: 848.9137544533013. distance: 871.5116895372087
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   1,  Average loss: 0.1825, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   2,  Average loss: 0.1628, Accuracy: 62/546 (11.3553%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   3,  Average loss: 0.1445, Accuracy: 49/546 (8.9744%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   4,  Average loss: 0.1251, Accuracy: 46/546 (8.4249%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   5,  Average loss: 0.1108, Accuracy: 64/546 (11.7216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 245, local model 11, internal_epoch   6,  Average loss: 0.1019, Accuracy: 77/546 (14.1026%), train_poison_data_count: 45
Global model norm: 132.4566777643732.
Norm before scaling: 129.86062239955575. Distance: 10.856329313788965
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1056.5313530605706, distance: 1085.6329375069643
Total norm for 4 adversaries is: 1056.5313530605706. distance: 1085.6329375069643
___Test Local_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 245, local model 74, internal_epoch   1,  Average loss: 0.1449, Accuracy: 2/469 (0.4264%)
___Train Local_ResNet_18,  epoch 245, local model 74, internal_epoch   2,  Average loss: 0.0994, Accuracy: 23/469 (4.9041%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 85, internal_epoch   1,  Average loss: 0.2222, Accuracy: 21/364 (5.7692%)
___Train Local_ResNet_18,  epoch 245, local model 85, internal_epoch   2,  Average loss: 0.1915, Accuracy: 24/364 (6.5934%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 2, internal_epoch   1,  Average loss: 0.1749, Accuracy: 29/461 (6.2907%)
___Train Local_ResNet_18,  epoch 245, local model 2, internal_epoch   2,  Average loss: 0.1220, Accuracy: 10/461 (2.1692%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 99, internal_epoch   1,  Average loss: 0.1466, Accuracy: 52/391 (13.2992%)
___Train Local_ResNet_18,  epoch 245, local model 99, internal_epoch   2,  Average loss: 0.1246, Accuracy: 56/391 (14.3223%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 35, internal_epoch   1,  Average loss: 0.1159, Accuracy: 26/419 (6.2053%)
___Train Local_ResNet_18,  epoch 245, local model 35, internal_epoch   2,  Average loss: 0.0779, Accuracy: 69/419 (16.4678%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 245, local model 70, internal_epoch   1,  Average loss: 0.1137, Accuracy: 30/610 (4.9180%)
___Train Local_ResNet_18,  epoch 245, local model 70, internal_epoch   2,  Average loss: 0.0823, Accuracy: 226/610 (37.0492%)
___Test Local_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 237.00716972351074
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 245: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 245: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 287.17740392684937 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:246 choose agents : [17, 33, 77, 11, 88, 50, 86, 60, 41, 79]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   1,  Average loss: 0.2448, Accuracy: 50/526 (9.5057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   2,  Average loss: 0.2009, Accuracy: 54/526 (10.2662%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   3,  Average loss: 0.1757, Accuracy: 50/526 (9.5057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   4,  Average loss: 0.1584, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   5,  Average loss: 0.1402, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 17, internal_epoch   6,  Average loss: 0.1234, Accuracy: 46/526 (8.7452%), train_poison_data_count: 45
Global model norm: 127.1607273726346.
Norm before scaling: 124.27597738375466. Distance: 12.175490502223168
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1187.9553337562822, distance: 1217.549023653668
Total norm for 4 adversaries is: 1187.9553337562822. distance: 1217.549023653668
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   1,  Average loss: 0.1463, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   2,  Average loss: 0.1246, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   3,  Average loss: 0.1085, Accuracy: 148/527 (28.0835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   4,  Average loss: 0.1003, Accuracy: 45/527 (8.5389%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   5,  Average loss: 0.0993, Accuracy: 120/527 (22.7704%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 33, internal_epoch   6,  Average loss: 0.0831, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Global model norm: 127.1607273726346.
Norm before scaling: 124.85485322966024. Distance: 8.346744985649721
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 804.843307731387, distance: 834.674524889792
Total norm for 4 adversaries is: 804.843307731387. distance: 834.674524889792
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   1,  Average loss: 0.1362, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   2,  Average loss: 0.1107, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   3,  Average loss: 0.0926, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   4,  Average loss: 0.0872, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   5,  Average loss: 0.0835, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 77, internal_epoch   6,  Average loss: 0.0755, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Global model norm: 127.1607273726346.
Norm before scaling: 125.24567264231128. Distance: 7.998262693593069
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 775.3434722753523, distance: 799.8263092697064
Total norm for 4 adversaries is: 775.3434722753523. distance: 799.8263092697064
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   1,  Average loss: 0.1743, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   2,  Average loss: 0.1437, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   3,  Average loss: 0.1242, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   4,  Average loss: 0.1122, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   5,  Average loss: 0.1011, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 246, local model 11, internal_epoch   6,  Average loss: 0.0881, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Global model norm: 127.1607273726346.
Norm before scaling: 124.72652506458881. Distance: 10.45565003602269
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1018.3954597797459, distance: 1045.56503862744
Total norm for 4 adversaries is: 1018.3954597797459. distance: 1045.56503862744
___Test Local_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 246, local model 88, internal_epoch   1,  Average loss: 0.1598, Accuracy: 17/447 (3.8031%)
___Train Local_ResNet_18,  epoch 246, local model 88, internal_epoch   2,  Average loss: 0.1061, Accuracy: 50/447 (11.1857%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 50, internal_epoch   1,  Average loss: 0.2523, Accuracy: 26/401 (6.4838%)
___Train Local_ResNet_18,  epoch 246, local model 50, internal_epoch   2,  Average loss: 0.2047, Accuracy: 34/401 (8.4788%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 86, internal_epoch   1,  Average loss: 0.2281, Accuracy: 31/212 (14.6226%)
___Train Local_ResNet_18,  epoch 246, local model 86, internal_epoch   2,  Average loss: 0.1879, Accuracy: 31/212 (14.6226%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 60, internal_epoch   1,  Average loss: 0.1508, Accuracy: 24/284 (8.4507%)
___Train Local_ResNet_18,  epoch 246, local model 60, internal_epoch   2,  Average loss: 0.1270, Accuracy: 24/284 (8.4507%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 41, internal_epoch   1,  Average loss: 0.0447, Accuracy: 318/513 (61.9883%)
___Train Local_ResNet_18,  epoch 246, local model 41, internal_epoch   2,  Average loss: 0.0360, Accuracy: 318/513 (61.9883%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 246, local model 79, internal_epoch   1,  Average loss: 0.1766, Accuracy: 6/154 (3.8961%)
___Train Local_ResNet_18,  epoch 246, local model 79, internal_epoch   2,  Average loss: 0.1614, Accuracy: 6/154 (3.8961%)
___Test Local_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 222.65034461021423
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 246: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 246: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 281.8539865016937 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:247 choose agents : [17, 33, 77, 11, 76, 67, 9, 40, 72, 44]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   1,  Average loss: 0.1421, Accuracy: 20/526 (3.8023%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   2,  Average loss: 0.1122, Accuracy: 17/526 (3.2319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   3,  Average loss: 0.0927, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   4,  Average loss: 0.0732, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   5,  Average loss: 0.0659, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 17, internal_epoch   6,  Average loss: 0.0612, Accuracy: 134/526 (25.4753%), train_poison_data_count: 45
Global model norm: 121.16659905503043.
Norm before scaling: 119.20921898336974. Distance: 9.905583019245856
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 969.0327006866177, distance: 990.5583337189183
Total norm for 4 adversaries is: 969.0327006866177. distance: 990.5583337189183
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   1,  Average loss: 0.1902, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   2,  Average loss: 0.1599, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   3,  Average loss: 0.1328, Accuracy: 68/527 (12.9032%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   4,  Average loss: 0.1215, Accuracy: 46/527 (8.7287%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   5,  Average loss: 0.1119, Accuracy: 55/527 (10.4364%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 33, internal_epoch   6,  Average loss: 0.0979, Accuracy: 81/527 (15.3700%), train_poison_data_count: 45
Global model norm: 121.16659905503043.
Norm before scaling: 118.69728270636611. Distance: 10.592098141057095
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1032.5490303128468, distance: 1059.2098470086087
Total norm for 4 adversaries is: 1032.5490303128468. distance: 1059.2098470086087
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   1,  Average loss: 0.1364, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   2,  Average loss: 0.1090, Accuracy: 23/496 (4.6371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   3,  Average loss: 0.0896, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   4,  Average loss: 0.0829, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   5,  Average loss: 0.0744, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 77, internal_epoch   6,  Average loss: 0.0739, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Global model norm: 121.16659905503043.
Norm before scaling: 119.36945749567809. Distance: 8.6323882814321
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 842.1300003562395, distance: 863.2388502031173
Total norm for 4 adversaries is: 842.1300003562395. distance: 863.2388502031173
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   1,  Average loss: 0.1174, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   2,  Average loss: 0.0996, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   3,  Average loss: 0.0848, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   4,  Average loss: 0.0770, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   5,  Average loss: 0.0674, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 247, local model 11, internal_epoch   6,  Average loss: 0.0636, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Global model norm: 121.16659905503043.
Norm before scaling: 119.1889092732625. Distance: 8.264663149966966
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 802.0988093745059, distance: 826.4663483772343
Total norm for 4 adversaries is: 802.0988093745059. distance: 826.4663483772343
___Test Local_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 247, local model 76, internal_epoch   1,  Average loss: 0.1634, Accuracy: 3/65 (4.6154%)
___Train Local_ResNet_18,  epoch 247, local model 76, internal_epoch   2,  Average loss: 0.1007, Accuracy: 3/65 (4.6154%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 67, internal_epoch   1,  Average loss: 0.0715, Accuracy: 226/842 (26.8409%)
___Train Local_ResNet_18,  epoch 247, local model 67, internal_epoch   2,  Average loss: 0.0424, Accuracy: 111/842 (13.1829%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 9, internal_epoch   1,  Average loss: 0.1177, Accuracy: 15/368 (4.0761%)
___Train Local_ResNet_18,  epoch 247, local model 9, internal_epoch   2,  Average loss: 0.0769, Accuracy: 15/368 (4.0761%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 40, internal_epoch   1,  Average loss: 0.1533, Accuracy: 17/652 (2.6074%)
___Train Local_ResNet_18,  epoch 247, local model 40, internal_epoch   2,  Average loss: 0.0859, Accuracy: 141/652 (21.6258%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 72, internal_epoch   1,  Average loss: 0.1072, Accuracy: 52/618 (8.4142%)
___Train Local_ResNet_18,  epoch 247, local model 72, internal_epoch   2,  Average loss: 0.0506, Accuracy: 114/618 (18.4466%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 247, local model 44, internal_epoch   1,  Average loss: 0.0806, Accuracy: 58/436 (13.3028%)
___Train Local_ResNet_18,  epoch 247, local model 44, internal_epoch   2,  Average loss: 0.0548, Accuracy: 129/436 (29.5872%)
___Test Local_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 251.71222829818726
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 247: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 247: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 307.3700165748596 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:248 choose agents : [17, 33, 77, 11, 46, 96, 54, 39, 67, 82]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   1,  Average loss: 0.1021, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   2,  Average loss: 0.0890, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   3,  Average loss: 0.0743, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   4,  Average loss: 0.0669, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   5,  Average loss: 0.0659, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 17, internal_epoch   6,  Average loss: 0.0623, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Global model norm: 116.74347546008728.
Norm before scaling: 114.85897007988754. Distance: 7.012173829678423
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 675.8492111780556, distance: 701.2174012030791
Total norm for 4 adversaries is: 675.8492111780556. distance: 701.2174012030791
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   1,  Average loss: 0.1746, Accuracy: 75/527 (14.2315%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   2,  Average loss: 0.1569, Accuracy: 61/527 (11.5750%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   3,  Average loss: 0.1323, Accuracy: 45/527 (8.5389%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   4,  Average loss: 0.1150, Accuracy: 43/527 (8.1594%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   5,  Average loss: 0.1037, Accuracy: 54/527 (10.2467%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 33, internal_epoch   6,  Average loss: 0.0907, Accuracy: 131/527 (24.8577%), train_poison_data_count: 45
Global model norm: 116.74347546008728.
Norm before scaling: 114.33219827546394. Distance: 11.088188389134164
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1084.0178734688834, distance: 1108.8188535554398
Total norm for 4 adversaries is: 1084.0178734688834. distance: 1108.8188535554398
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   1,  Average loss: 0.1220, Accuracy: 19/496 (3.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   2,  Average loss: 0.1076, Accuracy: 57/496 (11.4919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   3,  Average loss: 0.0880, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   4,  Average loss: 0.0758, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   5,  Average loss: 0.0666, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 77, internal_epoch   6,  Average loss: 0.0633, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Global model norm: 116.74347546008728.
Norm before scaling: 114.99635693957875. Distance: 8.795600866597585
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 859.6691587465494, distance: 879.5601173313852
Total norm for 4 adversaries is: 859.6691587465494. distance: 879.5601173313852
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   1,  Average loss: 0.1773, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   2,  Average loss: 0.1596, Accuracy: 68/546 (12.4542%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   3,  Average loss: 0.1393, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   4,  Average loss: 0.1256, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   5,  Average loss: 0.1209, Accuracy: 87/546 (15.9341%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 248, local model 11, internal_epoch   6,  Average loss: 0.1065, Accuracy: 72/546 (13.1868%), train_poison_data_count: 45
Global model norm: 116.74347546008728.
Norm before scaling: 114.1485120906094. Distance: 9.930363617815374
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 964.3512715810562, distance: 993.0363160529428
Total norm for 4 adversaries is: 964.3512715810562. distance: 993.0363160529428
___Test Local_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 248, local model 46, internal_epoch   1,  Average loss: 0.1176, Accuracy: 116/601 (19.3012%)
___Train Local_ResNet_18,  epoch 248, local model 46, internal_epoch   2,  Average loss: 0.0886, Accuracy: 91/601 (15.1414%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 96, internal_epoch   1,  Average loss: 0.1670, Accuracy: 47/708 (6.6384%)
___Train Local_ResNet_18,  epoch 248, local model 96, internal_epoch   2,  Average loss: 0.1166, Accuracy: 48/708 (6.7797%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 54, internal_epoch   1,  Average loss: 0.1714, Accuracy: 3/440 (0.6818%)
___Train Local_ResNet_18,  epoch 248, local model 54, internal_epoch   2,  Average loss: 0.1375, Accuracy: 40/440 (9.0909%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 39, internal_epoch   1,  Average loss: 0.2344, Accuracy: 0/217 (0.0000%)
___Train Local_ResNet_18,  epoch 248, local model 39, internal_epoch   2,  Average loss: 0.2193, Accuracy: 0/217 (0.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 67, internal_epoch   1,  Average loss: 0.1621, Accuracy: 211/842 (25.0594%)
___Train Local_ResNet_18,  epoch 248, local model 67, internal_epoch   2,  Average loss: 0.1274, Accuracy: 147/842 (17.4584%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 248, local model 82, internal_epoch   1,  Average loss: 0.1184, Accuracy: 218/601 (36.2729%)
___Train Local_ResNet_18,  epoch 248, local model 82, internal_epoch   2,  Average loss: 0.0927, Accuracy: 214/601 (35.6073%)
___Test Local_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 245.3155872821808
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 248: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 248: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 306.1238899230957 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:249 choose agents : [17, 33, 77, 11, 21, 80, 91, 23, 65, 69]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   1,  Average loss: 0.2144, Accuracy: 51/526 (9.6958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   2,  Average loss: 0.1811, Accuracy: 49/526 (9.3156%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   3,  Average loss: 0.1561, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   4,  Average loss: 0.1380, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   5,  Average loss: 0.1273, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 17, internal_epoch   6,  Average loss: 0.1143, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Global model norm: 111.76406860547803.
Norm before scaling: 109.02794491981173. Distance: 10.793306282611177
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1051.3729119584546, distance: 1079.330637478618
Total norm for 4 adversaries is: 1051.3729119584546. distance: 1079.330637478618
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   1,  Average loss: 0.1783, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   2,  Average loss: 0.1529, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   3,  Average loss: 0.1364, Accuracy: 145/527 (27.5142%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   4,  Average loss: 0.1259, Accuracy: 60/527 (11.3852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   5,  Average loss: 0.1150, Accuracy: 107/527 (20.3036%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 33, internal_epoch   6,  Average loss: 0.1048, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Global model norm: 111.76406860547803.
Norm before scaling: 109.2075414491829. Distance: 9.452811445600416
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 916.8534165830436, distance: 945.2811751008268
Total norm for 4 adversaries is: 916.8534165830436. distance: 945.2811751008268
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   1,  Average loss: 0.1447, Accuracy: 71/496 (14.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   2,  Average loss: 0.1201, Accuracy: 68/496 (13.7097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   3,  Average loss: 0.1019, Accuracy: 79/496 (15.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   4,  Average loss: 0.0993, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   5,  Average loss: 0.0922, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 77, internal_epoch   6,  Average loss: 0.0870, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Global model norm: 111.76406860547803.
Norm before scaling: 109.77678880061578. Distance: 7.659216481268407
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 741.1036533441189, distance: 765.9216262124996
Total norm for 4 adversaries is: 741.1036533441189. distance: 765.9216262124996
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   1,  Average loss: 0.1976, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   2,  Average loss: 0.1661, Accuracy: 55/546 (10.0733%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   3,  Average loss: 0.1386, Accuracy: 41/546 (7.5092%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   4,  Average loss: 0.1268, Accuracy: 58/546 (10.6227%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   5,  Average loss: 0.1074, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 249, local model 11, internal_epoch   6,  Average loss: 0.0927, Accuracy: 48/546 (8.7912%), train_poison_data_count: 45
Global model norm: 111.76406860547803.
Norm before scaling: 109.19450732380041. Distance: 11.856639280147274
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1160.7995089592346, distance: 1185.6638963045134
Total norm for 4 adversaries is: 1160.7995089592346. distance: 1185.6638963045134
___Test Local_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 249, local model 21, internal_epoch   1,  Average loss: 0.2437, Accuracy: 3/262 (1.1450%)
___Train Local_ResNet_18,  epoch 249, local model 21, internal_epoch   2,  Average loss: 0.2077, Accuracy: 3/262 (1.1450%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 80, internal_epoch   1,  Average loss: 0.1845, Accuracy: 4/363 (1.1019%)
___Train Local_ResNet_18,  epoch 249, local model 80, internal_epoch   2,  Average loss: 0.1408, Accuracy: 59/363 (16.2534%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 91, internal_epoch   1,  Average loss: 0.1674, Accuracy: 22/234 (9.4017%)
___Train Local_ResNet_18,  epoch 249, local model 91, internal_epoch   2,  Average loss: 0.1491, Accuracy: 22/234 (9.4017%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 23, internal_epoch   1,  Average loss: 0.1943, Accuracy: 43/248 (17.3387%)
___Train Local_ResNet_18,  epoch 249, local model 23, internal_epoch   2,  Average loss: 0.1758, Accuracy: 43/248 (17.3387%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 65, internal_epoch   1,  Average loss: 0.1756, Accuracy: 16/314 (5.0955%)
___Train Local_ResNet_18,  epoch 249, local model 65, internal_epoch   2,  Average loss: 0.1443, Accuracy: 16/314 (5.0955%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 249, local model 69, internal_epoch   1,  Average loss: 0.1652, Accuracy: 6/216 (2.7778%)
___Train Local_ResNet_18,  epoch 249, local model 69, internal_epoch   2,  Average loss: 0.1350, Accuracy: 6/216 (2.7778%)
___Test Local_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 221.56103229522705
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 249: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 249: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 280.7999095916748 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:250 choose agents : [17, 33, 77, 11, 44, 38, 93, 2, 16, 36]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   1,  Average loss: 0.1357, Accuracy: 19/526 (3.6122%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   2,  Average loss: 0.1113, Accuracy: 35/526 (6.6540%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   3,  Average loss: 0.0802, Accuracy: 35/526 (6.6540%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   4,  Average loss: 0.0667, Accuracy: 114/526 (21.6730%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   5,  Average loss: 0.0617, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 17, internal_epoch   6,  Average loss: 0.0577, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Global model norm: 106.43079746218902.
Norm before scaling: 104.59744727555496. Distance: 9.562305323794506
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 936.9481375721924, distance: 956.2305553578593
Total norm for 4 adversaries is: 936.9481375721924. distance: 956.2305553578593
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   1,  Average loss: 0.1810, Accuracy: 97/527 (18.4061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   2,  Average loss: 0.1662, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   3,  Average loss: 0.1390, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   4,  Average loss: 0.1169, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   5,  Average loss: 0.1065, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 33, internal_epoch   6,  Average loss: 0.0988, Accuracy: 73/527 (13.8520%), train_poison_data_count: 45
Global model norm: 106.43079746218902.
Norm before scaling: 103.97987523133983. Distance: 11.117904286120295
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1087.8761418470394, distance: 1111.7904478812543
Total norm for 4 adversaries is: 1087.8761418470394. distance: 1111.7904478812543
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   1,  Average loss: 0.1464, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   2,  Average loss: 0.1263, Accuracy: 18/496 (3.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   3,  Average loss: 0.1020, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   4,  Average loss: 0.0853, Accuracy: 32/496 (6.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   5,  Average loss: 0.0754, Accuracy: 79/496 (15.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 77, internal_epoch   6,  Average loss: 0.0699, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Global model norm: 106.43079746218902.
Norm before scaling: 104.61985221057473. Distance: 9.97606197048539
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 978.9654296756347, distance: 997.6061973544471
Total norm for 4 adversaries is: 978.9654296756347. distance: 997.6061973544471
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   1,  Average loss: 0.0975, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   2,  Average loss: 0.0908, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   3,  Average loss: 0.0788, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   4,  Average loss: 0.0641, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   5,  Average loss: 0.0610, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 250, local model 11, internal_epoch   6,  Average loss: 0.0621, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Global model norm: 106.43079746218902.
Norm before scaling: 104.59280698708444. Distance: 7.597877667885443
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 737.5949091472907, distance: 759.7877993229425
Total norm for 4 adversaries is: 737.5949091472907. distance: 759.7877993229425
___Test Local_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 250, local model 44, internal_epoch   1,  Average loss: 0.0956, Accuracy: 58/436 (13.3028%)
___Train Local_ResNet_18,  epoch 250, local model 44, internal_epoch   2,  Average loss: 0.0672, Accuracy: 58/436 (13.3028%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 38, internal_epoch   1,  Average loss: 0.0686, Accuracy: 204/756 (26.9841%)
___Train Local_ResNet_18,  epoch 250, local model 38, internal_epoch   2,  Average loss: 0.0378, Accuracy: 246/756 (32.5397%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 93, internal_epoch   1,  Average loss: 0.1206, Accuracy: 32/584 (5.4795%)
___Train Local_ResNet_18,  epoch 250, local model 93, internal_epoch   2,  Average loss: 0.0736, Accuracy: 105/584 (17.9795%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 2, internal_epoch   1,  Average loss: 0.1365, Accuracy: 23/461 (4.9892%)
___Train Local_ResNet_18,  epoch 250, local model 2, internal_epoch   2,  Average loss: 0.0922, Accuracy: 87/461 (18.8720%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 16, internal_epoch   1,  Average loss: 0.0864, Accuracy: 51/773 (6.5977%)
___Train Local_ResNet_18,  epoch 250, local model 16, internal_epoch   2,  Average loss: 0.0471, Accuracy: 267/773 (34.5408%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 250, local model 36, internal_epoch   1,  Average loss: 0.1303, Accuracy: 123/849 (14.4876%)
___Train Local_ResNet_18,  epoch 250, local model 36, internal_epoch   2,  Average loss: 0.0851, Accuracy: 210/849 (24.7350%)
___Test Local_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 246.37476110458374
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 250: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 250: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 306.05030632019043 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:251 choose agents : [17, 33, 77, 11, 36, 26, 95, 49, 48, 27]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   1,  Average loss: 0.0828, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   2,  Average loss: 0.0806, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   3,  Average loss: 0.0754, Accuracy: 150/526 (28.5171%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   4,  Average loss: 0.0717, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   5,  Average loss: 0.0712, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 17, internal_epoch   6,  Average loss: 0.0668, Accuracy: 130/526 (24.7148%), train_poison_data_count: 45
Global model norm: 103.16031592259691.
Norm before scaling: 101.39184701259268. Distance: 5.11616722593586
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 483.3236654923903, distance: 511.6167083374037
Total norm for 4 adversaries is: 483.3236654923903. distance: 511.6167083374037
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   1,  Average loss: 0.1495, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   2,  Average loss: 0.1424, Accuracy: 65/527 (12.3340%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   3,  Average loss: 0.1213, Accuracy: 59/527 (11.1954%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   4,  Average loss: 0.1122, Accuracy: 45/527 (8.5389%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   5,  Average loss: 0.0940, Accuracy: 58/527 (11.0057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 33, internal_epoch   6,  Average loss: 0.0871, Accuracy: 128/527 (24.2884%), train_poison_data_count: 45
Global model norm: 103.16031592259691.
Norm before scaling: 100.92046586142723. Distance: 9.848894210168263
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 961.892990410056, distance: 984.8894290731321
Total norm for 4 adversaries is: 961.892990410056. distance: 984.8894290731321
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   1,  Average loss: 0.0890, Accuracy: 19/496 (3.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   2,  Average loss: 0.0824, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   3,  Average loss: 0.0776, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   4,  Average loss: 0.0725, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   5,  Average loss: 0.0708, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 77, internal_epoch   6,  Average loss: 0.0688, Accuracy: 96/496 (19.3548%), train_poison_data_count: 40
Global model norm: 103.16031592259691.
Norm before scaling: 101.58005617492047. Distance: 5.5909832979791
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 536.4259618064733, distance: 559.098325431225
Total norm for 4 adversaries is: 536.4259618064733. distance: 559.098325431225
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   1,  Average loss: 0.1889, Accuracy: 68/546 (12.4542%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   2,  Average loss: 0.1772, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   3,  Average loss: 0.1633, Accuracy: 66/546 (12.0879%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   4,  Average loss: 0.1559, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   5,  Average loss: 0.1439, Accuracy: 66/546 (12.0879%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 251, local model 11, internal_epoch   6,  Average loss: 0.1302, Accuracy: 63/546 (11.5385%), train_poison_data_count: 45
Global model norm: 103.16031592259691.
Norm before scaling: 100.2806121434996. Distance: 9.630129945696273
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 932.8328829431347, distance: 963.0130450829832
Total norm for 4 adversaries is: 932.8328829431347. distance: 963.0130450829832
___Test Local_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 251, local model 36, internal_epoch   1,  Average loss: 0.1038, Accuracy: 171/849 (20.1413%)
___Train Local_ResNet_18,  epoch 251, local model 36, internal_epoch   2,  Average loss: 0.0861, Accuracy: 267/849 (31.4488%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 26, internal_epoch   1,  Average loss: 0.0831, Accuracy: 85/468 (18.1624%)
___Train Local_ResNet_18,  epoch 251, local model 26, internal_epoch   2,  Average loss: 0.0745, Accuracy: 178/468 (38.0342%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 95, internal_epoch   1,  Average loss: 0.0393, Accuracy: 158/569 (27.7680%)
___Train Local_ResNet_18,  epoch 251, local model 95, internal_epoch   2,  Average loss: 0.0353, Accuracy: 301/569 (52.8998%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 49, internal_epoch   1,  Average loss: 0.1532, Accuracy: 8/426 (1.8779%)
___Train Local_ResNet_18,  epoch 251, local model 49, internal_epoch   2,  Average loss: 0.1274, Accuracy: 47/426 (11.0329%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 48, internal_epoch   1,  Average loss: 0.1252, Accuracy: 5/378 (1.3228%)
___Train Local_ResNet_18,  epoch 251, local model 48, internal_epoch   2,  Average loss: 0.1105, Accuracy: 40/378 (10.5820%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 251, local model 27, internal_epoch   1,  Average loss: 0.1483, Accuracy: 85/397 (21.4106%)
___Train Local_ResNet_18,  epoch 251, local model 27, internal_epoch   2,  Average loss: 0.1321, Accuracy: 97/397 (24.4332%)
___Test Local_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 257.0295720100403
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 251: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 251: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 312.3533935546875 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:252 choose agents : [17, 33, 77, 11, 49, 74, 94, 29, 76, 70]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   1,  Average loss: 0.2036, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   2,  Average loss: 0.1589, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   3,  Average loss: 0.1154, Accuracy: 54/526 (10.2662%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   4,  Average loss: 0.0910, Accuracy: 48/526 (9.1255%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   5,  Average loss: 0.0742, Accuracy: 88/526 (16.7300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 17, internal_epoch   6,  Average loss: 0.0654, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Global model norm: 97.24864937204784.
Norm before scaling: 95.02748368893076. Distance: 12.930397922325806
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1273.570522193412, distance: 1293.0397809038977
Total norm for 4 adversaries is: 1273.570522193412. distance: 1293.0397809038977
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   1,  Average loss: 0.1639, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   2,  Average loss: 0.1316, Accuracy: 164/527 (31.1195%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   3,  Average loss: 0.1053, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   4,  Average loss: 0.0899, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   5,  Average loss: 0.0763, Accuracy: 34/527 (6.4516%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 33, internal_epoch   6,  Average loss: 0.0636, Accuracy: 147/527 (27.8937%), train_poison_data_count: 45
Global model norm: 97.24864937204784.
Norm before scaling: 95.07280824288036. Distance: 10.745685155013783
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1053.9267645334755, distance: 1074.5685180573644
Total norm for 4 adversaries is: 1053.9267645334755. distance: 1074.5685180573644
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   1,  Average loss: 0.1678, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   2,  Average loss: 0.1368, Accuracy: 70/496 (14.1129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   3,  Average loss: 0.1014, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   4,  Average loss: 0.0840, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   5,  Average loss: 0.0748, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 77, internal_epoch   6,  Average loss: 0.0625, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Global model norm: 97.24864937204784.
Norm before scaling: 95.3306898626434. Distance: 10.695366713704818
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 252: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1051.1854617525871, distance: 1069.5366403260807
Total norm for 4 adversaries is: 1051.1854617525871. distance: 1069.5366403260807
___Test Local_ResNet_18 poisoned: True, epoch: 252: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 252, local model 11, internal_epoch   1,  Average loss: 0.2141, Accuracy: 53/546 (9.7070%), train_poison_data_count: 45
