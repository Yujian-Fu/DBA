current path: saved_models/model_cifar_Nov.13_11.07.49
Loading data
build_classes_dict done
train loaders done
get poison test loader
load data done
Loaded parameters from saved model: LR is 0.1 and current epoch is 201
create model done
Poisoned following participants: [17, 33, 77, 11]
We use following environment for graphs:  cifar
----------------------------------Start one training epoch------------------------------------------
Server Epoch:201 choose agents : [17, 33, 77, 11, 37, 53, 39, 57, 63, 48]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   1,  Average loss: 0.0159, Accuracy: 447/526 (84.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   2,  Average loss: 0.0177, Accuracy: 402/526 (76.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   3,  Average loss: 0.0109, Accuracy: 439/526 (83.4601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   4,  Average loss: 0.0067, Accuracy: 481/526 (91.4449%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   5,  Average loss: 0.0039, Accuracy: 501/526 (95.2471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 17, internal_epoch   6,  Average loss: 0.0024, Accuracy: 512/526 (97.3384%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 39.70062221548769. Distance: 13.611697361229824
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.3906, Accuracy: 3969/10000 (39.6900%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.2554, Accuracy: 8197/9000 (91.0778%)
Scaling by  100
Scaled Norm after poisoning: 1360.675200038569, distance: 1361.1695798099515
Total norm for 4 adversaries is: 1360.675200038569. distance: 1361.1695798099515
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   1,  Average loss: 0.0159, Accuracy: 433/527 (82.1632%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   2,  Average loss: 0.0165, Accuracy: 429/527 (81.4042%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   3,  Average loss: 0.0097, Accuracy: 458/527 (86.9070%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   4,  Average loss: 0.0059, Accuracy: 491/527 (93.1689%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   5,  Average loss: 0.0036, Accuracy: 508/527 (96.3947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 33, internal_epoch   6,  Average loss: 0.0033, Accuracy: 509/527 (96.5844%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 38.97239294820598. Distance: 11.472231967810021
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.1115, Accuracy: 4306/10000 (43.0600%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.2639, Accuracy: 8166/9000 (90.7333%)
Scaling by  100
Scaled Norm after poisoning: 1146.4782488124229, distance: 1147.2231692221003
Total norm for 4 adversaries is: 1146.4782488124229. distance: 1147.2231692221003
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   1,  Average loss: 0.0098, Accuracy: 428/496 (86.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   2,  Average loss: 0.0062, Accuracy: 457/496 (92.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   3,  Average loss: 0.0035, Accuracy: 475/496 (95.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   4,  Average loss: 0.0019, Accuracy: 483/496 (97.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   5,  Average loss: 0.0012, Accuracy: 489/496 (98.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 77, internal_epoch   6,  Average loss: 0.0008, Accuracy: 492/496 (99.1935%), train_poison_data_count: 40
Global model norm: 37.66304237236004.
Norm before scaling: 37.93186705246576. Distance: 6.740768902214821
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.1814, Accuracy: 6243/10000 (62.4300%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.1755, Accuracy: 8607/9000 (95.6333%)
Scaling by  100
Scaled Norm after poisoning: 673.2654565622686, distance: 674.0767992224625
Total norm for 4 adversaries is: 673.2654565622686. distance: 674.0767992224625
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   1,  Average loss: 0.0076, Accuracy: 485/546 (88.8278%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   2,  Average loss: 0.0061, Accuracy: 499/546 (91.3919%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   3,  Average loss: 0.0027, Accuracy: 520/546 (95.2381%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   4,  Average loss: 0.0019, Accuracy: 539/546 (98.7179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   5,  Average loss: 0.0010, Accuracy: 542/546 (99.2674%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 201, local model 11, internal_epoch   6,  Average loss: 0.0009, Accuracy: 540/546 (98.9011%), train_poison_data_count: 45
Global model norm: 37.66304237236004.
Norm before scaling: 37.96970967151398. Distance: 7.084416235630019
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.4247, Accuracy: 5830/10000 (58.3000%)
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: 0.1882, Accuracy: 8564/9000 (95.1556%)
Scaling by  100
Scaled Norm after poisoning: 707.5370573333951, distance: 708.4417319017846
Total norm for 4 adversaries is: 707.5370573333951. distance: 708.4417319017846
___Test Local_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   1,  Average loss: 0.0112, Accuracy: 582/725 (80.2759%)
___Train Local_ResNet_18,  epoch 201, local model 37, internal_epoch   2,  Average loss: 0.0179, Accuracy: 499/725 (68.8276%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 48.9845, Accuracy: 1058/10000 (10.5800%)
___Train Local_ResNet_18,  epoch 201, local model 53, internal_epoch   1,  Average loss: 0.0049, Accuracy: 558/625 (89.2800%)
___Train Local_ResNet_18,  epoch 201, local model 53, internal_epoch   2,  Average loss: 0.0042, Accuracy: 573/625 (91.6800%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 2.6514, Accuracy: 4178/10000 (41.7800%)
___Train Local_ResNet_18,  epoch 201, local model 39, internal_epoch   1,  Average loss: 0.0074, Accuracy: 186/217 (85.7143%)
___Train Local_ResNet_18,  epoch 201, local model 39, internal_epoch   2,  Average loss: 0.0012, Accuracy: 215/217 (99.0783%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 4.1693, Accuracy: 3149/10000 (31.4900%)
___Train Local_ResNet_18,  epoch 201, local model 57, internal_epoch   1,  Average loss: 0.0074, Accuracy: 245/290 (84.4828%)
___Train Local_ResNet_18,  epoch 201, local model 57, internal_epoch   2,  Average loss: 0.0019, Accuracy: 280/290 (96.5517%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 4.7370, Accuracy: 3009/10000 (30.0900%)
___Train Local_ResNet_18,  epoch 201, local model 63, internal_epoch   1,  Average loss: 0.0032, Accuracy: 704/752 (93.6170%)
___Train Local_ResNet_18,  epoch 201, local model 63, internal_epoch   2,  Average loss: 0.0029, Accuracy: 710/752 (94.4149%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 1.7396, Accuracy: 5670/10000 (56.7000%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   1,  Average loss: 0.0059, Accuracy: 332/378 (87.8307%)
___Train Local_ResNet_18,  epoch 201, local model 48, internal_epoch   2,  Average loss: 0.0020, Accuracy: 364/378 (96.2963%)
___Test Local_ResNet_18 poisoned: False, epoch: 201: Average loss: 3.6816, Accuracy: 3269/10000 (32.6900%)
time spent on training: 161.69487643241882
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 201: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 201: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 203.1196677684784 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:202 choose agents : [17, 33, 77, 11, 63, 50, 39, 72, 88, 71]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   1,  Average loss: 0.0394, Accuracy: 216/526 (41.0646%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   2,  Average loss: 0.0162, Accuracy: 371/526 (70.5323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   3,  Average loss: 0.0122, Accuracy: 429/526 (81.5589%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   4,  Average loss: 0.0064, Accuracy: 480/526 (91.2548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   5,  Average loss: 0.0050, Accuracy: 498/526 (94.6768%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 17, internal_epoch   6,  Average loss: 0.0034, Accuracy: 502/526 (95.4373%), train_poison_data_count: 45
Global model norm: 42.10779507704007.
Norm before scaling: 42.62047062857897. Distance: 8.681587677355415
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.0061, Accuracy: 3487/10000 (34.8700%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.5105, Accuracy: 7412/9000 (82.3556%)
Scaling by  100
Scaled Norm after poisoning: 867.3405112757042, distance: 868.1587556432291
Total norm for 4 adversaries is: 867.3405112757042. distance: 868.1587556432291
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   1,  Average loss: 0.0365, Accuracy: 219/527 (41.5560%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   2,  Average loss: 0.0155, Accuracy: 373/527 (70.7780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   3,  Average loss: 0.0099, Accuracy: 437/527 (82.9222%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   4,  Average loss: 0.0067, Accuracy: 478/527 (90.7021%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   5,  Average loss: 0.0060, Accuracy: 490/527 (92.9791%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 33, internal_epoch   6,  Average loss: 0.0052, Accuracy: 498/527 (94.4972%), train_poison_data_count: 45
Global model norm: 42.10779507704007.
Norm before scaling: 42.66252386325512. Distance: 8.979853226921406
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 2.6870, Accuracy: 3729/10000 (37.2900%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.8689, Accuracy: 6550/9000 (72.7778%)
Scaling by  100
Scaled Norm after poisoning: 897.1005378440033, distance: 897.9853840681373
Total norm for 4 adversaries is: 897.1005378440033. distance: 897.9853840681373
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   1,  Average loss: 0.0381, Accuracy: 181/496 (36.4919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   2,  Average loss: 0.0228, Accuracy: 258/496 (52.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   3,  Average loss: 0.0167, Accuracy: 327/496 (65.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   4,  Average loss: 0.0112, Accuracy: 386/496 (77.8226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   5,  Average loss: 0.0063, Accuracy: 451/496 (90.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 77, internal_epoch   6,  Average loss: 0.0037, Accuracy: 470/496 (94.7581%), train_poison_data_count: 40
Global model norm: 42.10779507704007.
Norm before scaling: 42.41642028697068. Distance: 7.7163353977270095
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 1.8525, Accuracy: 4552/10000 (45.5200%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 0.7093, Accuracy: 7158/9000 (79.5333%)
Scaling by  100
Scaled Norm after poisoning: 770.6140408790901, distance: 771.6336161028756
Total norm for 4 adversaries is: 770.6140408790901. distance: 771.6336161028756
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   1,  Average loss: 0.0426, Accuracy: 153/546 (28.0220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   2,  Average loss: 0.0230, Accuracy: 295/546 (54.0293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   3,  Average loss: 0.0176, Accuracy: 353/546 (64.6520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   4,  Average loss: 0.0118, Accuracy: 428/546 (78.3883%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   5,  Average loss: 0.0070, Accuracy: 482/546 (88.2784%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 202, local model 11, internal_epoch   6,  Average loss: 0.0038, Accuracy: 520/546 (95.2381%), train_poison_data_count: 45
Global model norm: 42.10779507704007.
Norm before scaling: 42.40543391117832. Distance: 8.234339328522118
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.1841, Accuracy: 2992/10000 (29.9200%)
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: 1.5648, Accuracy: 5021/9000 (55.7889%)
Scaling by  100
Scaled Norm after poisoning: 821.919475982897, distance: 823.434044110395
Total norm for 4 adversaries is: 821.919475982897. distance: 823.434044110395
___Test Local_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 202, local model 63, internal_epoch   1,  Average loss: 0.0463, Accuracy: 215/752 (28.5904%)
___Train Local_ResNet_18,  epoch 202, local model 63, internal_epoch   2,  Average loss: 0.0252, Accuracy: 353/752 (46.9415%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 6.3760, Accuracy: 1431/10000 (14.3100%)
___Train Local_ResNet_18,  epoch 202, local model 50, internal_epoch   1,  Average loss: 0.0512, Accuracy: 141/401 (35.1621%)
___Train Local_ResNet_18,  epoch 202, local model 50, internal_epoch   2,  Average loss: 0.0240, Accuracy: 260/401 (64.8379%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 43.1373, Accuracy: 1294/10000 (12.9400%)
___Train Local_ResNet_18,  epoch 202, local model 39, internal_epoch   1,  Average loss: 0.0914, Accuracy: 31/217 (14.2857%)
___Train Local_ResNet_18,  epoch 202, local model 39, internal_epoch   2,  Average loss: 0.0276, Accuracy: 128/217 (58.9862%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 202, local model 72, internal_epoch   1,  Average loss: 0.0366, Accuracy: 264/618 (42.7184%)
___Train Local_ResNet_18,  epoch 202, local model 72, internal_epoch   2,  Average loss: 0.0142, Accuracy: 424/618 (68.6084%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.4494, Accuracy: 2275/10000 (22.7500%)
___Train Local_ResNet_18,  epoch 202, local model 88, internal_epoch   1,  Average loss: 0.0501, Accuracy: 170/447 (38.0313%)
___Train Local_ResNet_18,  epoch 202, local model 88, internal_epoch   2,  Average loss: 0.0218, Accuracy: 287/447 (64.2058%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 27.3356, Accuracy: 1016/10000 (10.1600%)
___Train Local_ResNet_18,  epoch 202, local model 71, internal_epoch   1,  Average loss: 0.0337, Accuracy: 576/1166 (49.3997%)
___Train Local_ResNet_18,  epoch 202, local model 71, internal_epoch   2,  Average loss: 0.0183, Accuracy: 784/1166 (67.2384%)
___Test Local_ResNet_18 poisoned: False, epoch: 202: Average loss: 3.9195, Accuracy: 2190/10000 (21.9000%)
time spent on training: 170.1760401725769
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 202: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 202: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 222.76645803451538 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:203 choose agents : [17, 33, 77, 11, 92, 23, 26, 50, 14, 76]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   1,  Average loss: 0.0689, Accuracy: 245/526 (46.5779%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   2,  Average loss: 0.0308, Accuracy: 340/526 (64.6388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   3,  Average loss: 0.0192, Accuracy: 393/526 (74.7148%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   4,  Average loss: 0.0138, Accuracy: 427/526 (81.1787%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   5,  Average loss: 0.0095, Accuracy: 451/526 (85.7414%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 17, internal_epoch   6,  Average loss: 0.0052, Accuracy: 501/526 (95.2471%), train_poison_data_count: 45
Global model norm: 46.932631238829984.
Norm before scaling: 47.39012270999886. Distance: 11.816183494801209
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.0950, Accuracy: 3890/10000 (38.9000%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.4214, Accuracy: 7484/9000 (83.1556%)
Scaling by  100
Scaled Norm after poisoning: 1178.4640957619372, distance: 1181.618381712133
Total norm for 4 adversaries is: 1178.4640957619372. distance: 1181.618381712133
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   1,  Average loss: 0.0800, Accuracy: 187/527 (35.4839%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   2,  Average loss: 0.0355, Accuracy: 305/527 (57.8748%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   3,  Average loss: 0.0217, Accuracy: 381/527 (72.2960%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   4,  Average loss: 0.0145, Accuracy: 410/527 (77.7989%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   5,  Average loss: 0.0083, Accuracy: 460/527 (87.2865%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 33, internal_epoch   6,  Average loss: 0.0057, Accuracy: 483/527 (91.6509%), train_poison_data_count: 45
Global model norm: 46.932631238829984.
Norm before scaling: 47.46317445860001. Distance: 12.520160134360864
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.3661, Accuracy: 3618/10000 (36.1800%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.4154, Accuracy: 7640/9000 (84.8889%)
Scaling by  100
Scaled Norm after poisoning: 1248.6310003359679, distance: 1252.0160242584757
Total norm for 4 adversaries is: 1248.6310003359679. distance: 1252.0160242584757
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   1,  Average loss: 0.0826, Accuracy: 169/496 (34.0726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   2,  Average loss: 0.0331, Accuracy: 276/496 (55.6452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   3,  Average loss: 0.0189, Accuracy: 325/496 (65.5242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   4,  Average loss: 0.0132, Accuracy: 370/496 (74.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   5,  Average loss: 0.0081, Accuracy: 426/496 (85.8871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 77, internal_epoch   6,  Average loss: 0.0050, Accuracy: 469/496 (94.5565%), train_poison_data_count: 40
Global model norm: 46.932631238829984.
Norm before scaling: 47.330967230602575. Distance: 11.462947697772812
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.0410, Accuracy: 3499/10000 (34.9900%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.1821, Accuracy: 8473/9000 (94.1444%)
Scaling by  100
Scaled Norm after poisoning: 1143.1575788140497, distance: 1146.2947919274518
Total norm for 4 adversaries is: 1143.1575788140497. distance: 1146.2947919274518
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   1,  Average loss: 0.0572, Accuracy: 252/546 (46.1538%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   2,  Average loss: 0.0281, Accuracy: 324/546 (59.3407%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   3,  Average loss: 0.0164, Accuracy: 394/546 (72.1612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   4,  Average loss: 0.0079, Accuracy: 480/546 (87.9121%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   5,  Average loss: 0.0055, Accuracy: 500/546 (91.5751%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 203, local model 11, internal_epoch   6,  Average loss: 0.0033, Accuracy: 523/546 (95.7875%), train_poison_data_count: 45
Global model norm: 46.932631238829984.
Norm before scaling: 47.572346734506645. Distance: 11.531961889441503
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 2.2251, Accuracy: 3970/10000 (39.7000%)
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: 0.2679, Accuracy: 8259/9000 (91.7667%)
Scaling by  100
Scaled Norm after poisoning: 1151.004506941654, distance: 1153.1962647355392
Total norm for 4 adversaries is: 1151.004506941654. distance: 1153.1962647355392
___Test Local_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   1,  Average loss: 0.0360, Accuracy: 391/796 (49.1206%)
___Train Local_ResNet_18,  epoch 203, local model 92, internal_epoch   2,  Average loss: 0.0168, Accuracy: 528/796 (66.3317%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 4.9719, Accuracy: 2374/10000 (23.7400%)
___Train Local_ResNet_18,  epoch 203, local model 23, internal_epoch   1,  Average loss: 0.0733, Accuracy: 85/248 (34.2742%)
___Train Local_ResNet_18,  epoch 203, local model 23, internal_epoch   2,  Average loss: 0.0289, Accuracy: 159/248 (64.1129%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 26, internal_epoch   1,  Average loss: 0.0963, Accuracy: 98/468 (20.9402%)
___Train Local_ResNet_18,  epoch 203, local model 26, internal_epoch   2,  Average loss: 0.0343, Accuracy: 160/468 (34.1880%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: 3.0386, Accuracy: 1070/10000 (10.7000%)
___Train Local_ResNet_18,  epoch 203, local model 50, internal_epoch   1,  Average loss: 0.0526, Accuracy: 188/401 (46.8828%)
___Train Local_ResNet_18,  epoch 203, local model 50, internal_epoch   2,  Average loss: 0.0247, Accuracy: 254/401 (63.3416%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 14, internal_epoch   1,  Average loss: 0.1206, Accuracy: 59/318 (18.5535%)
___Train Local_ResNet_18,  epoch 203, local model 14, internal_epoch   2,  Average loss: 0.0373, Accuracy: 137/318 (43.0818%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 203, local model 76, internal_epoch   1,  Average loss: 0.1969, Accuracy: 8/65 (12.3077%)
___Train Local_ResNet_18,  epoch 203, local model 76, internal_epoch   2,  Average loss: 0.1027, Accuracy: 31/65 (47.6923%)
___Test Local_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 173.37698006629944
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 203: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 203: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 215.28235244750977 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:204 choose agents : [17, 33, 77, 11, 49, 86, 26, 58, 6, 94]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   1,  Average loss: 0.1070, Accuracy: 46/526 (8.7452%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   2,  Average loss: 0.0327, Accuracy: 175/526 (33.2700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   3,  Average loss: 0.0272, Accuracy: 263/526 (50.0000%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   4,  Average loss: 0.0239, Accuracy: 285/526 (54.1825%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   5,  Average loss: 0.0233, Accuracy: 300/526 (57.0342%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 17, internal_epoch   6,  Average loss: 0.0231, Accuracy: 293/526 (55.7034%), train_poison_data_count: 45
Global model norm: 55.50321992348732.
Norm before scaling: 55.747403071522086. Distance: 13.811112416162393
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.8991, Accuracy: 1669/10000 (16.6900%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.5757, Accuracy: 7430/9000 (82.5556%)
Scaling by  100
Scaled Norm after poisoning: 1376.296070981822, distance: 1381.1112826271458
Total norm for 4 adversaries is: 1376.296070981822. distance: 1381.1112826271458
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   1,  Average loss: 0.0893, Accuracy: 69/527 (13.0930%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   2,  Average loss: 0.0324, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   3,  Average loss: 0.0309, Accuracy: 198/527 (37.5712%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   4,  Average loss: 0.0287, Accuracy: 185/527 (35.1044%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   5,  Average loss: 0.0271, Accuracy: 216/527 (40.9867%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 33, internal_epoch   6,  Average loss: 0.0253, Accuracy: 226/527 (42.8843%), train_poison_data_count: 45
Global model norm: 55.50321992348732.
Norm before scaling: 55.74140514955534. Distance: 13.247891240286249
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 3.0066, Accuracy: 1309/10000 (13.0900%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.5157, Accuracy: 7675/9000 (85.2778%)
Scaling by  100
Scaled Norm after poisoning: 1320.3202263087542, distance: 1324.7890869870569
Total norm for 4 adversaries is: 1320.3202263087542. distance: 1324.7890869870569
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   1,  Average loss: 0.0918, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   2,  Average loss: 0.0335, Accuracy: 122/496 (24.5968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   3,  Average loss: 0.0313, Accuracy: 146/496 (29.4355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   4,  Average loss: 0.0303, Accuracy: 177/496 (35.6855%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   5,  Average loss: 0.0294, Accuracy: 204/496 (41.1290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 77, internal_epoch   6,  Average loss: 0.0286, Accuracy: 201/496 (40.5242%), train_poison_data_count: 40
Global model norm: 55.50321992348732.
Norm before scaling: 55.874910427081446. Distance: 13.433628393928867
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.5207, Accuracy: 1663/10000 (16.6300%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.1884, Accuracy: 8360/9000 (92.8889%)
Scaling by  100
Scaled Norm after poisoning: 1339.3273498290102, distance: 1343.3629442559445
Total norm for 4 adversaries is: 1339.3273498290102. distance: 1343.3629442559445
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   1,  Average loss: 0.0921, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   2,  Average loss: 0.0347, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   3,  Average loss: 0.0318, Accuracy: 185/546 (33.8828%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   4,  Average loss: 0.0306, Accuracy: 183/546 (33.5165%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   5,  Average loss: 0.0304, Accuracy: 180/546 (32.9670%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 204, local model 11, internal_epoch   6,  Average loss: 0.0293, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Global model norm: 55.50321992348732.
Norm before scaling: 55.719153111273144. Distance: 13.499556922705834
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: 2.6662, Accuracy: 1021/10000 (10.2100%)
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: 0.2933, Accuracy: 8242/9000 (91.5778%)
Scaling by  100
Scaled Norm after poisoning: 1345.2280940420476, distance: 1349.9556011217553
Total norm for 4 adversaries is: 1345.2280940420476. distance: 1349.9556011217553
___Test Local_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 204, local model 49, internal_epoch   1,  Average loss: 0.1584, Accuracy: 27/426 (6.3380%)
___Train Local_ResNet_18,  epoch 204, local model 49, internal_epoch   2,  Average loss: 0.0284, Accuracy: 162/426 (38.0282%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 86, internal_epoch   1,  Average loss: 0.2297, Accuracy: 13/212 (6.1321%)
___Train Local_ResNet_18,  epoch 204, local model 86, internal_epoch   2,  Average loss: 0.0433, Accuracy: 68/212 (32.0755%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 26, internal_epoch   1,  Average loss: 0.1064, Accuracy: 159/468 (33.9744%)
___Train Local_ResNet_18,  epoch 204, local model 26, internal_epoch   2,  Average loss: 0.0374, Accuracy: 101/468 (21.5812%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 58, internal_epoch   1,  Average loss: 0.2287, Accuracy: 45/234 (19.2308%)
___Train Local_ResNet_18,  epoch 204, local model 58, internal_epoch   2,  Average loss: 0.0490, Accuracy: 37/234 (15.8120%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 6, internal_epoch   1,  Average loss: 0.1069, Accuracy: 151/520 (29.0385%)
___Train Local_ResNet_18,  epoch 204, local model 6, internal_epoch   2,  Average loss: 0.0373, Accuracy: 84/520 (16.1538%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 204, local model 94, internal_epoch   1,  Average loss: 0.2287, Accuracy: 24/203 (11.8227%)
___Train Local_ResNet_18,  epoch 204, local model 94, internal_epoch   2,  Average loss: 0.0541, Accuracy: 75/203 (36.9458%)
___Test Local_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 163.88183283805847
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 204: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 204: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.20479917526245 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:205 choose agents : [17, 33, 77, 11, 61, 71, 8, 69, 89, 64]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   1,  Average loss: 0.0751, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   2,  Average loss: 0.0388, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   3,  Average loss: 0.0323, Accuracy: 190/526 (36.1217%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   4,  Average loss: 0.0310, Accuracy: 190/526 (36.1217%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   5,  Average loss: 0.0304, Accuracy: 178/526 (33.8403%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 17, internal_epoch   6,  Average loss: 0.0288, Accuracy: 229/526 (43.5361%), train_poison_data_count: 45
Global model norm: 69.13686607013656.
Norm before scaling: 68.44451662090069. Distance: 8.120593005545762
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.7923, Accuracy: 1263/10000 (12.6300%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.0245, Accuracy: 8925/9000 (99.1667%)
Scaling by  100
Scaled Norm after poisoning: 805.0468154088928, distance: 812.0593420434247
Total norm for 4 adversaries is: 805.0468154088928. distance: 812.0593420434247
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   1,  Average loss: 0.0864, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   2,  Average loss: 0.0419, Accuracy: 139/527 (26.3757%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   3,  Average loss: 0.0327, Accuracy: 188/527 (35.6736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   4,  Average loss: 0.0340, Accuracy: 176/527 (33.3966%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   5,  Average loss: 0.0309, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 33, internal_epoch   6,  Average loss: 0.0319, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Global model norm: 69.13686607013656.
Norm before scaling: 68.46797979941061. Distance: 8.748462650939468
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.6447, Accuracy: 1013/10000 (10.1300%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.9391, Accuracy: 7997/9000 (88.8556%)
Scaling by  100
Scaled Norm after poisoning: 867.9160025601556, distance: 874.8462722101524
Total norm for 4 adversaries is: 867.9160025601556. distance: 874.8462722101524
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   1,  Average loss: 0.0972, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   2,  Average loss: 0.0525, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   3,  Average loss: 0.0449, Accuracy: 150/496 (30.2419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   4,  Average loss: 0.0437, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   5,  Average loss: 0.0402, Accuracy: 151/496 (30.4435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 77, internal_epoch   6,  Average loss: 0.0336, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Global model norm: 69.13686607013656.
Norm before scaling: 68.36915465759212. Distance: 9.205969689809297
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 2.6239, Accuracy: 1276/10000 (12.7600%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 0.0019, Accuracy: 8999/9000 (99.9889%)
Scaling by  100
Scaled Norm after poisoning: 912.8237439396502, distance: 920.5969870144047
Total norm for 4 adversaries is: 912.8237439396502. distance: 920.5969870144047
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   1,  Average loss: 0.0709, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   2,  Average loss: 0.0332, Accuracy: 165/546 (30.2198%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   3,  Average loss: 0.0319, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   4,  Average loss: 0.0318, Accuracy: 193/546 (35.3480%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   5,  Average loss: 0.0309, Accuracy: 200/546 (36.6300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 205, local model 11, internal_epoch   6,  Average loss: 0.0316, Accuracy: 195/546 (35.7143%), train_poison_data_count: 45
Global model norm: 69.13686607013656.
Norm before scaling: 68.42913404916615. Distance: 7.62135227689709
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: 3.5820, Accuracy: 1207/10000 (12.0700%)
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: 1.1548, Accuracy: 8015/9000 (89.0556%)
Scaling by  100
Scaled Norm after poisoning: 755.0400651621078, distance: 762.1352816265627
Total norm for 4 adversaries is: 755.0400651621078. distance: 762.1352816265627
___Test Local_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 205, local model 61, internal_epoch   1,  Average loss: 0.0844, Accuracy: 155/590 (26.2712%)
___Train Local_ResNet_18,  epoch 205, local model 61, internal_epoch   2,  Average loss: 0.0574, Accuracy: 249/590 (42.2034%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 71, internal_epoch   1,  Average loss: 0.0456, Accuracy: 359/1166 (30.7890%)
___Train Local_ResNet_18,  epoch 205, local model 71, internal_epoch   2,  Average loss: 0.0324, Accuracy: 423/1166 (36.2779%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 8, internal_epoch   1,  Average loss: 0.1134, Accuracy: 19/534 (3.5581%)
___Train Local_ResNet_18,  epoch 205, local model 8, internal_epoch   2,  Average loss: 0.0756, Accuracy: 92/534 (17.2285%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 69, internal_epoch   1,  Average loss: 0.0611, Accuracy: 35/216 (16.2037%)
___Train Local_ResNet_18,  epoch 205, local model 69, internal_epoch   2,  Average loss: 0.0359, Accuracy: 117/216 (54.1667%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 89, internal_epoch   1,  Average loss: 0.1128, Accuracy: 14/413 (3.3898%)
___Train Local_ResNet_18,  epoch 205, local model 89, internal_epoch   2,  Average loss: 0.0728, Accuracy: 151/413 (36.5617%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 205, local model 64, internal_epoch   1,  Average loss: 0.0691, Accuracy: 147/686 (21.4286%)
___Train Local_ResNet_18,  epoch 205, local model 64, internal_epoch   2,  Average loss: 0.0474, Accuracy: 246/686 (35.8601%)
___Test Local_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 165.7776963710785
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 205: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 205: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 218.42225074768066 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:206 choose agents : [17, 33, 77, 11, 38, 64, 29, 23, 83, 43]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   1,  Average loss: 0.1627, Accuracy: 95/526 (18.0608%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   2,  Average loss: 0.0387, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   3,  Average loss: 0.0382, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   4,  Average loss: 0.0365, Accuracy: 192/526 (36.5019%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   5,  Average loss: 0.0332, Accuracy: 172/526 (32.6996%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 17, internal_epoch   6,  Average loss: 0.0296, Accuracy: 208/526 (39.5437%), train_poison_data_count: 45
Global model norm: 71.23342049426309.
Norm before scaling: 71.21729992490413. Distance: 17.107732155715986
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1703.620189478864, distance: 1710.7730708659171
Total norm for 4 adversaries is: 1703.620189478864. distance: 1710.7730708659171
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   1,  Average loss: 0.1418, Accuracy: 137/527 (25.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   2,  Average loss: 0.0384, Accuracy: 133/527 (25.2372%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   3,  Average loss: 0.0352, Accuracy: 175/527 (33.2068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   4,  Average loss: 0.0320, Accuracy: 190/527 (36.0531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   5,  Average loss: 0.0331, Accuracy: 200/527 (37.9507%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 33, internal_epoch   6,  Average loss: 0.0310, Accuracy: 196/527 (37.1917%), train_poison_data_count: 45
Global model norm: 71.23342049426309.
Norm before scaling: 71.07520018987812. Distance: 15.70643816105457
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 3.3793, Accuracy: 1010/10000 (10.1000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: 1.4748, Accuracy: 7344/9000 (81.6000%)
Scaling by  100
Scaled Norm after poisoning: 1563.673639222712, distance: 1570.6438966232924
Total norm for 4 adversaries is: 1563.673639222712. distance: 1570.6438966232924
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   1,  Average loss: 0.1569, Accuracy: 111/496 (22.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   2,  Average loss: 0.0493, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   3,  Average loss: 0.0412, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   4,  Average loss: 0.0336, Accuracy: 120/496 (24.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   5,  Average loss: 0.0318, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 77, internal_epoch   6,  Average loss: 0.0320, Accuracy: 146/496 (29.4355%), train_poison_data_count: 40
Global model norm: 71.23342049426309.
Norm before scaling: 71.18244467344108. Distance: 16.865521969355946
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1679.3934917106235, distance: 1686.552326493311
Total norm for 4 adversaries is: 1679.3934917106235. distance: 1686.552326493311
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   1,  Average loss: 0.1526, Accuracy: 94/546 (17.2161%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   2,  Average loss: 0.0361, Accuracy: 190/546 (34.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   3,  Average loss: 0.0350, Accuracy: 206/546 (37.7289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   4,  Average loss: 0.0335, Accuracy: 200/546 (36.6300%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   5,  Average loss: 0.0321, Accuracy: 206/546 (37.7289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 206, local model 11, internal_epoch   6,  Average loss: 0.0319, Accuracy: 197/546 (36.0806%), train_poison_data_count: 45
Global model norm: 71.23342049426309.
Norm before scaling: 71.32642556847357. Distance: 17.999908447032794
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: 3.0517, Accuracy: 1275/10000 (12.7500%)
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: 1.8013, Accuracy: 6816/9000 (75.7333%)
Scaling by  100
Scaled Norm after poisoning: 1792.754166080782, distance: 1799.990902754789
Total norm for 4 adversaries is: 1792.754166080782. distance: 1799.990902754789
___Test Local_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 206, local model 38, internal_epoch   1,  Average loss: 0.1667, Accuracy: 128/756 (16.9312%)
___Train Local_ResNet_18,  epoch 206, local model 38, internal_epoch   2,  Average loss: 0.0290, Accuracy: 279/756 (36.9048%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 64, internal_epoch   1,  Average loss: 0.1950, Accuracy: 141/686 (20.5539%)
___Train Local_ResNet_18,  epoch 206, local model 64, internal_epoch   2,  Average loss: 0.0484, Accuracy: 217/686 (31.6327%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 29, internal_epoch   1,  Average loss: 0.1530, Accuracy: 213/848 (25.1179%)
___Train Local_ResNet_18,  epoch 206, local model 29, internal_epoch   2,  Average loss: 0.0353, Accuracy: 321/848 (37.8538%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 23, internal_epoch   1,  Average loss: 0.3836, Accuracy: 25/248 (10.0806%)
___Train Local_ResNet_18,  epoch 206, local model 23, internal_epoch   2,  Average loss: 0.0714, Accuracy: 93/248 (37.5000%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 83, internal_epoch   1,  Average loss: 0.3046, Accuracy: 54/366 (14.7541%)
___Train Local_ResNet_18,  epoch 206, local model 83, internal_epoch   2,  Average loss: 0.0602, Accuracy: 51/366 (13.9344%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 206, local model 43, internal_epoch   1,  Average loss: 0.3288, Accuracy: 41/345 (11.8841%)
___Train Local_ResNet_18,  epoch 206, local model 43, internal_epoch   2,  Average loss: 0.0357, Accuracy: 125/345 (36.2319%)
___Test Local_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.23751068115234
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 206: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 206: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.38163042068481 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:207 choose agents : [17, 33, 77, 11, 56, 45, 1, 50, 16, 12]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   1,  Average loss: 0.0630, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   2,  Average loss: 0.0502, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   3,  Average loss: 0.0468, Accuracy: 140/526 (26.6160%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   4,  Average loss: 0.0431, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   5,  Average loss: 0.0414, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 17, internal_epoch   6,  Average loss: 0.0385, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Global model norm: 89.77397562333279.
Norm before scaling: 88.69868399795315. Distance: 7.843595343657082
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 773.2631343857018, distance: 784.3594520371383
Total norm for 4 adversaries is: 773.2631343857018. distance: 784.3594520371383
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   1,  Average loss: 0.0759, Accuracy: 79/527 (14.9905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   2,  Average loss: 0.0434, Accuracy: 104/527 (19.7343%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   3,  Average loss: 0.0376, Accuracy: 182/527 (34.5351%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   4,  Average loss: 0.0332, Accuracy: 192/527 (36.4326%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   5,  Average loss: 0.0304, Accuracy: 202/527 (38.3302%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 33, internal_epoch   6,  Average loss: 0.0302, Accuracy: 203/527 (38.5199%), train_poison_data_count: 45
Global model norm: 89.77397562333279.
Norm before scaling: 88.76393211508405. Distance: 7.821122682963915
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 771.7569241671888, distance: 782.1122841382816
Total norm for 4 adversaries is: 771.7569241671888. distance: 782.1122841382816
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   1,  Average loss: 0.0835, Accuracy: 28/496 (5.6452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   2,  Average loss: 0.0575, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   3,  Average loss: 0.0509, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   4,  Average loss: 0.0475, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   5,  Average loss: 0.0407, Accuracy: 135/496 (27.2177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 77, internal_epoch   6,  Average loss: 0.0336, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Global model norm: 89.77397562333279.
Norm before scaling: 88.79104739587348. Distance: 8.689289594789058
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 859.0661717818948, distance: 868.9289384063578
Total norm for 4 adversaries is: 859.0661717818948. distance: 868.9289384063578
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   1,  Average loss: 0.0665, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   2,  Average loss: 0.0385, Accuracy: 111/546 (20.3297%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   3,  Average loss: 0.0334, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   4,  Average loss: 0.0334, Accuracy: 188/546 (34.4322%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   5,  Average loss: 0.0317, Accuracy: 187/546 (34.2491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 207, local model 11, internal_epoch   6,  Average loss: 0.0314, Accuracy: 189/546 (34.6154%), train_poison_data_count: 45
Global model norm: 89.77397562333279.
Norm before scaling: 88.817307773633. Distance: 7.997538187806901
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 790.0532418767738, distance: 799.7537902379706
Total norm for 4 adversaries is: 790.0532418767738. distance: 799.7537902379706
___Test Local_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 207, local model 56, internal_epoch   1,  Average loss: 0.0528, Accuracy: 155/743 (20.8614%)
___Train Local_ResNet_18,  epoch 207, local model 56, internal_epoch   2,  Average loss: 0.0381, Accuracy: 195/743 (26.2450%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 45, internal_epoch   1,  Average loss: 0.0644, Accuracy: 22/529 (4.1588%)
___Train Local_ResNet_18,  epoch 207, local model 45, internal_epoch   2,  Average loss: 0.0370, Accuracy: 170/529 (32.1361%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 1, internal_epoch   1,  Average loss: 0.0657, Accuracy: 84/641 (13.1045%)
___Train Local_ResNet_18,  epoch 207, local model 1, internal_epoch   2,  Average loss: 0.0496, Accuracy: 220/641 (34.3214%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 50, internal_epoch   1,  Average loss: 0.0507, Accuracy: 149/401 (37.1571%)
___Train Local_ResNet_18,  epoch 207, local model 50, internal_epoch   2,  Average loss: 0.0381, Accuracy: 178/401 (44.3890%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 16, internal_epoch   1,  Average loss: 0.0639, Accuracy: 107/773 (13.8422%)
___Train Local_ResNet_18,  epoch 207, local model 16, internal_epoch   2,  Average loss: 0.0399, Accuracy: 286/773 (36.9987%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 207, local model 12, internal_epoch   1,  Average loss: 0.0568, Accuracy: 205/977 (20.9826%)
___Train Local_ResNet_18,  epoch 207, local model 12, internal_epoch   2,  Average loss: 0.0383, Accuracy: 403/977 (41.2487%)
___Test Local_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 188.56053185462952
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 207: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 207: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 242.02598810195923 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:208 choose agents : [17, 33, 77, 11, 44, 86, 20, 50, 49, 43]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   1,  Average loss: 0.2127, Accuracy: 48/526 (9.1255%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   2,  Average loss: 0.0977, Accuracy: 59/526 (11.2167%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   3,  Average loss: 0.0814, Accuracy: 56/526 (10.6464%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   4,  Average loss: 0.0625, Accuracy: 46/526 (8.7452%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   5,  Average loss: 0.0516, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 17, internal_epoch   6,  Average loss: 0.0398, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Global model norm: 87.98053595558082.
Norm before scaling: 86.62203503223068. Distance: 16.438799556517957
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1630.7479878877668, distance: 1643.8800138696254
Total norm for 4 adversaries is: 1630.7479878877668. distance: 1643.8800138696254
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   1,  Average loss: 0.1582, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   2,  Average loss: 0.0654, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   3,  Average loss: 0.0601, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   4,  Average loss: 0.0527, Accuracy: 152/527 (28.8425%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   5,  Average loss: 0.0497, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 33, internal_epoch   6,  Average loss: 0.0439, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Global model norm: 87.98053595558082.
Norm before scaling: 86.70773297135182. Distance: 14.123606385205541
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1400.114638163604, distance: 1412.3606568437115
Total norm for 4 adversaries is: 1400.114638163604. distance: 1412.3606568437115
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   1,  Average loss: 0.1647, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   2,  Average loss: 0.0659, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   3,  Average loss: 0.0561, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   4,  Average loss: 0.0468, Accuracy: 129/496 (26.0081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   5,  Average loss: 0.0416, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 77, internal_epoch   6,  Average loss: 0.0376, Accuracy: 140/496 (28.2258%), train_poison_data_count: 40
Global model norm: 87.98053595558082.
Norm before scaling: 86.91426158685064. Distance: 13.708578523029669
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1359.9818473053233, distance: 1370.8578518577337
Total norm for 4 adversaries is: 1359.9818473053233. distance: 1370.8578518577337
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   1,  Average loss: 0.1556, Accuracy: 63/546 (11.5385%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   2,  Average loss: 0.0632, Accuracy: 121/546 (22.1612%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   3,  Average loss: 0.0587, Accuracy: 150/546 (27.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   4,  Average loss: 0.0529, Accuracy: 152/546 (27.8388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   5,  Average loss: 0.0501, Accuracy: 161/546 (29.4872%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 208, local model 11, internal_epoch   6,  Average loss: 0.0448, Accuracy: 163/546 (29.8535%), train_poison_data_count: 45
Global model norm: 87.98053595558082.
Norm before scaling: 86.715802314767. Distance: 14.158866859399007
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1403.6858177669246, distance: 1415.8866921473625
Total norm for 4 adversaries is: 1403.6858177669246. distance: 1415.8866921473625
___Test Local_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 208, local model 44, internal_epoch   1,  Average loss: 0.1369, Accuracy: 39/436 (8.9450%)
___Train Local_ResNet_18,  epoch 208, local model 44, internal_epoch   2,  Average loss: 0.0540, Accuracy: 84/436 (19.2661%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 86, internal_epoch   1,  Average loss: 0.2599, Accuracy: 10/212 (4.7170%)
___Train Local_ResNet_18,  epoch 208, local model 86, internal_epoch   2,  Average loss: 0.0883, Accuracy: 32/212 (15.0943%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 20, internal_epoch   1,  Average loss: 0.1323, Accuracy: 99/362 (27.3481%)
___Train Local_ResNet_18,  epoch 208, local model 20, internal_epoch   2,  Average loss: 0.0401, Accuracy: 190/362 (52.4862%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   1,  Average loss: 0.2201, Accuracy: 42/401 (10.4738%)
___Train Local_ResNet_18,  epoch 208, local model 50, internal_epoch   2,  Average loss: 0.0806, Accuracy: 33/401 (8.2294%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 49, internal_epoch   1,  Average loss: 0.1415, Accuracy: 34/426 (7.9812%)
___Train Local_ResNet_18,  epoch 208, local model 49, internal_epoch   2,  Average loss: 0.0486, Accuracy: 90/426 (21.1268%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 208, local model 43, internal_epoch   1,  Average loss: 0.1784, Accuracy: 6/345 (1.7391%)
___Train Local_ResNet_18,  epoch 208, local model 43, internal_epoch   2,  Average loss: 0.0564, Accuracy: 82/345 (23.7681%)
___Test Local_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 171.15645742416382
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 208: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 208: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 212.49198484420776 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:209 choose agents : [17, 33, 77, 11, 28, 51, 4, 97, 85, 59]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   1,  Average loss: 0.1083, Accuracy: 128/526 (24.3346%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   2,  Average loss: 0.0581, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   3,  Average loss: 0.0510, Accuracy: 125/526 (23.7643%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   4,  Average loss: 0.0520, Accuracy: 134/526 (25.4753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   5,  Average loss: 0.0439, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 17, internal_epoch   6,  Average loss: 0.0435, Accuracy: 152/526 (28.8973%), train_poison_data_count: 45
Global model norm: 96.37416402847549.
Norm before scaling: 94.90638376678093. Distance: 9.073018881874951
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 892.287474696356, distance: 907.3018723115257
Total norm for 4 adversaries is: 892.287474696356. distance: 907.3018723115257
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   1,  Average loss: 0.1699, Accuracy: 70/527 (13.2827%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   2,  Average loss: 0.1118, Accuracy: 33/527 (6.2619%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   3,  Average loss: 0.0871, Accuracy: 29/527 (5.5028%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   4,  Average loss: 0.0696, Accuracy: 58/527 (11.0057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   5,  Average loss: 0.0550, Accuracy: 73/527 (13.8520%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 33, internal_epoch   6,  Average loss: 0.0448, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Global model norm: 96.37416402847549.
Norm before scaling: 94.76694274640288. Distance: 14.265074135380111
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1411.7866782910228, distance: 1426.5074482805899
Total norm for 4 adversaries is: 1411.7866782910228. distance: 1426.5074482805899
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   1,  Average loss: 0.1357, Accuracy: 26/496 (5.2419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   2,  Average loss: 0.0804, Accuracy: 58/496 (11.6935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   3,  Average loss: 0.0671, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   4,  Average loss: 0.0579, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   5,  Average loss: 0.0502, Accuracy: 81/496 (16.3306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 77, internal_epoch   6,  Average loss: 0.0459, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Global model norm: 96.37416402847549.
Norm before scaling: 95.06427718588618. Distance: 11.826036881196917
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1169.9476484014147, distance: 1182.6036952419859
Total norm for 4 adversaries is: 1169.9476484014147. distance: 1182.6036952419859
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   1,  Average loss: 0.1409, Accuracy: 68/546 (12.4542%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   2,  Average loss: 0.0879, Accuracy: 56/546 (10.2564%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   3,  Average loss: 0.0732, Accuracy: 63/546 (11.5385%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   4,  Average loss: 0.0605, Accuracy: 74/546 (13.5531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   5,  Average loss: 0.0506, Accuracy: 82/546 (15.0183%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 209, local model 11, internal_epoch   6,  Average loss: 0.0440, Accuracy: 75/546 (13.7363%), train_poison_data_count: 45
Global model norm: 96.37416402847549.
Norm before scaling: 94.84630865576689. Distance: 12.661064983970357
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1251.8256667763287, distance: 1266.1065318526717
Total norm for 4 adversaries is: 1251.8256667763287. distance: 1266.1065318526717
___Test Local_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 209, local model 28, internal_epoch   1,  Average loss: 0.1459, Accuracy: 16/423 (3.7825%)
___Train Local_ResNet_18,  epoch 209, local model 28, internal_epoch   2,  Average loss: 0.0871, Accuracy: 53/423 (12.5296%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 51, internal_epoch   1,  Average loss: 0.0939, Accuracy: 24/479 (5.0104%)
___Train Local_ResNet_18,  epoch 209, local model 51, internal_epoch   2,  Average loss: 0.0376, Accuracy: 289/479 (60.3340%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 4, internal_epoch   1,  Average loss: 0.1305, Accuracy: 38/557 (6.8223%)
___Train Local_ResNet_18,  epoch 209, local model 4, internal_epoch   2,  Average loss: 0.0674, Accuracy: 46/557 (8.2585%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 97, internal_epoch   1,  Average loss: 0.0678, Accuracy: 155/418 (37.0813%)
___Train Local_ResNet_18,  epoch 209, local model 97, internal_epoch   2,  Average loss: 0.0429, Accuracy: 105/418 (25.1196%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 85, internal_epoch   1,  Average loss: 0.1690, Accuracy: 20/364 (5.4945%)
___Train Local_ResNet_18,  epoch 209, local model 85, internal_epoch   2,  Average loss: 0.1080, Accuracy: 31/364 (8.5165%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 209, local model 59, internal_epoch   1,  Average loss: 0.1103, Accuracy: 84/642 (13.0841%)
___Train Local_ResNet_18,  epoch 209, local model 59, internal_epoch   2,  Average loss: 0.0580, Accuracy: 135/642 (21.0280%)
___Test Local_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.2785141468048
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 209: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 209: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 210.36875438690186 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:210 choose agents : [17, 33, 77, 11, 51, 13, 57, 76, 80, 85]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   1,  Average loss: 0.1918, Accuracy: 42/526 (7.9848%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   2,  Average loss: 0.1661, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   3,  Average loss: 0.1379, Accuracy: 55/526 (10.4563%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   4,  Average loss: 0.1114, Accuracy: 55/526 (10.4563%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   5,  Average loss: 0.0556, Accuracy: 107/526 (20.3422%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 17, internal_epoch   6,  Average loss: 0.0406, Accuracy: 85/526 (16.1597%), train_poison_data_count: 45
Global model norm: 98.21011933127104.
Norm before scaling: 96.03028900430321. Distance: 10.897160543469855
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1069.0698644148567, distance: 1089.71601805241
Total norm for 4 adversaries is: 1069.0698644148567. distance: 1089.71601805241
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   1,  Average loss: 0.0892, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   2,  Average loss: 0.0771, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   3,  Average loss: 0.0725, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   4,  Average loss: 0.0702, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   5,  Average loss: 0.0652, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 33, internal_epoch   6,  Average loss: 0.0582, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 98.21011933127104.
Norm before scaling: 96.48085140327069. Distance: 6.155948224876756
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 592.5751270936032, distance: 615.5948089043636
Total norm for 4 adversaries is: 592.5751270936032. distance: 615.5948089043636
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   1,  Average loss: 0.1072, Accuracy: 66/496 (13.3065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   2,  Average loss: 0.0930, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   3,  Average loss: 0.0831, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   4,  Average loss: 0.0703, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   5,  Average loss: 0.0618, Accuracy: 128/496 (25.8065%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 77, internal_epoch   6,  Average loss: 0.0520, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 98.21011933127104.
Norm before scaling: 96.65980130074756. Distance: 7.786066609781419
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 761.3148166166214, distance: 778.606688257942
Total norm for 4 adversaries is: 761.3148166166214. distance: 778.606688257942
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   1,  Average loss: 0.1029, Accuracy: 59/546 (10.8059%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   2,  Average loss: 0.0905, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   3,  Average loss: 0.0823, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   4,  Average loss: 0.0735, Accuracy: 160/546 (29.3040%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   5,  Average loss: 0.0705, Accuracy: 158/546 (28.9377%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 210, local model 11, internal_epoch   6,  Average loss: 0.0648, Accuracy: 161/546 (29.4872%), train_poison_data_count: 45
Global model norm: 98.21011933127104.
Norm before scaling: 96.35906462776349. Distance: 7.313954005000022
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 709.3794383121067, distance: 731.3954128923697
Total norm for 4 adversaries is: 709.3794383121067. distance: 731.3954128923697
___Test Local_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 210, local model 51, internal_epoch   1,  Average loss: 0.0927, Accuracy: 18/479 (3.7578%)
___Train Local_ResNet_18,  epoch 210, local model 51, internal_epoch   2,  Average loss: 0.0470, Accuracy: 137/479 (28.6013%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 13, internal_epoch   1,  Average loss: 0.1656, Accuracy: 100/620 (16.1290%)
___Train Local_ResNet_18,  epoch 210, local model 13, internal_epoch   2,  Average loss: 0.0859, Accuracy: 186/620 (30.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 57, internal_epoch   1,  Average loss: 0.0949, Accuracy: 9/290 (3.1034%)
___Train Local_ResNet_18,  epoch 210, local model 57, internal_epoch   2,  Average loss: 0.0814, Accuracy: 49/290 (16.8966%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 76, internal_epoch   1,  Average loss: 0.2538, Accuracy: 1/65 (1.5385%)
___Train Local_ResNet_18,  epoch 210, local model 76, internal_epoch   2,  Average loss: 0.3564, Accuracy: 1/65 (1.5385%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 80, internal_epoch   1,  Average loss: 0.2351, Accuracy: 4/363 (1.1019%)
___Train Local_ResNet_18,  epoch 210, local model 80, internal_epoch   2,  Average loss: 0.1917, Accuracy: 4/363 (1.1019%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 210, local model 85, internal_epoch   1,  Average loss: 0.0713, Accuracy: 94/364 (25.8242%)
___Train Local_ResNet_18,  epoch 210, local model 85, internal_epoch   2,  Average loss: 0.0641, Accuracy: 104/364 (28.5714%)
___Test Local_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.16125011444092
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 210: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 210: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.74926614761353 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:211 choose agents : [17, 33, 77, 11, 90, 24, 63, 1, 52, 31]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   1,  Average loss: 0.1759, Accuracy: 120/526 (22.8137%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   2,  Average loss: 0.0772, Accuracy: 67/526 (12.7376%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   3,  Average loss: 0.0491, Accuracy: 122/526 (23.1939%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   4,  Average loss: 0.0411, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   5,  Average loss: 0.0382, Accuracy: 154/526 (29.2776%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 17, internal_epoch   6,  Average loss: 0.0345, Accuracy: 162/526 (30.7985%), train_poison_data_count: 45
Global model norm: 94.008378325086.
Norm before scaling: 92.44907276272434. Distance: 12.202447889545372
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1205.765472635537, distance: 1220.2448012591572
Total norm for 4 adversaries is: 1205.765472635537. distance: 1220.2448012591572
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   1,  Average loss: 0.3281, Accuracy: 32/527 (6.0721%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   2,  Average loss: 0.0779, Accuracy: 121/527 (22.9602%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   3,  Average loss: 0.0441, Accuracy: 82/527 (15.5598%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   4,  Average loss: 0.0389, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   5,  Average loss: 0.0354, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 33, internal_epoch   6,  Average loss: 0.0327, Accuracy: 145/527 (27.5142%), train_poison_data_count: 45
Global model norm: 94.008378325086.
Norm before scaling: 92.82115910785105. Distance: 19.197394289584345
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1906.620701660401, distance: 1919.7394354443002
Total norm for 4 adversaries is: 1906.620701660401. distance: 1919.7394354443002
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   1,  Average loss: 0.2803, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   2,  Average loss: 0.0842, Accuracy: 73/496 (14.7177%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   3,  Average loss: 0.0479, Accuracy: 126/496 (25.4032%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   4,  Average loss: 0.0385, Accuracy: 117/496 (23.5887%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   5,  Average loss: 0.0339, Accuracy: 119/496 (23.9919%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 77, internal_epoch   6,  Average loss: 0.0323, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Global model norm: 94.008378325086.
Norm before scaling: 92.78083424460571. Distance: 16.583262892274757
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1645.7379803601787, distance: 1658.3262646415512
Total norm for 4 adversaries is: 1645.7379803601787. distance: 1658.3262646415512
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   1,  Average loss: 0.3049, Accuracy: 62/546 (11.3553%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   2,  Average loss: 0.0757, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   3,  Average loss: 0.0404, Accuracy: 101/546 (18.4982%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   4,  Average loss: 0.0374, Accuracy: 79/546 (14.4689%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   5,  Average loss: 0.0351, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 211, local model 11, internal_epoch   6,  Average loss: 0.0339, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Global model norm: 94.008378325086.
Norm before scaling: 92.7025021574391. Distance: 18.126246758035794
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1799.224068869689, distance: 1812.624685366499
Total norm for 4 adversaries is: 1799.224068869689. distance: 1812.624685366499
___Test Local_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 211, local model 90, internal_epoch   1,  Average loss: 0.1153, Accuracy: 249/578 (43.0796%)
___Train Local_ResNet_18,  epoch 211, local model 90, internal_epoch   2,  Average loss: 0.0332, Accuracy: 260/578 (44.9827%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   1,  Average loss: 0.2558, Accuracy: 54/320 (16.8750%)
___Train Local_ResNet_18,  epoch 211, local model 24, internal_epoch   2,  Average loss: 0.0889, Accuracy: 65/320 (20.3125%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 63, internal_epoch   1,  Average loss: 0.1683, Accuracy: 102/752 (13.5638%)
___Train Local_ResNet_18,  epoch 211, local model 63, internal_epoch   2,  Average loss: 0.0417, Accuracy: 149/752 (19.8138%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 1, internal_epoch   1,  Average loss: 0.1724, Accuracy: 150/641 (23.4009%)
___Train Local_ResNet_18,  epoch 211, local model 1, internal_epoch   2,  Average loss: 0.0406, Accuracy: 231/641 (36.0374%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 52, internal_epoch   1,  Average loss: 0.3875, Accuracy: 45/214 (21.0280%)
___Train Local_ResNet_18,  epoch 211, local model 52, internal_epoch   2,  Average loss: 0.1118, Accuracy: 24/214 (11.2150%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 211, local model 31, internal_epoch   1,  Average loss: 0.1645, Accuracy: 163/706 (23.0878%)
___Train Local_ResNet_18,  epoch 211, local model 31, internal_epoch   2,  Average loss: 0.0387, Accuracy: 204/706 (28.8952%)
___Test Local_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.69323420524597
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 211: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 211: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 223.4740378856659 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:212 choose agents : [17, 33, 77, 11, 59, 67, 71, 66, 76, 96]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   1,  Average loss: 0.1398, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   2,  Average loss: 0.0442, Accuracy: 50/526 (9.5057%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   3,  Average loss: 0.0385, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   4,  Average loss: 0.0358, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   5,  Average loss: 0.0338, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 17, internal_epoch   6,  Average loss: 0.0334, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Global model norm: 104.10151764773893.
Norm before scaling: 103.20922223661749. Distance: 14.704113982745717
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1460.420230618571, distance: 1470.411422017661
Total norm for 4 adversaries is: 1460.420230618571. distance: 1470.411422017661
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   1,  Average loss: 0.1054, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   2,  Average loss: 0.0415, Accuracy: 63/527 (11.9545%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   3,  Average loss: 0.0355, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   4,  Average loss: 0.0345, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   5,  Average loss: 0.0333, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 33, internal_epoch   6,  Average loss: 0.0332, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Global model norm: 104.10151764773893.
Norm before scaling: 102.92598220323185. Distance: 10.529420959839706
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1041.2014694572804, distance: 1052.9421280393335
Total norm for 4 adversaries is: 1041.2014694572804. distance: 1052.9421280393335
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   1,  Average loss: 0.1399, Accuracy: 79/496 (15.9274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   2,  Average loss: 0.0451, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   3,  Average loss: 0.0362, Accuracy: 120/496 (24.1935%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   4,  Average loss: 0.0338, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   5,  Average loss: 0.0328, Accuracy: 125/496 (25.2016%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 77, internal_epoch   6,  Average loss: 0.0315, Accuracy: 134/496 (27.0161%), train_poison_data_count: 40
Global model norm: 104.10151764773893.
Norm before scaling: 103.23964271598871. Distance: 13.242920333704486
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1314.9824143310814, distance: 1324.2920278397812
Total norm for 4 adversaries is: 1314.9824143310814. distance: 1324.2920278397812
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   1,  Average loss: 0.1154, Accuracy: 70/546 (12.8205%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   2,  Average loss: 0.0383, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   3,  Average loss: 0.0345, Accuracy: 171/546 (31.3187%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   4,  Average loss: 0.0338, Accuracy: 163/546 (29.8535%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   5,  Average loss: 0.0327, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 212, local model 11, internal_epoch   6,  Average loss: 0.0327, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Global model norm: 104.10151764773893.
Norm before scaling: 103.08082387136804. Distance: 12.674756796044143
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1257.027992926172, distance: 1267.475542170341
Total norm for 4 adversaries is: 1257.027992926172. distance: 1267.475542170341
___Test Local_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 212, local model 59, internal_epoch   1,  Average loss: 0.1125, Accuracy: 43/642 (6.6978%)
___Train Local_ResNet_18,  epoch 212, local model 59, internal_epoch   2,  Average loss: 0.0342, Accuracy: 170/642 (26.4798%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 67, internal_epoch   1,  Average loss: 0.0716, Accuracy: 98/842 (11.6390%)
___Train Local_ResNet_18,  epoch 212, local model 67, internal_epoch   2,  Average loss: 0.0321, Accuracy: 215/842 (25.5344%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 71, internal_epoch   1,  Average loss: 0.0651, Accuracy: 224/1166 (19.2110%)
___Train Local_ResNet_18,  epoch 212, local model 71, internal_epoch   2,  Average loss: 0.0285, Accuracy: 375/1166 (32.1612%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 66, internal_epoch   1,  Average loss: 0.1061, Accuracy: 26/555 (4.6847%)
___Train Local_ResNet_18,  epoch 212, local model 66, internal_epoch   2,  Average loss: 0.0322, Accuracy: 270/555 (48.6486%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 76, internal_epoch   1,  Average loss: 0.4572, Accuracy: 1/65 (1.5385%)
___Train Local_ResNet_18,  epoch 212, local model 76, internal_epoch   2,  Average loss: 0.2023, Accuracy: 2/65 (3.0769%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 212, local model 96, internal_epoch   1,  Average loss: 0.1050, Accuracy: 96/708 (13.5593%)
___Train Local_ResNet_18,  epoch 212, local model 96, internal_epoch   2,  Average loss: 0.0338, Accuracy: 235/708 (33.1921%)
___Test Local_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.541198015213
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 212: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 212: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 220.80618834495544 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:213 choose agents : [17, 33, 77, 11, 80, 81, 22, 72, 64, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   1,  Average loss: 0.0615, Accuracy: 113/526 (21.4829%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   2,  Average loss: 0.0418, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   3,  Average loss: 0.0381, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   4,  Average loss: 0.0369, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   5,  Average loss: 0.0347, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 17, internal_epoch   6,  Average loss: 0.0332, Accuracy: 176/526 (33.4601%), train_poison_data_count: 45
Global model norm: 109.26306325647062.
Norm before scaling: 107.94693611041029. Distance: 6.363372970678745
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 619.860115267953, distance: 636.3372729928682
Total norm for 4 adversaries is: 619.860115267953. distance: 636.3372729928682
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   1,  Average loss: 0.0801, Accuracy: 20/527 (3.7951%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   2,  Average loss: 0.0495, Accuracy: 120/527 (22.7704%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   3,  Average loss: 0.0401, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   4,  Average loss: 0.0361, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   5,  Average loss: 0.0340, Accuracy: 121/527 (22.9602%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 33, internal_epoch   6,  Average loss: 0.0327, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Global model norm: 109.26306325647062.
Norm before scaling: 107.94908920122948. Distance: 7.899114110021739
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 775.3177977448989, distance: 789.911387435325
Total norm for 4 adversaries is: 775.3177977448989. distance: 789.911387435325
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   1,  Average loss: 0.0695, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   2,  Average loss: 0.0504, Accuracy: 42/496 (8.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   3,  Average loss: 0.0417, Accuracy: 59/496 (11.8952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   4,  Average loss: 0.0354, Accuracy: 121/496 (24.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   5,  Average loss: 0.0334, Accuracy: 146/496 (29.4355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 77, internal_epoch   6,  Average loss: 0.0320, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 109.26306325647062.
Norm before scaling: 108.09152299671793. Distance: 6.337152968917891
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 619.7205519425671, distance: 633.7153097014462
Total norm for 4 adversaries is: 619.7205519425671. distance: 633.7153097014462
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   1,  Average loss: 0.0776, Accuracy: 32/546 (5.8608%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   2,  Average loss: 0.0479, Accuracy: 48/546 (8.7912%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   3,  Average loss: 0.0387, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   4,  Average loss: 0.0357, Accuracy: 168/546 (30.7692%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   5,  Average loss: 0.0340, Accuracy: 170/546 (31.1355%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 213, local model 11, internal_epoch   6,  Average loss: 0.0332, Accuracy: 178/546 (32.6007%), train_poison_data_count: 45
Global model norm: 109.26306325647062.
Norm before scaling: 107.95071756072305. Distance: 7.554420884643888
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 740.55262304579, distance: 755.4420891107405
Total norm for 4 adversaries is: 740.55262304579. distance: 755.4420891107405
___Test Local_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 213, local model 80, internal_epoch   1,  Average loss: 0.0453, Accuracy: 136/363 (37.4656%)
___Train Local_ResNet_18,  epoch 213, local model 80, internal_epoch   2,  Average loss: 0.0277, Accuracy: 182/363 (50.1377%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 81, internal_epoch   1,  Average loss: 0.0357, Accuracy: 391/1034 (37.8143%)
___Train Local_ResNet_18,  epoch 213, local model 81, internal_epoch   2,  Average loss: 0.0258, Accuracy: 510/1034 (49.3230%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 22, internal_epoch   1,  Average loss: 0.0686, Accuracy: 25/494 (5.0607%)
___Train Local_ResNet_18,  epoch 213, local model 22, internal_epoch   2,  Average loss: 0.0385, Accuracy: 135/494 (27.3279%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 72, internal_epoch   1,  Average loss: 0.0631, Accuracy: 112/618 (18.1230%)
___Train Local_ResNet_18,  epoch 213, local model 72, internal_epoch   2,  Average loss: 0.0266, Accuracy: 281/618 (45.4693%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 64, internal_epoch   1,  Average loss: 0.0540, Accuracy: 193/686 (28.1341%)
___Train Local_ResNet_18,  epoch 213, local model 64, internal_epoch   2,  Average loss: 0.0348, Accuracy: 249/686 (36.2974%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 213, local model 45, internal_epoch   1,  Average loss: 0.0687, Accuracy: 50/529 (9.4518%)
___Train Local_ResNet_18,  epoch 213, local model 45, internal_epoch   2,  Average loss: 0.0363, Accuracy: 171/529 (32.3251%)
___Test Local_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 166.86563873291016
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 213: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 213: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 222.32753157615662 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:214 choose agents : [17, 33, 77, 11, 80, 54, 44, 35, 68, 25]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   1,  Average loss: 0.1266, Accuracy: 32/526 (6.0837%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   2,  Average loss: 0.0717, Accuracy: 78/526 (14.8289%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   3,  Average loss: 0.0443, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   4,  Average loss: 0.0355, Accuracy: 141/526 (26.8061%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   5,  Average loss: 0.0354, Accuracy: 95/526 (18.0608%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 17, internal_epoch   6,  Average loss: 0.0335, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Global model norm: 106.57573231627357.
Norm before scaling: 105.31462349491166. Distance: 10.263861610698685
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1013.6915519525651, distance: 1026.3861359157186
Total norm for 4 adversaries is: 1013.6915519525651. distance: 1026.3861359157186
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   1,  Average loss: 0.0825, Accuracy: 84/527 (15.9393%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   2,  Average loss: 0.0474, Accuracy: 108/527 (20.4934%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   3,  Average loss: 0.0380, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   4,  Average loss: 0.0362, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   5,  Average loss: 0.0355, Accuracy: 149/527 (28.2732%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 33, internal_epoch   6,  Average loss: 0.0344, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Global model norm: 106.57573231627357.
Norm before scaling: 105.31779474820483. Distance: 7.633123854160184
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 749.3482167857611, distance: 763.3123541513003
Total norm for 4 adversaries is: 749.3482167857611. distance: 763.3123541513003
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   1,  Average loss: 0.0967, Accuracy: 52/496 (10.4839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   2,  Average loss: 0.0667, Accuracy: 78/496 (15.7258%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   3,  Average loss: 0.0505, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   4,  Average loss: 0.0390, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   5,  Average loss: 0.0365, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 77, internal_epoch   6,  Average loss: 0.0348, Accuracy: 136/496 (27.4194%), train_poison_data_count: 40
Global model norm: 106.57573231627357.
Norm before scaling: 105.41439803224226. Distance: 8.84613371626691
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 872.6137103552751, distance: 884.6134042619974
Total norm for 4 adversaries is: 872.6137103552751. distance: 884.6134042619974
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   1,  Average loss: 0.0842, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   2,  Average loss: 0.0563, Accuracy: 136/546 (24.9084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   3,  Average loss: 0.0451, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   4,  Average loss: 0.0398, Accuracy: 130/546 (23.8095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   5,  Average loss: 0.0371, Accuracy: 172/546 (31.5018%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 214, local model 11, internal_epoch   6,  Average loss: 0.0348, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Global model norm: 106.57573231627357.
Norm before scaling: 105.2452029043367. Distance: 8.010743080370698
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 786.433563627596, distance: 801.0742787032923
Total norm for 4 adversaries is: 786.433563627596. distance: 801.0742787032923
___Test Local_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 214, local model 80, internal_epoch   1,  Average loss: 0.1526, Accuracy: 8/363 (2.2039%)
___Train Local_ResNet_18,  epoch 214, local model 80, internal_epoch   2,  Average loss: 0.0654, Accuracy: 70/363 (19.2837%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 54, internal_epoch   1,  Average loss: 0.1165, Accuracy: 108/440 (24.5455%)
___Train Local_ResNet_18,  epoch 214, local model 54, internal_epoch   2,  Average loss: 0.0546, Accuracy: 134/440 (30.4545%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 44, internal_epoch   1,  Average loss: 0.0998, Accuracy: 45/436 (10.3211%)
___Train Local_ResNet_18,  epoch 214, local model 44, internal_epoch   2,  Average loss: 0.0530, Accuracy: 104/436 (23.8532%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 35, internal_epoch   1,  Average loss: 0.1140, Accuracy: 15/419 (3.5800%)
___Train Local_ResNet_18,  epoch 214, local model 35, internal_epoch   2,  Average loss: 0.0516, Accuracy: 101/419 (24.1050%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 68, internal_epoch   1,  Average loss: 0.0872, Accuracy: 53/416 (12.7404%)
___Train Local_ResNet_18,  epoch 214, local model 68, internal_epoch   2,  Average loss: 0.0532, Accuracy: 87/416 (20.9135%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 214, local model 25, internal_epoch   1,  Average loss: 0.0800, Accuracy: 186/545 (34.1284%)
___Train Local_ResNet_18,  epoch 214, local model 25, internal_epoch   2,  Average loss: 0.0435, Accuracy: 224/545 (41.1009%)
___Test Local_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 163.72944808006287
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 214: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 214: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 207.17460751533508 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:215 choose agents : [17, 33, 77, 11, 4, 79, 43, 63, 35, 49]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   1,  Average loss: 0.1427, Accuracy: 81/526 (15.3992%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   2,  Average loss: 0.0703, Accuracy: 51/526 (9.6958%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   3,  Average loss: 0.0475, Accuracy: 150/526 (28.5171%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   4,  Average loss: 0.0416, Accuracy: 173/526 (32.8897%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   5,  Average loss: 0.0372, Accuracy: 156/526 (29.6578%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 17, internal_epoch   6,  Average loss: 0.0360, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Global model norm: 105.38637523863082.
Norm before scaling: 103.89053452582915. Distance: 11.199974904713445
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1105.28373054162, distance: 1119.9974330327727
Total norm for 4 adversaries is: 1105.28373054162. distance: 1119.9974330327727
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   1,  Average loss: 0.1886, Accuracy: 55/527 (10.4364%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   2,  Average loss: 0.0714, Accuracy: 81/527 (15.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   3,  Average loss: 0.0574, Accuracy: 157/527 (29.7913%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   4,  Average loss: 0.0483, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   5,  Average loss: 0.0435, Accuracy: 149/527 (28.2732%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 33, internal_epoch   6,  Average loss: 0.0386, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Global model norm: 105.38637523863082.
Norm before scaling: 104.0602008004261. Distance: 15.746720229877932
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1561.4499671779433, distance: 1574.671949962912
Total norm for 4 adversaries is: 1561.4499671779433. distance: 1574.671949962912
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   1,  Average loss: 0.1837, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   2,  Average loss: 0.0706, Accuracy: 39/496 (7.8629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   3,  Average loss: 0.0595, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   4,  Average loss: 0.0514, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   5,  Average loss: 0.0446, Accuracy: 89/496 (17.9435%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 77, internal_epoch   6,  Average loss: 0.0387, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Global model norm: 105.38637523863082.
Norm before scaling: 104.11013830764755. Distance: 14.240706776427478
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1411.4061693927797, distance: 1424.0707496469408
Total norm for 4 adversaries is: 1411.4061693927797. distance: 1424.0707496469408
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   1,  Average loss: 0.1909, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   2,  Average loss: 0.0753, Accuracy: 78/546 (14.2857%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   3,  Average loss: 0.0647, Accuracy: 99/546 (18.1319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   4,  Average loss: 0.0541, Accuracy: 106/546 (19.4139%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   5,  Average loss: 0.0432, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 215, local model 11, internal_epoch   6,  Average loss: 0.0383, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Global model norm: 105.38637523863082.
Norm before scaling: 103.96010822215653. Distance: 15.672513695858587
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1553.3712531136914, distance: 1567.251335938177
Total norm for 4 adversaries is: 1553.3712531136914. distance: 1567.251335938177
___Test Local_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 215, local model 4, internal_epoch   1,  Average loss: 0.1937, Accuracy: 30/557 (5.3860%)
___Train Local_ResNet_18,  epoch 215, local model 4, internal_epoch   2,  Average loss: 0.0680, Accuracy: 30/557 (5.3860%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 79, internal_epoch   1,  Average loss: 0.3229, Accuracy: 11/154 (7.1429%)
___Train Local_ResNet_18,  epoch 215, local model 79, internal_epoch   2,  Average loss: 0.1153, Accuracy: 20/154 (12.9870%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 43, internal_epoch   1,  Average loss: 0.2077, Accuracy: 39/345 (11.3043%)
___Train Local_ResNet_18,  epoch 215, local model 43, internal_epoch   2,  Average loss: 0.0854, Accuracy: 22/345 (6.3768%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   1,  Average loss: 0.1245, Accuracy: 97/752 (12.8989%)
___Train Local_ResNet_18,  epoch 215, local model 63, internal_epoch   2,  Average loss: 0.0523, Accuracy: 133/752 (17.6862%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 35, internal_epoch   1,  Average loss: 0.1204, Accuracy: 106/419 (25.2983%)
___Train Local_ResNet_18,  epoch 215, local model 35, internal_epoch   2,  Average loss: 0.0409, Accuracy: 108/419 (25.7757%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 215, local model 49, internal_epoch   1,  Average loss: 0.1024, Accuracy: 104/426 (24.4131%)
___Train Local_ResNet_18,  epoch 215, local model 49, internal_epoch   2,  Average loss: 0.0588, Accuracy: 128/426 (30.0469%)
___Test Local_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 179.03130507469177
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 215: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 215: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 218.78395891189575 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:216 choose agents : [17, 33, 77, 11, 8, 12, 18, 94, 57, 83]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   1,  Average loss: 0.1128, Accuracy: 16/526 (3.0418%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   2,  Average loss: 0.0881, Accuracy: 32/526 (6.0837%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   3,  Average loss: 0.0675, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   4,  Average loss: 0.0523, Accuracy: 119/526 (22.6236%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   5,  Average loss: 0.0435, Accuracy: 163/526 (30.9886%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 17, internal_epoch   6,  Average loss: 0.0417, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Global model norm: 110.38092778532894.
Norm before scaling: 108.75505106804235. Distance: 10.066582461714408
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 989.839507192959, distance: 1006.6582712122322
Total norm for 4 adversaries is: 989.839507192959. distance: 1006.6582712122322
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   1,  Average loss: 0.0916, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   2,  Average loss: 0.0755, Accuracy: 102/527 (19.3548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   3,  Average loss: 0.0600, Accuracy: 90/527 (17.0778%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   4,  Average loss: 0.0487, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   5,  Average loss: 0.0381, Accuracy: 147/527 (27.8937%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 33, internal_epoch   6,  Average loss: 0.0385, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 110.38092778532894.
Norm before scaling: 108.8080394691725. Distance: 9.255851338293093
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 908.7623107831882, distance: 925.5850852298777
Total norm for 4 adversaries is: 908.7623107831882. distance: 925.5850852298777
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   1,  Average loss: 0.0909, Accuracy: 31/496 (6.2500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   2,  Average loss: 0.0769, Accuracy: 112/496 (22.5806%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   3,  Average loss: 0.0651, Accuracy: 111/496 (22.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   4,  Average loss: 0.0551, Accuracy: 111/496 (22.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   5,  Average loss: 0.0480, Accuracy: 121/496 (24.3952%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 77, internal_epoch   6,  Average loss: 0.0409, Accuracy: 131/496 (26.4113%), train_poison_data_count: 40
Global model norm: 110.38092778532894.
Norm before scaling: 108.94315192595862. Distance: 9.2055403902733
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 905.315276574962, distance: 920.5540451271723
Total norm for 4 adversaries is: 905.315276574962. distance: 920.5540451271723
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   1,  Average loss: 0.0987, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   2,  Average loss: 0.0820, Accuracy: 142/546 (26.0073%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   3,  Average loss: 0.0682, Accuracy: 148/546 (27.1062%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   4,  Average loss: 0.0582, Accuracy: 140/546 (25.6410%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   5,  Average loss: 0.0479, Accuracy: 158/546 (28.9377%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 216, local model 11, internal_epoch   6,  Average loss: 0.0421, Accuracy: 159/546 (29.1209%), train_poison_data_count: 45
Global model norm: 110.38092778532894.
Norm before scaling: 108.67146050424186. Distance: 9.188204991287147
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 900.2924177732477, distance: 918.8205074986082
Total norm for 4 adversaries is: 900.2924177732477. distance: 918.8205074986082
___Test Local_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 216, local model 8, internal_epoch   1,  Average loss: 0.0783, Accuracy: 79/534 (14.7940%)
___Train Local_ResNet_18,  epoch 216, local model 8, internal_epoch   2,  Average loss: 0.0618, Accuracy: 166/534 (31.0861%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 12, internal_epoch   1,  Average loss: 0.0988, Accuracy: 33/977 (3.3777%)
___Train Local_ResNet_18,  epoch 216, local model 12, internal_epoch   2,  Average loss: 0.0380, Accuracy: 374/977 (38.2805%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 18, internal_epoch   1,  Average loss: 0.1289, Accuracy: 100/386 (25.9067%)
___Train Local_ResNet_18,  epoch 216, local model 18, internal_epoch   2,  Average loss: 0.1112, Accuracy: 102/386 (26.4249%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 94, internal_epoch   1,  Average loss: 0.1385, Accuracy: 2/203 (0.9852%)
___Train Local_ResNet_18,  epoch 216, local model 94, internal_epoch   2,  Average loss: 0.1193, Accuracy: 5/203 (2.4631%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 57, internal_epoch   1,  Average loss: 0.0665, Accuracy: 23/290 (7.9310%)
___Train Local_ResNet_18,  epoch 216, local model 57, internal_epoch   2,  Average loss: 0.0649, Accuracy: 89/290 (30.6897%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 216, local model 83, internal_epoch   1,  Average loss: 0.1167, Accuracy: 35/366 (9.5628%)
___Train Local_ResNet_18,  epoch 216, local model 83, internal_epoch   2,  Average loss: 0.1010, Accuracy: 46/366 (12.5683%)
___Test Local_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 172.45196652412415
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 216: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 216: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 224.5402798652649 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:217 choose agents : [17, 33, 77, 11, 37, 22, 38, 65, 29, 18]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   1,  Average loss: 0.1155, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   2,  Average loss: 0.0796, Accuracy: 101/526 (19.2015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   3,  Average loss: 0.0721, Accuracy: 159/526 (30.2281%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   4,  Average loss: 0.0663, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   5,  Average loss: 0.0602, Accuracy: 185/526 (35.1711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 17, internal_epoch   6,  Average loss: 0.0557, Accuracy: 201/526 (38.2129%), train_poison_data_count: 45
Global model norm: 107.5448852514614.
Norm before scaling: 105.75880023962544. Distance: 7.790869469752819
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 757.8751133927015, distance: 779.0869656206552
Total norm for 4 adversaries is: 757.8751133927015. distance: 779.0869656206552
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   1,  Average loss: 0.1701, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   2,  Average loss: 0.1308, Accuracy: 165/527 (31.3093%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   3,  Average loss: 0.1162, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   4,  Average loss: 0.1080, Accuracy: 154/527 (29.2220%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   5,  Average loss: 0.0967, Accuracy: 174/527 (33.0171%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 33, internal_epoch   6,  Average loss: 0.0863, Accuracy: 178/527 (33.7761%), train_poison_data_count: 45
Global model norm: 107.5448852514614.
Norm before scaling: 105.21841123349088. Distance: 10.420664841424692
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1018.3862233946412, distance: 1042.0665165909516
Total norm for 4 adversaries is: 1018.3862233946412. distance: 1042.0665165909516
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   1,  Average loss: 0.1690, Accuracy: 76/496 (15.3226%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   2,  Average loss: 0.1315, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   3,  Average loss: 0.1165, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   4,  Average loss: 0.1022, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   5,  Average loss: 0.0882, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 77, internal_epoch   6,  Average loss: 0.0626, Accuracy: 63/496 (12.7016%), train_poison_data_count: 40
Global model norm: 107.5448852514614.
Norm before scaling: 105.59091073424597. Distance: 10.622861400120584
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1042.634643583264, distance: 1062.2862137860964
Total norm for 4 adversaries is: 1042.634643583264. distance: 1062.2862137860964
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   1,  Average loss: 0.1823, Accuracy: 95/546 (17.3993%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   2,  Average loss: 0.1463, Accuracy: 74/546 (13.5531%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   3,  Average loss: 0.1245, Accuracy: 86/546 (15.7509%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   4,  Average loss: 0.1092, Accuracy: 115/546 (21.0623%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   5,  Average loss: 0.0892, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 217, local model 11, internal_epoch   6,  Average loss: 0.0610, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Global model norm: 107.5448852514614.
Norm before scaling: 105.21428097874832. Distance: 11.978352412317475
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1175.7726183237983, distance: 1197.8352349133831
Total norm for 4 adversaries is: 1175.7726183237983. distance: 1197.8352349133831
___Test Local_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 217, local model 37, internal_epoch   1,  Average loss: 0.1632, Accuracy: 134/725 (18.4828%)
___Train Local_ResNet_18,  epoch 217, local model 37, internal_epoch   2,  Average loss: 0.0629, Accuracy: 223/725 (30.7586%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 22, internal_epoch   1,  Average loss: 0.1697, Accuracy: 30/494 (6.0729%)
___Train Local_ResNet_18,  epoch 217, local model 22, internal_epoch   2,  Average loss: 0.1092, Accuracy: 127/494 (25.7085%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 38, internal_epoch   1,  Average loss: 0.1294, Accuracy: 100/756 (13.2275%)
___Train Local_ResNet_18,  epoch 217, local model 38, internal_epoch   2,  Average loss: 0.0894, Accuracy: 282/756 (37.3016%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 65, internal_epoch   1,  Average loss: 0.1289, Accuracy: 32/314 (10.1911%)
___Train Local_ResNet_18,  epoch 217, local model 65, internal_epoch   2,  Average loss: 0.0841, Accuracy: 63/314 (20.0637%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 29, internal_epoch   1,  Average loss: 0.0727, Accuracy: 220/848 (25.9434%)
___Train Local_ResNet_18,  epoch 217, local model 29, internal_epoch   2,  Average loss: 0.0395, Accuracy: 498/848 (58.7264%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 217, local model 18, internal_epoch   1,  Average loss: 0.1621, Accuracy: 64/386 (16.5803%)
___Train Local_ResNet_18,  epoch 217, local model 18, internal_epoch   2,  Average loss: 0.1106, Accuracy: 64/386 (16.5803%)
___Test Local_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.24072241783142
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 217: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 217: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 234.00848627090454 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:218 choose agents : [17, 33, 77, 11, 53, 15, 7, 29, 86, 60]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   1,  Average loss: 0.1146, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   2,  Average loss: 0.0604, Accuracy: 42/526 (7.9848%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   3,  Average loss: 0.0498, Accuracy: 92/526 (17.4905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   4,  Average loss: 0.0457, Accuracy: 152/526 (28.8973%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   5,  Average loss: 0.0430, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 17, internal_epoch   6,  Average loss: 0.0442, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Global model norm: 103.78270851128092.
Norm before scaling: 102.61714913636511. Distance: 11.556140037166118
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1144.0292828420083, distance: 1155.6140142798547
Total norm for 4 adversaries is: 1144.0292828420083. distance: 1155.6140142798547
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   1,  Average loss: 0.1318, Accuracy: 44/527 (8.3491%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   2,  Average loss: 0.0815, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   3,  Average loss: 0.0736, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   4,  Average loss: 0.0638, Accuracy: 109/527 (20.6831%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   5,  Average loss: 0.0569, Accuracy: 102/527 (19.3548%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 33, internal_epoch   6,  Average loss: 0.0491, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Global model norm: 103.78270851128092.
Norm before scaling: 102.37916372027318. Distance: 12.490434572525764
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1235.452751018832, distance: 1249.0434339925894
Total norm for 4 adversaries is: 1235.452751018832. distance: 1249.0434339925894
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   1,  Average loss: 0.0990, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   2,  Average loss: 0.0616, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   3,  Average loss: 0.0554, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   4,  Average loss: 0.0513, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   5,  Average loss: 0.0476, Accuracy: 111/496 (22.3790%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 77, internal_epoch   6,  Average loss: 0.0475, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Global model norm: 103.78270851128092.
Norm before scaling: 102.61857661079206. Distance: 9.578416530534778
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 946.059690241583, distance: 957.8417144810514
Total norm for 4 adversaries is: 946.059690241583. distance: 957.8417144810514
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   1,  Average loss: 0.0946, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   2,  Average loss: 0.0531, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   3,  Average loss: 0.0506, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   4,  Average loss: 0.0480, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   5,  Average loss: 0.0452, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 218, local model 11, internal_epoch   6,  Average loss: 0.0439, Accuracy: 148/546 (27.1062%), train_poison_data_count: 45
Global model norm: 103.78270851128092.
Norm before scaling: 102.48945734653638. Distance: 9.645484824644193
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 951.391053931032, distance: 964.5484046951714
Total norm for 4 adversaries is: 951.391053931032. distance: 964.5484046951714
___Test Local_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 218, local model 53, internal_epoch   1,  Average loss: 0.0622, Accuracy: 82/625 (13.1200%)
___Train Local_ResNet_18,  epoch 218, local model 53, internal_epoch   2,  Average loss: 0.0290, Accuracy: 190/625 (30.4000%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 15, internal_epoch   1,  Average loss: 0.1194, Accuracy: 17/341 (4.9853%)
___Train Local_ResNet_18,  epoch 218, local model 15, internal_epoch   2,  Average loss: 0.0504, Accuracy: 58/341 (17.0088%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 7, internal_epoch   1,  Average loss: 0.1057, Accuracy: 53/352 (15.0568%)
___Train Local_ResNet_18,  epoch 218, local model 7, internal_epoch   2,  Average loss: 0.0562, Accuracy: 53/352 (15.0568%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 29, internal_epoch   1,  Average loss: 0.0594, Accuracy: 160/848 (18.8679%)
___Train Local_ResNet_18,  epoch 218, local model 29, internal_epoch   2,  Average loss: 0.0255, Accuracy: 413/848 (48.7028%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 86, internal_epoch   1,  Average loss: 0.1288, Accuracy: 8/212 (3.7736%)
___Train Local_ResNet_18,  epoch 218, local model 86, internal_epoch   2,  Average loss: 0.0803, Accuracy: 13/212 (6.1321%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   1,  Average loss: 0.1060, Accuracy: 45/284 (15.8451%)
___Train Local_ResNet_18,  epoch 218, local model 60, internal_epoch   2,  Average loss: 0.0549, Accuracy: 59/284 (20.7746%)
___Test Local_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 183.12483406066895
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 218: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 218: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 226.46737146377563 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:219 choose agents : [17, 33, 77, 11, 81, 8, 28, 1, 93, 53]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   1,  Average loss: 0.0757, Accuracy: 58/526 (11.0266%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   2,  Average loss: 0.0610, Accuracy: 121/526 (23.0038%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   3,  Average loss: 0.0577, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   4,  Average loss: 0.0550, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   5,  Average loss: 0.0506, Accuracy: 162/526 (30.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 17, internal_epoch   6,  Average loss: 0.0475, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Global model norm: 104.84648841431219.
Norm before scaling: 103.27388873161502. Distance: 5.85935123693098
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 564.0483689365656, distance: 585.9350966617378
Total norm for 4 adversaries is: 564.0483689365656. distance: 585.9350966617378
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   1,  Average loss: 0.1014, Accuracy: 166/527 (31.4991%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   2,  Average loss: 0.0896, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   3,  Average loss: 0.0791, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   4,  Average loss: 0.0699, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   5,  Average loss: 0.0627, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 33, internal_epoch   6,  Average loss: 0.0535, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Global model norm: 104.84648841431219.
Norm before scaling: 103.07032167863599. Distance: 8.3731354872702
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 817.4022495075482, distance: 837.3135613376867
Total norm for 4 adversaries is: 817.4022495075482. distance: 837.3135613376867
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   1,  Average loss: 0.1022, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   2,  Average loss: 0.0880, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   3,  Average loss: 0.0762, Accuracy: 86/496 (17.3387%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   4,  Average loss: 0.0681, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   5,  Average loss: 0.0586, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 77, internal_epoch   6,  Average loss: 0.0518, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Global model norm: 104.84648841431219.
Norm before scaling: 103.30022991261926. Distance: 8.066280454527586
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 789.2720538572236, distance: 806.6280509007854
Total norm for 4 adversaries is: 789.2720538572236. distance: 806.6280509007854
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   1,  Average loss: 0.1124, Accuracy: 54/546 (9.8901%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   2,  Average loss: 0.0941, Accuracy: 65/546 (11.9048%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   3,  Average loss: 0.0793, Accuracy: 76/546 (13.9194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   4,  Average loss: 0.0674, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   5,  Average loss: 0.0573, Accuracy: 84/546 (15.3846%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 219, local model 11, internal_epoch   6,  Average loss: 0.0468, Accuracy: 93/546 (17.0330%), train_poison_data_count: 45
Global model norm: 104.84648841431219.
Norm before scaling: 103.09051033103144. Distance: 9.712901032758852
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 953.1264672119854, distance: 971.2901536101352
Total norm for 4 adversaries is: 953.1264672119854. distance: 971.2901536101352
___Test Local_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 219, local model 81, internal_epoch   1,  Average loss: 0.0426, Accuracy: 529/1034 (51.1605%)
___Train Local_ResNet_18,  epoch 219, local model 81, internal_epoch   2,  Average loss: 0.0301, Accuracy: 532/1034 (51.4507%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 8, internal_epoch   1,  Average loss: 0.1395, Accuracy: 57/534 (10.6742%)
___Train Local_ResNet_18,  epoch 219, local model 8, internal_epoch   2,  Average loss: 0.1039, Accuracy: 56/534 (10.4869%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 28, internal_epoch   1,  Average loss: 0.1004, Accuracy: 76/423 (17.9669%)
___Train Local_ResNet_18,  epoch 219, local model 28, internal_epoch   2,  Average loss: 0.0815, Accuracy: 77/423 (18.2033%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 1, internal_epoch   1,  Average loss: 0.1051, Accuracy: 82/641 (12.7925%)
___Train Local_ResNet_18,  epoch 219, local model 1, internal_epoch   2,  Average loss: 0.0677, Accuracy: 212/641 (33.0733%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 93, internal_epoch   1,  Average loss: 0.0858, Accuracy: 76/584 (13.0137%)
___Train Local_ResNet_18,  epoch 219, local model 93, internal_epoch   2,  Average loss: 0.0565, Accuracy: 194/584 (33.2192%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   1,  Average loss: 0.1046, Accuracy: 27/625 (4.3200%)
___Train Local_ResNet_18,  epoch 219, local model 53, internal_epoch   2,  Average loss: 0.0641, Accuracy: 206/625 (32.9600%)
___Test Local_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 188.42276287078857
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 219: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 219: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 242.35251188278198 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:220 choose agents : [17, 33, 77, 11, 12, 50, 10, 18, 39, 62]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   1,  Average loss: 0.1944, Accuracy: 23/526 (4.3726%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   2,  Average loss: 0.1426, Accuracy: 19/526 (3.6122%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   3,  Average loss: 0.1058, Accuracy: 29/526 (5.5133%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   4,  Average loss: 0.0745, Accuracy: 38/526 (7.2243%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   5,  Average loss: 0.0541, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 17, internal_epoch   6,  Average loss: 0.0440, Accuracy: 146/526 (27.7567%), train_poison_data_count: 45
Global model norm: 101.15066017919754.
Norm before scaling: 99.23755235229757. Distance: 13.377124653275
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1320.40699218082, distance: 1337.7124597610655
Total norm for 4 adversaries is: 1320.40699218082. distance: 1337.7124597610655
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   1,  Average loss: 0.1692, Accuracy: 61/527 (11.5750%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   2,  Average loss: 0.1290, Accuracy: 61/527 (11.5750%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   3,  Average loss: 0.1043, Accuracy: 100/527 (18.9753%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   4,  Average loss: 0.0818, Accuracy: 91/527 (17.2676%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   5,  Average loss: 0.0559, Accuracy: 52/527 (9.8672%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 33, internal_epoch   6,  Average loss: 0.0388, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Global model norm: 101.15066017919754.
Norm before scaling: 99.21968011375061. Distance: 11.623707032850874
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1144.1744840713761, distance: 1162.3707455024837
Total norm for 4 adversaries is: 1144.1744840713761. distance: 1162.3707455024837
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   1,  Average loss: 0.1273, Accuracy: 75/496 (15.1210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   2,  Average loss: 0.1046, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   3,  Average loss: 0.0869, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   4,  Average loss: 0.0715, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   5,  Average loss: 0.0619, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 77, internal_epoch   6,  Average loss: 0.0556, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Global model norm: 101.15066017919754.
Norm before scaling: 99.49519068150983. Distance: 9.609509177162826
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 944.037969310557, distance: 960.9509287679574
Total norm for 4 adversaries is: 944.037969310557. distance: 960.9509287679574
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   1,  Average loss: 0.1177, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   2,  Average loss: 0.0949, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   3,  Average loss: 0.0814, Accuracy: 148/546 (27.1062%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   4,  Average loss: 0.0696, Accuracy: 158/546 (28.9377%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   5,  Average loss: 0.0620, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 220, local model 11, internal_epoch   6,  Average loss: 0.0555, Accuracy: 160/546 (29.3040%), train_poison_data_count: 45
Global model norm: 101.15066017919754.
Norm before scaling: 99.29345612721666. Distance: 9.211680866817405
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 901.7039425443364, distance: 921.1680764116828
Total norm for 4 adversaries is: 901.7039425443364. distance: 921.1680764116828
___Test Local_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 220, local model 12, internal_epoch   1,  Average loss: 0.1670, Accuracy: 36/977 (3.6847%)
___Train Local_ResNet_18,  epoch 220, local model 12, internal_epoch   2,  Average loss: 0.0705, Accuracy: 125/977 (12.7943%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   1,  Average loss: 0.1800, Accuracy: 12/401 (2.9925%)
___Train Local_ResNet_18,  epoch 220, local model 50, internal_epoch   2,  Average loss: 0.1102, Accuracy: 16/401 (3.9900%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 10, internal_epoch   1,  Average loss: 0.0750, Accuracy: 136/752 (18.0851%)
___Train Local_ResNet_18,  epoch 220, local model 10, internal_epoch   2,  Average loss: 0.0328, Accuracy: 393/752 (52.2606%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 18, internal_epoch   1,  Average loss: 0.1524, Accuracy: 46/386 (11.9171%)
___Train Local_ResNet_18,  epoch 220, local model 18, internal_epoch   2,  Average loss: 0.1060, Accuracy: 88/386 (22.7979%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 39, internal_epoch   1,  Average loss: 0.1720, Accuracy: 14/217 (6.4516%)
___Train Local_ResNet_18,  epoch 220, local model 39, internal_epoch   2,  Average loss: 0.1249, Accuracy: 10/217 (4.6083%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 220, local model 62, internal_epoch   1,  Average loss: 0.1155, Accuracy: 35/358 (9.7765%)
___Train Local_ResNet_18,  epoch 220, local model 62, internal_epoch   2,  Average loss: 0.0849, Accuracy: 40/358 (11.1732%)
___Test Local_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 177.73983812332153
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 220: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 220: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 220.67835068702698 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:221 choose agents : [17, 33, 77, 11, 65, 87, 12, 74, 4, 7]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   1,  Average loss: 0.0686, Accuracy: 105/526 (19.9620%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   2,  Average loss: 0.0548, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   3,  Average loss: 0.0524, Accuracy: 156/526 (29.6578%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   4,  Average loss: 0.0490, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   5,  Average loss: 0.0485, Accuracy: 162/526 (30.7985%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 17, internal_epoch   6,  Average loss: 0.0498, Accuracy: 150/526 (28.5171%), train_poison_data_count: 45
Global model norm: 99.65460860203606.
Norm before scaling: 98.20263648446512. Distance: 5.580118117090676
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 538.0204457081534, distance: 558.0117886299536
Total norm for 4 adversaries is: 538.0204457081534. distance: 558.0117886299536
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   1,  Average loss: 0.1348, Accuracy: 141/527 (26.7552%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   2,  Average loss: 0.1184, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   3,  Average loss: 0.1009, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   4,  Average loss: 0.0938, Accuracy: 168/527 (31.8786%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   5,  Average loss: 0.0804, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 33, internal_epoch   6,  Average loss: 0.0738, Accuracy: 171/527 (32.4478%), train_poison_data_count: 45
Global model norm: 99.65460860203606.
Norm before scaling: 97.63470262283795. Distance: 9.056505206759315
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 884.3536128155977, distance: 905.6505948764126
Total norm for 4 adversaries is: 884.3536128155977. distance: 905.6505948764126
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   1,  Average loss: 0.1276, Accuracy: 87/496 (17.5403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   2,  Average loss: 0.1078, Accuracy: 61/496 (12.2984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   3,  Average loss: 0.0957, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   4,  Average loss: 0.0868, Accuracy: 118/496 (23.7903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   5,  Average loss: 0.0767, Accuracy: 123/496 (24.7984%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 77, internal_epoch   6,  Average loss: 0.0606, Accuracy: 133/496 (26.8145%), train_poison_data_count: 40
Global model norm: 99.65460860203606.
Norm before scaling: 97.99757351109515. Distance: 9.10860443782073
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 893.6158990304504, distance: 910.8604105459848
Total norm for 4 adversaries is: 893.6158990304504. distance: 910.8604105459848
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   1,  Average loss: 0.1531, Accuracy: 67/546 (12.2711%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   2,  Average loss: 0.1232, Accuracy: 73/546 (13.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   3,  Average loss: 0.1159, Accuracy: 78/546 (14.2857%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   4,  Average loss: 0.1014, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   5,  Average loss: 0.0905, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 221, local model 11, internal_epoch   6,  Average loss: 0.0694, Accuracy: 128/546 (23.4432%), train_poison_data_count: 45
Global model norm: 99.65460860203606.
Norm before scaling: 97.53862416050885. Distance: 10.811092218912034
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1060.8082413895547, distance: 1081.109210487081
Total norm for 4 adversaries is: 1060.8082413895547. distance: 1081.109210487081
___Test Local_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 221, local model 65, internal_epoch   1,  Average loss: 0.0986, Accuracy: 32/314 (10.1911%)
___Train Local_ResNet_18,  epoch 221, local model 65, internal_epoch   2,  Average loss: 0.0719, Accuracy: 52/314 (16.5605%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 87, internal_epoch   1,  Average loss: 0.1213, Accuracy: 32/397 (8.0605%)
___Train Local_ResNet_18,  epoch 221, local model 87, internal_epoch   2,  Average loss: 0.0800, Accuracy: 10/397 (2.5189%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 12, internal_epoch   1,  Average loss: 0.0456, Accuracy: 427/977 (43.7052%)
___Train Local_ResNet_18,  epoch 221, local model 12, internal_epoch   2,  Average loss: 0.0365, Accuracy: 451/977 (46.1617%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 74, internal_epoch   1,  Average loss: 0.1898, Accuracy: 9/469 (1.9190%)
___Train Local_ResNet_18,  epoch 221, local model 74, internal_epoch   2,  Average loss: 0.1401, Accuracy: 33/469 (7.0362%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 4, internal_epoch   1,  Average loss: 0.2167, Accuracy: 57/557 (10.2334%)
___Train Local_ResNet_18,  epoch 221, local model 4, internal_epoch   2,  Average loss: 0.1631, Accuracy: 59/557 (10.5925%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 221, local model 7, internal_epoch   1,  Average loss: 0.0905, Accuracy: 106/352 (30.1136%)
___Train Local_ResNet_18,  epoch 221, local model 7, internal_epoch   2,  Average loss: 0.0754, Accuracy: 135/352 (38.3523%)
___Test Local_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 174.56130003929138
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 221: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 221: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 220.9653561115265 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:222 choose agents : [17, 33, 77, 11, 35, 30, 72, 51, 63, 46]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   1,  Average loss: 0.2542, Accuracy: 38/526 (7.2243%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   2,  Average loss: 0.1133, Accuracy: 43/526 (8.1749%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   3,  Average loss: 0.0658, Accuracy: 69/526 (13.1179%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   4,  Average loss: 0.0521, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   5,  Average loss: 0.0428, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 17, internal_epoch   6,  Average loss: 0.0377, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Global model norm: 95.91218619621544.
Norm before scaling: 94.42412318397508. Distance: 16.281310917892274
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1614.0565355649721, distance: 1628.1311372245173
Total norm for 4 adversaries is: 1614.0565355649721. distance: 1628.1311372245173
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   1,  Average loss: 0.1979, Accuracy: 81/527 (15.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   2,  Average loss: 0.0816, Accuracy: 67/527 (12.7135%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   3,  Average loss: 0.0510, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   4,  Average loss: 0.0384, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   5,  Average loss: 0.0341, Accuracy: 116/527 (22.0114%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 33, internal_epoch   6,  Average loss: 0.0324, Accuracy: 154/527 (29.2220%), train_poison_data_count: 45
Global model norm: 95.91218619621544.
Norm before scaling: 94.5326084613135. Distance: 12.729876625919546
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1259.8485027970626, distance: 1272.9876275910933
Total norm for 4 adversaries is: 1259.8485027970626. distance: 1272.9876275910933
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   1,  Average loss: 0.1857, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   2,  Average loss: 0.0982, Accuracy: 96/496 (19.3548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   3,  Average loss: 0.0578, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   4,  Average loss: 0.0386, Accuracy: 166/496 (33.4677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   5,  Average loss: 0.0342, Accuracy: 139/496 (28.0242%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 77, internal_epoch   6,  Average loss: 0.0334, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Global model norm: 95.91218619621544.
Norm before scaling: 94.59403906463928. Distance: 13.053409899706882
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1292.6576306199565, distance: 1305.3409516291135
Total norm for 4 adversaries is: 1292.6576306199565. distance: 1305.3409516291135
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   1,  Average loss: 0.1761, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   2,  Average loss: 0.0758, Accuracy: 107/546 (19.5971%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   3,  Average loss: 0.0483, Accuracy: 155/546 (28.3883%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   4,  Average loss: 0.0374, Accuracy: 139/546 (25.4579%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   5,  Average loss: 0.0346, Accuracy: 132/546 (24.1758%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 222, local model 11, internal_epoch   6,  Average loss: 0.0328, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Global model norm: 95.91218619621544.
Norm before scaling: 94.49149473960607. Distance: 12.471655485610473
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1233.7002776201357, distance: 1247.165586439908
Total norm for 4 adversaries is: 1233.7002776201357. distance: 1247.165586439908
___Test Local_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 222, local model 35, internal_epoch   1,  Average loss: 0.1855, Accuracy: 48/419 (11.4558%)
___Train Local_ResNet_18,  epoch 222, local model 35, internal_epoch   2,  Average loss: 0.0651, Accuracy: 190/419 (45.3461%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 30, internal_epoch   1,  Average loss: 0.1496, Accuracy: 90/337 (26.7062%)
___Train Local_ResNet_18,  epoch 222, local model 30, internal_epoch   2,  Average loss: 0.0748, Accuracy: 105/337 (31.1573%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   1,  Average loss: 0.1408, Accuracy: 118/618 (19.0939%)
___Train Local_ResNet_18,  epoch 222, local model 72, internal_epoch   2,  Average loss: 0.0373, Accuracy: 253/618 (40.9385%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 51, internal_epoch   1,  Average loss: 0.1511, Accuracy: 78/479 (16.2839%)
___Train Local_ResNet_18,  epoch 222, local model 51, internal_epoch   2,  Average loss: 0.0326, Accuracy: 290/479 (60.5428%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 63, internal_epoch   1,  Average loss: 0.1265, Accuracy: 129/752 (17.1543%)
___Train Local_ResNet_18,  epoch 222, local model 63, internal_epoch   2,  Average loss: 0.0485, Accuracy: 192/752 (25.5319%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 222, local model 46, internal_epoch   1,  Average loss: 0.1449, Accuracy: 77/601 (12.8120%)
___Train Local_ResNet_18,  epoch 222, local model 46, internal_epoch   2,  Average loss: 0.0444, Accuracy: 192/601 (31.9468%)
___Test Local_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.61068964004517
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 222: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 222: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 209.93686532974243 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:223 choose agents : [17, 33, 77, 11, 54, 95, 26, 2, 82, 45]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   1,  Average loss: 0.0545, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   2,  Average loss: 0.0485, Accuracy: 158/526 (30.0380%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   3,  Average loss: 0.0418, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   4,  Average loss: 0.0376, Accuracy: 139/526 (26.4259%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   5,  Average loss: 0.0356, Accuracy: 157/526 (29.8479%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 17, internal_epoch   6,  Average loss: 0.0328, Accuracy: 160/526 (30.4183%), train_poison_data_count: 45
Global model norm: 100.36622879640592.
Norm before scaling: 99.13712193377665. Distance: 4.411300470199112
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 422.1398983157124, distance: 441.1300651451905
Total norm for 4 adversaries is: 422.1398983157124. distance: 441.1300651451905
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   1,  Average loss: 0.0662, Accuracy: 155/527 (29.4118%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   2,  Average loss: 0.0564, Accuracy: 92/527 (17.4573%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   3,  Average loss: 0.0417, Accuracy: 101/527 (19.1651%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   4,  Average loss: 0.0368, Accuracy: 149/527 (28.2732%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   5,  Average loss: 0.0349, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 33, internal_epoch   6,  Average loss: 0.0335, Accuracy: 151/527 (28.6528%), train_poison_data_count: 45
Global model norm: 100.36622879640592.
Norm before scaling: 99.13997857354268. Distance: 5.3133029106606156
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 514.8762897531794, distance: 531.3303174579821
Total norm for 4 adversaries is: 514.8762897531794. distance: 531.3303174579821
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   1,  Average loss: 0.0690, Accuracy: 56/496 (11.2903%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   2,  Average loss: 0.0529, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   3,  Average loss: 0.0412, Accuracy: 74/496 (14.9194%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   4,  Average loss: 0.0363, Accuracy: 110/496 (22.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   5,  Average loss: 0.0332, Accuracy: 130/496 (26.2097%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 77, internal_epoch   6,  Average loss: 0.0332, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Global model norm: 100.36622879640592.
Norm before scaling: 99.30209589933135. Distance: 5.0554823095770285
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 491.781725590734, distance: 505.54823273847967
Total norm for 4 adversaries is: 491.781725590734. distance: 505.54823273847967
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   1,  Average loss: 0.0668, Accuracy: 52/546 (9.5238%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   2,  Average loss: 0.0479, Accuracy: 99/546 (18.1319%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   3,  Average loss: 0.0389, Accuracy: 104/546 (19.0476%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   4,  Average loss: 0.0370, Accuracy: 116/546 (21.2454%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   5,  Average loss: 0.0340, Accuracy: 161/546 (29.4872%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 223, local model 11, internal_epoch   6,  Average loss: 0.0340, Accuracy: 147/546 (26.9231%), train_poison_data_count: 45
Global model norm: 100.36622879640592.
Norm before scaling: 99.13837295511512. Distance: 4.819228979467875
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 464.22440357546907, distance: 481.9229061789863
Total norm for 4 adversaries is: 464.22440357546907. distance: 481.9229061789863
___Test Local_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 223, local model 54, internal_epoch   1,  Average loss: 0.0547, Accuracy: 75/440 (17.0455%)
___Train Local_ResNet_18,  epoch 223, local model 54, internal_epoch   2,  Average loss: 0.0371, Accuracy: 175/440 (39.7727%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   1,  Average loss: 0.0607, Accuracy: 127/569 (22.3199%)
___Train Local_ResNet_18,  epoch 223, local model 95, internal_epoch   2,  Average loss: 0.0350, Accuracy: 282/569 (49.5606%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 26, internal_epoch   1,  Average loss: 0.0813, Accuracy: 48/468 (10.2564%)
___Train Local_ResNet_18,  epoch 223, local model 26, internal_epoch   2,  Average loss: 0.0468, Accuracy: 136/468 (29.0598%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 2, internal_epoch   1,  Average loss: 0.0940, Accuracy: 71/461 (15.4013%)
___Train Local_ResNet_18,  epoch 223, local model 2, internal_epoch   2,  Average loss: 0.0476, Accuracy: 197/461 (42.7332%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 82, internal_epoch   1,  Average loss: 0.0409, Accuracy: 105/601 (17.4709%)
___Train Local_ResNet_18,  epoch 223, local model 82, internal_epoch   2,  Average loss: 0.0318, Accuracy: 212/601 (35.2745%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 223, local model 45, internal_epoch   1,  Average loss: 0.0691, Accuracy: 43/529 (8.1285%)
___Train Local_ResNet_18,  epoch 223, local model 45, internal_epoch   2,  Average loss: 0.0404, Accuracy: 157/529 (29.6786%)
___Test Local_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 180.89775609970093
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 223: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 223: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 230.16735577583313 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:224 choose agents : [17, 33, 77, 11, 0, 34, 62, 66, 95, 10]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   1,  Average loss: 0.2997, Accuracy: 49/526 (9.3156%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   2,  Average loss: 0.0466, Accuracy: 60/526 (11.4068%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   3,  Average loss: 0.0358, Accuracy: 111/526 (21.1027%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   4,  Average loss: 0.0345, Accuracy: 161/526 (30.6084%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   5,  Average loss: 0.0335, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 17, internal_epoch   6,  Average loss: 0.0335, Accuracy: 159/526 (30.2281%), train_poison_data_count: 45
Global model norm: 96.60144845575557.
Norm before scaling: 96.43283162712272. Distance: 23.415116916114524
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2331.0785057565095, distance: 2341.511584425753
Total norm for 4 adversaries is: 2331.0785057565095. distance: 2341.511584425753
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   1,  Average loss: 0.2655, Accuracy: 89/527 (16.8880%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   2,  Average loss: 0.0531, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   3,  Average loss: 0.0396, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   4,  Average loss: 0.0358, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   5,  Average loss: 0.0350, Accuracy: 118/527 (22.3909%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 33, internal_epoch   6,  Average loss: 0.0339, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 96.60144845575557.
Norm before scaling: 96.11162943421571. Distance: 21.272687940109158
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2116.5801425885106, distance: 2127.2685538032097
Total norm for 4 adversaries is: 2116.5801425885106. distance: 2127.2685538032097
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   1,  Average loss: 0.2787, Accuracy: 83/496 (16.7339%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   2,  Average loss: 0.0606, Accuracy: 69/496 (13.9113%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   3,  Average loss: 0.0398, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   4,  Average loss: 0.0350, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   5,  Average loss: 0.0338, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 77, internal_epoch   6,  Average loss: 0.0337, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Global model norm: 96.60144845575557.
Norm before scaling: 96.21669979952804. Distance: 21.02003685683949
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2091.9245923311864, distance: 2102.003568027419
Total norm for 4 adversaries is: 2091.9245923311864. distance: 2102.003568027419
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   1,  Average loss: 0.2707, Accuracy: 50/546 (9.1575%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   2,  Average loss: 0.0457, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   3,  Average loss: 0.0364, Accuracy: 73/546 (13.3700%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   4,  Average loss: 0.0345, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   5,  Average loss: 0.0338, Accuracy: 148/546 (27.1062%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 224, local model 11, internal_epoch   6,  Average loss: 0.0333, Accuracy: 154/546 (28.2051%), train_poison_data_count: 45
Global model norm: 96.60144845575557.
Norm before scaling: 96.13126300305484. Distance: 21.43030055744487
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2132.3511671392216, distance: 2143.029981124856
Total norm for 4 adversaries is: 2132.3511671392216. distance: 2143.029981124856
___Test Local_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 224, local model 0, internal_epoch   1,  Average loss: 0.2413, Accuracy: 93/367 (25.3406%)
___Train Local_ResNet_18,  epoch 224, local model 0, internal_epoch   2,  Average loss: 0.0489, Accuracy: 111/367 (30.2452%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 34, internal_epoch   1,  Average loss: 0.2811, Accuracy: 74/349 (21.2034%)
___Train Local_ResNet_18,  epoch 224, local model 34, internal_epoch   2,  Average loss: 0.0440, Accuracy: 146/349 (41.8338%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 62, internal_epoch   1,  Average loss: 0.2825, Accuracy: 45/358 (12.5698%)
___Train Local_ResNet_18,  epoch 224, local model 62, internal_epoch   2,  Average loss: 0.0555, Accuracy: 21/358 (5.8659%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 66, internal_epoch   1,  Average loss: 0.2279, Accuracy: 55/555 (9.9099%)
___Train Local_ResNet_18,  epoch 224, local model 66, internal_epoch   2,  Average loss: 0.0326, Accuracy: 163/555 (29.3694%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 95, internal_epoch   1,  Average loss: 0.1893, Accuracy: 73/569 (12.8295%)
___Train Local_ResNet_18,  epoch 224, local model 95, internal_epoch   2,  Average loss: 0.0294, Accuracy: 212/569 (37.2583%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 224, local model 10, internal_epoch   1,  Average loss: 0.1729, Accuracy: 142/752 (18.8830%)
___Train Local_ResNet_18,  epoch 224, local model 10, internal_epoch   2,  Average loss: 0.0244, Accuracy: 422/752 (56.1170%)
___Test Local_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 171.0194706916809
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 224: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 224: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 213.4682812690735 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:225 choose agents : [17, 33, 77, 11, 12, 38, 41, 4, 68, 55]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   1,  Average loss: 0.0788, Accuracy: 36/526 (6.8441%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   2,  Average loss: 0.0628, Accuracy: 120/526 (22.8137%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   3,  Average loss: 0.0574, Accuracy: 153/526 (29.0875%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   4,  Average loss: 0.0499, Accuracy: 174/526 (33.0798%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   5,  Average loss: 0.0476, Accuracy: 167/526 (31.7490%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 17, internal_epoch   6,  Average loss: 0.0448, Accuracy: 165/526 (31.3688%), train_poison_data_count: 45
Global model norm: 121.31778469298102.
Norm before scaling: 119.66907903281658. Distance: 6.475054778231881
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 624.5455848054647, distance: 647.5054536449867
Total norm for 4 adversaries is: 624.5455848054647. distance: 647.5054536449867
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   1,  Average loss: 0.1009, Accuracy: 57/527 (10.8159%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   2,  Average loss: 0.0860, Accuracy: 88/527 (16.6983%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   3,  Average loss: 0.0758, Accuracy: 93/527 (17.6471%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   4,  Average loss: 0.0624, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   5,  Average loss: 0.0492, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 33, internal_epoch   6,  Average loss: 0.0369, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Global model norm: 121.31778469298102.
Norm before scaling: 119.59312940784893. Distance: 8.867695986246494
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 866.9868078581127, distance: 886.7696290469132
Total norm for 4 adversaries is: 866.9868078581127. distance: 886.7696290469132
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   1,  Average loss: 0.0797, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   2,  Average loss: 0.0717, Accuracy: 105/496 (21.1694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   3,  Average loss: 0.0657, Accuracy: 143/496 (28.8306%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   4,  Average loss: 0.0576, Accuracy: 137/496 (27.6210%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   5,  Average loss: 0.0520, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 77, internal_epoch   6,  Average loss: 0.0473, Accuracy: 141/496 (28.4274%), train_poison_data_count: 40
Global model norm: 121.31778469298102.
Norm before scaling: 119.81408531162978. Distance: 6.7063879505484705
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 650.9361527830514, distance: 670.638781312265
Total norm for 4 adversaries is: 650.9361527830514. distance: 670.638781312265
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   1,  Average loss: 0.0745, Accuracy: 60/546 (10.9890%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   2,  Average loss: 0.0645, Accuracy: 120/546 (21.9780%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   3,  Average loss: 0.0584, Accuracy: 156/546 (28.5714%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   4,  Average loss: 0.0528, Accuracy: 152/546 (27.8388%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   5,  Average loss: 0.0480, Accuracy: 160/546 (29.3040%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 225, local model 11, internal_epoch   6,  Average loss: 0.0447, Accuracy: 160/546 (29.3040%), train_poison_data_count: 45
Global model norm: 121.31778469298102.
Norm before scaling: 119.64838623284896. Distance: 6.495194052248723
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 626.217239662084, distance: 649.5193896258987
Total norm for 4 adversaries is: 626.217239662084. distance: 649.5193896258987
___Test Local_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 225, local model 12, internal_epoch   1,  Average loss: 0.1019, Accuracy: 60/977 (6.1412%)
___Train Local_ResNet_18,  epoch 225, local model 12, internal_epoch   2,  Average loss: 0.0422, Accuracy: 284/977 (29.0686%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 38, internal_epoch   1,  Average loss: 0.0439, Accuracy: 170/756 (22.4868%)
___Train Local_ResNet_18,  epoch 225, local model 38, internal_epoch   2,  Average loss: 0.0346, Accuracy: 276/756 (36.5079%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 41, internal_epoch   1,  Average loss: 0.1600, Accuracy: 5/513 (0.9747%)
___Train Local_ResNet_18,  epoch 225, local model 41, internal_epoch   2,  Average loss: 0.0773, Accuracy: 50/513 (9.7466%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 4, internal_epoch   1,  Average loss: 0.0327, Accuracy: 176/557 (31.5978%)
___Train Local_ResNet_18,  epoch 225, local model 4, internal_epoch   2,  Average loss: 0.0295, Accuracy: 224/557 (40.2154%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 68, internal_epoch   1,  Average loss: 0.0766, Accuracy: 85/416 (20.4327%)
___Train Local_ResNet_18,  epoch 225, local model 68, internal_epoch   2,  Average loss: 0.0663, Accuracy: 93/416 (22.3558%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 225, local model 55, internal_epoch   1,  Average loss: 0.0970, Accuracy: 6/299 (2.0067%)
___Train Local_ResNet_18,  epoch 225, local model 55, internal_epoch   2,  Average loss: 0.0755, Accuracy: 29/299 (9.6990%)
___Test Local_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 180.13238620758057
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 225: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 225: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 223.6193516254425 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:226 choose agents : [17, 33, 77, 11, 30, 39, 10, 64, 23, 60]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   1,  Average loss: 0.1759, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   2,  Average loss: 0.0901, Accuracy: 45/526 (8.5551%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   3,  Average loss: 0.0654, Accuracy: 53/526 (10.0760%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   4,  Average loss: 0.0489, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   5,  Average loss: 0.0468, Accuracy: 177/526 (33.6502%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 17, internal_epoch   6,  Average loss: 0.0418, Accuracy: 148/526 (28.1369%), train_poison_data_count: 45
Global model norm: 116.77301282161687.
Norm before scaling: 115.29805549775114. Distance: 14.369014654920507
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1422.4786905258018, distance: 1436.9015275933143
Total norm for 4 adversaries is: 1422.4786905258018. distance: 1436.9015275933143
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   1,  Average loss: 0.1633, Accuracy: 151/527 (28.6528%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   2,  Average loss: 0.0930, Accuracy: 130/527 (24.6679%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   3,  Average loss: 0.0749, Accuracy: 145/527 (27.5142%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   4,  Average loss: 0.0601, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   5,  Average loss: 0.0459, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 33, internal_epoch   6,  Average loss: 0.0410, Accuracy: 152/527 (28.8425%), train_poison_data_count: 45
Global model norm: 116.77301282161687.
Norm before scaling: 115.22181817178767. Distance: 13.594139496934309
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1344.3122777093126, distance: 1359.4140281753753
Total norm for 4 adversaries is: 1344.3122777093126. distance: 1359.4140281753753
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   1,  Average loss: 0.1814, Accuracy: 71/496 (14.3145%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   2,  Average loss: 0.0946, Accuracy: 88/496 (17.7419%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   3,  Average loss: 0.0738, Accuracy: 107/496 (21.5726%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   4,  Average loss: 0.0618, Accuracy: 100/496 (20.1613%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   5,  Average loss: 0.0515, Accuracy: 104/496 (20.9677%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 77, internal_epoch   6,  Average loss: 0.0420, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Global model norm: 116.77301282161687.
Norm before scaling: 115.49817368685966. Distance: 14.625104333228276
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1449.6801371337058, distance: 1462.5104273132551
Total norm for 4 adversaries is: 1449.6801371337058. distance: 1462.5104273132551
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   1,  Average loss: 0.1788, Accuracy: 55/546 (10.0733%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   2,  Average loss: 0.0994, Accuracy: 47/546 (8.6081%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   3,  Average loss: 0.0801, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   4,  Average loss: 0.0610, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   5,  Average loss: 0.0454, Accuracy: 135/546 (24.7253%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 226, local model 11, internal_epoch   6,  Average loss: 0.0396, Accuracy: 169/546 (30.9524%), train_poison_data_count: 45
Global model norm: 116.77301282161687.
Norm before scaling: 115.25399515174084. Distance: 15.2494506737
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1510.1634017549227, distance: 1524.9450809783282
Total norm for 4 adversaries is: 1510.1634017549227. distance: 1524.9450809783282
___Test Local_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 226, local model 30, internal_epoch   1,  Average loss: 0.1772, Accuracy: 42/337 (12.4629%)
___Train Local_ResNet_18,  epoch 226, local model 30, internal_epoch   2,  Average loss: 0.0958, Accuracy: 89/337 (26.4095%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 39, internal_epoch   1,  Average loss: 0.1915, Accuracy: 49/217 (22.5806%)
___Train Local_ResNet_18,  epoch 226, local model 39, internal_epoch   2,  Average loss: 0.0860, Accuracy: 34/217 (15.6682%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 10, internal_epoch   1,  Average loss: 0.1108, Accuracy: 207/752 (27.5266%)
___Train Local_ResNet_18,  epoch 226, local model 10, internal_epoch   2,  Average loss: 0.0457, Accuracy: 480/752 (63.8298%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 64, internal_epoch   1,  Average loss: 0.1667, Accuracy: 49/686 (7.1429%)
___Train Local_ResNet_18,  epoch 226, local model 64, internal_epoch   2,  Average loss: 0.0719, Accuracy: 85/686 (12.3907%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 23, internal_epoch   1,  Average loss: 0.1881, Accuracy: 42/248 (16.9355%)
___Train Local_ResNet_18,  epoch 226, local model 23, internal_epoch   2,  Average loss: 0.0891, Accuracy: 25/248 (10.0806%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 226, local model 60, internal_epoch   1,  Average loss: 0.1686, Accuracy: 25/284 (8.8028%)
___Train Local_ResNet_18,  epoch 226, local model 60, internal_epoch   2,  Average loss: 0.0714, Accuracy: 45/284 (15.8451%)
___Test Local_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 197.12172484397888
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 226: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 226: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 244.9763195514679 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:227 choose agents : [17, 33, 77, 11, 23, 34, 52, 92, 57, 74]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   1,  Average loss: 0.1536, Accuracy: 114/526 (21.6730%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   2,  Average loss: 0.0856, Accuracy: 42/526 (7.9848%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   3,  Average loss: 0.0738, Accuracy: 153/526 (29.0875%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   4,  Average loss: 0.0710, Accuracy: 171/526 (32.5095%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   5,  Average loss: 0.0627, Accuracy: 169/526 (32.1293%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 17, internal_epoch   6,  Average loss: 0.0551, Accuracy: 184/526 (34.9810%), train_poison_data_count: 45
Global model norm: 120.72279471608707.
Norm before scaling: 119.19289119951743. Distance: 14.303354598093032
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1415.3692097823805, distance: 1430.3354501654499
Total norm for 4 adversaries is: 1415.3692097823805. distance: 1430.3354501654499
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   1,  Average loss: 0.2048, Accuracy: 87/527 (16.5085%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   2,  Average loss: 0.1254, Accuracy: 96/527 (18.2163%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   3,  Average loss: 0.0975, Accuracy: 79/527 (14.9905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   4,  Average loss: 0.0608, Accuracy: 94/527 (17.8368%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   5,  Average loss: 0.0435, Accuracy: 125/527 (23.7192%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 33, internal_epoch   6,  Average loss: 0.0344, Accuracy: 150/527 (28.4630%), train_poison_data_count: 45
Global model norm: 120.72279471608707.
Norm before scaling: 119.07058289492623. Distance: 14.890771534890222
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1473.1369590095824, distance: 1489.0771470948039
Total norm for 4 adversaries is: 1473.1369590095824. distance: 1489.0771470948039
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   1,  Average loss: 0.1979, Accuracy: 22/496 (4.4355%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   2,  Average loss: 0.1062, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   3,  Average loss: 0.0872, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   4,  Average loss: 0.0713, Accuracy: 110/496 (22.1774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   5,  Average loss: 0.0514, Accuracy: 132/496 (26.6129%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 77, internal_epoch   6,  Average loss: 0.0377, Accuracy: 108/496 (21.7742%), train_poison_data_count: 40
Global model norm: 120.72279471608707.
Norm before scaling: 119.28124181294181. Distance: 14.279528624717996
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1413.730879623134, distance: 1427.9529053858885
Total norm for 4 adversaries is: 1413.730879623134. distance: 1427.9529053858885
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   1,  Average loss: 0.1719, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   2,  Average loss: 0.0921, Accuracy: 138/546 (25.2747%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   3,  Average loss: 0.0815, Accuracy: 129/546 (23.6264%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   4,  Average loss: 0.0708, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   5,  Average loss: 0.0599, Accuracy: 133/546 (24.3590%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 227, local model 11, internal_epoch   6,  Average loss: 0.0540, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Global model norm: 120.72279471608707.
Norm before scaling: 119.15901599858066. Distance: 15.143078301143738
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1499.0858881331649, distance: 1514.3076800967497
Total norm for 4 adversaries is: 1499.0858881331649. distance: 1514.3076800967497
___Test Local_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 227, local model 23, internal_epoch   1,  Average loss: 0.2170, Accuracy: 14/248 (5.6452%)
___Train Local_ResNet_18,  epoch 227, local model 23, internal_epoch   2,  Average loss: 0.0952, Accuracy: 80/248 (32.2581%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 34, internal_epoch   1,  Average loss: 0.2720, Accuracy: 8/349 (2.2923%)
___Train Local_ResNet_18,  epoch 227, local model 34, internal_epoch   2,  Average loss: 0.1499, Accuracy: 36/349 (10.3152%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 52, internal_epoch   1,  Average loss: 0.1226, Accuracy: 41/214 (19.1589%)
___Train Local_ResNet_18,  epoch 227, local model 52, internal_epoch   2,  Average loss: 0.0564, Accuracy: 23/214 (10.7477%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 92, internal_epoch   1,  Average loss: 0.0831, Accuracy: 133/796 (16.7085%)
___Train Local_ResNet_18,  epoch 227, local model 92, internal_epoch   2,  Average loss: 0.0314, Accuracy: 252/796 (31.6583%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 57, internal_epoch   1,  Average loss: 0.2277, Accuracy: 19/290 (6.5517%)
___Train Local_ResNet_18,  epoch 227, local model 57, internal_epoch   2,  Average loss: 0.1251, Accuracy: 14/290 (4.8276%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 227, local model 74, internal_epoch   1,  Average loss: 0.1492, Accuracy: 26/469 (5.5437%)
___Train Local_ResNet_18,  epoch 227, local model 74, internal_epoch   2,  Average loss: 0.0671, Accuracy: 138/469 (29.4243%)
___Test Local_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 167.9573245048523
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 227: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 227: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 210.36571598052979 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:228 choose agents : [17, 33, 77, 11, 67, 16, 64, 30, 35, 81]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   1,  Average loss: 0.3943, Accuracy: 36/526 (6.8441%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   2,  Average loss: 0.0930, Accuracy: 41/526 (7.7947%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   3,  Average loss: 0.0514, Accuracy: 62/526 (11.7871%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   4,  Average loss: 0.0425, Accuracy: 92/526 (17.4905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   5,  Average loss: 0.0380, Accuracy: 132/526 (25.0951%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 17, internal_epoch   6,  Average loss: 0.0367, Accuracy: 155/526 (29.4677%), train_poison_data_count: 45
Global model norm: 123.5314673979873.
Norm before scaling: 122.03414689263207. Distance: 23.17638926863393
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2301.353080255179, distance: 2317.638776858896
Total norm for 4 adversaries is: 2301.353080255179. distance: 2317.638776858896
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   1,  Average loss: 0.3315, Accuracy: 84/527 (15.9393%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   2,  Average loss: 0.0917, Accuracy: 61/527 (11.5750%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   3,  Average loss: 0.0624, Accuracy: 153/527 (29.0323%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   4,  Average loss: 0.0527, Accuracy: 156/527 (29.6015%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   5,  Average loss: 0.0490, Accuracy: 142/527 (26.9450%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 33, internal_epoch   6,  Average loss: 0.0424, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Global model norm: 123.5314673979873.
Norm before scaling: 121.86777222157629. Distance: 20.81563693396858
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2064.9481833692585, distance: 2081.5638351969897
Total norm for 4 adversaries is: 2064.9481833692585. distance: 2081.5638351969897
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   1,  Average loss: 0.2939, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   2,  Average loss: 0.0782, Accuracy: 60/496 (12.0968%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   3,  Average loss: 0.0493, Accuracy: 124/496 (25.0000%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   4,  Average loss: 0.0394, Accuracy: 114/496 (22.9839%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   5,  Average loss: 0.0364, Accuracy: 156/496 (31.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 77, internal_epoch   6,  Average loss: 0.0353, Accuracy: 163/496 (32.8629%), train_poison_data_count: 40
Global model norm: 123.5314673979873.
Norm before scaling: 122.16084667739291. Distance: 19.021589360944745
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1887.7530293976488, distance: 1902.1588393191564
Total norm for 4 adversaries is: 1887.7530293976488. distance: 1902.1588393191564
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   1,  Average loss: 0.3365, Accuracy: 52/546 (9.5238%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   2,  Average loss: 0.1025, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   3,  Average loss: 0.0644, Accuracy: 91/546 (16.6667%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   4,  Average loss: 0.0543, Accuracy: 88/546 (16.1172%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   5,  Average loss: 0.0470, Accuracy: 85/546 (15.5678%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 228, local model 11, internal_epoch   6,  Average loss: 0.0412, Accuracy: 108/546 (19.7802%), train_poison_data_count: 45
Global model norm: 123.5314673979873.
Norm before scaling: 121.92235458222991. Distance: 22.03408531179236
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2186.8294400798613, distance: 2203.4084959444085
Total norm for 4 adversaries is: 2186.8294400798613. distance: 2203.4084959444085
___Test Local_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 228, local model 67, internal_epoch   1,  Average loss: 0.2401, Accuracy: 48/842 (5.7007%)
___Train Local_ResNet_18,  epoch 228, local model 67, internal_epoch   2,  Average loss: 0.0561, Accuracy: 165/842 (19.5962%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 16, internal_epoch   1,  Average loss: 0.1902, Accuracy: 114/773 (14.7477%)
___Train Local_ResNet_18,  epoch 228, local model 16, internal_epoch   2,  Average loss: 0.0414, Accuracy: 277/773 (35.8344%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 64, internal_epoch   1,  Average loss: 0.2027, Accuracy: 89/686 (12.9738%)
___Train Local_ResNet_18,  epoch 228, local model 64, internal_epoch   2,  Average loss: 0.0443, Accuracy: 230/686 (33.5277%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 30, internal_epoch   1,  Average loss: 0.3783, Accuracy: 53/337 (15.7270%)
___Train Local_ResNet_18,  epoch 228, local model 30, internal_epoch   2,  Average loss: 0.0864, Accuracy: 27/337 (8.0119%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 35, internal_epoch   1,  Average loss: 0.3095, Accuracy: 22/419 (5.2506%)
___Train Local_ResNet_18,  epoch 228, local model 35, internal_epoch   2,  Average loss: 0.0396, Accuracy: 170/419 (40.5728%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 228, local model 81, internal_epoch   1,  Average loss: 0.1236, Accuracy: 334/1034 (32.3017%)
___Train Local_ResNet_18,  epoch 228, local model 81, internal_epoch   2,  Average loss: 0.0279, Accuracy: 504/1034 (48.7427%)
___Test Local_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 171.03128910064697
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 228: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 228: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 217.4787793159485 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:229 choose agents : [17, 33, 77, 11, 62, 68, 2, 74, 39, 1]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   1,  Average loss: 0.0808, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   2,  Average loss: 0.0524, Accuracy: 92/526 (17.4905%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   3,  Average loss: 0.0461, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   4,  Average loss: 0.0398, Accuracy: 129/526 (24.5247%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   5,  Average loss: 0.0372, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 17, internal_epoch   6,  Average loss: 0.0358, Accuracy: 145/526 (27.5665%), train_poison_data_count: 45
Global model norm: 136.67530381116774.
Norm before scaling: 135.00291518843213. Distance: 6.535021117569558
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 629.3167425867517, distance: 653.5021040517008
Total norm for 4 adversaries is: 629.3167425867517. distance: 653.5021040517008
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   1,  Average loss: 0.0932, Accuracy: 68/527 (12.9032%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   2,  Average loss: 0.0564, Accuracy: 131/527 (24.8577%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   3,  Average loss: 0.0497, Accuracy: 123/527 (23.3397%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   4,  Average loss: 0.0442, Accuracy: 144/527 (27.3245%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   5,  Average loss: 0.0389, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 33, internal_epoch   6,  Average loss: 0.0371, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Global model norm: 136.67530381116774.
Norm before scaling: 134.98033710970645. Distance: 7.959245106925602
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 774.4652994163134, distance: 795.9245410213207
Total norm for 4 adversaries is: 774.4652994163134. distance: 795.9245410213207
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   1,  Average loss: 0.1173, Accuracy: 18/496 (3.6290%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   2,  Average loss: 0.0746, Accuracy: 48/496 (9.6774%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   3,  Average loss: 0.0574, Accuracy: 43/496 (8.6694%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   4,  Average loss: 0.0458, Accuracy: 85/496 (17.1371%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   5,  Average loss: 0.0380, Accuracy: 98/496 (19.7581%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 77, internal_epoch   6,  Average loss: 0.0346, Accuracy: 106/496 (21.3710%), train_poison_data_count: 40
Global model norm: 136.67530381116774.
Norm before scaling: 135.16558132527675. Distance: 9.518797096742073
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 935.2294504558761, distance: 951.8797192923064
Total norm for 4 adversaries is: 935.2294504558761. distance: 951.8797192923064
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   1,  Average loss: 0.0953, Accuracy: 68/546 (12.4542%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   2,  Average loss: 0.0605, Accuracy: 125/546 (22.8938%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   3,  Average loss: 0.0523, Accuracy: 134/546 (24.5421%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   4,  Average loss: 0.0422, Accuracy: 103/546 (18.8645%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   5,  Average loss: 0.0375, Accuracy: 124/546 (22.7106%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 229, local model 11, internal_epoch   6,  Average loss: 0.0356, Accuracy: 145/546 (26.5568%), train_poison_data_count: 45
Global model norm: 136.67530381116774.
Norm before scaling: 134.9587176463603. Distance: 8.111343879785446
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 789.5641994163616, distance: 811.1343137853311
Total norm for 4 adversaries is: 789.5641994163616. distance: 811.1343137853311
___Test Local_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 229, local model 62, internal_epoch   1,  Average loss: 0.1207, Accuracy: 32/358 (8.9385%)
___Train Local_ResNet_18,  epoch 229, local model 62, internal_epoch   2,  Average loss: 0.0720, Accuracy: 18/358 (5.0279%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 68, internal_epoch   1,  Average loss: 0.1041, Accuracy: 16/416 (3.8462%)
___Train Local_ResNet_18,  epoch 229, local model 68, internal_epoch   2,  Average loss: 0.0660, Accuracy: 78/416 (18.7500%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 2, internal_epoch   1,  Average loss: 0.1155, Accuracy: 40/461 (8.6768%)
___Train Local_ResNet_18,  epoch 229, local model 2, internal_epoch   2,  Average loss: 0.0463, Accuracy: 169/461 (36.6594%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 74, internal_epoch   1,  Average loss: 0.1250, Accuracy: 4/469 (0.8529%)
___Train Local_ResNet_18,  epoch 229, local model 74, internal_epoch   2,  Average loss: 0.0680, Accuracy: 35/469 (7.4627%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 39, internal_epoch   1,  Average loss: 0.1318, Accuracy: 0/217 (0.0000%)
___Train Local_ResNet_18,  epoch 229, local model 39, internal_epoch   2,  Average loss: 0.0761, Accuracy: 26/217 (11.9816%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 229, local model 1, internal_epoch   1,  Average loss: 0.0843, Accuracy: 35/641 (5.4602%)
___Train Local_ResNet_18,  epoch 229, local model 1, internal_epoch   2,  Average loss: 0.0454, Accuracy: 196/641 (30.5772%)
___Test Local_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 178.838285446167
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 229: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 229: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 221.1937220096588 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:230 choose agents : [17, 33, 77, 11, 64, 29, 21, 39, 95, 90]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   1,  Average loss: 0.3502, Accuracy: 36/526 (6.8441%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   2,  Average loss: 0.1177, Accuracy: 19/526 (3.6122%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   3,  Average loss: 0.0556, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   4,  Average loss: 0.0407, Accuracy: 109/526 (20.7224%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   5,  Average loss: 0.0357, Accuracy: 156/526 (29.6578%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 17, internal_epoch   6,  Average loss: 0.0355, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Global model norm: 132.50394304274496.
Norm before scaling: 130.67501285393087. Distance: 18.959782650502532
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1878.3530019674151, distance: 1895.9781776170316
Total norm for 4 adversaries is: 1878.3530019674151. distance: 1895.9781776170316
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   1,  Average loss: 0.3309, Accuracy: 50/527 (9.4877%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   2,  Average loss: 0.1109, Accuracy: 56/527 (10.6262%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   3,  Average loss: 0.0517, Accuracy: 143/527 (27.1347%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   4,  Average loss: 0.0448, Accuracy: 127/527 (24.0987%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   5,  Average loss: 0.0373, Accuracy: 124/527 (23.5294%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 33, internal_epoch   6,  Average loss: 0.0342, Accuracy: 160/527 (30.3605%), train_poison_data_count: 45
Global model norm: 132.50394304274496.
Norm before scaling: 130.63019576987168. Distance: 17.785148099465516
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1760.6067846058074, distance: 1778.5148298510192
Total norm for 4 adversaries is: 1760.6067846058074. distance: 1778.5148298510192
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   1,  Average loss: 0.2260, Accuracy: 82/496 (16.5323%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   2,  Average loss: 0.1101, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   3,  Average loss: 0.0542, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   4,  Average loss: 0.0420, Accuracy: 99/496 (19.9597%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   5,  Average loss: 0.0381, Accuracy: 101/496 (20.3629%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 77, internal_epoch   6,  Average loss: 0.0360, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Global model norm: 132.50394304274496.
Norm before scaling: 130.78670463535275. Distance: 14.2090218266259
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1403.9647431470635, distance: 1420.9021781952479
Total norm for 4 adversaries is: 1403.9647431470635. distance: 1420.9021781952479
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   1,  Average loss: 0.3046, Accuracy: 41/546 (7.5092%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   2,  Average loss: 0.1027, Accuracy: 65/546 (11.9048%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   3,  Average loss: 0.0523, Accuracy: 141/546 (25.8242%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   4,  Average loss: 0.0452, Accuracy: 90/546 (16.4835%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   5,  Average loss: 0.0383, Accuracy: 127/546 (23.2601%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 230, local model 11, internal_epoch   6,  Average loss: 0.0346, Accuracy: 143/546 (26.1905%), train_poison_data_count: 45
Global model norm: 132.50394304274496.
Norm before scaling: 130.6242000573592. Distance: 17.616873091706623
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1743.732419266213, distance: 1761.687330373923
Total norm for 4 adversaries is: 1743.732419266213. distance: 1761.687330373923
___Test Local_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 230, local model 64, internal_epoch   1,  Average loss: 0.1667, Accuracy: 79/686 (11.5160%)
___Train Local_ResNet_18,  epoch 230, local model 64, internal_epoch   2,  Average loss: 0.0432, Accuracy: 228/686 (33.2362%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 29, internal_epoch   1,  Average loss: 0.1953, Accuracy: 68/848 (8.0189%)
___Train Local_ResNet_18,  epoch 230, local model 29, internal_epoch   2,  Average loss: 0.0358, Accuracy: 313/848 (36.9104%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 21, internal_epoch   1,  Average loss: 0.2843, Accuracy: 49/262 (18.7023%)
___Train Local_ResNet_18,  epoch 230, local model 21, internal_epoch   2,  Average loss: 0.1488, Accuracy: 23/262 (8.7786%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 39, internal_epoch   1,  Average loss: 0.3739, Accuracy: 18/217 (8.2949%)
___Train Local_ResNet_18,  epoch 230, local model 39, internal_epoch   2,  Average loss: 0.1609, Accuracy: 7/217 (3.2258%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 95, internal_epoch   1,  Average loss: 0.1702, Accuracy: 201/569 (35.3251%)
___Train Local_ResNet_18,  epoch 230, local model 95, internal_epoch   2,  Average loss: 0.0736, Accuracy: 301/569 (52.8998%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 230, local model 90, internal_epoch   1,  Average loss: 0.1583, Accuracy: 19/578 (3.2872%)
___Train Local_ResNet_18,  epoch 230, local model 90, internal_epoch   2,  Average loss: 0.0385, Accuracy: 322/578 (55.7093%)
___Test Local_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 169.3392014503479
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 230: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 230: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 217.6001374721527 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:231 choose agents : [17, 33, 77, 11, 68, 38, 97, 3, 98, 90]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   1,  Average loss: 0.3694, Accuracy: 89/526 (16.9202%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   2,  Average loss: 0.0563, Accuracy: 131/526 (24.9049%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   3,  Average loss: 0.0458, Accuracy: 133/526 (25.2852%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   4,  Average loss: 0.0435, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   5,  Average loss: 0.0418, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 17, internal_epoch   6,  Average loss: 0.0400, Accuracy: 131/526 (24.9049%), train_poison_data_count: 45
Global model norm: 137.9450751204986.
Norm before scaling: 136.2922884488517. Distance: 21.131972025800593
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2096.3420522424294, distance: 2113.1973405245426
Total norm for 4 adversaries is: 2096.3420522424294. distance: 2113.1973405245426
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   1,  Average loss: 0.4058, Accuracy: 149/527 (28.2732%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   2,  Average loss: 0.0875, Accuracy: 66/527 (12.5237%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   3,  Average loss: 0.0535, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   4,  Average loss: 0.0486, Accuracy: 167/527 (31.6888%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   5,  Average loss: 0.0456, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 33, internal_epoch   6,  Average loss: 0.0436, Accuracy: 158/527 (29.9810%), train_poison_data_count: 45
Global model norm: 137.9450751204986.
Norm before scaling: 136.18463885246015. Distance: 22.736362939288053
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2255.7700459045022, distance: 2273.636404529097
Total norm for 4 adversaries is: 2255.7700459045022. distance: 2273.636404529097
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   1,  Average loss: 0.5369, Accuracy: 54/496 (10.8871%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   2,  Average loss: 0.0851, Accuracy: 25/496 (5.0403%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   3,  Average loss: 0.0639, Accuracy: 32/496 (6.4516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   4,  Average loss: 0.0562, Accuracy: 96/496 (19.3548%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   5,  Average loss: 0.0497, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 77, internal_epoch   6,  Average loss: 0.0445, Accuracy: 93/496 (18.7500%), train_poison_data_count: 40
Global model norm: 137.9450751204986.
Norm before scaling: 136.56228546893905. Distance: 25.684940851079208
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2551.913105887424, distance: 2568.494111342286
Total norm for 4 adversaries is: 2551.913105887424. distance: 2568.494111342286
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   1,  Average loss: 0.4145, Accuracy: 55/546 (10.0733%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   2,  Average loss: 0.0701, Accuracy: 76/546 (13.9194%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   3,  Average loss: 0.0514, Accuracy: 110/546 (20.1465%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   4,  Average loss: 0.0475, Accuracy: 148/546 (27.1062%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   5,  Average loss: 0.0447, Accuracy: 144/546 (26.3736%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 231, local model 11, internal_epoch   6,  Average loss: 0.0427, Accuracy: 146/546 (26.7399%), train_poison_data_count: 45
Global model norm: 137.9450751204986.
Norm before scaling: 136.40527992209465. Distance: 23.973857628870974
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 2380.4975320298067, distance: 2397.38586798204
Total norm for 4 adversaries is: 2380.4975320298067. distance: 2397.38586798204
___Test Local_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 231, local model 68, internal_epoch   1,  Average loss: 0.4061, Accuracy: 56/416 (13.4615%)
___Train Local_ResNet_18,  epoch 231, local model 68, internal_epoch   2,  Average loss: 0.0654, Accuracy: 8/416 (1.9231%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 38, internal_epoch   1,  Average loss: 0.1640, Accuracy: 157/756 (20.7672%)
___Train Local_ResNet_18,  epoch 231, local model 38, internal_epoch   2,  Average loss: 0.0327, Accuracy: 226/756 (29.8942%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 97, internal_epoch   1,  Average loss: 0.2775, Accuracy: 89/418 (21.2919%)
___Train Local_ResNet_18,  epoch 231, local model 97, internal_epoch   2,  Average loss: 0.0583, Accuracy: 148/418 (35.4067%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 3, internal_epoch   1,  Average loss: 0.2757, Accuracy: 95/780 (12.1795%)
___Train Local_ResNet_18,  epoch 231, local model 3, internal_epoch   2,  Average loss: 0.0424, Accuracy: 379/780 (48.5897%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 98, internal_epoch   1,  Average loss: 0.2726, Accuracy: 55/802 (6.8579%)
___Train Local_ResNet_18,  epoch 231, local model 98, internal_epoch   2,  Average loss: 0.0464, Accuracy: 251/802 (31.2968%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 231, local model 90, internal_epoch   1,  Average loss: 0.2378, Accuracy: 156/578 (26.9896%)
___Train Local_ResNet_18,  epoch 231, local model 90, internal_epoch   2,  Average loss: 0.0302, Accuracy: 322/578 (55.7093%)
___Test Local_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 168.95594906806946
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 231: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 231: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 212.00541925430298 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:232 choose agents : [17, 33, 77, 11, 88, 25, 27, 56, 93, 42]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   1,  Average loss: 0.1229, Accuracy: 32/526 (6.0837%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   2,  Average loss: 0.0929, Accuracy: 43/526 (8.1749%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   3,  Average loss: 0.0816, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   4,  Average loss: 0.0668, Accuracy: 138/526 (26.2357%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   5,  Average loss: 0.0547, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 17, internal_epoch   6,  Average loss: 0.0474, Accuracy: 144/526 (27.3764%), train_poison_data_count: 45
Global model norm: 151.81260935566254.
Norm before scaling: 149.73927862287837. Distance: 9.241274455639392
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 897.7733566997854, distance: 924.1274600941149
Total norm for 4 adversaries is: 897.7733566997854. distance: 924.1274600941149
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   1,  Average loss: 0.1456, Accuracy: 57/527 (10.8159%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   2,  Average loss: 0.1083, Accuracy: 56/527 (10.6262%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   3,  Average loss: 0.0877, Accuracy: 59/527 (11.1954%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   4,  Average loss: 0.0695, Accuracy: 77/527 (14.6110%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   5,  Average loss: 0.0602, Accuracy: 99/527 (18.7856%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 33, internal_epoch   6,  Average loss: 0.0508, Accuracy: 98/527 (18.5958%), train_poison_data_count: 45
Global model norm: 151.81260935566254.
Norm before scaling: 149.63999768193662. Distance: 11.113190630122626
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1086.3852907693476, distance: 1111.3190361007948
Total norm for 4 adversaries is: 1086.3852907693476. distance: 1111.3190361007948
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   1,  Average loss: 0.0972, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   2,  Average loss: 0.0740, Accuracy: 94/496 (18.9516%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   3,  Average loss: 0.0659, Accuracy: 102/496 (20.5645%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   4,  Average loss: 0.0550, Accuracy: 103/496 (20.7661%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   5,  Average loss: 0.0496, Accuracy: 91/496 (18.3468%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 77, internal_epoch   6,  Average loss: 0.0472, Accuracy: 90/496 (18.1452%), train_poison_data_count: 40
Global model norm: 151.81260935566254.
Norm before scaling: 150.0248612209823. Distance: 8.217663363140543
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 798.519215485764, distance: 821.7663521342304
Total norm for 4 adversaries is: 798.519215485764. distance: 821.7663521342304
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   1,  Average loss: 0.0889, Accuracy: 96/546 (17.5824%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   2,  Average loss: 0.0747, Accuracy: 50/546 (9.1575%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   3,  Average loss: 0.0648, Accuracy: 138/546 (25.2747%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   4,  Average loss: 0.0632, Accuracy: 113/546 (20.6960%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   5,  Average loss: 0.0592, Accuracy: 100/546 (18.3150%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 232, local model 11, internal_epoch   6,  Average loss: 0.0558, Accuracy: 138/546 (25.2747%), train_poison_data_count: 45
Global model norm: 151.81260935566254.
Norm before scaling: 149.75128468772814. Distance: 6.417156184296307
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 607.0964451798412, distance: 641.7156204269926
Total norm for 4 adversaries is: 607.0964451798412. distance: 641.7156204269926
___Test Local_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 232, local model 88, internal_epoch   1,  Average loss: 0.0368, Accuracy: 229/447 (51.2304%)
___Train Local_ResNet_18,  epoch 232, local model 88, internal_epoch   2,  Average loss: 0.0325, Accuracy: 211/447 (47.2036%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 25, internal_epoch   1,  Average loss: 0.0476, Accuracy: 148/545 (27.1560%)
___Train Local_ResNet_18,  epoch 232, local model 25, internal_epoch   2,  Average loss: 0.0335, Accuracy: 187/545 (34.3119%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 27, internal_epoch   1,  Average loss: 0.0931, Accuracy: 18/397 (4.5340%)
___Train Local_ResNet_18,  epoch 232, local model 27, internal_epoch   2,  Average loss: 0.0618, Accuracy: 71/397 (17.8841%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 56, internal_epoch   1,  Average loss: 0.1258, Accuracy: 35/743 (4.7106%)
___Train Local_ResNet_18,  epoch 232, local model 56, internal_epoch   2,  Average loss: 0.0768, Accuracy: 75/743 (10.0942%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 93, internal_epoch   1,  Average loss: 0.1175, Accuracy: 14/584 (2.3973%)
___Train Local_ResNet_18,  epoch 232, local model 93, internal_epoch   2,  Average loss: 0.0759, Accuracy: 154/584 (26.3699%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 232, local model 42, internal_epoch   1,  Average loss: 0.0938, Accuracy: 7/198 (3.5354%)
___Train Local_ResNet_18,  epoch 232, local model 42, internal_epoch   2,  Average loss: 0.0774, Accuracy: 44/198 (22.2222%)
___Test Local_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 188.83231115341187
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 232: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 232: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 242.94222044944763 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:233 choose agents : [17, 33, 77, 11, 18, 66, 27, 82, 86, 67]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   1,  Average loss: 0.1332, Accuracy: 52/526 (9.8859%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   2,  Average loss: 0.0869, Accuracy: 76/526 (14.4487%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   3,  Average loss: 0.0695, Accuracy: 142/526 (26.9962%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   4,  Average loss: 0.0620, Accuracy: 147/526 (27.9468%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   5,  Average loss: 0.0583, Accuracy: 136/526 (25.8555%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 17, internal_epoch   6,  Average loss: 0.0543, Accuracy: 143/526 (27.1863%), train_poison_data_count: 45
Global model norm: 145.86153001220026.
Norm before scaling: 143.8208656845383. Distance: 9.469901339088509
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 921.945700678733, distance: 946.9901992629068
Total norm for 4 adversaries is: 921.945700678733. distance: 946.9901992629068
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 33 index 1 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   1,  Average loss: 0.1356, Accuracy: 161/527 (30.5503%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   2,  Average loss: 0.0992, Accuracy: 163/527 (30.9298%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   3,  Average loss: 0.0810, Accuracy: 162/527 (30.7400%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   4,  Average loss: 0.0740, Accuracy: 71/527 (13.4725%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   5,  Average loss: 0.0644, Accuracy: 105/527 (19.9241%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 33, internal_epoch   6,  Average loss: 0.0565, Accuracy: 159/527 (30.1708%), train_poison_data_count: 45
Global model norm: 145.86153001220026.
Norm before scaling: 143.71517920656467. Distance: 9.959631501393748
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 970.1265381381957, distance: 995.9632272328131
Total norm for 4 adversaries is: 970.1265381381957. distance: 995.9632272328131
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 77 index 2 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   1,  Average loss: 0.1609, Accuracy: 67/496 (13.5081%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   2,  Average loss: 0.1148, Accuracy: 65/496 (13.1048%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   3,  Average loss: 0.0916, Accuracy: 95/496 (19.1532%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   4,  Average loss: 0.0799, Accuracy: 97/496 (19.5565%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   5,  Average loss: 0.0712, Accuracy: 92/496 (18.5484%), train_poison_data_count: 40
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 77, internal_epoch   6,  Average loss: 0.0619, Accuracy: 96/496 (19.3548%), train_poison_data_count: 40
Global model norm: 145.86153001220026.
Norm before scaling: 143.91243539909954. Distance: 10.813783426132812
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1059.4721563118117, distance: 1081.3783449838452
Total norm for 4 adversaries is: 1059.4721563118117. distance: 1081.3783449838452
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
poison local model 11 index 3 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   1,  Average loss: 0.1643, Accuracy: 57/546 (10.4396%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   2,  Average loss: 0.1126, Accuracy: 54/546 (9.8901%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   3,  Average loss: 0.0871, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   4,  Average loss: 0.0708, Accuracy: 69/546 (12.6374%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   5,  Average loss: 0.0580, Accuracy: 64/546 (11.7216%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 233, local model 11, internal_epoch   6,  Average loss: 0.0501, Accuracy: 76/546 (13.9194%), train_poison_data_count: 45
Global model norm: 145.86153001220026.
Norm before scaling: 143.730216029894. Distance: 12.25050197273501
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 1202.2042255789986, distance: 1225.0502030529199
Total norm for 4 adversaries is: 1202.2042255789986. distance: 1225.0502030529199
___Test Local_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
___Train Local_ResNet_18,  epoch 233, local model 18, internal_epoch   1,  Average loss: 0.1560, Accuracy: 43/386 (11.1399%)
___Train Local_ResNet_18,  epoch 233, local model 18, internal_epoch   2,  Average loss: 0.0898, Accuracy: 47/386 (12.1762%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 66, internal_epoch   1,  Average loss: 0.0603, Accuracy: 98/555 (17.6577%)
___Train Local_ResNet_18,  epoch 233, local model 66, internal_epoch   2,  Average loss: 0.0326, Accuracy: 222/555 (40.0000%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   1,  Average loss: 0.1232, Accuracy: 6/397 (1.5113%)
___Train Local_ResNet_18,  epoch 233, local model 27, internal_epoch   2,  Average loss: 0.0616, Accuracy: 26/397 (6.5491%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 82, internal_epoch   1,  Average loss: 0.1001, Accuracy: 33/601 (5.4908%)
___Train Local_ResNet_18,  epoch 233, local model 82, internal_epoch   2,  Average loss: 0.0533, Accuracy: 195/601 (32.4459%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 86, internal_epoch   1,  Average loss: 0.1731, Accuracy: 31/212 (14.6226%)
___Train Local_ResNet_18,  epoch 233, local model 86, internal_epoch   2,  Average loss: 0.1303, Accuracy: 31/212 (14.6226%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Train Local_ResNet_18,  epoch 233, local model 67, internal_epoch   1,  Average loss: 0.1271, Accuracy: 39/842 (4.6318%)
___Train Local_ResNet_18,  epoch 233, local model 67, internal_epoch   2,  Average loss: 0.0659, Accuracy: 214/842 (25.4157%)
___Test Local_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
time spent on training: 181.44465374946594
----------------------------------End one training epoch------------------------------------------
___Test Target_ResNet_18 poisoned: False, epoch: 233: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Target_ResNet_18 poisoned: True, epoch: 233: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Done in 235.23999166488647 sec.
----------------------------------Start one training epoch------------------------------------------
Server Epoch:234 choose agents : [17, 33, 77, 11, 38, 29, 30, 96, 0, 3]. Adversary List: [17, 33, 77, 11]
poison local model 17 index 0 
--------------------Start poison_now -----------------------------
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   1,  Average loss: 0.1438, Accuracy: 20/526 (3.8023%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   2,  Average loss: 0.1104, Accuracy: 40/526 (7.6046%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   3,  Average loss: 0.0888, Accuracy: 115/526 (21.8631%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   4,  Average loss: 0.0835, Accuracy: 135/526 (25.6654%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   5,  Average loss: 0.0756, Accuracy: 149/526 (28.3270%), train_poison_data_count: 45
Current lr: [0.05]
___PoisonTrain Local_ResNet_18 ,  epoch 234, local model 17, internal_epoch   6,  Average loss: 0.0709, Accuracy: 166/526 (31.5589%), train_poison_data_count: 45
Global model norm: 141.72489994925027.
Norm before scaling: 139.58607195696496. Distance: 8.900717854213362
will scale.
___Test Local_ResNet_18 poisoned: False, epoch: 234: Average loss: nan, Accuracy: 1000/10000 (10.0000%)
___Test Local_ResNet_18 poisoned: True, epoch: 234: Average loss: nan, Accuracy: 0/9000 (0.0000%)
Scaling by  100
Scaled Norm after poisoning: 862.6841470086256, distance: 890.0718018789271
Total norm for 4 adversaries is: 862.6841470086256. distance: 890.0718018789271
